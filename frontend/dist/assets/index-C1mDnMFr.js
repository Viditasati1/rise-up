(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function WS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function IL(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var Z_={exports:{}},Pp={},ex={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function PL(){if(ME)return ln;ME=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function w(W,ie,Le){this.props=W,this.context=ie,this.refs=M,this.updater=Le||y}w.prototype.isReactComponent={},w.prototype.setState=function(W,ie){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ie,"setState")},w.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(W,ie,Le){this.props=W,this.context=ie,this.refs=M,this.updater=Le||y}var b=C.prototype=new x;b.constructor=C,S(b,w.prototype),b.isPureReactComponent=!0;var P=Array.isArray,F=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function H(W,ie,Le){var ce,Ee={},Ne=null,Re=null;if(ie!=null)for(ce in ie.ref!==void 0&&(Re=ie.ref),ie.key!==void 0&&(Ne=""+ie.key),ie)F.call(ie,ce)&&!k.hasOwnProperty(ce)&&(Ee[ce]=ie[ce]);var Xe=arguments.length-2;if(Xe===1)Ee.children=Le;else if(1<Xe){for(var it=Array(Xe),$e=0;$e<Xe;$e++)it[$e]=arguments[$e+2];Ee.children=it}if(W&&W.defaultProps)for(ce in Xe=W.defaultProps,Xe)Ee[ce]===void 0&&(Ee[ce]=Xe[ce]);return{$$typeof:n,type:W,key:Ne,ref:Re,props:Ee,_owner:N.current}}function L(W,ie){return{$$typeof:n,type:W.type,key:ie,ref:W.ref,props:W.props,_owner:W._owner}}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function V(W){var ie={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Le){return ie[Le]})}var ae=/\/+/g;function re(W,ie){return typeof W=="object"&&W!==null&&W.key!=null?V(""+W.key):ie.toString(36)}function ge(W,ie,Le,ce,Ee){var Ne=typeof W;(Ne==="undefined"||Ne==="boolean")&&(W=null);var Re=!1;if(W===null)Re=!0;else switch(Ne){case"string":case"number":Re=!0;break;case"object":switch(W.$$typeof){case n:case e:Re=!0}}if(Re)return Re=W,Ee=Ee(Re),W=ce===""?"."+re(Re,0):ce,P(Ee)?(Le="",W!=null&&(Le=W.replace(ae,"$&/")+"/"),ge(Ee,ie,Le,"",function($e){return $e})):Ee!=null&&(B(Ee)&&(Ee=L(Ee,Le+(!Ee.key||Re&&Re.key===Ee.key?"":(""+Ee.key).replace(ae,"$&/")+"/")+W)),ie.push(Ee)),1;if(Re=0,ce=ce===""?".":ce+":",P(W))for(var Xe=0;Xe<W.length;Xe++){Ne=W[Xe];var it=ce+re(Ne,Xe);Re+=ge(Ne,ie,Le,it,Ee)}else if(it=v(W),typeof it=="function")for(W=it.call(W),Xe=0;!(Ne=W.next()).done;)Ne=Ne.value,it=ce+re(Ne,Xe++),Re+=ge(Ne,ie,Le,it,Ee);else if(Ne==="object")throw ie=String(W),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Re}function ve(W,ie,Le){if(W==null)return W;var ce=[],Ee=0;return ge(W,ce,"","",function(Ne){return ie.call(Le,Ne,Ee++)}),ce}function fe(W){if(W._status===-1){var ie=W._result;ie=ie(),ie.then(function(Le){(W._status===0||W._status===-1)&&(W._status=1,W._result=Le)},function(Le){(W._status===0||W._status===-1)&&(W._status=2,W._result=Le)}),W._status===-1&&(W._status=0,W._result=ie)}if(W._status===1)return W._result.default;throw W._result}var he={current:null},U={transition:null},Z={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:U,ReactCurrentOwner:N};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ln.Children={map:ve,forEach:function(W,ie,Le){ve(W,function(){ie.apply(this,arguments)},Le)},count:function(W){var ie=0;return ve(W,function(){ie++}),ie},toArray:function(W){return ve(W,function(ie){return ie})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},ln.Component=w,ln.Fragment=t,ln.Profiler=r,ln.PureComponent=C,ln.StrictMode=i,ln.Suspense=c,ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,ln.act=Q,ln.cloneElement=function(W,ie,Le){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ce=S({},W.props),Ee=W.key,Ne=W.ref,Re=W._owner;if(ie!=null){if(ie.ref!==void 0&&(Ne=ie.ref,Re=N.current),ie.key!==void 0&&(Ee=""+ie.key),W.type&&W.type.defaultProps)var Xe=W.type.defaultProps;for(it in ie)F.call(ie,it)&&!k.hasOwnProperty(it)&&(ce[it]=ie[it]===void 0&&Xe!==void 0?Xe[it]:ie[it])}var it=arguments.length-2;if(it===1)ce.children=Le;else if(1<it){Xe=Array(it);for(var $e=0;$e<it;$e++)Xe[$e]=arguments[$e+2];ce.children=Xe}return{$$typeof:n,type:W.type,key:Ee,ref:Ne,props:ce,_owner:Re}},ln.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:s,_context:W},W.Consumer=W},ln.createElement=H,ln.createFactory=function(W){var ie=H.bind(null,W);return ie.type=W,ie},ln.createRef=function(){return{current:null}},ln.forwardRef=function(W){return{$$typeof:l,render:W}},ln.isValidElement=B,ln.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:fe}},ln.memo=function(W,ie){return{$$typeof:d,type:W,compare:ie===void 0?null:ie}},ln.startTransition=function(W){var ie=U.transition;U.transition={};try{W()}finally{U.transition=ie}},ln.unstable_act=Q,ln.useCallback=function(W,ie){return he.current.useCallback(W,ie)},ln.useContext=function(W){return he.current.useContext(W)},ln.useDebugValue=function(){},ln.useDeferredValue=function(W){return he.current.useDeferredValue(W)},ln.useEffect=function(W,ie){return he.current.useEffect(W,ie)},ln.useId=function(){return he.current.useId()},ln.useImperativeHandle=function(W,ie,Le){return he.current.useImperativeHandle(W,ie,Le)},ln.useInsertionEffect=function(W,ie){return he.current.useInsertionEffect(W,ie)},ln.useLayoutEffect=function(W,ie){return he.current.useLayoutEffect(W,ie)},ln.useMemo=function(W,ie){return he.current.useMemo(W,ie)},ln.useReducer=function(W,ie,Le){return he.current.useReducer(W,ie,Le)},ln.useRef=function(W){return he.current.useRef(W)},ln.useState=function(W){return he.current.useState(W)},ln.useSyncExternalStore=function(W,ie,Le){return he.current.useSyncExternalStore(W,ie,Le)},ln.useTransition=function(){return he.current.useTransition()},ln.version="18.3.1",ln}var TE;function Sf(){return TE||(TE=1,ex.exports=PL()),ex.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function DL(){if(CE)return Pp;CE=1;var n=Sf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var p,m={},v=null,y=null;d!==void 0&&(v=""+d),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(p in c)i.call(c,p)&&!s.hasOwnProperty(p)&&(m[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)m[p]===void 0&&(m[p]=c[p]);return{$$typeof:e,type:l,key:v,ref:y,props:m,_owner:r.current}}return Pp.Fragment=t,Pp.jsx=o,Pp.jsxs=o,Pp}var bE;function BL(){return bE||(bE=1,Z_.exports=DL()),Z_.exports}var q=BL(),j=Sf();const WA=WS(j);var pv={},tx={exports:{}},Gr={},nx={exports:{}},ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function LL(){return RE||(RE=1,function(n){function e(U,Z){var Q=U.length;U.push(Z);e:for(;0<Q;){var W=Q-1>>>1,ie=U[W];if(0<r(ie,Z))U[W]=Z,U[Q]=ie,Q=W;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],Q=U.pop();if(Q!==Z){U[0]=Q;e:for(var W=0,ie=U.length,Le=ie>>>1;W<Le;){var ce=2*(W+1)-1,Ee=U[ce],Ne=ce+1,Re=U[Ne];if(0>r(Ee,Q))Ne<ie&&0>r(Re,Ee)?(U[W]=Re,U[Ne]=Q,W=Ne):(U[W]=Ee,U[ce]=Q,W=ce);else if(Ne<ie&&0>r(Re,Q))U[W]=Re,U[Ne]=Q,W=Ne;else break e}}return Z}function r(U,Z){var Q=U.sortIndex-Z.sortIndex;return Q!==0?Q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,v=3,y=!1,S=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=U)i(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(d)}}function P(U){if(M=!1,b(U),!S)if(t(c)!==null)S=!0,fe(F);else{var Z=t(d);Z!==null&&he(P,Z.startTime-U)}}function F(U,Z){S=!1,M&&(M=!1,x(H),H=-1),y=!0;var Q=v;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!V());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var ie=W(m.expirationTime<=Z);Z=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(c)&&i(c),b(Z)}else i(c);m=t(c)}if(m!==null)var Le=!0;else{var ce=t(d);ce!==null&&he(P,ce.startTime-Z),Le=!1}return Le}finally{m=null,v=Q,y=!1}}var N=!1,k=null,H=-1,L=5,B=-1;function V(){return!(n.unstable_now()-B<L)}function ae(){if(k!==null){var U=n.unstable_now();B=U;var Z=!0;try{Z=k(!0,U)}finally{Z?re():(N=!1,k=null)}}else N=!1}var re;if(typeof C=="function")re=function(){C(ae)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ve=ge.port2;ge.port1.onmessage=ae,re=function(){ve.postMessage(null)}}else re=function(){w(ae,0)};function fe(U){k=U,N||(N=!0,re())}function he(U,Z){H=w(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,fe(F))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var Q=v;v=Z;try{return U()}finally{v=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=v;v=U;try{return Z()}finally{v=Q}},n.unstable_scheduleCallback=function(U,Z,Q){var W=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,U){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,U={id:p++,callback:Z,priorityLevel:U,startTime:Q,expirationTime:ie,sortIndex:-1},Q>W?(U.sortIndex=Q,e(d,U),t(c)===null&&U===t(d)&&(M?(x(H),H=-1):M=!0,he(P,Q-W))):(U.sortIndex=ie,e(c,U),S||y||(S=!0,fe(F))),U},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(U){var Z=v;return function(){var Q=v;v=Z;try{return U.apply(this,arguments)}finally{v=Q}}}}(ix)),ix}var IE;function NL(){return IE||(IE=1,nx.exports=LL()),nx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function FL(){if(PE)return Gr;PE=1;var n=Sf(),e=NL();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(r[a]=u,a=0;a<u.length;a++)i.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(a){return c.call(m,a)?!0:c.call(p,a)?!1:d.test(a)?m[a]=!0:(p[a]=!0,!1)}function y(a,u,g,A){if(g!==null&&g.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return A?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,u,g,A){if(u===null||typeof u>"u"||y(a,u,g,A))return!0;if(A)return!1;if(g!==null)switch(g.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function M(a,u,g,A,T,I,O){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=A,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=a,this.type=u,this.sanitizeURL=I,this.removeEmptyString=O}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){w[a]=new M(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];w[u]=new M(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){w[a]=new M(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){w[a]=new M(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){w[a]=new M(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){w[a]=new M(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){w[a]=new M(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){w[a]=new M(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){w[a]=new M(a,5,!1,a.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(x,C);w[u]=new M(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(x,C);w[u]=new M(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(x,C);w[u]=new M(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){w[a]=new M(a,1,!1,a.toLowerCase(),null,!1,!1)}),w.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){w[a]=new M(a,1,!1,a.toLowerCase(),null,!0,!0)});function b(a,u,g,A){var T=w.hasOwnProperty(u)?w[u]:null;(T!==null?T.type!==0:A||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(S(u,g,T,A)&&(g=null),A||T===null?v(u)&&(g===null?a.removeAttribute(u):a.setAttribute(u,""+g)):T.mustUseProperty?a[T.propertyName]=g===null?T.type===3?!1:"":g:(u=T.attributeName,A=T.attributeNamespace,g===null?a.removeAttribute(u):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,A?a.setAttributeNS(A,u,g):a.setAttribute(u,g))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),U=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,W;function ie(a){if(W===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);W=u&&u[1]||""}return`
`+W+a}var Le=!1;function ce(a,u){if(!a||Le)return"";Le=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ae){var A=Ae}Reflect.construct(a,[],u)}else{try{u.call()}catch(Ae){A=Ae}a.call(u.prototype)}else{try{throw Error()}catch(Ae){A=Ae}a()}}catch(Ae){if(Ae&&A&&typeof Ae.stack=="string"){for(var T=Ae.stack.split(`
`),I=A.stack.split(`
`),O=T.length-1,$=I.length-1;1<=O&&0<=$&&T[O]!==I[$];)$--;for(;1<=O&&0<=$;O--,$--)if(T[O]!==I[$]){if(O!==1||$!==1)do if(O--,$--,0>$||T[O]!==I[$]){var ne=`
`+T[O].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=O&&0<=$);break}}}finally{Le=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?ie(a):""}function Ee(a){switch(a.tag){case 5:return ie(a.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return a=ce(a.type,!1),a;case 11:return a=ce(a.type.render,!1),a;case 1:return a=ce(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case N:return"Portal";case L:return"Profiler";case H:return"StrictMode";case re:return"Suspense";case ge:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case B:return(a._context.displayName||"Context")+".Provider";case ae:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ve:return u=a.displayName||null,u!==null?u:Ne(a.type)||"Memo";case fe:u=a._payload,a=a._init;try{return Ne(a(u))}catch{}}return null}function Re(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(u);case 8:return u===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Xe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function it(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function $e(a){var u=it(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),A=""+a[u];if(!a.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,I=g.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(O){A=""+O,I.call(this,O)}}),Object.defineProperty(a,u,{enumerable:g.enumerable}),{getValue:function(){return A},setValue:function(O){A=""+O},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function rt(a){a._valueTracker||(a._valueTracker=$e(a))}function De(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var g=u.getValue(),A="";return a&&(A=it(a)?a.checked?"true":"false":a.value),a=A,a!==g?(u.setValue(a),!0):!1}function Fe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function K(a,u){var g=u.checked;return Q({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function gt(a,u){var g=u.defaultValue==null?"":u.defaultValue,A=u.checked!=null?u.checked:u.defaultChecked;g=Xe(u.value!=null?u.value:g),a._wrapperState={initialChecked:A,initialValue:g,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ue(a,u){u=u.checked,u!=null&&b(a,"checked",u,!1)}function Ze(a,u){Ue(a,u);var g=Xe(u.value),A=u.type;if(g!=null)A==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(A==="submit"||A==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?Et(a,u.type,g):u.hasOwnProperty("defaultValue")&&Et(a,u.type,Xe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function je(a,u,g){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var A=u.type;if(!(A!=="submit"&&A!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,g||u===a.value||(a.value=u),a.defaultValue=u}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function Et(a,u,g){(u!=="number"||Fe(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var Ye=Array.isArray;function J(a,u,g,A){if(a=a.options,u){u={};for(var T=0;T<g.length;T++)u["$"+g[T]]=!0;for(g=0;g<a.length;g++)T=u.hasOwnProperty("$"+a[g].value),a[g].selected!==T&&(a[g].selected=T),T&&A&&(a[g].defaultSelected=!0)}else{for(g=""+Xe(g),u=null,T=0;T<a.length;T++){if(a[T].value===g){a[T].selected=!0,A&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function z(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function pe(a,u){var g=u.value;if(g==null){if(g=u.children,u=u.defaultValue,g!=null){if(u!=null)throw Error(t(92));if(Ye(g)){if(1<g.length)throw Error(t(93));g=g[0]}u=g}u==null&&(u=""),g=u}a._wrapperState={initialValue:Xe(g)}}function Te(a,u){var g=Xe(u.value),A=Xe(u.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),u.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),A!=null&&(a.defaultValue=""+A)}function Oe(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Ie(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Ie(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var qe,ut=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,g,A,T){MSApp.execUnsafeLocalFunction(function(){return a(u,g,A,T)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=qe.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function jt(a,u){if(u){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=u;return}}a.textContent=u}var ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];Object.keys(ze).forEach(function(a){vt.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),ze[u]=ze[a]})});function Pt(a,u,g){return u==null||typeof u=="boolean"||u===""?"":g||typeof u!="number"||u===0||ze.hasOwnProperty(a)&&ze[a]?(""+u).trim():u+"px"}function Lt(a,u){a=a.style;for(var g in u)if(u.hasOwnProperty(g)){var A=g.indexOf("--")===0,T=Pt(g,u[g],A);g==="float"&&(g="cssFloat"),A?a.setProperty(g,T):a[g]=T}}var ft=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function te(a,u){if(u){if(ft[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function be(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function ee(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ve=null,Se=null,Pe=null;function ct(a){if(a=Ks(a)){if(typeof Ve!="function")throw Error(t(280));var u=a.stateNode;u&&(u=nh(u),Ve(a.stateNode,a.type,u))}}function nt(a){Se?Pe?Pe.push(a):Pe=[a]:Se=a}function It(){if(Se){var a=Se,u=Pe;if(Pe=Se=null,ct(a),u)for(a=0;a<u.length;a++)ct(u[a])}}function cn(a,u){return a(u)}function Cn(){}var Zt=!1;function Jn(a,u,g){if(Zt)return a(u,g);Zt=!0;try{return cn(a,u,g)}finally{Zt=!1,(Se!==null||Pe!==null)&&(Cn(),It())}}function Zn(a,u){var g=a.stateNode;if(g===null)return null;var A=nh(g);if(A===null)return null;g=A[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(a=a.type,A=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!A;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,u,typeof g));return g}var fl=!1;if(l)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){fl=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{fl=!1}function vs(a,u,g,A,T,I,O,$,ne){var Ae=Array.prototype.slice.call(arguments,3);try{u.apply(g,Ae)}catch(He){this.onError(He)}}var Yr=!1,ia=null,qr=!1,bo=null,vd={onError:function(a){Yr=!0,ia=a}};function pl(a,u,g,A,T,I,O,$,ne){Yr=!1,ia=null,vs.apply(vd,arguments)}function yd(a,u,g,A,T,I,O,$,ne){if(pl.apply(this,arguments),Yr){if(Yr){var Ae=ia;Yr=!1,ia=null}else throw Error(t(198));qr||(qr=!0,bo=Ae)}}function ys(a){var u=a,g=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,u.flags&4098&&(g=u.return),a=u.return;while(a)}return u.tag===3?g:null}function _d(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function xd(a){if(ys(a)!==a)throw Error(t(188))}function Ad(a){var u=a.alternate;if(!u){if(u=ys(a),u===null)throw Error(t(188));return u!==a?null:a}for(var g=a,A=u;;){var T=g.return;if(T===null)break;var I=T.alternate;if(I===null){if(A=T.return,A!==null){g=A;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===g)return xd(T),a;if(I===A)return xd(T),u;I=I.sibling}throw Error(t(188))}if(g.return!==A.return)g=T,A=I;else{for(var O=!1,$=T.child;$;){if($===g){O=!0,g=T,A=I;break}if($===A){O=!0,A=T,g=I;break}$=$.sibling}if(!O){for($=I.child;$;){if($===g){O=!0,g=I,A=T;break}if($===A){O=!0,A=I,g=T;break}$=$.sibling}if(!O)throw Error(t(189))}}if(g.alternate!==A)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:u}function Sd(a){return a=Ad(a),a!==null?wd(a):null}function wd(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=wd(a);if(u!==null)return u;a=a.sibling}return null}var G=e.unstable_scheduleCallback,ue=e.unstable_cancelCallback,xe=e.unstable_shouldYield,we=e.unstable_requestPaint,se=e.unstable_now,Ge=e.unstable_getCurrentPriorityLevel,et=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,yt=e.unstable_NormalPriority,Ut=e.unstable_LowPriority,Dt=e.unstable_IdlePriority,xt=null,pt=null;function Rt(a){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(xt,a,void 0,(a.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Mt,sn=Math.log,Gt=Math.LN2;function Mt(a){return a>>>=0,a===0?32:31-(sn(a)/Gt|0)|0}var En=64,Ht=4194304;function ei(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ir(a,u){var g=a.pendingLanes;if(g===0)return 0;var A=0,T=a.suspendedLanes,I=a.pingedLanes,O=g&268435455;if(O!==0){var $=O&~T;$!==0?A=ei($):(I&=O,I!==0&&(A=ei(I)))}else O=g&~T,O!==0?A=ei(O):I!==0&&(A=ei(I));if(A===0)return 0;if(u!==0&&u!==A&&!(u&T)&&(T=A&-A,I=u&-u,T>=I||T===16&&(I&4194240)!==0))return u;if(A&4&&(A|=g&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=A;0<u;)g=31-rn(u),T=1<<g,A|=a[g],u&=~T;return A}function Ii(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _s(a,u){for(var g=a.suspendedLanes,A=a.pingedLanes,T=a.expirationTimes,I=a.pendingLanes;0<I;){var O=31-rn(I),$=1<<O,ne=T[O];ne===-1?(!($&g)||$&A)&&(T[O]=Ii($,u)):ne<=u&&(a.expiredLanes|=$),I&=~$}}function An(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Pn(){var a=En;return En<<=1,!(En&4194240)&&(En=64),a}function Pi(a){for(var u=[],g=0;31>g;g++)u.push(a);return u}function Kn(a,u,g){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-rn(u),a[u]=g}function Di(a,u){var g=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var A=a.eventTimes;for(a=a.expirationTimes;0<g;){var T=31-rn(g),I=1<<T;u[T]=0,A[T]=-1,a[T]=-1,g&=~I}}function xs(a,u){var g=a.entangledLanes|=u;for(a=a.entanglements;g;){var A=31-rn(g),T=1<<A;T&u|a[A]&u&&(a[A]|=u),g&=~T}}var en=0;function ml(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Of,Sg,Ed,Md,ra=!1,Td=[],As=null,on=null,Hs=null,sa=new Map,gl=new Map,Ro=[],E_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oi(a,u){switch(a){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":sa.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(u.pointerId)}}function oa(a,u,g,A,T,I){return a===null||a.nativeEvent!==I?(a={blockedOn:u,domEventName:g,eventSystemFlags:A,nativeEvent:I,targetContainers:[T]},u!==null&&(u=Ks(u),u!==null&&Of(u)),a):(a.eventSystemFlags|=A,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function M_(a,u,g,A,T){switch(u){case"focusin":return As=oa(As,a,u,g,A,T),!0;case"dragenter":return on=oa(on,a,u,g,A,T),!0;case"mouseover":return Hs=oa(Hs,a,u,g,A,T),!0;case"pointerover":var I=T.pointerId;return sa.set(I,oa(sa.get(I)||null,a,u,g,A,T)),!0;case"gotpointercapture":return I=T.pointerId,gl.set(I,oa(gl.get(I)||null,a,u,g,A,T)),!0}return!1}function Cd(a){var u=Fo(a.target);if(u!==null){var g=ys(u);if(g!==null){if(u=g.tag,u===13){if(u=_d(g),u!==null){a.blockedOn=u,Md(a.priority,function(){Sg(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function bd(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var g=Dr(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var A=new g.constructor(g.type,g);tt=A,g.target.dispatchEvent(A),tt=null}else return u=Ks(g),u!==null&&Of(u),a.blockedOn=g,!1;u.shift()}return!0}function Mc(a,u,g){bd(a)&&g.delete(u)}function Ss(){ra=!1,As!==null&&bd(As)&&(As=null),on!==null&&bd(on)&&(on=null),Hs!==null&&bd(Hs)&&(Hs=null),sa.forEach(Mc),gl.forEach(Mc)}function Tc(a,u){a.blockedOn===u&&(a.blockedOn=null,ra||(ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ss)))}function Cc(a){function u(T){return Tc(T,a)}if(0<Td.length){Tc(Td[0],a);for(var g=1;g<Td.length;g++){var A=Td[g];A.blockedOn===a&&(A.blockedOn=null)}}for(As!==null&&Tc(As,a),on!==null&&Tc(on,a),Hs!==null&&Tc(Hs,a),sa.forEach(u),gl.forEach(u),g=0;g<Ro.length;g++)A=Ro[g],A.blockedOn===a&&(A.blockedOn=null);for(;0<Ro.length&&(g=Ro[0],g.blockedOn===null);)Cd(g),g.blockedOn===null&&Ro.shift()}var zi=P.ReactCurrentBatchConfig,Pr=!0;function Rd(a,u,g,A){var T=en,I=zi.transition;zi.transition=null;try{en=1,Id(a,u,g,A)}finally{en=T,zi.transition=I}}function kf(a,u,g,A){var T=en,I=zi.transition;zi.transition=null;try{en=4,Id(a,u,g,A)}finally{en=T,zi.transition=I}}function Id(a,u,g,A){if(Pr){var T=Dr(a,u,g,A);if(T===null)qd(a,u,A,Pd,g),oi(a,A);else if(M_(T,a,u,g,A))A.stopPropagation();else if(oi(a,A),u&4&&-1<E_.indexOf(a)){for(;T!==null;){var I=Ks(T);if(I!==null&&Ec(I),I=Dr(a,u,g,A),I===null&&qd(a,u,A,Pd,g),I===T)break;T=I}T!==null&&A.stopPropagation()}else qd(a,u,A,null,g)}}var Pd=null;function Dr(a,u,g,A){if(Pd=null,a=ee(A),a=Fo(a),a!==null)if(u=ys(a),u===null)a=null;else if(g=u.tag,g===13){if(a=_d(u),a!==null)return a;a=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Pd=a,null}function wg(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ge()){case et:return 1;case ht:return 4;case yt:case Ut:return 16;case Dt:return 536870912;default:return 16}default:return 16}}var Qr=null,Uf=null,Zi=null;function bc(){if(Zi)return Zi;var a,u=Uf,g=u.length,A,T="value"in Qr?Qr.value:Qr.textContent,I=T.length;for(a=0;a<g&&u[a]===T[a];a++);var O=g-a;for(A=1;A<=O&&u[g-A]===T[I-A];A++);return Zi=T.slice(a,1<A?1-A:void 0)}function aa(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function zs(){return!0}function Dd(){return!1}function Gi(a){function u(g,A,T,I,O){this._reactName=g,this._targetInst=T,this.type=A,this.nativeEvent=I,this.target=O,this.currentTarget=null;for(var $ in a)a.hasOwnProperty($)&&(g=a[$],this[$]=g?g(I):I[$]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?zs:Dd,this.isPropagationStopped=Dd,this}return Q(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),u}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rc=Gi(la),ca=Q({},la,{view:0,detail:0}),vl=Gi(ca),er,Br,Lr,yl=Q({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Lr&&(Lr&&a.type==="mousemove"?(er=a.screenX-Lr.screenX,Br=a.screenY-Lr.screenY):Br=er=0,Lr=a),er)},movementY:function(a){return"movementY"in a?a.movementY:Br}}),Hf=Gi(yl),Gs=Q({},yl,{dataTransfer:0}),Io=Gi(Gs),Bd=Q({},ca,{relatedTarget:0}),Ld=Gi(Bd),Nd=Q({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),Eg=Gi(Nd),Mg=Q({},la,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),zf=Gi(Mg),Fd=Q({},la,{data:0}),Gf=Gi(Fd),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _l(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Vf[a])?!!u[a]:!1}function Po(){return _l}var Od=Q({},ca,{key:function(a){if(a.key){var u=Tg[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=aa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Cg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(a){return a.type==="keypress"?aa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?aa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),kd=Gi(Od),Nr=Q({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mr=Gi(Nr),ua=Q({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po}),Vs=Gi(ua),Ws=Q({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),da=Gi(Ws),bg=Q({},yl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Wf=Gi(bg),jf=[9,13,27,32],Vi=l&&"CompositionEvent"in window,Ai=null;l&&"documentMode"in document&&(Ai=document.documentMode);var Nn=l&&"TextEvent"in window&&!Ai,xl=l&&(!Vi||Ai&&8<Ai&&11>=Ai),Fr=" ",Xf=!1;function Jf(a,u){switch(a){case"keyup":return jf.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Do=!1;function Rg(a,u){switch(a){case"compositionend":return Ud(u);case"keypress":return u.which!==32?null:(Xf=!0,Fr);case"textInput":return a=u.data,a===Fr&&Xf?null:a;default:return null}}function Ic(a,u){if(Do)return a==="compositionend"||!Vi&&Jf(a,u)?(a=bc(),Zi=Uf=Qr=null,Do=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return xl&&u.locale!=="ko"?null:u.data;default:return null}}var Al={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hd(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Al[a.type]:u==="textarea"}function Sl(a,u,g,A){nt(A),u=Qd(u,"onChange"),0<u.length&&(g=new Rc("onChange","change",null,g,A),a.push({event:g,listeners:u}))}var Bo=null,wl=null;function Ig(a){Cl(a,0)}function js(a){var u=Yn(a);if(De(u))return a}function Pg(a,u){if(a==="change")return u}var El=!1;if(l){var tr;if(l){var ha="oninput"in document;if(!ha){var fa=document.createElement("div");fa.setAttribute("oninput","return;"),ha=typeof fa.oninput=="function"}tr=ha}else tr=!1;El=tr&&(!document.documentMode||9<document.documentMode)}function $r(){Bo&&(Bo.detachEvent("onpropertychange",zd),wl=Bo=null)}function zd(a){if(a.propertyName==="value"&&js(wl)){var u=[];Sl(u,wl,a,ee(a)),Jn(Ig,u)}}function Ml(a,u,g){a==="focusin"?($r(),Bo=u,wl=g,Bo.attachEvent("onpropertychange",zd)):a==="focusout"&&$r()}function Dg(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return js(wl)}function Kf(a,u){if(a==="click")return js(u)}function kn(a,u){if(a==="input"||a==="change")return js(u)}function Gd(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var gr=typeof Object.is=="function"?Object.is:Gd;function pa(a,u){if(gr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var g=Object.keys(a),A=Object.keys(u);if(g.length!==A.length)return!1;for(A=0;A<g.length;A++){var T=g[A];if(!c.call(u,T)||!gr(a[T],u[T]))return!1}return!0}function Pc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vr(a,u){var g=Pc(a);a=0;for(var A;g;){if(g.nodeType===3){if(A=a+g.textContent.length,a<=u&&A>=u)return{node:g,offset:u-a};a=A}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Pc(g)}}function ma(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?ma(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Un(){for(var a=window,u=Fe();u instanceof a.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)a=u.contentWindow;else break;u=Fe(a.document)}return u}function fi(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function pi(a){var u=Un(),g=a.focusedElem,A=a.selectionRange;if(u!==g&&g&&g.ownerDocument&&ma(g.ownerDocument.documentElement,g)){if(A!==null&&fi(g)){if(u=A.start,a=A.end,a===void 0&&(a=u),"selectionStart"in g)g.selectionStart=u,g.selectionEnd=Math.min(a,g.value.length);else if(a=(u=g.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var T=g.textContent.length,I=Math.min(A.start,T);A=A.end===void 0?I:Math.min(A.end,T),!a.extend&&I>A&&(T=A,A=I,I=T),T=vr(g,I);var O=vr(g,A);T&&O&&(a.rangeCount!==1||a.anchorNode!==T.node||a.anchorOffset!==T.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(u=u.createRange(),u.setStart(T.node,T.offset),a.removeAllRanges(),I>A?(a.addRange(u),a.extend(O.node,O.offset)):(u.setEnd(O.node,O.offset),a.addRange(u)))}}for(u=[],a=g;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<u.length;g++)a=u[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Vd=l&&"documentMode"in document&&11>=document.documentMode,ws=null,ga=null,Dc=null,mi=!1;function Wd(a,u,g){var A=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;mi||ws==null||ws!==Fe(A)||(A=ws,"selectionStart"in A&&fi(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Dc&&pa(Dc,A)||(Dc=A,A=Qd(ga,"onSelect"),0<A.length&&(u=new Rc("onSelect","select",null,u,g),a.push({event:u,listeners:A}),u.target=ws)))}function Tl(a,u){var g={};return g[a.toLowerCase()]=u.toLowerCase(),g["Webkit"+a]="webkit"+u,g["Moz"+a]="moz"+u,g}var Lo={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Zr={},es={};l&&(es=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Es(a){if(Zr[a])return Zr[a];if(!Lo[a])return a;var u=Lo[a],g;for(g in u)if(u.hasOwnProperty(g)&&g in es)return Zr[a]=u[g];return a}var Bc=Es("animationend"),Lc=Es("animationiteration"),Yf=Es("animationstart"),qf=Es("transitionend"),Qf=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(a,u){Qf.set(a,u),s(u,[a])}for(var jd=0;jd<$f.length;jd++){var Nc=$f[jd],Fc=Nc.toLowerCase(),Bg=Nc[0].toUpperCase()+Nc.slice(1);Xs(Fc,"on"+Bg)}Xs(Bc,"onAnimationEnd"),Xs(Lc,"onAnimationIteration"),Xs(Yf,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(qf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xd=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Jd(a,u,g){var A=a.type||"unknown-event";a.currentTarget=g,yd(A,u,void 0,a),a.currentTarget=null}function Cl(a,u){u=(u&4)!==0;for(var g=0;g<a.length;g++){var A=a[g],T=A.event;A=A.listeners;e:{var I=void 0;if(u)for(var O=A.length-1;0<=O;O--){var $=A[O],ne=$.instance,Ae=$.currentTarget;if($=$.listener,ne!==I&&T.isPropagationStopped())break e;Jd(T,$,Ae),I=ne}else for(O=0;O<A.length;O++){if($=A[O],ne=$.instance,Ae=$.currentTarget,$=$.listener,ne!==I&&T.isPropagationStopped())break e;Jd(T,$,Ae),I=ne}}}if(qr)throw a=bo,qr=!1,bo=null,a}function bn(a,u){var g=u[_a];g===void 0&&(g=u[_a]=new Set);var A=a+"__bubble";g.has(A)||(Yd(u,a,2,!1),g.add(A))}function Kd(a,u,g){var A=0;u&&(A|=4),Yd(g,a,A,u)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function bl(a){if(!a[Oc]){a[Oc]=!0,i.forEach(function(g){g!=="selectionchange"&&(Xd.has(g)||Kd(g,!1,a),Kd(g,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Oc]||(u[Oc]=!0,Kd("selectionchange",!1,u))}}function Yd(a,u,g,A){switch(wg(u)){case 1:var T=Rd;break;case 4:T=kf;break;default:T=Id}g=T.bind(null,u,g,a),T=void 0,!fl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),A?T!==void 0?a.addEventListener(u,g,{capture:!0,passive:T}):a.addEventListener(u,g,!0):T!==void 0?a.addEventListener(u,g,{passive:T}):a.addEventListener(u,g,!1)}function qd(a,u,g,A,T){var I=A;if(!(u&1)&&!(u&2)&&A!==null)e:for(;;){if(A===null)return;var O=A.tag;if(O===3||O===4){var $=A.stateNode.containerInfo;if($===T||$.nodeType===8&&$.parentNode===T)break;if(O===4)for(O=A.return;O!==null;){var ne=O.tag;if((ne===3||ne===4)&&(ne=O.stateNode.containerInfo,ne===T||ne.nodeType===8&&ne.parentNode===T))return;O=O.return}for(;$!==null;){if(O=Fo($),O===null)return;if(ne=O.tag,ne===5||ne===6){A=I=O;continue e}$=$.parentNode}}A=A.return}Jn(function(){var Ae=I,He=ee(g),We=[];e:{var ke=Qf.get(a);if(ke!==void 0){var mt=Rc,St=a;switch(a){case"keypress":if(aa(g)===0)break e;case"keydown":case"keyup":mt=kd;break;case"focusin":St="focus",mt=Ld;break;case"focusout":St="blur",mt=Ld;break;case"beforeblur":case"afterblur":mt=Ld;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Vs;break;case Bc:case Lc:case Yf:mt=Eg;break;case qf:mt=da;break;case"scroll":mt=vl;break;case"wheel":mt=Wf;break;case"copy":case"cut":case"paste":mt=zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=mr}var wt=(u&4)!==0,li=!wt&&a==="scroll",me=wt?ke!==null?ke+"Capture":null:ke;wt=[];for(var oe=Ae,ye;oe!==null;){ye=oe;var Ke=ye.stateNode;if(ye.tag===5&&Ke!==null&&(ye=Ke,me!==null&&(Ke=Zn(oe,me),Ke!=null&&wt.push(Rl(oe,Ke,ye)))),li)break;oe=oe.return}0<wt.length&&(ke=new mt(ke,St,null,g,He),We.push({event:ke,listeners:wt}))}}if(!(u&7)){e:{if(ke=a==="mouseover"||a==="pointerover",mt=a==="mouseout"||a==="pointerout",ke&&g!==tt&&(St=g.relatedTarget||g.fromElement)&&(Fo(St)||St[yr]))break e;if((mt||ke)&&(ke=He.window===He?He:(ke=He.ownerDocument)?ke.defaultView||ke.parentWindow:window,mt?(St=g.relatedTarget||g.toElement,mt=Ae,St=St?Fo(St):null,St!==null&&(li=ys(St),St!==li||St.tag!==5&&St.tag!==6)&&(St=null)):(mt=null,St=Ae),mt!==St)){if(wt=Hf,Ke="onMouseLeave",me="onMouseEnter",oe="mouse",(a==="pointerout"||a==="pointerover")&&(wt=mr,Ke="onPointerLeave",me="onPointerEnter",oe="pointer"),li=mt==null?ke:Yn(mt),ye=St==null?ke:Yn(St),ke=new wt(Ke,oe+"leave",mt,g,He),ke.target=li,ke.relatedTarget=ye,Ke=null,Fo(He)===Ae&&(wt=new wt(me,oe+"enter",St,g,He),wt.target=ye,wt.relatedTarget=li,Ke=wt),li=Ke,mt&&St)t:{for(wt=mt,me=St,oe=0,ye=wt;ye;ye=va(ye))oe++;for(ye=0,Ke=me;Ke;Ke=va(Ke))ye++;for(;0<oe-ye;)wt=va(wt),oe--;for(;0<ye-oe;)me=va(me),ye--;for(;oe--;){if(wt===me||me!==null&&wt===me.alternate)break t;wt=va(wt),me=va(me)}wt=null}else wt=null;mt!==null&&Lg(We,ke,mt,wt,!1),St!==null&&li!==null&&Lg(We,li,St,wt,!0)}}e:{if(ke=Ae?Yn(Ae):window,mt=ke.nodeName&&ke.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ke.type==="file")var bt=Pg;else if(Hd(ke))if(El)bt=kn;else{bt=Dg;var Ft=Ml}else(mt=ke.nodeName)&&mt.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(bt=Kf);if(bt&&(bt=bt(a,Ae))){Sl(We,bt,g,He);break e}Ft&&Ft(a,ke,Ae),a==="focusout"&&(Ft=ke._wrapperState)&&Ft.controlled&&ke.type==="number"&&Et(ke,"number",ke.value)}switch(Ft=Ae?Yn(Ae):window,a){case"focusin":(Hd(Ft)||Ft.contentEditable==="true")&&(ws=Ft,ga=Ae,Dc=null);break;case"focusout":Dc=ga=ws=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,Wd(We,g,He);break;case"selectionchange":if(Vd)break;case"keydown":case"keyup":Wd(We,g,He)}var Ot;if(Vi)e:{switch(a){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else Do?Jf(a,g)&&(Wt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Wt="onCompositionStart");Wt&&(xl&&g.locale!=="ko"&&(Do||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Do&&(Ot=bc()):(Qr=He,Uf="value"in Qr?Qr.value:Qr.textContent,Do=!0)),Ft=Qd(Ae,Wt),0<Ft.length&&(Wt=new Gf(Wt,a,null,g,He),We.push({event:Wt,listeners:Ft}),Ot?Wt.data=Ot:(Ot=Ud(g),Ot!==null&&(Wt.data=Ot)))),(Ot=Nn?Rg(a,g):Ic(a,g))&&(Ae=Qd(Ae,"onBeforeInput"),0<Ae.length&&(He=new Gf("onBeforeInput","beforeinput",null,g,He),We.push({event:He,listeners:Ae}),He.data=Ot))}Cl(We,u)})}function Rl(a,u,g){return{instance:a,listener:u,currentTarget:g}}function Qd(a,u){for(var g=u+"Capture",A=[];a!==null;){var T=a,I=T.stateNode;T.tag===5&&I!==null&&(T=I,I=Zn(a,g),I!=null&&A.unshift(Rl(a,I,T)),I=Zn(a,u),I!=null&&A.push(Rl(a,I,T))),a=a.return}return A}function va(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Lg(a,u,g,A,T){for(var I=u._reactName,O=[];g!==null&&g!==A;){var $=g,ne=$.alternate,Ae=$.stateNode;if(ne!==null&&ne===A)break;$.tag===5&&Ae!==null&&($=Ae,T?(ne=Zn(g,I),ne!=null&&O.unshift(Rl(g,ne,$))):T||(ne=Zn(g,I),ne!=null&&O.push(Rl(g,ne,$)))),g=g.return}O.length!==0&&a.push({event:u,listeners:O})}var T_=/\r\n?/g,Ng=/\u0000|\uFFFD/g;function Zf(a){return(typeof a=="string"?a:""+a).replace(T_,`
`).replace(Ng,"")}function kc(a,u,g){if(u=Zf(u),Zf(a)!==u&&g)throw Error(t(425))}function Uc(){}var Il=null,ep=null;function tp(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,ip=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,C_=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(a){return $d.resolve(null).then(a).catch(Fg)}:np;function Fg(a){setTimeout(function(){throw a})}function Zd(a,u){var g=u,A=0;do{var T=g.nextSibling;if(a.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(A===0){a.removeChild(T),Cc(u);return}A--}else g!=="$"&&g!=="$?"&&g!=="$!"||A++;g=T}while(g);Cc(u)}function Js(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function rp(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return a;u--}else g==="/$"&&u++}a=a.previousSibling}return null}var ya=Math.random().toString(36).slice(2),ai="__reactFiber$"+ya,Pl="__reactProps$"+ya,yr="__reactContainer$"+ya,_a="__reactEvents$"+ya,eh="__reactListeners$"+ya,th="__reactHandles$"+ya;function Fo(a){var u=a[ai];if(u)return u;for(var g=a.parentNode;g;){if(u=g[yr]||g[ai]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(a=rp(a);a!==null;){if(g=a[ai])return g;a=rp(a)}return u}a=g,g=a.parentNode}return null}function Ks(a){return a=a[ai]||a[yr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Yn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function nh(a){return a[Pl]||null}var sp=[],gi=-1;function Gn(a){return{current:a}}function Rn(a){0>gi||(a.current=sp[gi],sp[gi]=null,gi--)}function Mn(a,u){gi++,sp[gi]=a.current,a.current=u}var Ys={},Si=Gn(Ys),Wi=Gn(!1),qs=Ys;function xa(a,u){var g=a.type.contextTypes;if(!g)return Ys;var A=a.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===u)return A.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in g)T[I]=u[I];return A&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=T),T}function Bi(a){return a=a.childContextTypes,a!=null}function Hc(){Rn(Wi),Rn(Si)}function op(a,u,g){if(Si.current!==Ys)throw Error(t(168));Mn(Si,u),Mn(Wi,g)}function zc(a,u,g){var A=a.stateNode;if(u=u.childContextTypes,typeof A.getChildContext!="function")return g;A=A.getChildContext();for(var T in A)if(!(T in u))throw Error(t(108,Re(a)||"Unknown",T));return Q({},g,A)}function Aa(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ys,qs=Si.current,Mn(Si,a),Mn(Wi,Wi.current),!0}function ap(a,u,g){var A=a.stateNode;if(!A)throw Error(t(169));g?(a=zc(a,u,qs),A.__reactInternalMemoizedMergedChildContext=a,Rn(Wi),Rn(Si),Mn(Si,a)):Rn(Wi),Mn(Wi,g)}var ts=null,Gc=!1,ih=!1;function Vc(a){ts===null?ts=[a]:ts.push(a)}function Og(a){Gc=!0,Vc(a)}function Ms(){if(!ih&&ts!==null){ih=!0;var a=0,u=en;try{var g=ts;for(en=1;a<g.length;a++){var A=g[a];do A=A(!0);while(A!==null)}ts=null,Gc=!1}catch(T){throw ts!==null&&(ts=ts.slice(a+1)),G(et,Ms),T}finally{en=u,ih=!1}}return null}var Sa=[],nr=0,rh=null,sh=0,ji=[],vi=0,wa=null,Qe=1,Or="";function Qs(a,u){Sa[nr++]=sh,Sa[nr++]=rh,rh=a,sh=u}function lp(a,u,g){ji[vi++]=Qe,ji[vi++]=Or,ji[vi++]=wa,wa=a;var A=Qe;a=Or;var T=32-rn(A)-1;A&=~(1<<T),g+=1;var I=32-rn(u)+T;if(30<I){var O=T-T%5;I=(A&(1<<O)-1).toString(32),A>>=O,T-=O,Qe=1<<32-rn(u)+T|g<<T|A,Or=I+a}else Qe=1<<I|g<<T|A,Or=a}function cp(a){a.return!==null&&(Qs(a,1),lp(a,1,0))}function $s(a){for(;a===rh;)rh=Sa[--nr],Sa[nr]=null,sh=Sa[--nr],Sa[nr]=null;for(;a===wa;)wa=ji[--vi],ji[vi]=null,Or=ji[--vi],ji[vi]=null,Qe=ji[--vi],ji[vi]=null}var wi=null,Xi=null,Dn=!1,kr=null;function up(a,u){var g=Is(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=a,u=a.deletions,u===null?(a.deletions=[g],a.flags|=16):u.push(g)}function dp(a,u){switch(a.tag){case 5:var g=a.type;return u=u.nodeType!==1||g.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,wi=a,Xi=Js(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,wi=a,Xi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(g=wa!==null?{id:Qe,overflow:Or}:null,a.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},g=Is(18,null,null,0),g.stateNode=u,g.return=a,a.child=g,wi=a,Xi=null,!0):!1;default:return!1}}function oh(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ah(a){if(Dn){var u=Xi;if(u){var g=u;if(!dp(a,u)){if(oh(a))throw Error(t(418));u=Js(g.nextSibling);var A=wi;u&&dp(a,u)?up(A,g):(a.flags=a.flags&-4097|2,Dn=!1,wi=a)}}else{if(oh(a))throw Error(t(418));a.flags=a.flags&-4097|2,Dn=!1,wi=a}}}function lh(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;wi=a}function Dl(a){if(a!==wi)return!1;if(!Dn)return lh(a),Dn=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!tp(a.type,a.memoizedProps)),u&&(u=Xi)){if(oh(a))throw hp(),Error(t(418));for(;u;)up(a,u),u=Js(u.nextSibling)}if(lh(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(u===0){Xi=Js(a.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++}a=a.nextSibling}Xi=null}}else Xi=wi?Js(a.stateNode.nextSibling):null;return!0}function hp(){for(var a=Xi;a;)a=Js(a.nextSibling)}function Oo(){Xi=wi=null,Dn=!1}function Bl(a){kr===null?kr=[a]:kr.push(a)}var b_=P.ReactCurrentBatchConfig;function Wc(a,u,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var A=g.stateNode}if(!A)throw Error(t(147,a));var T=A,I=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===I?u.ref:(u=function(O){var $=T.refs;O===null?delete $[I]:$[I]=O},u._stringRef=I,u)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function jc(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function fp(a){var u=a._init;return u(a._payload)}function pp(a){function u(me,oe){if(a){var ye=me.deletions;ye===null?(me.deletions=[oe],me.flags|=16):ye.push(oe)}}function g(me,oe){if(!a)return null;for(;oe!==null;)u(me,oe),oe=oe.sibling;return null}function A(me,oe){for(me=new Map;oe!==null;)oe.key!==null?me.set(oe.key,oe):me.set(oe.index,oe),oe=oe.sibling;return me}function T(me,oe){return me=Wl(me,oe),me.index=0,me.sibling=null,me}function I(me,oe,ye){return me.index=ye,a?(ye=me.alternate,ye!==null?(ye=ye.index,ye<oe?(me.flags|=2,oe):ye):(me.flags|=2,oe)):(me.flags|=1048576,oe)}function O(me){return a&&me.alternate===null&&(me.flags|=2),me}function $(me,oe,ye,Ke){return oe===null||oe.tag!==6?(oe=J_(ye,me.mode,Ke),oe.return=me,oe):(oe=T(oe,ye),oe.return=me,oe)}function ne(me,oe,ye,Ke){var bt=ye.type;return bt===k?He(me,oe,ye.props.children,Ke,ye.key):oe!==null&&(oe.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===fe&&fp(bt)===oe.type)?(Ke=T(oe,ye.props),Ke.ref=Wc(me,oe,ye),Ke.return=me,Ke):(Ke=ov(ye.type,ye.key,ye.props,null,me.mode,Ke),Ke.ref=Wc(me,oe,ye),Ke.return=me,Ke)}function Ae(me,oe,ye,Ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ye.containerInfo||oe.stateNode.implementation!==ye.implementation?(oe=K_(ye,me.mode,Ke),oe.return=me,oe):(oe=T(oe,ye.children||[]),oe.return=me,oe)}function He(me,oe,ye,Ke,bt){return oe===null||oe.tag!==7?(oe=lu(ye,me.mode,Ke,bt),oe.return=me,oe):(oe=T(oe,ye),oe.return=me,oe)}function We(me,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=J_(""+oe,me.mode,ye),oe.return=me,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return ye=ov(oe.type,oe.key,oe.props,null,me.mode,ye),ye.ref=Wc(me,null,oe),ye.return=me,ye;case N:return oe=K_(oe,me.mode,ye),oe.return=me,oe;case fe:var Ke=oe._init;return We(me,Ke(oe._payload),ye)}if(Ye(oe)||Z(oe))return oe=lu(oe,me.mode,ye,null),oe.return=me,oe;jc(me,oe)}return null}function ke(me,oe,ye,Ke){var bt=oe!==null?oe.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return bt!==null?null:$(me,oe,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case F:return ye.key===bt?ne(me,oe,ye,Ke):null;case N:return ye.key===bt?Ae(me,oe,ye,Ke):null;case fe:return bt=ye._init,ke(me,oe,bt(ye._payload),Ke)}if(Ye(ye)||Z(ye))return bt!==null?null:He(me,oe,ye,Ke,null);jc(me,ye)}return null}function mt(me,oe,ye,Ke,bt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return me=me.get(ye)||null,$(oe,me,""+Ke,bt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case F:return me=me.get(Ke.key===null?ye:Ke.key)||null,ne(oe,me,Ke,bt);case N:return me=me.get(Ke.key===null?ye:Ke.key)||null,Ae(oe,me,Ke,bt);case fe:var Ft=Ke._init;return mt(me,oe,ye,Ft(Ke._payload),bt)}if(Ye(Ke)||Z(Ke))return me=me.get(ye)||null,He(oe,me,Ke,bt,null);jc(oe,Ke)}return null}function St(me,oe,ye,Ke){for(var bt=null,Ft=null,Ot=oe,Wt=oe=0,Oi=null;Ot!==null&&Wt<ye.length;Wt++){Ot.index>Wt?(Oi=Ot,Ot=null):Oi=Ot.sibling;var xn=ke(me,Ot,ye[Wt],Ke);if(xn===null){Ot===null&&(Ot=Oi);break}a&&Ot&&xn.alternate===null&&u(me,Ot),oe=I(xn,oe,Wt),Ft===null?bt=xn:Ft.sibling=xn,Ft=xn,Ot=Oi}if(Wt===ye.length)return g(me,Ot),Dn&&Qs(me,Wt),bt;if(Ot===null){for(;Wt<ye.length;Wt++)Ot=We(me,ye[Wt],Ke),Ot!==null&&(oe=I(Ot,oe,Wt),Ft===null?bt=Ot:Ft.sibling=Ot,Ft=Ot);return Dn&&Qs(me,Wt),bt}for(Ot=A(me,Ot);Wt<ye.length;Wt++)Oi=mt(Ot,me,Wt,ye[Wt],Ke),Oi!==null&&(a&&Oi.alternate!==null&&Ot.delete(Oi.key===null?Wt:Oi.key),oe=I(Oi,oe,Wt),Ft===null?bt=Oi:Ft.sibling=Oi,Ft=Oi);return a&&Ot.forEach(function(jl){return u(me,jl)}),Dn&&Qs(me,Wt),bt}function wt(me,oe,ye,Ke){var bt=Z(ye);if(typeof bt!="function")throw Error(t(150));if(ye=bt.call(ye),ye==null)throw Error(t(151));for(var Ft=bt=null,Ot=oe,Wt=oe=0,Oi=null,xn=ye.next();Ot!==null&&!xn.done;Wt++,xn=ye.next()){Ot.index>Wt?(Oi=Ot,Ot=null):Oi=Ot.sibling;var jl=ke(me,Ot,xn.value,Ke);if(jl===null){Ot===null&&(Ot=Oi);break}a&&Ot&&jl.alternate===null&&u(me,Ot),oe=I(jl,oe,Wt),Ft===null?bt=jl:Ft.sibling=jl,Ft=jl,Ot=Oi}if(xn.done)return g(me,Ot),Dn&&Qs(me,Wt),bt;if(Ot===null){for(;!xn.done;Wt++,xn=ye.next())xn=We(me,xn.value,Ke),xn!==null&&(oe=I(xn,oe,Wt),Ft===null?bt=xn:Ft.sibling=xn,Ft=xn);return Dn&&Qs(me,Wt),bt}for(Ot=A(me,Ot);!xn.done;Wt++,xn=ye.next())xn=mt(Ot,me,Wt,xn.value,Ke),xn!==null&&(a&&xn.alternate!==null&&Ot.delete(xn.key===null?Wt:xn.key),oe=I(xn,oe,Wt),Ft===null?bt=xn:Ft.sibling=xn,Ft=xn);return a&&Ot.forEach(function(RL){return u(me,RL)}),Dn&&Qs(me,Wt),bt}function li(me,oe,ye,Ke){if(typeof ye=="object"&&ye!==null&&ye.type===k&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case F:e:{for(var bt=ye.key,Ft=oe;Ft!==null;){if(Ft.key===bt){if(bt=ye.type,bt===k){if(Ft.tag===7){g(me,Ft.sibling),oe=T(Ft,ye.props.children),oe.return=me,me=oe;break e}}else if(Ft.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===fe&&fp(bt)===Ft.type){g(me,Ft.sibling),oe=T(Ft,ye.props),oe.ref=Wc(me,Ft,ye),oe.return=me,me=oe;break e}g(me,Ft);break}else u(me,Ft);Ft=Ft.sibling}ye.type===k?(oe=lu(ye.props.children,me.mode,Ke,ye.key),oe.return=me,me=oe):(Ke=ov(ye.type,ye.key,ye.props,null,me.mode,Ke),Ke.ref=Wc(me,oe,ye),Ke.return=me,me=Ke)}return O(me);case N:e:{for(Ft=ye.key;oe!==null;){if(oe.key===Ft)if(oe.tag===4&&oe.stateNode.containerInfo===ye.containerInfo&&oe.stateNode.implementation===ye.implementation){g(me,oe.sibling),oe=T(oe,ye.children||[]),oe.return=me,me=oe;break e}else{g(me,oe);break}else u(me,oe);oe=oe.sibling}oe=K_(ye,me.mode,Ke),oe.return=me,me=oe}return O(me);case fe:return Ft=ye._init,li(me,oe,Ft(ye._payload),Ke)}if(Ye(ye))return St(me,oe,ye,Ke);if(Z(ye))return wt(me,oe,ye,Ke);jc(me,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,oe!==null&&oe.tag===6?(g(me,oe.sibling),oe=T(oe,ye),oe.return=me,me=oe):(g(me,oe),oe=J_(ye,me.mode,Ke),oe.return=me,me=oe),O(me)):g(me,oe)}return li}var Ea=pp(!0),Xc=pp(!1),Ma=Gn(null),Ta=null,Zs=null,Ll=null;function Ca(){Ll=Zs=Ta=null}function Jc(a){var u=Ma.current;Rn(Ma),a._currentValue=u}function Kc(a,u,g){for(;a!==null;){var A=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,A!==null&&(A.childLanes|=u)):A!==null&&(A.childLanes&u)!==u&&(A.childLanes|=u),a===g)break;a=a.return}}function ko(a,u){Ta=a,Ll=Zs=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&u&&(tn=!0),a.firstContext=null)}function _r(a){var u=a._currentValue;if(Ll!==a)if(a={context:a,memoizedValue:u,next:null},Zs===null){if(Ta===null)throw Error(t(308));Zs=a,Ta.dependencies={lanes:0,firstContext:a}}else Zs=Zs.next=a;return u}var eo=null;function mp(a){eo===null?eo=[a]:eo.push(a)}function Yc(a,u,g,A){var T=u.interleaved;return T===null?(g.next=g,mp(u)):(g.next=T.next,T.next=g),u.interleaved=g,ns(a,A)}function ns(a,u){a.lanes|=u;var g=a.alternate;for(g!==null&&(g.lanes|=u),g=a,a=a.return;a!==null;)a.childLanes|=u,g=a.alternate,g!==null&&(g.childLanes|=u),g=a,a=a.return;return g.tag===3?g.stateNode:null}var Sn=!1;function Qt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qn(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function wn(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Fn(a,u,g){var A=a.updateQueue;if(A===null)return null;if(A=A.shared,vn&2){var T=A.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),A.pending=u,ns(a,g)}return T=A.interleaved,T===null?(u.next=u,mp(A)):(u.next=T.next,T.next=u),A.interleaved=u,ns(a,g)}function Li(a,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194240)!==0)){var A=u.lanes;A&=a.pendingLanes,g|=A,u.lanes=g,xs(a,g)}}function ba(a,u){var g=a.updateQueue,A=a.alternate;if(A!==null&&(A=A.updateQueue,g===A)){var T=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?T=I=O:I=I.next=O,g=g.next}while(g!==null);I===null?T=I=u:I=I.next=u}else T=I=u;g={baseState:A.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:A.shared,effects:A.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=u:a.next=u,g.lastBaseUpdate=u}function Vn(a,u,g,A){var T=a.updateQueue;Sn=!1;var I=T.firstBaseUpdate,O=T.lastBaseUpdate,$=T.shared.pending;if($!==null){T.shared.pending=null;var ne=$,Ae=ne.next;ne.next=null,O===null?I=Ae:O.next=Ae,O=ne;var He=a.alternate;He!==null&&(He=He.updateQueue,$=He.lastBaseUpdate,$!==O&&($===null?He.firstBaseUpdate=Ae:$.next=Ae,He.lastBaseUpdate=ne))}if(I!==null){var We=T.baseState;O=0,He=Ae=ne=null,$=I;do{var ke=$.lane,mt=$.eventTime;if((A&ke)===ke){He!==null&&(He=He.next={eventTime:mt,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var St=a,wt=$;switch(ke=u,mt=g,wt.tag){case 1:if(St=wt.payload,typeof St=="function"){We=St.call(mt,We,ke);break e}We=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=wt.payload,ke=typeof St=="function"?St.call(mt,We,ke):St,ke==null)break e;We=Q({},We,ke);break e;case 2:Sn=!0}}$.callback!==null&&$.lane!==0&&(a.flags|=64,ke=T.effects,ke===null?T.effects=[$]:ke.push($))}else mt={eventTime:mt,lane:ke,tag:$.tag,payload:$.payload,callback:$.callback,next:null},He===null?(Ae=He=mt,ne=We):He=He.next=mt,O|=ke;if($=$.next,$===null){if($=T.shared.pending,$===null)break;ke=$,$=ke.next,ke.next=null,T.lastBaseUpdate=ke,T.shared.pending=null}}while(!0);if(He===null&&(ne=We),T.baseState=ne,T.firstBaseUpdate=Ae,T.lastBaseUpdate=He,u=T.shared.interleaved,u!==null){T=u;do O|=T.lane,T=T.next;while(T!==u)}else I===null&&(T.shared.lanes=0);ru|=O,a.lanes=O,a.memoizedState=We}}function Nl(a,u,g){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var A=a[u],T=A.callback;if(T!==null){if(A.callback=null,A=g,typeof T!="function")throw Error(t(191,T));T.call(A)}}}var Ts={},xr=Gn(Ts),Ra=Gn(Ts),to=Gn(Ts);function ti(a){if(a===Ts)throw Error(t(174));return a}function qc(a,u){switch(Mn(to,u),Mn(Ra,a),Mn(xr,Ts),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:ot(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=ot(u,a)}Rn(xr),Mn(xr,u)}function Uo(){Rn(xr),Rn(Ra),Rn(to)}function Ia(a){ti(to.current);var u=ti(xr.current),g=ot(u,a.type);u!==g&&(Mn(Ra,a),Mn(xr,g))}function Fl(a){Ra.current===a&&(Rn(xr),Rn(Ra))}var Bn=Gn(0);function is(a){for(var u=a;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ol=[];function Cs(){for(var a=0;a<Ol.length;a++)Ol[a]._workInProgressVersionPrimary=null;Ol.length=0}var Pa=P.ReactCurrentDispatcher,Da=P.ReactCurrentBatchConfig,no=0,In=null,Wn=null,pn=null,rs=!1,Ni=!1,Ho=0,ir=0;function Ei(){throw Error(t(321))}function Qc(a,u){if(u===null)return!1;for(var g=0;g<u.length&&g<a.length;g++)if(!gr(a[g],u[g]))return!1;return!0}function $c(a,u,g,A,T,I){if(no=I,In=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Pa.current=a===null||a.memoizedState===null?Wg:jg,a=g(A,T),Ni){I=0;do{if(Ni=!1,Ho=0,25<=I)throw Error(t(301));I+=1,pn=Wn=null,u.updateQueue=null,Pa.current=Xg,a=g(A,T)}while(Ni)}if(Pa.current=mh,u=Wn!==null&&Wn.next!==null,no=0,pn=Wn=In=null,rs=!1,u)throw Error(t(300));return a}function gp(){var a=Ho!==0;return Ho=0,a}function Mi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?In.memoizedState=pn=a:pn=pn.next=a,pn}function Ar(){if(Wn===null){var a=In.alternate;a=a!==null?a.memoizedState:null}else a=Wn.next;var u=pn===null?In.memoizedState:pn.next;if(u!==null)pn=u,Wn=a;else{if(a===null)throw Error(t(310));Wn=a,a={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},pn===null?In.memoizedState=pn=a:pn=pn.next=a}return pn}function kl(a,u){return typeof u=="function"?u(a):u}function Zc(a){var u=Ar(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var A=Wn,T=A.baseQueue,I=g.pending;if(I!==null){if(T!==null){var O=T.next;T.next=I.next,I.next=O}A.baseQueue=T=I,g.pending=null}if(T!==null){I=T.next,A=A.baseState;var $=O=null,ne=null,Ae=I;do{var He=Ae.lane;if((no&He)===He)ne!==null&&(ne=ne.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),A=Ae.hasEagerState?Ae.eagerState:a(A,Ae.action);else{var We={lane:He,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};ne===null?($=ne=We,O=A):ne=ne.next=We,In.lanes|=He,ru|=He}Ae=Ae.next}while(Ae!==null&&Ae!==I);ne===null?O=A:ne.next=$,gr(A,u.memoizedState)||(tn=!0),u.memoizedState=A,u.baseState=O,u.baseQueue=ne,g.lastRenderedState=A}if(a=g.interleaved,a!==null){T=a;do I=T.lane,In.lanes|=I,ru|=I,T=T.next;while(T!==a)}else T===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function io(a){var u=Ar(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var A=g.dispatch,T=g.pending,I=u.memoizedState;if(T!==null){g.pending=null;var O=T=T.next;do I=a(I,O.action),O=O.next;while(O!==T);gr(I,u.memoizedState)||(tn=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),g.lastRenderedState=I}return[I,A]}function vp(){}function yp(a,u){var g=In,A=Ar(),T=u(),I=!gr(A.memoizedState,T);if(I&&(A.memoizedState=T,tn=!0),A=A.queue,Ap(kg.bind(null,g,A,a),[a]),A.getSnapshot!==u||I||pn!==null&&pn.memoizedState.tag&1){if(g.flags|=2048,ss(9,eu.bind(null,g,A,T,u),void 0,null),Fi===null)throw Error(t(349));no&30||ch(g,u,T)}return T}function ch(a,u,g){a.flags|=16384,a={getSnapshot:u,value:g},u=In.updateQueue,u===null?(u={lastEffect:null,stores:null},In.updateQueue=u,u.stores=[a]):(g=u.stores,g===null?u.stores=[a]:g.push(a))}function eu(a,u,g,A){u.value=g,u.getSnapshot=A,Ug(u)&&_p(a)}function kg(a,u,g){return g(function(){Ug(u)&&_p(a)})}function Ug(a){var u=a.getSnapshot;a=a.value;try{var g=u();return!gr(a,g)}catch{return!0}}function _p(a){var u=ns(a,1);u!==null&&lo(u,a,1,-1)}function xp(a){var u=Mi();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:a},u.queue=a,a=a.dispatch=Ba.bind(null,In,a),[u.memoizedState,a]}function ss(a,u,g,A){return a={tag:a,create:u,destroy:g,deps:A,next:null},u=In.updateQueue,u===null?(u={lastEffect:null,stores:null},In.updateQueue=u,u.lastEffect=a.next=a):(g=u.lastEffect,g===null?u.lastEffect=a.next=a:(A=g.next,g.next=a,a.next=A,u.lastEffect=a)),a}function Hg(){return Ar().memoizedState}function bs(a,u,g,A){var T=Mi();In.flags|=a,T.memoizedState=ss(1|u,g,void 0,A===void 0?null:A)}function tu(a,u,g,A){var T=Ar();A=A===void 0?null:A;var I=void 0;if(Wn!==null){var O=Wn.memoizedState;if(I=O.destroy,A!==null&&Qc(A,O.deps)){T.memoizedState=ss(u,g,I,A);return}}In.flags|=a,T.memoizedState=ss(1|u,g,I,A)}function Ji(a,u){return bs(8390656,8,a,u)}function Ap(a,u){return tu(2048,8,a,u)}function Sp(a,u){return tu(4,2,a,u)}function zg(a,u){return tu(4,4,a,u)}function Gg(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function wp(a,u,g){return g=g!=null?g.concat([a]):null,tu(4,4,Gg.bind(null,u,a),g)}function uh(){}function Vg(a,u){var g=Ar();u=u===void 0?null:u;var A=g.memoizedState;return A!==null&&u!==null&&Qc(u,A[1])?A[0]:(g.memoizedState=[a,u],a)}function Sr(a,u){var g=Ar();u=u===void 0?null:u;var A=g.memoizedState;return A!==null&&u!==null&&Qc(u,A[1])?A[0]:(a=a(),g.memoizedState=[a,u],a)}function dh(a,u,g){return no&21?(gr(g,u)||(g=Pn(),In.lanes|=g,ru|=g,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,tn=!0),a.memoizedState=g)}function R_(a,u){var g=en;en=g!==0&&4>g?g:4,a(!0);var A=Da.transition;Da.transition={};try{a(!1),u()}finally{en=g,Da.transition=A}}function ro(){return Ar().memoizedState}function hh(a,u,g){var A=Gl(a);if(g={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null},nu(a))fh(u,g);else if(g=Yc(a,u,g,A),g!==null){var T=Er();lo(g,a,A,T),ph(g,u,A)}}function Ba(a,u,g){var A=Gl(a),T={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null};if(nu(a))fh(u,T);else{var I=a.alternate;if(a.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var O=u.lastRenderedState,$=I(O,g);if(T.hasEagerState=!0,T.eagerState=$,gr($,O)){var ne=u.interleaved;ne===null?(T.next=T,mp(u)):(T.next=ne.next,ne.next=T),u.interleaved=T;return}}catch{}finally{}g=Yc(a,u,T,A),g!==null&&(T=Er(),lo(g,a,A,T),ph(g,u,A))}}function nu(a){var u=a.alternate;return a===In||u!==null&&u===In}function fh(a,u){Ni=rs=!0;var g=a.pending;g===null?u.next=u:(u.next=g.next,g.next=u),a.pending=u}function ph(a,u,g){if(g&4194240){var A=u.lanes;A&=a.pendingLanes,g|=A,u.lanes=g,xs(a,g)}}var mh={readContext:_r,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},Wg={readContext:_r,useCallback:function(a,u){return Mi().memoizedState=[a,u===void 0?null:u],a},useContext:_r,useEffect:Ji,useImperativeHandle:function(a,u,g){return g=g!=null?g.concat([a]):null,bs(4194308,4,Gg.bind(null,u,a),g)},useLayoutEffect:function(a,u){return bs(4194308,4,a,u)},useInsertionEffect:function(a,u){return bs(4,2,a,u)},useMemo:function(a,u){var g=Mi();return u=u===void 0?null:u,a=a(),g.memoizedState=[a,u],a},useReducer:function(a,u,g){var A=Mi();return u=g!==void 0?g(u):u,A.memoizedState=A.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},A.queue=a,a=a.dispatch=hh.bind(null,In,a),[A.memoizedState,a]},useRef:function(a){var u=Mi();return a={current:a},u.memoizedState=a},useState:xp,useDebugValue:uh,useDeferredValue:function(a){return Mi().memoizedState=a},useTransition:function(){var a=xp(!1),u=a[0];return a=R_.bind(null,a[1]),Mi().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,g){var A=In,T=Mi();if(Dn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=u(),Fi===null)throw Error(t(349));no&30||ch(A,u,g)}T.memoizedState=g;var I={value:g,getSnapshot:u};return T.queue=I,Ji(kg.bind(null,A,I,a),[a]),A.flags|=2048,ss(9,eu.bind(null,A,I,g,u),void 0,null),g},useId:function(){var a=Mi(),u=Fi.identifierPrefix;if(Dn){var g=Or,A=Qe;g=(A&~(1<<32-rn(A)-1)).toString(32)+g,u=":"+u+"R"+g,g=Ho++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=ir++,u=":"+u+"r"+g.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},jg={readContext:_r,useCallback:Vg,useContext:_r,useEffect:Ap,useImperativeHandle:wp,useInsertionEffect:Sp,useLayoutEffect:zg,useMemo:Sr,useReducer:Zc,useRef:Hg,useState:function(){return Zc(kl)},useDebugValue:uh,useDeferredValue:function(a){var u=Ar();return dh(u,Wn.memoizedState,a)},useTransition:function(){var a=Zc(kl)[0],u=Ar().memoizedState;return[a,u]},useMutableSource:vp,useSyncExternalStore:yp,useId:ro,unstable_isNewReconciler:!1},Xg={readContext:_r,useCallback:Vg,useContext:_r,useEffect:Ap,useImperativeHandle:wp,useInsertionEffect:Sp,useLayoutEffect:zg,useMemo:Sr,useReducer:io,useRef:Hg,useState:function(){return io(kl)},useDebugValue:uh,useDeferredValue:function(a){var u=Ar();return Wn===null?u.memoizedState=a:dh(u,Wn.memoizedState,a)},useTransition:function(){var a=io(kl)[0],u=Ar().memoizedState;return[a,u]},useMutableSource:vp,useSyncExternalStore:yp,useId:ro,unstable_isNewReconciler:!1};function Ur(a,u){if(a&&a.defaultProps){u=Q({},u),a=a.defaultProps;for(var g in a)u[g]===void 0&&(u[g]=a[g]);return u}return u}function iu(a,u,g,A){u=a.memoizedState,g=g(A,u),g=g==null?u:Q({},u,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var gh={isMounted:function(a){return(a=a._reactInternals)?ys(a)===a:!1},enqueueSetState:function(a,u,g){a=a._reactInternals;var A=Er(),T=Gl(a),I=wn(A,T);I.payload=u,g!=null&&(I.callback=g),u=Fn(a,I,T),u!==null&&(lo(u,a,T,A),Li(u,a,T))},enqueueReplaceState:function(a,u,g){a=a._reactInternals;var A=Er(),T=Gl(a),I=wn(A,T);I.tag=1,I.payload=u,g!=null&&(I.callback=g),u=Fn(a,I,T),u!==null&&(lo(u,a,T,A),Li(u,a,T))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var g=Er(),A=Gl(a),T=wn(g,A);T.tag=2,u!=null&&(T.callback=u),u=Fn(a,T,A),u!==null&&(lo(u,a,A,g),Li(u,a,A))}};function Jg(a,u,g,A,T,I,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(A,I,O):u.prototype&&u.prototype.isPureReactComponent?!pa(g,A)||!pa(T,I):!0}function h(a,u,g){var A=!1,T=Ys,I=u.contextType;return typeof I=="object"&&I!==null?I=_r(I):(T=Bi(u)?qs:Si.current,A=u.contextTypes,I=(A=A!=null)?xa(a,T):Ys),u=new u(g,I),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=gh,a.stateNode=u,u._reactInternals=a,A&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=I),u}function f(a,u,g,A){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,A),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,A),u.state!==a&&gh.enqueueReplaceState(u,u.state,null)}function _(a,u,g,A){var T=a.stateNode;T.props=g,T.state=a.memoizedState,T.refs={},Qt(a);var I=u.contextType;typeof I=="object"&&I!==null?T.context=_r(I):(I=Bi(u)?qs:Si.current,T.context=xa(a,I)),T.state=a.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(iu(a,u,I,g),T.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(u=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),u!==T.state&&gh.enqueueReplaceState(T,T.state,null),Vn(a,g,T,A),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}function E(a,u){try{var g="",A=u;do g+=Ee(A),A=A.return;while(A);var T=g}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:a,source:u,stack:T,digest:null}}function R(a,u,g){return{value:a,source:null,stack:g??null,digest:u??null}}function D(a,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var Y=typeof WeakMap=="function"?WeakMap:Map;function le(a,u,g){g=wn(-1,g),g.tag=3,g.payload={element:null};var A=u.value;return g.callback=function(){ev||(ev=!0,U_=A),D(a,u)},g}function Ce(a,u,g){g=wn(-1,g),g.tag=3;var A=a.type.getDerivedStateFromError;if(typeof A=="function"){var T=u.value;g.payload=function(){return A(T)},g.callback=function(){D(a,u)}}var I=a.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){D(a,u),typeof A!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})}),g}function Je(a,u,g){var A=a.pingCache;if(A===null){A=a.pingCache=new Y;var T=new Set;A.set(u,T)}else T=A.get(u),T===void 0&&(T=new Set,A.set(u,T));T.has(g)||(T.add(g),a=yL.bind(null,a,u,g),u.then(a,a))}function _t(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Xt(a,u,g,A,T){return a.mode&1?(a.flags|=65536,a.lanes=T,a):(a===u?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(u=wn(-1,1),u.tag=2,Fn(g,u,1))),g.lanes|=1),a)}var Bt=P.ReactCurrentOwner,tn=!1;function dt(a,u,g,A){u.child=a===null?Xc(u,null,g,A):Ea(u,a.child,g,A)}function Ti(a,u,g,A,T){g=g.render;var I=u.ref;return ko(u,T),A=$c(a,u,g,A,I,T),g=gp(),a!==null&&!tn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,La(a,u,T)):(Dn&&g&&cp(u),u.flags|=1,dt(a,u,A,T),u.child)}function wr(a,u,g,A,T){if(a===null){var I=g.type;return typeof I=="function"&&!X_(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(u.tag=15,u.type=I,_e(a,u,I,A,T)):(a=ov(g.type,null,A,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(I=a.child,!(a.lanes&T)){var O=I.memoizedProps;if(g=g.compare,g=g!==null?g:pa,g(O,A)&&a.ref===u.ref)return La(a,u,T)}return u.flags|=1,a=Wl(I,A),a.ref=u.ref,a.return=u,u.child=a}function _e(a,u,g,A,T){if(a!==null){var I=a.memoizedProps;if(pa(I,A)&&a.ref===u.ref)if(tn=!1,u.pendingProps=A=I,(a.lanes&T)!==0)a.flags&131072&&(tn=!0);else return u.lanes=a.lanes,La(a,u,T)}return at(a,u,g,A,T)}function de(a,u,g){var A=u.pendingProps,T=A.children,I=a!==null?a.memoizedState:null;if(A.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(yh,os),os|=g;else{if(!(g&1073741824))return a=I!==null?I.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Mn(yh,os),os|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=I!==null?I.baseLanes:g,Mn(yh,os),os|=A}else I!==null?(A=I.baseLanes|g,u.memoizedState=null):A=g,Mn(yh,os),os|=A;return dt(a,u,T,g),u.child}function Me(a,u){var g=u.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function at(a,u,g,A,T){var I=Bi(g)?qs:Si.current;return I=xa(u,I),ko(u,T),g=$c(a,u,g,A,I,T),A=gp(),a!==null&&!tn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,La(a,u,T)):(Dn&&A&&cp(u),u.flags|=1,dt(a,u,g,T),u.child)}function Tt(a,u,g,A,T){if(Bi(g)){var I=!0;Aa(u)}else I=!1;if(ko(u,T),u.stateNode===null)Yg(a,u),h(u,g,A),_(u,g,A,T),A=!0;else if(a===null){var O=u.stateNode,$=u.memoizedProps;O.props=$;var ne=O.context,Ae=g.contextType;typeof Ae=="object"&&Ae!==null?Ae=_r(Ae):(Ae=Bi(g)?qs:Si.current,Ae=xa(u,Ae));var He=g.getDerivedStateFromProps,We=typeof He=="function"||typeof O.getSnapshotBeforeUpdate=="function";We||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||($!==A||ne!==Ae)&&f(u,O,A,Ae),Sn=!1;var ke=u.memoizedState;O.state=ke,Vn(u,A,O,T),ne=u.memoizedState,$!==A||ke!==ne||Wi.current||Sn?(typeof He=="function"&&(iu(u,g,He,A),ne=u.memoizedState),($=Sn||Jg(u,g,$,A,ke,ne,Ae))?(We||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=A,u.memoizedState=ne),O.props=A,O.state=ne,O.context=Ae,A=$):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),A=!1)}else{O=u.stateNode,qn(a,u),$=u.memoizedProps,Ae=u.type===u.elementType?$:Ur(u.type,$),O.props=Ae,We=u.pendingProps,ke=O.context,ne=g.contextType,typeof ne=="object"&&ne!==null?ne=_r(ne):(ne=Bi(g)?qs:Si.current,ne=xa(u,ne));var mt=g.getDerivedStateFromProps;(He=typeof mt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||($!==We||ke!==ne)&&f(u,O,A,ne),Sn=!1,ke=u.memoizedState,O.state=ke,Vn(u,A,O,T);var St=u.memoizedState;$!==We||ke!==St||Wi.current||Sn?(typeof mt=="function"&&(iu(u,g,mt,A),St=u.memoizedState),(Ae=Sn||Jg(u,g,Ae,A,ke,St,ne)||!1)?(He||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(A,St,ne),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(A,St,ne)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(u.flags|=1024),u.memoizedProps=A,u.memoizedState=St),O.props=A,O.state=St,O.context=ne,A=Ae):(typeof O.componentDidUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&ke===a.memoizedState||(u.flags|=1024),A=!1)}return Kt(a,u,g,A,I,T)}function Kt(a,u,g,A,T,I){Me(a,u);var O=(u.flags&128)!==0;if(!A&&!O)return T&&ap(u,g,!1),La(a,u,I);A=u.stateNode,Bt.current=u;var $=O&&typeof g.getDerivedStateFromError!="function"?null:A.render();return u.flags|=1,a!==null&&O?(u.child=Ea(u,a.child,null,I),u.child=Ea(u,null,$,I)):dt(a,u,$,I),u.memoizedState=A.state,T&&ap(u,g,!0),u.child}function Jt(a){var u=a.stateNode;u.pendingContext?op(a,u.pendingContext,u.pendingContext!==u.context):u.context&&op(a,u.context,!1),qc(a,u.containerInfo)}function hn(a,u,g,A,T){return Oo(),Bl(T),u.flags|=256,dt(a,u,g,A),u.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function dn(a){return{baseLanes:a,cachePool:null,transitions:null}}function so(a,u,g){var A=u.pendingProps,T=Bn.current,I=!1,O=(u.flags&128)!==0,$;if(($=O)||($=a!==null&&a.memoizedState===null?!1:(T&2)!==0),$?(I=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),Mn(Bn,T&1),a===null)return ah(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(u.mode&1?a.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(O=A.children,a=A.fallback,I?(A=u.mode,I=u.child,O={mode:"hidden",children:O},!(A&1)&&I!==null?(I.childLanes=0,I.pendingProps=O):I=av(O,A,0,null),a=lu(a,A,g,null),I.return=u,a.return=u,I.sibling=a,u.child=I,u.child.memoizedState=dn(g),u.memoizedState=ni,a):Ep(u,O));if(T=a.memoizedState,T!==null&&($=T.dehydrated,$!==null))return oL(a,u,O,A,$,T,g);if(I){I=A.fallback,O=u.mode,T=a.child,$=T.sibling;var ne={mode:"hidden",children:A.children};return!(O&1)&&u.child!==T?(A=u.child,A.childLanes=0,A.pendingProps=ne,u.deletions=null):(A=Wl(T,ne),A.subtreeFlags=T.subtreeFlags&14680064),$!==null?I=Wl($,I):(I=lu(I,O,g,null),I.flags|=2),I.return=u,A.return=u,A.sibling=I,u.child=A,A=I,I=u.child,O=a.child.memoizedState,O=O===null?dn(g):{baseLanes:O.baseLanes|g,cachePool:null,transitions:O.transitions},I.memoizedState=O,I.childLanes=a.childLanes&~g,u.memoizedState=ni,A}return I=a.child,a=I.sibling,A=Wl(I,{mode:"visible",children:A.children}),!(u.mode&1)&&(A.lanes=g),A.return=u,A.sibling=null,a!==null&&(g=u.deletions,g===null?(u.deletions=[a],u.flags|=16):g.push(a)),u.child=A,u.memoizedState=null,A}function Ep(a,u){return u=av({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function Kg(a,u,g,A){return A!==null&&Bl(A),Ea(u,a.child,null,g),a=Ep(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function oL(a,u,g,A,T,I,O){if(g)return u.flags&256?(u.flags&=-257,A=R(Error(t(422))),Kg(a,u,O,A)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(I=A.fallback,T=u.mode,A=av({mode:"visible",children:A.children},T,0,null),I=lu(I,T,O,null),I.flags|=2,A.return=u,I.return=u,A.sibling=I,u.child=A,u.mode&1&&Ea(u,a.child,null,O),u.child.memoizedState=dn(O),u.memoizedState=ni,I);if(!(u.mode&1))return Kg(a,u,O,null);if(T.data==="$!"){if(A=T.nextSibling&&T.nextSibling.dataset,A)var $=A.dgst;return A=$,I=Error(t(419)),A=R(I,A,void 0),Kg(a,u,O,A)}if($=(O&a.childLanes)!==0,tn||$){if(A=Fi,A!==null){switch(O&-O){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=T&(A.suspendedLanes|O)?0:T,T!==0&&T!==I.retryLane&&(I.retryLane=T,ns(a,T),lo(A,a,T,-1))}return j_(),A=R(Error(t(421))),Kg(a,u,O,A)}return T.data==="$?"?(u.flags|=128,u.child=a.child,u=_L.bind(null,a),T._reactRetry=u,null):(a=I.treeContext,Xi=Js(T.nextSibling),wi=u,Dn=!0,kr=null,a!==null&&(ji[vi++]=Qe,ji[vi++]=Or,ji[vi++]=wa,Qe=a.id,Or=a.overflow,wa=u),u=Ep(u,A.children),u.flags|=4096,u)}function K1(a,u,g){a.lanes|=u;var A=a.alternate;A!==null&&(A.lanes|=u),Kc(a.return,u,g)}function I_(a,u,g,A,T){var I=a.memoizedState;I===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:A,tail:g,tailMode:T}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=A,I.tail=g,I.tailMode=T)}function Y1(a,u,g){var A=u.pendingProps,T=A.revealOrder,I=A.tail;if(dt(a,u,A.children,g),A=Bn.current,A&2)A=A&1|2,u.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&K1(a,g,u);else if(a.tag===19)K1(a,g,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}A&=1}if(Mn(Bn,A),!(u.mode&1))u.memoizedState=null;else switch(T){case"forwards":for(g=u.child,T=null;g!==null;)a=g.alternate,a!==null&&is(a)===null&&(T=g),g=g.sibling;g=T,g===null?(T=u.child,u.child=null):(T=g.sibling,g.sibling=null),I_(u,!1,T,g,I);break;case"backwards":for(g=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&is(a)===null){u.child=T;break}a=T.sibling,T.sibling=g,g=T,T=a}I_(u,!0,g,null,I);break;case"together":I_(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Yg(a,u){!(u.mode&1)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function La(a,u,g){if(a!==null&&(u.dependencies=a.dependencies),ru|=u.lanes,!(g&u.childLanes))return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,g=Wl(a,a.pendingProps),u.child=g,g.return=u;a.sibling!==null;)a=a.sibling,g=g.sibling=Wl(a,a.pendingProps),g.return=u;g.sibling=null}return u.child}function aL(a,u,g){switch(u.tag){case 3:Jt(u),Oo();break;case 5:Ia(u);break;case 1:Bi(u.type)&&Aa(u);break;case 4:qc(u,u.stateNode.containerInfo);break;case 10:var A=u.type._context,T=u.memoizedProps.value;Mn(Ma,A._currentValue),A._currentValue=T;break;case 13:if(A=u.memoizedState,A!==null)return A.dehydrated!==null?(Mn(Bn,Bn.current&1),u.flags|=128,null):g&u.child.childLanes?so(a,u,g):(Mn(Bn,Bn.current&1),a=La(a,u,g),a!==null?a.sibling:null);Mn(Bn,Bn.current&1);break;case 19:if(A=(g&u.childLanes)!==0,a.flags&128){if(A)return Y1(a,u,g);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Mn(Bn,Bn.current),A)break;return null;case 22:case 23:return u.lanes=0,de(a,u,g)}return La(a,u,g)}var q1,P_,Q1,$1;q1=function(a,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},P_=function(){},Q1=function(a,u,g,A){var T=a.memoizedProps;if(T!==A){a=u.stateNode,ti(xr.current);var I=null;switch(g){case"input":T=K(a,T),A=K(a,A),I=[];break;case"select":T=Q({},T,{value:void 0}),A=Q({},A,{value:void 0}),I=[];break;case"textarea":T=z(a,T),A=z(a,A),I=[];break;default:typeof T.onClick!="function"&&typeof A.onClick=="function"&&(a.onclick=Uc)}te(g,A);var O;g=null;for(Ae in T)if(!A.hasOwnProperty(Ae)&&T.hasOwnProperty(Ae)&&T[Ae]!=null)if(Ae==="style"){var $=T[Ae];for(O in $)$.hasOwnProperty(O)&&(g||(g={}),g[O]="")}else Ae!=="dangerouslySetInnerHTML"&&Ae!=="children"&&Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&Ae!=="autoFocus"&&(r.hasOwnProperty(Ae)?I||(I=[]):(I=I||[]).push(Ae,null));for(Ae in A){var ne=A[Ae];if($=T!=null?T[Ae]:void 0,A.hasOwnProperty(Ae)&&ne!==$&&(ne!=null||$!=null))if(Ae==="style")if($){for(O in $)!$.hasOwnProperty(O)||ne&&ne.hasOwnProperty(O)||(g||(g={}),g[O]="");for(O in ne)ne.hasOwnProperty(O)&&$[O]!==ne[O]&&(g||(g={}),g[O]=ne[O])}else g||(I||(I=[]),I.push(Ae,g)),g=ne;else Ae==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,$=$?$.__html:void 0,ne!=null&&$!==ne&&(I=I||[]).push(Ae,ne)):Ae==="children"?typeof ne!="string"&&typeof ne!="number"||(I=I||[]).push(Ae,""+ne):Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ae)?(ne!=null&&Ae==="onScroll"&&bn("scroll",a),I||$===ne||(I=[])):(I=I||[]).push(Ae,ne))}g&&(I=I||[]).push("style",g);var Ae=I;(u.updateQueue=Ae)&&(u.flags|=4)}},$1=function(a,u,g,A){g!==A&&(u.flags|=4)};function Mp(a,u){if(!Dn)switch(a.tailMode){case"hidden":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var A=null;g!==null;)g.alternate!==null&&(A=g),g=g.sibling;A===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:A.sibling=null}}function rr(a){var u=a.alternate!==null&&a.alternate.child===a.child,g=0,A=0;if(u)for(var T=a.child;T!==null;)g|=T.lanes|T.childLanes,A|=T.subtreeFlags&14680064,A|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)g|=T.lanes|T.childLanes,A|=T.subtreeFlags,A|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=A,a.childLanes=g,u}function lL(a,u,g){var A=u.pendingProps;switch($s(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(u),null;case 1:return Bi(u.type)&&Hc(),rr(u),null;case 3:return A=u.stateNode,Uo(),Rn(Wi),Rn(Si),Cs(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(a===null||a.child===null)&&(Dl(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,kr!==null&&(G_(kr),kr=null))),P_(a,u),rr(u),null;case 5:Fl(u);var T=ti(to.current);if(g=u.type,a!==null&&u.stateNode!=null)Q1(a,u,g,A,T),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!A){if(u.stateNode===null)throw Error(t(166));return rr(u),null}if(a=ti(xr.current),Dl(u)){A=u.stateNode,g=u.type;var I=u.memoizedProps;switch(A[ai]=u,A[Pl]=I,a=(u.mode&1)!==0,g){case"dialog":bn("cancel",A),bn("close",A);break;case"iframe":case"object":case"embed":bn("load",A);break;case"video":case"audio":for(T=0;T<No.length;T++)bn(No[T],A);break;case"source":bn("error",A);break;case"img":case"image":case"link":bn("error",A),bn("load",A);break;case"details":bn("toggle",A);break;case"input":gt(A,I),bn("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!I.multiple},bn("invalid",A);break;case"textarea":pe(A,I),bn("invalid",A)}te(g,I),T=null;for(var O in I)if(I.hasOwnProperty(O)){var $=I[O];O==="children"?typeof $=="string"?A.textContent!==$&&(I.suppressHydrationWarning!==!0&&kc(A.textContent,$,a),T=["children",$]):typeof $=="number"&&A.textContent!==""+$&&(I.suppressHydrationWarning!==!0&&kc(A.textContent,$,a),T=["children",""+$]):r.hasOwnProperty(O)&&$!=null&&O==="onScroll"&&bn("scroll",A)}switch(g){case"input":rt(A),je(A,I,!0);break;case"textarea":rt(A),Oe(A);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(A.onclick=Uc)}A=T,u.updateQueue=A,A!==null&&(u.flags|=4)}else{O=T.nodeType===9?T:T.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ie(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof A.is=="string"?a=O.createElement(g,{is:A.is}):(a=O.createElement(g),g==="select"&&(O=a,A.multiple?O.multiple=!0:A.size&&(O.size=A.size))):a=O.createElementNS(a,g),a[ai]=u,a[Pl]=A,q1(a,u,!1,!1),u.stateNode=a;e:{switch(O=be(g,A),g){case"dialog":bn("cancel",a),bn("close",a),T=A;break;case"iframe":case"object":case"embed":bn("load",a),T=A;break;case"video":case"audio":for(T=0;T<No.length;T++)bn(No[T],a);T=A;break;case"source":bn("error",a),T=A;break;case"img":case"image":case"link":bn("error",a),bn("load",a),T=A;break;case"details":bn("toggle",a),T=A;break;case"input":gt(a,A),T=K(a,A),bn("invalid",a);break;case"option":T=A;break;case"select":a._wrapperState={wasMultiple:!!A.multiple},T=Q({},A,{value:void 0}),bn("invalid",a);break;case"textarea":pe(a,A),T=z(a,A),bn("invalid",a);break;default:T=A}te(g,T),$=T;for(I in $)if($.hasOwnProperty(I)){var ne=$[I];I==="style"?Lt(a,ne):I==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&ut(a,ne)):I==="children"?typeof ne=="string"?(g!=="textarea"||ne!=="")&&jt(a,ne):typeof ne=="number"&&jt(a,""+ne):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(r.hasOwnProperty(I)?ne!=null&&I==="onScroll"&&bn("scroll",a):ne!=null&&b(a,I,ne,O))}switch(g){case"input":rt(a),je(a,A,!1);break;case"textarea":rt(a),Oe(a);break;case"option":A.value!=null&&a.setAttribute("value",""+Xe(A.value));break;case"select":a.multiple=!!A.multiple,I=A.value,I!=null?J(a,!!A.multiple,I,!1):A.defaultValue!=null&&J(a,!!A.multiple,A.defaultValue,!0);break;default:typeof T.onClick=="function"&&(a.onclick=Uc)}switch(g){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return rr(u),null;case 6:if(a&&u.stateNode!=null)$1(a,u,a.memoizedProps,A);else{if(typeof A!="string"&&u.stateNode===null)throw Error(t(166));if(g=ti(to.current),ti(xr.current),Dl(u)){if(A=u.stateNode,g=u.memoizedProps,A[ai]=u,(I=A.nodeValue!==g)&&(a=wi,a!==null))switch(a.tag){case 3:kc(A.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&kc(A.nodeValue,g,(a.mode&1)!==0)}I&&(u.flags|=4)}else A=(g.nodeType===9?g:g.ownerDocument).createTextNode(A),A[ai]=u,u.stateNode=A}return rr(u),null;case 13:if(Rn(Bn),A=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Dn&&Xi!==null&&u.mode&1&&!(u.flags&128))hp(),Oo(),u.flags|=98560,I=!1;else if(I=Dl(u),A!==null&&A.dehydrated!==null){if(a===null){if(!I)throw Error(t(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[ai]=u}else Oo(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;rr(u),I=!1}else kr!==null&&(G_(kr),kr=null),I=!0;if(!I)return u.flags&65536?u:null}return u.flags&128?(u.lanes=g,u):(A=A!==null,A!==(a!==null&&a.memoizedState!==null)&&A&&(u.child.flags|=8192,u.mode&1&&(a===null||Bn.current&1?Ci===0&&(Ci=3):j_())),u.updateQueue!==null&&(u.flags|=4),rr(u),null);case 4:return Uo(),P_(a,u),a===null&&bl(u.stateNode.containerInfo),rr(u),null;case 10:return Jc(u.type._context),rr(u),null;case 17:return Bi(u.type)&&Hc(),rr(u),null;case 19:if(Rn(Bn),I=u.memoizedState,I===null)return rr(u),null;if(A=(u.flags&128)!==0,O=I.rendering,O===null)if(A)Mp(I,!1);else{if(Ci!==0||a!==null&&a.flags&128)for(a=u.child;a!==null;){if(O=is(a),O!==null){for(u.flags|=128,Mp(I,!1),A=O.updateQueue,A!==null&&(u.updateQueue=A,u.flags|=4),u.subtreeFlags=0,A=g,g=u.child;g!==null;)I=g,a=A,I.flags&=14680066,O=I.alternate,O===null?(I.childLanes=0,I.lanes=a,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=O.childLanes,I.lanes=O.lanes,I.child=O.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=O.memoizedProps,I.memoizedState=O.memoizedState,I.updateQueue=O.updateQueue,I.type=O.type,a=O.dependencies,I.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return Mn(Bn,Bn.current&1|2),u.child}a=a.sibling}I.tail!==null&&se()>_h&&(u.flags|=128,A=!0,Mp(I,!1),u.lanes=4194304)}else{if(!A)if(a=is(O),a!==null){if(u.flags|=128,A=!0,g=a.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),Mp(I,!0),I.tail===null&&I.tailMode==="hidden"&&!O.alternate&&!Dn)return rr(u),null}else 2*se()-I.renderingStartTime>_h&&g!==1073741824&&(u.flags|=128,A=!0,Mp(I,!1),u.lanes=4194304);I.isBackwards?(O.sibling=u.child,u.child=O):(g=I.last,g!==null?g.sibling=O:u.child=O,I.last=O)}return I.tail!==null?(u=I.tail,I.rendering=u,I.tail=u.sibling,I.renderingStartTime=se(),u.sibling=null,g=Bn.current,Mn(Bn,A?g&1|2:g&1),u):(rr(u),null);case 22:case 23:return W_(),A=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==A&&(u.flags|=8192),A&&u.mode&1?os&1073741824&&(rr(u),u.subtreeFlags&6&&(u.flags|=8192)):rr(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function cL(a,u){switch($s(u),u.tag){case 1:return Bi(u.type)&&Hc(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Uo(),Rn(Wi),Rn(Si),Cs(),a=u.flags,a&65536&&!(a&128)?(u.flags=a&-65537|128,u):null;case 5:return Fl(u),null;case 13:if(Rn(Bn),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Oo()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Rn(Bn),null;case 4:return Uo(),null;case 10:return Jc(u.type._context),null;case 22:case 23:return W_(),null;case 24:return null;default:return null}}var qg=!1,sr=!1,uL=typeof WeakSet=="function"?WeakSet:Set,At=null;function vh(a,u){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(A){ii(a,u,A)}else g.current=null}function D_(a,u,g){try{g()}catch(A){ii(a,u,A)}}var Z1=!1;function dL(a,u){if(Il=Pr,a=Un(),fi(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var A=g.getSelection&&g.getSelection();if(A&&A.rangeCount!==0){g=A.anchorNode;var T=A.anchorOffset,I=A.focusNode;A=A.focusOffset;try{g.nodeType,I.nodeType}catch{g=null;break e}var O=0,$=-1,ne=-1,Ae=0,He=0,We=a,ke=null;t:for(;;){for(var mt;We!==g||T!==0&&We.nodeType!==3||($=O+T),We!==I||A!==0&&We.nodeType!==3||(ne=O+A),We.nodeType===3&&(O+=We.nodeValue.length),(mt=We.firstChild)!==null;)ke=We,We=mt;for(;;){if(We===a)break t;if(ke===g&&++Ae===T&&($=O),ke===I&&++He===A&&(ne=O),(mt=We.nextSibling)!==null)break;We=ke,ke=We.parentNode}We=mt}g=$===-1||ne===-1?null:{start:$,end:ne}}else g=null}g=g||{start:0,end:0}}else g=null;for(ep={focusedElem:a,selectionRange:g},Pr=!1,At=u;At!==null;)if(u=At,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,At=a;else for(;At!==null;){u=At;try{var St=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var wt=St.memoizedProps,li=St.memoizedState,me=u.stateNode,oe=me.getSnapshotBeforeUpdate(u.elementType===u.type?wt:Ur(u.type,wt),li);me.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ye=u.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ke){ii(u,u.return,Ke)}if(a=u.sibling,a!==null){a.return=u.return,At=a;break}At=u.return}return St=Z1,Z1=!1,St}function Tp(a,u,g){var A=u.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var T=A=A.next;do{if((T.tag&a)===a){var I=T.destroy;T.destroy=void 0,I!==void 0&&D_(u,g,I)}T=T.next}while(T!==A)}}function Qg(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&a)===a){var A=g.create;g.destroy=A()}g=g.next}while(g!==u)}}function B_(a){var u=a.ref;if(u!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof u=="function"?u(a):u.current=a}}function eE(a){var u=a.alternate;u!==null&&(a.alternate=null,eE(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[ai],delete u[Pl],delete u[_a],delete u[eh],delete u[th])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function tE(a){return a.tag===5||a.tag===3||a.tag===4}function nE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||tE(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function L_(a,u,g){var A=a.tag;if(A===5||A===6)a=a.stateNode,u?g.nodeType===8?g.parentNode.insertBefore(a,u):g.insertBefore(a,u):(g.nodeType===8?(u=g.parentNode,u.insertBefore(a,g)):(u=g,u.appendChild(a)),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Uc));else if(A!==4&&(a=a.child,a!==null))for(L_(a,u,g),a=a.sibling;a!==null;)L_(a,u,g),a=a.sibling}function N_(a,u,g){var A=a.tag;if(A===5||A===6)a=a.stateNode,u?g.insertBefore(a,u):g.appendChild(a);else if(A!==4&&(a=a.child,a!==null))for(N_(a,u,g),a=a.sibling;a!==null;)N_(a,u,g),a=a.sibling}var Ki=null,oo=!1;function Ul(a,u,g){for(g=g.child;g!==null;)iE(a,u,g),g=g.sibling}function iE(a,u,g){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(xt,g)}catch{}switch(g.tag){case 5:sr||vh(g,u);case 6:var A=Ki,T=oo;Ki=null,Ul(a,u,g),Ki=A,oo=T,Ki!==null&&(oo?(a=Ki,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):Ki.removeChild(g.stateNode));break;case 18:Ki!==null&&(oo?(a=Ki,g=g.stateNode,a.nodeType===8?Zd(a.parentNode,g):a.nodeType===1&&Zd(a,g),Cc(a)):Zd(Ki,g.stateNode));break;case 4:A=Ki,T=oo,Ki=g.stateNode.containerInfo,oo=!0,Ul(a,u,g),Ki=A,oo=T;break;case 0:case 11:case 14:case 15:if(!sr&&(A=g.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){T=A=A.next;do{var I=T,O=I.destroy;I=I.tag,O!==void 0&&(I&2||I&4)&&D_(g,u,O),T=T.next}while(T!==A)}Ul(a,u,g);break;case 1:if(!sr&&(vh(g,u),A=g.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=g.memoizedProps,A.state=g.memoizedState,A.componentWillUnmount()}catch($){ii(g,u,$)}Ul(a,u,g);break;case 21:Ul(a,u,g);break;case 22:g.mode&1?(sr=(A=sr)||g.memoizedState!==null,Ul(a,u,g),sr=A):Ul(a,u,g);break;default:Ul(a,u,g)}}function rE(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new uL),u.forEach(function(A){var T=xL.bind(null,a,A);g.has(A)||(g.add(A),A.then(T,T))})}}function ao(a,u){var g=u.deletions;if(g!==null)for(var A=0;A<g.length;A++){var T=g[A];try{var I=a,O=u,$=O;e:for(;$!==null;){switch($.tag){case 5:Ki=$.stateNode,oo=!1;break e;case 3:Ki=$.stateNode.containerInfo,oo=!0;break e;case 4:Ki=$.stateNode.containerInfo,oo=!0;break e}$=$.return}if(Ki===null)throw Error(t(160));iE(I,O,T),Ki=null,oo=!1;var ne=T.alternate;ne!==null&&(ne.return=null),T.return=null}catch(Ae){ii(T,u,Ae)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)sE(u,a),u=u.sibling}function sE(a,u){var g=a.alternate,A=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ao(u,a),zo(a),A&4){try{Tp(3,a,a.return),Qg(3,a)}catch(wt){ii(a,a.return,wt)}try{Tp(5,a,a.return)}catch(wt){ii(a,a.return,wt)}}break;case 1:ao(u,a),zo(a),A&512&&g!==null&&vh(g,g.return);break;case 5:if(ao(u,a),zo(a),A&512&&g!==null&&vh(g,g.return),a.flags&32){var T=a.stateNode;try{jt(T,"")}catch(wt){ii(a,a.return,wt)}}if(A&4&&(T=a.stateNode,T!=null)){var I=a.memoizedProps,O=g!==null?g.memoizedProps:I,$=a.type,ne=a.updateQueue;if(a.updateQueue=null,ne!==null)try{$==="input"&&I.type==="radio"&&I.name!=null&&Ue(T,I),be($,O);var Ae=be($,I);for(O=0;O<ne.length;O+=2){var He=ne[O],We=ne[O+1];He==="style"?Lt(T,We):He==="dangerouslySetInnerHTML"?ut(T,We):He==="children"?jt(T,We):b(T,He,We,Ae)}switch($){case"input":Ze(T,I);break;case"textarea":Te(T,I);break;case"select":var ke=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!I.multiple;var mt=I.value;mt!=null?J(T,!!I.multiple,mt,!1):ke!==!!I.multiple&&(I.defaultValue!=null?J(T,!!I.multiple,I.defaultValue,!0):J(T,!!I.multiple,I.multiple?[]:"",!1))}T[Pl]=I}catch(wt){ii(a,a.return,wt)}}break;case 6:if(ao(u,a),zo(a),A&4){if(a.stateNode===null)throw Error(t(162));T=a.stateNode,I=a.memoizedProps;try{T.nodeValue=I}catch(wt){ii(a,a.return,wt)}}break;case 3:if(ao(u,a),zo(a),A&4&&g!==null&&g.memoizedState.isDehydrated)try{Cc(u.containerInfo)}catch(wt){ii(a,a.return,wt)}break;case 4:ao(u,a),zo(a);break;case 13:ao(u,a),zo(a),T=a.child,T.flags&8192&&(I=T.memoizedState!==null,T.stateNode.isHidden=I,!I||T.alternate!==null&&T.alternate.memoizedState!==null||(k_=se())),A&4&&rE(a);break;case 22:if(He=g!==null&&g.memoizedState!==null,a.mode&1?(sr=(Ae=sr)||He,ao(u,a),sr=Ae):ao(u,a),zo(a),A&8192){if(Ae=a.memoizedState!==null,(a.stateNode.isHidden=Ae)&&!He&&a.mode&1)for(At=a,He=a.child;He!==null;){for(We=At=He;At!==null;){switch(ke=At,mt=ke.child,ke.tag){case 0:case 11:case 14:case 15:Tp(4,ke,ke.return);break;case 1:vh(ke,ke.return);var St=ke.stateNode;if(typeof St.componentWillUnmount=="function"){A=ke,g=ke.return;try{u=A,St.props=u.memoizedProps,St.state=u.memoizedState,St.componentWillUnmount()}catch(wt){ii(A,g,wt)}}break;case 5:vh(ke,ke.return);break;case 22:if(ke.memoizedState!==null){lE(We);continue}}mt!==null?(mt.return=ke,At=mt):lE(We)}He=He.sibling}e:for(He=null,We=a;;){if(We.tag===5){if(He===null){He=We;try{T=We.stateNode,Ae?(I=T.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):($=We.stateNode,ne=We.memoizedProps.style,O=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,$.style.display=Pt("display",O))}catch(wt){ii(a,a.return,wt)}}}else if(We.tag===6){if(He===null)try{We.stateNode.nodeValue=Ae?"":We.memoizedProps}catch(wt){ii(a,a.return,wt)}}else if((We.tag!==22&&We.tag!==23||We.memoizedState===null||We===a)&&We.child!==null){We.child.return=We,We=We.child;continue}if(We===a)break e;for(;We.sibling===null;){if(We.return===null||We.return===a)break e;He===We&&(He=null),We=We.return}He===We&&(He=null),We.sibling.return=We.return,We=We.sibling}}break;case 19:ao(u,a),zo(a),A&4&&rE(a);break;case 21:break;default:ao(u,a),zo(a)}}function zo(a){var u=a.flags;if(u&2){try{e:{for(var g=a.return;g!==null;){if(tE(g)){var A=g;break e}g=g.return}throw Error(t(160))}switch(A.tag){case 5:var T=A.stateNode;A.flags&32&&(jt(T,""),A.flags&=-33);var I=nE(a);N_(a,I,T);break;case 3:case 4:var O=A.stateNode.containerInfo,$=nE(a);L_(a,$,O);break;default:throw Error(t(161))}}catch(ne){ii(a,a.return,ne)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function hL(a,u,g){At=a,oE(a)}function oE(a,u,g){for(var A=(a.mode&1)!==0;At!==null;){var T=At,I=T.child;if(T.tag===22&&A){var O=T.memoizedState!==null||qg;if(!O){var $=T.alternate,ne=$!==null&&$.memoizedState!==null||sr;$=qg;var Ae=sr;if(qg=O,(sr=ne)&&!Ae)for(At=T;At!==null;)O=At,ne=O.child,O.tag===22&&O.memoizedState!==null?cE(T):ne!==null?(ne.return=O,At=ne):cE(T);for(;I!==null;)At=I,oE(I),I=I.sibling;At=T,qg=$,sr=Ae}aE(a)}else T.subtreeFlags&8772&&I!==null?(I.return=T,At=I):aE(a)}}function aE(a){for(;At!==null;){var u=At;if(u.flags&8772){var g=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:sr||Qg(5,u);break;case 1:var A=u.stateNode;if(u.flags&4&&!sr)if(g===null)A.componentDidMount();else{var T=u.elementType===u.type?g.memoizedProps:Ur(u.type,g.memoizedProps);A.componentDidUpdate(T,g.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=u.updateQueue;I!==null&&Nl(u,I,A);break;case 3:var O=u.updateQueue;if(O!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=u.child.stateNode;break;case 1:g=u.child.stateNode}Nl(u,O,g)}break;case 5:var $=u.stateNode;if(g===null&&u.flags&4){g=$;var ne=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&g.focus();break;case"img":ne.src&&(g.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Ae=u.alternate;if(Ae!==null){var He=Ae.memoizedState;if(He!==null){var We=He.dehydrated;We!==null&&Cc(We)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sr||u.flags&512&&B_(u)}catch(ke){ii(u,u.return,ke)}}if(u===a){At=null;break}if(g=u.sibling,g!==null){g.return=u.return,At=g;break}At=u.return}}function lE(a){for(;At!==null;){var u=At;if(u===a){At=null;break}var g=u.sibling;if(g!==null){g.return=u.return,At=g;break}At=u.return}}function cE(a){for(;At!==null;){var u=At;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{Qg(4,u)}catch(ne){ii(u,g,ne)}break;case 1:var A=u.stateNode;if(typeof A.componentDidMount=="function"){var T=u.return;try{A.componentDidMount()}catch(ne){ii(u,T,ne)}}var I=u.return;try{B_(u)}catch(ne){ii(u,I,ne)}break;case 5:var O=u.return;try{B_(u)}catch(ne){ii(u,O,ne)}}}catch(ne){ii(u,u.return,ne)}if(u===a){At=null;break}var $=u.sibling;if($!==null){$.return=u.return,At=$;break}At=u.return}}var fL=Math.ceil,$g=P.ReactCurrentDispatcher,F_=P.ReactCurrentOwner,Rs=P.ReactCurrentBatchConfig,vn=0,Fi=null,yi=null,Yi=0,os=0,yh=Gn(0),Ci=0,Cp=null,ru=0,Zg=0,O_=0,bp=null,Hr=null,k_=0,_h=1/0,Na=null,ev=!1,U_=null,Hl=null,tv=!1,zl=null,nv=0,Rp=0,H_=null,iv=-1,rv=0;function Er(){return vn&6?se():iv!==-1?iv:iv=se()}function Gl(a){return a.mode&1?vn&2&&Yi!==0?Yi&-Yi:b_.transition!==null?(rv===0&&(rv=Pn()),rv):(a=en,a!==0||(a=window.event,a=a===void 0?16:wg(a.type)),a):1}function lo(a,u,g,A){if(50<Rp)throw Rp=0,H_=null,Error(t(185));Kn(a,g,A),(!(vn&2)||a!==Fi)&&(a===Fi&&(!(vn&2)&&(Zg|=g),Ci===4&&Vl(a,Yi)),zr(a,A),g===1&&vn===0&&!(u.mode&1)&&(_h=se()+500,Gc&&Ms()))}function zr(a,u){var g=a.callbackNode;_s(a,u);var A=Ir(a,a===Fi?Yi:0);if(A===0)g!==null&&ue(g),a.callbackNode=null,a.callbackPriority=0;else if(u=A&-A,a.callbackPriority!==u){if(g!=null&&ue(g),u===1)a.tag===0?Og(dE.bind(null,a)):Vc(dE.bind(null,a)),C_(function(){!(vn&6)&&Ms()}),g=null;else{switch(ml(A)){case 1:g=et;break;case 4:g=ht;break;case 16:g=yt;break;case 536870912:g=Dt;break;default:g=yt}g=_E(g,uE.bind(null,a))}a.callbackPriority=u,a.callbackNode=g}}function uE(a,u){if(iv=-1,rv=0,vn&6)throw Error(t(327));var g=a.callbackNode;if(xh()&&a.callbackNode!==g)return null;var A=Ir(a,a===Fi?Yi:0);if(A===0)return null;if(A&30||A&a.expiredLanes||u)u=sv(a,A);else{u=A;var T=vn;vn|=2;var I=fE();(Fi!==a||Yi!==u)&&(Na=null,_h=se()+500,ou(a,u));do try{gL();break}catch($){hE(a,$)}while(!0);Ca(),$g.current=I,vn=T,yi!==null?u=0:(Fi=null,Yi=0,u=Ci)}if(u!==0){if(u===2&&(T=An(a),T!==0&&(A=T,u=z_(a,T))),u===1)throw g=Cp,ou(a,0),Vl(a,A),zr(a,se()),g;if(u===6)Vl(a,A);else{if(T=a.current.alternate,!(A&30)&&!pL(T)&&(u=sv(a,A),u===2&&(I=An(a),I!==0&&(A=I,u=z_(a,I))),u===1))throw g=Cp,ou(a,0),Vl(a,A),zr(a,se()),g;switch(a.finishedWork=T,a.finishedLanes=A,u){case 0:case 1:throw Error(t(345));case 2:au(a,Hr,Na);break;case 3:if(Vl(a,A),(A&130023424)===A&&(u=k_+500-se(),10<u)){if(Ir(a,0)!==0)break;if(T=a.suspendedLanes,(T&A)!==A){Er(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=np(au.bind(null,a,Hr,Na),u);break}au(a,Hr,Na);break;case 4:if(Vl(a,A),(A&4194240)===A)break;for(u=a.eventTimes,T=-1;0<A;){var O=31-rn(A);I=1<<O,O=u[O],O>T&&(T=O),A&=~I}if(A=T,A=se()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*fL(A/1960))-A,10<A){a.timeoutHandle=np(au.bind(null,a,Hr,Na),A);break}au(a,Hr,Na);break;case 5:au(a,Hr,Na);break;default:throw Error(t(329))}}}return zr(a,se()),a.callbackNode===g?uE.bind(null,a):null}function z_(a,u){var g=bp;return a.current.memoizedState.isDehydrated&&(ou(a,u).flags|=256),a=sv(a,u),a!==2&&(u=Hr,Hr=g,u!==null&&G_(u)),a}function G_(a){Hr===null?Hr=a:Hr.push.apply(Hr,a)}function pL(a){for(var u=a;;){if(u.flags&16384){var g=u.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var A=0;A<g.length;A++){var T=g[A],I=T.getSnapshot;T=T.value;try{if(!gr(I(),T))return!1}catch{return!1}}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Vl(a,u){for(u&=~O_,u&=~Zg,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var g=31-rn(u),A=1<<g;a[g]=-1,u&=~A}}function dE(a){if(vn&6)throw Error(t(327));xh();var u=Ir(a,0);if(!(u&1))return zr(a,se()),null;var g=sv(a,u);if(a.tag!==0&&g===2){var A=An(a);A!==0&&(u=A,g=z_(a,A))}if(g===1)throw g=Cp,ou(a,0),Vl(a,u),zr(a,se()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,au(a,Hr,Na),zr(a,se()),null}function V_(a,u){var g=vn;vn|=1;try{return a(u)}finally{vn=g,vn===0&&(_h=se()+500,Gc&&Ms())}}function su(a){zl!==null&&zl.tag===0&&!(vn&6)&&xh();var u=vn;vn|=1;var g=Rs.transition,A=en;try{if(Rs.transition=null,en=1,a)return a()}finally{en=A,Rs.transition=g,vn=u,!(vn&6)&&Ms()}}function W_(){os=yh.current,Rn(yh)}function ou(a,u){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,ip(g)),yi!==null)for(g=yi.return;g!==null;){var A=g;switch($s(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Hc();break;case 3:Uo(),Rn(Wi),Rn(Si),Cs();break;case 5:Fl(A);break;case 4:Uo();break;case 13:Rn(Bn);break;case 19:Rn(Bn);break;case 10:Jc(A.type._context);break;case 22:case 23:W_()}g=g.return}if(Fi=a,yi=a=Wl(a.current,null),Yi=os=u,Ci=0,Cp=null,O_=Zg=ru=0,Hr=bp=null,eo!==null){for(u=0;u<eo.length;u++)if(g=eo[u],A=g.interleaved,A!==null){g.interleaved=null;var T=A.next,I=g.pending;if(I!==null){var O=I.next;I.next=T,A.next=O}g.pending=A}eo=null}return a}function hE(a,u){do{var g=yi;try{if(Ca(),Pa.current=mh,rs){for(var A=In.memoizedState;A!==null;){var T=A.queue;T!==null&&(T.pending=null),A=A.next}rs=!1}if(no=0,pn=Wn=In=null,Ni=!1,Ho=0,F_.current=null,g===null||g.return===null){Ci=1,Cp=u,yi=null;break}e:{var I=a,O=g.return,$=g,ne=u;if(u=Yi,$.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=ne,He=$,We=He.tag;if(!(He.mode&1)&&(We===0||We===11||We===15)){var ke=He.alternate;ke?(He.updateQueue=ke.updateQueue,He.memoizedState=ke.memoizedState,He.lanes=ke.lanes):(He.updateQueue=null,He.memoizedState=null)}var mt=_t(O);if(mt!==null){mt.flags&=-257,Xt(mt,O,$,I,u),mt.mode&1&&Je(I,Ae,u),u=mt,ne=Ae;var St=u.updateQueue;if(St===null){var wt=new Set;wt.add(ne),u.updateQueue=wt}else St.add(ne);break e}else{if(!(u&1)){Je(I,Ae,u),j_();break e}ne=Error(t(426))}}else if(Dn&&$.mode&1){var li=_t(O);if(li!==null){!(li.flags&65536)&&(li.flags|=256),Xt(li,O,$,I,u),Bl(E(ne,$));break e}}I=ne=E(ne,$),Ci!==4&&(Ci=2),bp===null?bp=[I]:bp.push(I),I=O;do{switch(I.tag){case 3:I.flags|=65536,u&=-u,I.lanes|=u;var me=le(I,ne,u);ba(I,me);break e;case 1:$=ne;var oe=I.type,ye=I.stateNode;if(!(I.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Hl===null||!Hl.has(ye)))){I.flags|=65536,u&=-u,I.lanes|=u;var Ke=Ce(I,$,u);ba(I,Ke);break e}}I=I.return}while(I!==null)}mE(g)}catch(bt){u=bt,yi===g&&g!==null&&(yi=g=g.return);continue}break}while(!0)}function fE(){var a=$g.current;return $g.current=mh,a===null?mh:a}function j_(){(Ci===0||Ci===3||Ci===2)&&(Ci=4),Fi===null||!(ru&268435455)&&!(Zg&268435455)||Vl(Fi,Yi)}function sv(a,u){var g=vn;vn|=2;var A=fE();(Fi!==a||Yi!==u)&&(Na=null,ou(a,u));do try{mL();break}catch(T){hE(a,T)}while(!0);if(Ca(),vn=g,$g.current=A,yi!==null)throw Error(t(261));return Fi=null,Yi=0,Ci}function mL(){for(;yi!==null;)pE(yi)}function gL(){for(;yi!==null&&!xe();)pE(yi)}function pE(a){var u=yE(a.alternate,a,os);a.memoizedProps=a.pendingProps,u===null?mE(a):yi=u,F_.current=null}function mE(a){var u=a;do{var g=u.alternate;if(a=u.return,u.flags&32768){if(g=cL(g,u),g!==null){g.flags&=32767,yi=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ci=6,yi=null;return}}else if(g=lL(g,u,os),g!==null){yi=g;return}if(u=u.sibling,u!==null){yi=u;return}yi=u=a}while(u!==null);Ci===0&&(Ci=5)}function au(a,u,g){var A=en,T=Rs.transition;try{Rs.transition=null,en=1,vL(a,u,g,A)}finally{Rs.transition=T,en=A}return null}function vL(a,u,g,A){do xh();while(zl!==null);if(vn&6)throw Error(t(327));g=a.finishedWork;var T=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var I=g.lanes|g.childLanes;if(Di(a,I),a===Fi&&(yi=Fi=null,Yi=0),!(g.subtreeFlags&2064)&&!(g.flags&2064)||tv||(tv=!0,_E(yt,function(){return xh(),null})),I=(g.flags&15990)!==0,g.subtreeFlags&15990||I){I=Rs.transition,Rs.transition=null;var O=en;en=1;var $=vn;vn|=4,F_.current=null,dL(a,g),sE(g,a),pi(ep),Pr=!!Il,ep=Il=null,a.current=g,hL(g),we(),vn=$,en=O,Rs.transition=I}else a.current=g;if(tv&&(tv=!1,zl=a,nv=T),I=a.pendingLanes,I===0&&(Hl=null),Rt(g.stateNode),zr(a,se()),u!==null)for(A=a.onRecoverableError,g=0;g<u.length;g++)T=u[g],A(T.value,{componentStack:T.stack,digest:T.digest});if(ev)throw ev=!1,a=U_,U_=null,a;return nv&1&&a.tag!==0&&xh(),I=a.pendingLanes,I&1?a===H_?Rp++:(Rp=0,H_=a):Rp=0,Ms(),null}function xh(){if(zl!==null){var a=ml(nv),u=Rs.transition,g=en;try{if(Rs.transition=null,en=16>a?16:a,zl===null)var A=!1;else{if(a=zl,zl=null,nv=0,vn&6)throw Error(t(331));var T=vn;for(vn|=4,At=a.current;At!==null;){var I=At,O=I.child;if(At.flags&16){var $=I.deletions;if($!==null){for(var ne=0;ne<$.length;ne++){var Ae=$[ne];for(At=Ae;At!==null;){var He=At;switch(He.tag){case 0:case 11:case 15:Tp(8,He,I)}var We=He.child;if(We!==null)We.return=He,At=We;else for(;At!==null;){He=At;var ke=He.sibling,mt=He.return;if(eE(He),He===Ae){At=null;break}if(ke!==null){ke.return=mt,At=ke;break}At=mt}}}var St=I.alternate;if(St!==null){var wt=St.child;if(wt!==null){St.child=null;do{var li=wt.sibling;wt.sibling=null,wt=li}while(wt!==null)}}At=I}}if(I.subtreeFlags&2064&&O!==null)O.return=I,At=O;else e:for(;At!==null;){if(I=At,I.flags&2048)switch(I.tag){case 0:case 11:case 15:Tp(9,I,I.return)}var me=I.sibling;if(me!==null){me.return=I.return,At=me;break e}At=I.return}}var oe=a.current;for(At=oe;At!==null;){O=At;var ye=O.child;if(O.subtreeFlags&2064&&ye!==null)ye.return=O,At=ye;else e:for(O=oe;At!==null;){if($=At,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:Qg(9,$)}}catch(bt){ii($,$.return,bt)}if($===O){At=null;break e}var Ke=$.sibling;if(Ke!==null){Ke.return=$.return,At=Ke;break e}At=$.return}}if(vn=T,Ms(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(xt,a)}catch{}A=!0}return A}finally{en=g,Rs.transition=u}}return!1}function gE(a,u,g){u=E(g,u),u=le(a,u,1),a=Fn(a,u,1),u=Er(),a!==null&&(Kn(a,1,u),zr(a,u))}function ii(a,u,g){if(a.tag===3)gE(a,a,g);else for(;u!==null;){if(u.tag===3){gE(u,a,g);break}else if(u.tag===1){var A=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Hl===null||!Hl.has(A))){a=E(g,a),a=Ce(u,a,1),u=Fn(u,a,1),a=Er(),u!==null&&(Kn(u,1,a),zr(u,a));break}}u=u.return}}function yL(a,u,g){var A=a.pingCache;A!==null&&A.delete(u),u=Er(),a.pingedLanes|=a.suspendedLanes&g,Fi===a&&(Yi&g)===g&&(Ci===4||Ci===3&&(Yi&130023424)===Yi&&500>se()-k_?ou(a,0):O_|=g),zr(a,u)}function vE(a,u){u===0&&(a.mode&1?(u=Ht,Ht<<=1,!(Ht&130023424)&&(Ht=4194304)):u=1);var g=Er();a=ns(a,u),a!==null&&(Kn(a,u,g),zr(a,g))}function _L(a){var u=a.memoizedState,g=0;u!==null&&(g=u.retryLane),vE(a,g)}function xL(a,u){var g=0;switch(a.tag){case 13:var A=a.stateNode,T=a.memoizedState;T!==null&&(g=T.retryLane);break;case 19:A=a.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(u),vE(a,g)}var yE;yE=function(a,u,g){if(a!==null)if(a.memoizedProps!==u.pendingProps||Wi.current)tn=!0;else{if(!(a.lanes&g)&&!(u.flags&128))return tn=!1,aL(a,u,g);tn=!!(a.flags&131072)}else tn=!1,Dn&&u.flags&1048576&&lp(u,sh,u.index);switch(u.lanes=0,u.tag){case 2:var A=u.type;Yg(a,u),a=u.pendingProps;var T=xa(u,Si.current);ko(u,g),T=$c(null,u,A,a,T,g);var I=gp();return u.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Bi(A)?(I=!0,Aa(u)):I=!1,u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Qt(u),T.updater=gh,u.stateNode=T,T._reactInternals=u,_(u,A,a,g),u=Kt(null,u,A,!0,I,g)):(u.tag=0,Dn&&I&&cp(u),dt(null,u,T,g),u=u.child),u;case 16:A=u.elementType;e:{switch(Yg(a,u),a=u.pendingProps,T=A._init,A=T(A._payload),u.type=A,T=u.tag=SL(A),a=Ur(A,a),T){case 0:u=at(null,u,A,a,g);break e;case 1:u=Tt(null,u,A,a,g);break e;case 11:u=Ti(null,u,A,a,g);break e;case 14:u=wr(null,u,A,Ur(A.type,a),g);break e}throw Error(t(306,A,""))}return u;case 0:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:Ur(A,T),at(a,u,A,T,g);case 1:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:Ur(A,T),Tt(a,u,A,T,g);case 3:e:{if(Jt(u),a===null)throw Error(t(387));A=u.pendingProps,I=u.memoizedState,T=I.element,qn(a,u),Vn(u,A,null,g);var O=u.memoizedState;if(A=O.element,I.isDehydrated)if(I={element:A,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){T=E(Error(t(423)),u),u=hn(a,u,A,g,T);break e}else if(A!==T){T=E(Error(t(424)),u),u=hn(a,u,A,g,T);break e}else for(Xi=Js(u.stateNode.containerInfo.firstChild),wi=u,Dn=!0,kr=null,g=Xc(u,null,A,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Oo(),A===T){u=La(a,u,g);break e}dt(a,u,A,g)}u=u.child}return u;case 5:return Ia(u),a===null&&ah(u),A=u.type,T=u.pendingProps,I=a!==null?a.memoizedProps:null,O=T.children,tp(A,T)?O=null:I!==null&&tp(A,I)&&(u.flags|=32),Me(a,u),dt(a,u,O,g),u.child;case 6:return a===null&&ah(u),null;case 13:return so(a,u,g);case 4:return qc(u,u.stateNode.containerInfo),A=u.pendingProps,a===null?u.child=Ea(u,null,A,g):dt(a,u,A,g),u.child;case 11:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:Ur(A,T),Ti(a,u,A,T,g);case 7:return dt(a,u,u.pendingProps,g),u.child;case 8:return dt(a,u,u.pendingProps.children,g),u.child;case 12:return dt(a,u,u.pendingProps.children,g),u.child;case 10:e:{if(A=u.type._context,T=u.pendingProps,I=u.memoizedProps,O=T.value,Mn(Ma,A._currentValue),A._currentValue=O,I!==null)if(gr(I.value,O)){if(I.children===T.children&&!Wi.current){u=La(a,u,g);break e}}else for(I=u.child,I!==null&&(I.return=u);I!==null;){var $=I.dependencies;if($!==null){O=I.child;for(var ne=$.firstContext;ne!==null;){if(ne.context===A){if(I.tag===1){ne=wn(-1,g&-g),ne.tag=2;var Ae=I.updateQueue;if(Ae!==null){Ae=Ae.shared;var He=Ae.pending;He===null?ne.next=ne:(ne.next=He.next,He.next=ne),Ae.pending=ne}}I.lanes|=g,ne=I.alternate,ne!==null&&(ne.lanes|=g),Kc(I.return,g,u),$.lanes|=g;break}ne=ne.next}}else if(I.tag===10)O=I.type===u.type?null:I.child;else if(I.tag===18){if(O=I.return,O===null)throw Error(t(341));O.lanes|=g,$=O.alternate,$!==null&&($.lanes|=g),Kc(O,g,u),O=I.sibling}else O=I.child;if(O!==null)O.return=I;else for(O=I;O!==null;){if(O===u){O=null;break}if(I=O.sibling,I!==null){I.return=O.return,O=I;break}O=O.return}I=O}dt(a,u,T.children,g),u=u.child}return u;case 9:return T=u.type,A=u.pendingProps.children,ko(u,g),T=_r(T),A=A(T),u.flags|=1,dt(a,u,A,g),u.child;case 14:return A=u.type,T=Ur(A,u.pendingProps),T=Ur(A.type,T),wr(a,u,A,T,g);case 15:return _e(a,u,u.type,u.pendingProps,g);case 17:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:Ur(A,T),Yg(a,u),u.tag=1,Bi(A)?(a=!0,Aa(u)):a=!1,ko(u,g),h(u,A,T),_(u,A,T,g),Kt(null,u,A,!0,a,g);case 19:return Y1(a,u,g);case 22:return de(a,u,g)}throw Error(t(156,u.tag))};function _E(a,u){return G(a,u)}function AL(a,u,g,A){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(a,u,g,A){return new AL(a,u,g,A)}function X_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function SL(a){if(typeof a=="function")return X_(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ae)return 11;if(a===ve)return 14}return 2}function Wl(a,u){var g=a.alternate;return g===null?(g=Is(a.tag,u,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=u,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,u=a.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function ov(a,u,g,A,T,I){var O=2;if(A=a,typeof a=="function")X_(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case k:return lu(g.children,T,I,u);case H:O=8,T|=8;break;case L:return a=Is(12,g,u,T|2),a.elementType=L,a.lanes=I,a;case re:return a=Is(13,g,u,T),a.elementType=re,a.lanes=I,a;case ge:return a=Is(19,g,u,T),a.elementType=ge,a.lanes=I,a;case he:return av(g,T,I,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:O=10;break e;case V:O=9;break e;case ae:O=11;break e;case ve:O=14;break e;case fe:O=16,A=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=Is(O,g,u,T),u.elementType=a,u.type=A,u.lanes=I,u}function lu(a,u,g,A){return a=Is(7,a,A,u),a.lanes=g,a}function av(a,u,g,A){return a=Is(22,a,A,u),a.elementType=he,a.lanes=g,a.stateNode={isHidden:!1},a}function J_(a,u,g){return a=Is(6,a,null,u),a.lanes=g,a}function K_(a,u,g){return u=Is(4,a.children!==null?a.children:[],a.key,u),u.lanes=g,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function wL(a,u,g,A,T){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=A,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function Y_(a,u,g,A,T,I,O,$,ne){return a=new wL(a,u,g,$,ne),u===1?(u=1,I===!0&&(u|=8)):u=0,I=Is(3,null,null,u),a.current=I,I.stateNode=a,I.memoizedState={element:A,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qt(I),a}function EL(a,u,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:A==null?null:""+A,children:a,containerInfo:u,implementation:g}}function xE(a){if(!a)return Ys;a=a._reactInternals;e:{if(ys(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Bi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Bi(g))return zc(a,g,u)}return u}function AE(a,u,g,A,T,I,O,$,ne){return a=Y_(g,A,!0,a,T,I,O,$,ne),a.context=xE(null),g=a.current,A=Er(),T=Gl(g),I=wn(A,T),I.callback=u??null,Fn(g,I,T),a.current.lanes=T,Kn(a,T,A),zr(a,A),a}function lv(a,u,g,A){var T=u.current,I=Er(),O=Gl(T);return g=xE(g),u.context===null?u.context=g:u.pendingContext=g,u=wn(I,O),u.payload={element:a},A=A===void 0?null:A,A!==null&&(u.callback=A),a=Fn(T,u,O),a!==null&&(lo(a,T,O,I),Li(a,T,O)),O}function cv(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function SE(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<u?g:u}}function q_(a,u){SE(a,u),(a=a.alternate)&&SE(a,u)}function ML(){return null}var wE=typeof reportError=="function"?reportError:function(a){console.error(a)};function Q_(a){this._internalRoot=a}uv.prototype.render=Q_.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));lv(a,u,null,null)},uv.prototype.unmount=Q_.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;su(function(){lv(null,a,null,null)}),u[yr]=null}};function uv(a){this._internalRoot=a}uv.prototype.unstable_scheduleHydration=function(a){if(a){var u=Ed();a={blockedOn:null,target:a,priority:u};for(var g=0;g<Ro.length&&u!==0&&u<Ro[g].priority;g++);Ro.splice(g,0,a),g===0&&Cd(a)}};function $_(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function dv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function EE(){}function TL(a,u,g,A,T){if(T){if(typeof A=="function"){var I=A;A=function(){var Ae=cv(O);I.call(Ae)}}var O=AE(u,A,a,0,null,!1,!1,"",EE);return a._reactRootContainer=O,a[yr]=O.current,bl(a.nodeType===8?a.parentNode:a),su(),O}for(;T=a.lastChild;)a.removeChild(T);if(typeof A=="function"){var $=A;A=function(){var Ae=cv(ne);$.call(Ae)}}var ne=Y_(a,0,!1,null,null,!1,!1,"",EE);return a._reactRootContainer=ne,a[yr]=ne.current,bl(a.nodeType===8?a.parentNode:a),su(function(){lv(u,ne,g,A)}),ne}function hv(a,u,g,A,T){var I=g._reactRootContainer;if(I){var O=I;if(typeof T=="function"){var $=T;T=function(){var ne=cv(O);$.call(ne)}}lv(u,O,a,T)}else O=TL(g,u,a,T,A);return cv(O)}Ec=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var g=ei(u.pendingLanes);g!==0&&(xs(u,g|1),zr(u,se()),!(vn&6)&&(_h=se()+500,Ms()))}break;case 13:su(function(){var A=ns(a,1);if(A!==null){var T=Er();lo(A,a,1,T)}}),q_(a,1)}},Of=function(a){if(a.tag===13){var u=ns(a,134217728);if(u!==null){var g=Er();lo(u,a,134217728,g)}q_(a,134217728)}},Sg=function(a){if(a.tag===13){var u=Gl(a),g=ns(a,u);if(g!==null){var A=Er();lo(g,a,u,A)}q_(a,u)}},Ed=function(){return en},Md=function(a,u){var g=en;try{return en=a,u()}finally{en=g}},Ve=function(a,u,g){switch(u){case"input":if(Ze(a,g),u=g.name,g.type==="radio"&&u!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<g.length;u++){var A=g[u];if(A!==a&&A.form===a.form){var T=nh(A);if(!T)throw Error(t(90));De(A),Ze(A,T)}}}break;case"textarea":Te(a,g);break;case"select":u=g.value,u!=null&&J(a,!!g.multiple,u,!1)}},cn=V_,Cn=su;var CL={usingClientEntryPoint:!1,Events:[Ks,Yn,nh,nt,It,V_]},Ip={findFiberByHostInstance:Fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bL={bundleType:Ip.bundleType,version:Ip.version,rendererPackageName:Ip.rendererPackageName,rendererConfig:Ip.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Sd(a),a===null?null:a.stateNode},findFiberByHostInstance:Ip.findFiberByHostInstance||ML,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fv.isDisabled&&fv.supportsFiber)try{xt=fv.inject(bL),pt=fv}catch{}}return Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CL,Gr.createPortal=function(a,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$_(u))throw Error(t(200));return EL(a,u,null,g)},Gr.createRoot=function(a,u){if(!$_(a))throw Error(t(299));var g=!1,A="",T=wE;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(A=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=Y_(a,1,!1,null,null,g,!1,A,T),a[yr]=u.current,bl(a.nodeType===8?a.parentNode:a),new Q_(u)},Gr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Sd(u),a=a===null?null:a.stateNode,a},Gr.flushSync=function(a){return su(a)},Gr.hydrate=function(a,u,g){if(!dv(u))throw Error(t(200));return hv(null,a,u,!0,g)},Gr.hydrateRoot=function(a,u,g){if(!$_(a))throw Error(t(405));var A=g!=null&&g.hydratedSources||null,T=!1,I="",O=wE;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onRecoverableError!==void 0&&(O=g.onRecoverableError)),u=AE(u,null,a,1,g??null,T,!1,I,O),a[yr]=u.current,bl(a),A)for(a=0;a<A.length;a++)g=A[a],T=g._getVersion,T=T(g._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[g,T]:u.mutableSourceEagerHydrationData.push(g,T);return new uv(u)},Gr.render=function(a,u,g){if(!dv(u))throw Error(t(200));return hv(null,a,u,!1,g)},Gr.unmountComponentAtNode=function(a){if(!dv(a))throw Error(t(40));return a._reactRootContainer?(su(function(){hv(null,null,a,!1,function(){a._reactRootContainer=null,a[yr]=null})}),!0):!1},Gr.unstable_batchedUpdates=V_,Gr.unstable_renderSubtreeIntoContainer=function(a,u,g,A){if(!dv(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return hv(a,u,g,!1,A)},Gr.version="18.3.1-next-f1338f8080-20240426",Gr}var DE;function OL(){if(DE)return tx.exports;DE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tx.exports=FL(),tx.exports}var BE;function kL(){if(BE)return pv;BE=1;var n=OL();return pv.createRoot=n.createRoot,pv.hydrateRoot=n.hydrateRoot,pv}var _R=kL(),Dp={},LE;function UL(){if(LE)return Dp;LE=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.parse=o,Dp.serialize=d;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function o(v,y){const S=new s,M=v.length;if(M<2)return S;const w=(y==null?void 0:y.decode)||p;let x=0;do{const C=v.indexOf("=",x);if(C===-1)break;const b=v.indexOf(";",x),P=b===-1?M:b;if(C>P){x=v.lastIndexOf(";",C-1)+1;continue}const F=l(v,x,C),N=c(v,C,F),k=v.slice(F,N);if(S[k]===void 0){let H=l(v,C+1,P),L=c(v,P,H);const B=w(v.slice(H,L));S[k]=B}x=P+1}while(x<M);return S}function l(v,y,S){do{const M=v.charCodeAt(y);if(M!==32&&M!==9)return y}while(++y<S);return S}function c(v,y,S){for(;y>S;){const M=v.charCodeAt(--y);if(M!==32&&M!==9)return y+1}return S}function d(v,y,S){const M=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=M(y);if(!e.test(w))throw new TypeError(`argument val is invalid: ${y}`);let x=v+"="+w;if(!S)return x;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);x+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);x+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);x+="; Path="+S.path}if(S.expires){if(!m(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);x+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(x+="; HttpOnly"),S.secure&&(x+="; Secure"),S.partitioned&&(x+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return x}function p(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function m(v){return r.call(v)==="[object Date]"}return Dp}UL();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var NE="popstate";function HL(n={}){function e(i,r){let{pathname:s,search:o,hash:l}=i.location;return jA("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Em(r)}return GL(e,t,null,n)}function Xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zL(){return Math.random().toString(36).substring(2,10)}function FE(n,e){return{usr:n.state,key:n.key,idx:e}}function jA(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?wf(e):e,state:t,key:e&&e.key||i||zL()}}function Em({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function wf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function GL(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l="POP",c=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function m(){l="POP";let w=p(),x=w==null?null:w-d;d=w,c&&c({action:l,location:M.location,delta:x})}function v(w,x){l="PUSH";let C=jA(M.location,w,x);d=p()+1;let b=FE(C,d),P=M.createHref(C);try{o.pushState(b,"",P)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(P)}s&&c&&c({action:l,location:M.location,delta:1})}function y(w,x){l="REPLACE";let C=jA(M.location,w,x);d=p();let b=FE(C,d),P=M.createHref(C);o.replaceState(b,"",P),s&&c&&c({action:l,location:M.location,delta:0})}function S(w){let x=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof w=="string"?w:Em(w);return C=C.replace(/ $/,"%20"),Xn(x,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,x)}let M={get action(){return l},get location(){return n(r,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(NE,m),c=w,()=>{r.removeEventListener(NE,m),c=null}},createHref(w){return e(r,w)},createURL:S,encodeLocation(w){let x=S(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:y,go(w){return o.go(w)}};return M}function xR(n,e,t="/"){return VL(n,e,t,!1)}function VL(n,e,t,i){let r=typeof e=="string"?wf(e):e,s=dc(r.pathname||"/",t);if(s==null)return null;let o=AR(n);WL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=tN(s);l=ZL(o[c],d,i)}return l}function AR(n,e=[],t=[],i=""){let r=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Xn(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let d=Qa([i,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(Xn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),AR(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:QL(d,s.index),routesMeta:p})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let c of SR(s.path))r(s,o,c)}),e}function SR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=SR(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function WL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$L(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var jL=/^:[\w-]+$/,XL=3,JL=2,KL=1,YL=10,qL=-2,OE=n=>n==="*";function QL(n,e){let t=n.split("/"),i=t.length;return t.some(OE)&&(i+=qL),e&&(i+=JL),t.filter(r=>!OE(r)).reduce((r,s)=>r+(jL.test(s)?XL:s===""?KL:YL),i)}function $L(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function ZL(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],d=l===i.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=R0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),v=c.route;if(!m&&d&&t&&!i[i.length-1].route.index&&(m=R0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:Qa([s,m.pathname]),pathnameBase:sN(Qa([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Qa([s,m.pathnameBase]))}return o}function R0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=eN(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((d,{paramName:p,isOptional:m},v)=>{if(p==="*"){let S=l[v]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=l[v];return m&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:n}}function eN(n,e=!1,t=!0){vo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function tN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vo(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function nN(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?wf(n):n;return{pathname:t?t.startsWith("/")?t:iN(t,e):e,search:oN(i),hash:aN(r)}}function iN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function rx(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jS(n){let e=rN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function XS(n,e,t,i=!1){let r;typeof n=="string"?r=wf(n):(r={...n},Xn(!r.pathname||!r.pathname.includes("?"),rx("?","pathname","search",r)),Xn(!r.pathname||!r.pathname.includes("#"),rx("#","pathname","hash",r)),Xn(!r.search||!r.search.includes("#"),rx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!i&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;r.pathname=v.join("/")}l=m>=0?e[m]:"/"}let c=nN(r,l),d=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}var Qa=n=>n.join("/").replace(/\/\/+/g,"/"),sN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var wR=["POST","PUT","PATCH","DELETE"];new Set(wR);var cN=["GET",...wR];new Set(cN);var Ef=j.createContext(null);Ef.displayName="DataRouter";var Ly=j.createContext(null);Ly.displayName="DataRouterState";var ER=j.createContext({isTransitioning:!1});ER.displayName="ViewTransition";var uN=j.createContext(new Map);uN.displayName="Fetchers";var dN=j.createContext(null);dN.displayName="Await";var So=j.createContext(null);So.displayName="Navigation";var Xm=j.createContext(null);Xm.displayName="Location";var ea=j.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var JS=j.createContext(null);JS.displayName="RouteError";function hN(n,{relative:e}={}){Xn(Mf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=j.useContext(So),{hash:r,pathname:s,search:o}=Km(n,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Qa([t,s])),i.createHref({pathname:l,search:o,hash:r})}function Mf(){return j.useContext(Xm)!=null}function vc(){return Xn(Mf(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Xm).location}var MR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TR(n){j.useContext(So).static||j.useLayoutEffect(n)}function Jm(){let{isDataRoute:n}=j.useContext(ea);return n?MN():fN()}function fN(){Xn(Mf(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Ef),{basename:e,navigator:t}=j.useContext(So),{matches:i}=j.useContext(ea),{pathname:r}=vc(),s=JSON.stringify(jS(i)),o=j.useRef(!1);return TR(()=>{o.current=!0}),j.useCallback((c,d={})=>{if(vo(o.current,MR),!o.current)return;if(typeof c=="number"){t.go(c);return}let p=XS(c,JSON.parse(s),r,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Qa([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,s,r,n])}j.createContext(null);function Km(n,{relative:e}={}){let{matches:t}=j.useContext(ea),{pathname:i}=vc(),r=JSON.stringify(jS(t));return j.useMemo(()=>XS(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function pN(n,e){return CR(n,e)}function CR(n,e,t,i){var x;Xn(Mf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=j.useContext(So),{matches:s}=j.useContext(ea),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",p=o&&o.route;{let C=p&&p.path||"";bR(c,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=vc(),v;if(e){let C=typeof e=="string"?wf(e):e;Xn(d==="/"||((x=C.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=m;let y=v.pathname||"/",S=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let M=xR(n,{pathname:S});vo(p||M!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),vo(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=_N(M&&M.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Qa([d,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Qa([d,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,i);return e&&w?j.createElement(Xm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},w):w}function mN(){let n=EN(),e=lN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,o)}var gN=j.createElement(mN,null),vN=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(ea.Provider,{value:this.props.routeContext},j.createElement(JS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yN({routeContext:n,match:e,children:t}){let i=j.useContext(Ef);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(ea.Provider,{value:n},t)}function _N(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,s=t==null?void 0:t.errors;if(s!=null){let c=r.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Xn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(t)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:p,errors:m}=t,v=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,p)=>{let m,v=!1,y=null,S=null;t&&(m=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||gN,o&&(l<0&&p===0?(bR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):l===p&&(v=!0,S=d.route.hydrateFallbackElement||null)));let M=e.concat(r.slice(0,p+1)),w=()=>{let x;return m?x=y:v?x=S:d.route.Component?x=j.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,j.createElement(yN,{match:d,routeContext:{outlet:c,matches:M,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?j.createElement(vN,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):w()},null)}function KS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xN(n){let e=j.useContext(Ef);return Xn(e,KS(n)),e}function AN(n){let e=j.useContext(Ly);return Xn(e,KS(n)),e}function SN(n){let e=j.useContext(ea);return Xn(e,KS(n)),e}function YS(n){let e=SN(n),t=e.matches[e.matches.length-1];return Xn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function wN(){return YS("useRouteId")}function EN(){var i;let n=j.useContext(JS),e=AN("useRouteError"),t=YS("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function MN(){let{router:n}=xN("useNavigate"),e=YS("useNavigate"),t=j.useRef(!1);return TR(()=>{t.current=!0}),j.useCallback(async(r,s={})=>{vo(t.current,MR),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var kE={};function bR(n,e,t){!e&&!kE[n]&&(kE[n]=!0,vo(!1,t))}j.memo(TN);function TN({routes:n,future:e,state:t}){return CR(n,void 0,t,e)}function RR({to:n,replace:e,state:t,relative:i}){Xn(Mf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=j.useContext(So);vo(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=j.useContext(ea),{pathname:o}=vc(),l=Jm(),c=XS(n,jS(s),o,i==="path"),d=JSON.stringify(c);return j.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:i})},[l,d,i,e,t]),null}function zh(n){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1}){Xn(!Mf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),l=j.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=wf(t));let{pathname:c="/",search:d="",hash:p="",state:m=null,key:v="default"}=t,y=j.useMemo(()=>{let S=dc(c,o);return S==null?null:{location:{pathname:S,search:d,hash:p,state:m,key:v},navigationType:i}},[o,c,d,p,m,v,i]);return vo(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:j.createElement(So.Provider,{value:l},j.createElement(Xm.Provider,{children:e,value:y}))}function bN({children:n,location:e}){return pN(XA(n),e)}function XA(n,e=[]){let t=[];return j.Children.forEach(n,(i,r)=>{if(!j.isValidElement(i))return;let s=[...e,r];if(i.type===j.Fragment){t.push.apply(t,XA(i.props.children,s));return}Xn(i.type===zh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=XA(i.props.children,s)),t.push(o)}),t}var v0="get",y0="application/x-www-form-urlencoded";function Ny(n){return n!=null&&typeof n.tagName=="string"}function RN(n){return Ny(n)&&n.tagName.toLowerCase()==="button"}function IN(n){return Ny(n)&&n.tagName.toLowerCase()==="form"}function PN(n){return Ny(n)&&n.tagName.toLowerCase()==="input"}function DN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BN(n,e){return n.button===0&&(!e||e==="_self")&&!DN(n)}var mv=null;function LN(){if(mv===null)try{new FormData(document.createElement("form"),0),mv=!1}catch{mv=!0}return mv}var NN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sx(n){return n!=null&&!NN.has(n)?(vo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${y0}"`),null):n}function FN(n,e){let t,i,r,s,o;if(IN(n)){let l=n.getAttribute("action");i=l?dc(l,e):null,t=n.getAttribute("method")||v0,r=sx(n.getAttribute("enctype"))||y0,s=new FormData(n)}else if(RN(n)||PN(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(i=c?dc(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||v0,r=sx(n.getAttribute("formenctype"))||sx(l.getAttribute("enctype"))||y0,s=new FormData(l,n),!LN()){let{name:d,type:p,value:m}=n;if(p==="image"){let v=d?`${d}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else d&&s.append(d,m)}}else{if(Ny(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=v0,i=null,r=y0,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:o}}function qS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function ON(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function UN(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await ON(s,t);return o.links?o.links():[]}return[]}));return VN(i.flat(1).filter(kN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function UE(n,e,t,i,r,s){let o=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,l=(c,d)=>{var p;return t[d].pathname!==c.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var m;let p=i.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function HN(n,e){return zN(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let r=[i.module];return i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function zN(n){return[...new Set(n)]}function GN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function VN(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(GN(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}function WN(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function jN(){let n=j.useContext(Ef);return qS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function XN(){let n=j.useContext(Ly);return qS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var QS=j.createContext(void 0);QS.displayName="FrameworkContext";function IR(){let n=j.useContext(QS);return qS(n,"You must render this element inside a <HydratedRouter> element"),n}function JN(n,e){let t=j.useContext(QS),[i,r]=j.useState(!1),[s,o]=j.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:p,onTouchStart:m}=e,v=j.useRef(null);j.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let M=x=>{x.forEach(C=>{o(C.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),j.useEffect(()=>{if(i){let M=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(M)}}},[i]);let y=()=>{r(!0)},S=()=>{r(!1),o(!1)};return t?n!=="intent"?[s,v,{}]:[s,v,{onFocus:Bp(l,y),onBlur:Bp(c,S),onMouseEnter:Bp(d,y),onMouseLeave:Bp(p,S),onTouchStart:Bp(m,y)}]:[!1,v,{}]}function Bp(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function KN({page:n,...e}){let{router:t}=jN(),i=j.useMemo(()=>xR(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?j.createElement(qN,{page:n,matches:i,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function YN(n){let{manifest:e,routeModules:t}=IR(),[i,r]=j.useState([]);return j.useEffect(()=>{let s=!1;return UN(n,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[n,e,t]),i}function qN({page:n,matches:e,...t}){let i=vc(),{manifest:r,routeModules:s}=IR(),{loaderData:o,matches:l}=XN(),c=j.useMemo(()=>UE(n,e,l,r,i,"data"),[n,e,l,r,i]),d=j.useMemo(()=>UE(n,e,l,r,i,"assets"),[n,e,l,r,i]),p=j.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let y=new Set,S=!1;if(e.forEach(w=>{var C;let x=r.routes[w.route.id];!x||!x.hasLoader||(!c.some(b=>b.route.id===w.route.id)&&w.route.id in o&&((C=s[w.route.id])!=null&&C.shouldRevalidate)||x.hasClientLoader?S=!0:y.add(w.route.id))}),y.size===0)return[];let M=WN(n);return S&&y.size>0&&M.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[M.pathname+M.search]},[o,i,r,c,e,n,s]),m=j.useMemo(()=>HN(d,r),[d,r]),v=YN(d);return j.createElement(j.Fragment,null,p.map(y=>j.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),m.map(y=>j.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),v.map(({key:y,link:S})=>j.createElement("link",{key:y,...S})))}function QN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var PR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PR&&(window.__reactRouterVersion="7.0.2")}catch{}function $N({basename:n,children:e,window:t}){let i=j.useRef();i.current==null&&(i.current=HL({window:t,v5Compat:!0}));let r=i.current,[s,o]=j.useState({action:r.action,location:r.location}),l=j.useCallback(c=>{j.startTransition(()=>o(c))},[o]);return j.useLayoutEffect(()=>r.listen(l),[r,l]),j.createElement(CN,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:r})}var DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cd=j.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:p,viewTransition:m,...v},y){let{basename:S}=j.useContext(So),M=typeof d=="string"&&DR.test(d),w,x=!1;if(typeof d=="string"&&M&&(w=d,PR))try{let L=new URL(window.location.href),B=d.startsWith("//")?new URL(L.protocol+d):new URL(d),V=dc(B.pathname,S);B.origin===L.origin&&V!=null?d=V+B.search+B.hash:x=!0}catch{vo(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=hN(d,{relative:r}),[b,P,F]=JN(i,v),N=nF(d,{replace:o,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:m});function k(L){e&&e(L),L.defaultPrevented||N(L)}let H=j.createElement("a",{...v,...F,href:w||C,onClick:x||s?e:k,ref:QN(y,P),target:c,"data-discover":!M&&t==="render"?"true":void 0});return b&&!M?j.createElement(j.Fragment,null,H,j.createElement(KN,{page:C})):H});cd.displayName="Link";var ZN=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:l,children:c,...d},p){let m=Km(o,{relative:d.relative}),v=vc(),y=j.useContext(Ly),{navigator:S,basename:M}=j.useContext(So),w=y!=null&&aF(m)&&l===!0,x=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,C=v.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(C=C.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&M&&(b=dc(b,M)||b);const P=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let F=C===x||!r&&C.startsWith(x)&&C.charAt(P)==="/",N=b!=null&&(b===x||!r&&b.startsWith(x)&&b.charAt(x.length)==="/"),k={isActive:F,isPending:N,isTransitioning:w},H=F?e:void 0,L;typeof i=="function"?L=i(k):L=[i,F?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(k):s;return j.createElement(cd,{...d,"aria-current":H,className:L,ref:p,style:B,to:o,viewTransition:l},typeof c=="function"?c(k):c)});ZN.displayName="NavLink";var eF=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:o=v0,action:l,onSubmit:c,relative:d,preventScrollReset:p,viewTransition:m,...v},y)=>{let S=sF(),M=oF(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&DR.test(l),C=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let P=b.nativeEvent.submitter,F=(P==null?void 0:P.getAttribute("formmethod"))||o;S(P||b.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:r,state:s,relative:d,preventScrollReset:p,viewTransition:m})};return j.createElement("form",{ref:y,method:w,action:M,onSubmit:i?c:C,...v,"data-discover":!x&&n==="render"?"true":void 0})});eF.displayName="Form";function tF(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BR(n){let e=j.useContext(Ef);return Xn(e,tF(n)),e}function nF(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:o}={}){let l=Jm(),c=vc(),d=Km(n,{relative:s});return j.useCallback(p=>{if(BN(p,e)){p.preventDefault();let m=t!==void 0?t:Em(c)===Em(d);l(n,{replace:m,state:i,preventScrollReset:r,relative:s,viewTransition:o})}},[c,l,d,t,i,e,n,r,s,o])}var iF=0,rF=()=>`__${String(++iF)}__`;function sF(){let{router:n}=BR("useSubmit"),{basename:e}=j.useContext(So),t=wN();return j.useCallback(async(i,r={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=FN(i,e);if(r.navigate===!1){let p=r.fetcherKey||rF();await n.fetch(p,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function oF(n,{relative:e}={}){let{basename:t}=j.useContext(So),i=j.useContext(ea);Xn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Km(n||".",{relative:e})},o=vc();if(n==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(m=>m).forEach(m=>l.append("index",m));let p=l.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Qa([t,s.pathname])),Em(s)}function aF(n,e={}){let t=j.useContext(ER);Xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=BR("useViewTransitionState"),r=Km(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=dc(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=dc(t.nextLocation.pathname,i)||t.nextLocation.pathname;return R0(r.pathname,o)!=null||R0(r.pathname,s)!=null}new TextEncoder;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Tf="171",Mu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LR=0,JA=1,NR=2,lF=3,FR=0,Fy=1,cm=2,po=3,$o=0,br=1,Os=2,$a=0,Gu=1,KA=2,YA=3,qA=4,OR=5,ic=100,kR=101,UR=102,HR=103,zR=104,GR=200,VR=201,WR=202,jR=203,I0=204,P0=205,XR=206,JR=207,KR=208,YR=209,qR=210,QR=211,$R=212,ZR=213,eI=214,D0=0,B0=1,L0=2,Yu=3,N0=4,F0=5,O0=6,k0=7,Ym=0,tI=1,nI=2,Wo=0,iI=1,rI=2,sI=3,$S=4,oI=5,aI=6,lI=7,QA="attached",cI="detached",Oy=300,sl=301,hc=302,Mm=303,Tm=304,Cf=306,fc=1e3,cs=1001,uf=1002,Ui=1003,ky=1004,cF=1004,Bu=1005,uF=1005,di=1006,nf=1007,dF=1007,ks=1008,hF=1008,yo=1009,ZS=1010,ew=1011,df=1012,Uy=1013,ol=1014,Jr=1015,bf=1016,Hy=1017,zy=1018,qu=1020,tw=35902,nw=1021,iw=1022,ur=1023,rw=1024,sw=1025,Vu=1026,Qu=1027,Gy=1028,qm=1029,ow=1030,Vy=1031,fF=1032,Wy=1033,um=33776,dm=33777,hm=33778,fm=33779,U0=35840,H0=35841,z0=35842,G0=35843,V0=36196,W0=37492,j0=37496,X0=37808,J0=37809,K0=37810,Y0=37811,q0=37812,Q0=37813,$0=37814,Z0=37815,ey=37816,ty=37817,ny=37818,iy=37819,ry=37820,sy=37821,pm=36492,oy=36494,ay=36495,aw=36283,ly=36284,cy=36285,uy=36286,uI=2200,dI=2201,hI=2202,hf=2300,ff=2301,_0=2302,Lu=2400,Nu=2401,Cm=2402,jy=2500,lw=2501,fI=0,cw=1,dy=2,pI=3200,mI=3201,pF=3202,mF=3203,yc=0,gI=1,Wa="",jr="srgb",$u="srgb-linear",bm="linear",Tn="srgb",gF=0,Cu=7680,vF=7681,yF=7682,_F=7683,xF=34055,AF=34056,SF=5386,wF=512,EF=513,MF=514,TF=515,CF=516,bF=517,RF=518,$A=519,vI=512,yI=513,_I=514,uw=515,xI=516,AI=517,SI=518,wI=519,Rm=35044,Wu=35048,IF=35040,PF=35045,DF=35049,BF=35041,LF=35046,NF=35050,FF=35042,OF="100",ZA="300 es",Go=2e3,Im=2001;let ta=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HE=1234567;const ju=Math.PI/180,pf=180/Math.PI;function ds(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(or[n&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[t&63|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[i&255]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]).toLowerCase()}function Yt(n,e,t){return Math.max(e,Math.min(t,n))}function dw(n,e){return(n%e+e)%e}function kF(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function UF(n,e,t){return n!==e?(t-n)/(e-n):0}function mm(n,e,t){return(1-t)*n+t*e}function HF(n,e,t,i){return mm(n,e,1-Math.exp(-t*i))}function zF(n,e=1){return e-Math.abs(dw(n,e*2)-e)}function GF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function VF(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function WF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function jF(n,e){return n+Math.random()*(e-n)}function XF(n){return n*(.5-Math.random())}function JF(n){n!==void 0&&(HE=n);let e=HE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function KF(n){return n*ju}function YF(n){return n*pf}function qF(n){return(n&n-1)===0&&n!==0}function QF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $F(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ZF(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),d=s((e+i)/2),p=o((e+i)/2),m=s((e-i)/2),v=o((e-i)/2),y=s((i-e)/2),S=o((i-e)/2);switch(r){case"XYX":n.set(l*p,c*m,c*v,l*d);break;case"YZY":n.set(c*v,l*p,c*m,l*d);break;case"ZXZ":n.set(c*m,c*v,l*p,l*d);break;case"XZX":n.set(l*p,c*S,c*y,l*d);break;case"YXY":n.set(c*y,l*p,c*S,l*d);break;case"ZYZ":n.set(c*S,c*y,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Cr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const EI={DEG2RAD:ju,RAD2DEG:pf,generateUUID:ds,clamp:Yt,euclideanModulo:dw,mapLinear:kF,inverseLerp:UF,lerp:mm,damp:HF,pingpong:zF,smoothstep:GF,smootherstep:VF,randInt:WF,randFloat:jF,randFloatSpread:XF,seededRandom:JF,degToRad:KF,radToDeg:YF,isPowerOfTwo:qF,ceilPowerOfTwo:QF,floorPowerOfTwo:$F,setQuaternionFromProperEuler:ZF,normalize:nn,denormalize:Cr};class Be{constructor(e=0,t=0){Be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $t{constructor(e,t,i,r,s,o,l,c,d){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,l,c,d)}set(e,t,i,r,s,o,l,c,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=i,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],c=i[6],d=i[1],p=i[4],m=i[7],v=i[2],y=i[5],S=i[8],M=r[0],w=r[3],x=r[6],C=r[1],b=r[4],P=r[7],F=r[2],N=r[5],k=r[8];return s[0]=o*M+l*C+c*F,s[3]=o*w+l*b+c*N,s[6]=o*x+l*P+c*k,s[1]=d*M+p*C+m*F,s[4]=d*w+p*b+m*N,s[7]=d*x+p*P+m*k,s[2]=v*M+y*C+S*F,s[5]=v*w+y*b+S*N,s[8]=v*x+y*P+S*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8];return t*o*p-t*l*d-i*s*p+i*l*c+r*s*d-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8],m=p*o-l*d,v=l*c-p*s,y=d*s-o*c,S=t*m+i*v+r*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/S;return e[0]=m*M,e[1]=(r*d-p*i)*M,e[2]=(l*i-r*o)*M,e[3]=v*M,e[4]=(p*t-r*c)*M,e[5]=(r*s-l*t)*M,e[6]=y*M,e[7]=(i*c-d*t)*M,e[8]=(o*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const c=Math.cos(s),d=Math.sin(s);return this.set(i*c,i*d,-i*(c*o+d*l)+o+e,-r*d,r*c,-r*(-d*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(ox.makeScale(e,t)),this}rotate(e){return this.premultiply(ox.makeRotation(-e)),this}translate(e,t){return this.premultiply(ox.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ox=new $t;function MI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const eO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function jh(n,e){return new eO[n](e)}function Pm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function TI(){const n=Pm("canvas");return n.style.display="block",n}const zE={};function Gh(n){n in zE||(zE[n]=!0,console.warn(n))}function tO(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function nO(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function iO(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const GE=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),VE=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rO(){const n={enabled:!0,workingColorSpace:$u,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Tn&&(r.r=Za(r.r),r.g=Za(r.g),r.b=Za(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Tn&&(r.r=rf(r.r),r.g=rf(r.g),r.b=rf(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Wa?bm:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[$u]:{primaries:e,whitePoint:i,transfer:bm,toXYZ:GE,fromXYZ:VE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:jr},outputColorSpaceConfig:{drawingBufferColorSpace:jr}},[jr]:{primaries:e,whitePoint:i,transfer:Tn,toXYZ:GE,fromXYZ:VE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:jr}}}),n}const gn=rO();function Za(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function rf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ah;class CI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ah===void 0&&(Ah=Pm("canvas")),Ah.width=e.width,Ah.height=e.height;const i=Ah.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ah}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Pm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Za(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Za(t[i]/255)*255):t[i]=Za(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sO=0;class Fu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sO++}),this.uuid=ds(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(ax(r[o].image)):s.push(ax(r[o]))}else s=ax(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ax(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?CI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oO=0;class Hn extends ta{constructor(e=Hn.DEFAULT_IMAGE,t=Hn.DEFAULT_MAPPING,i=cs,r=cs,s=di,o=ks,l=ur,c=yo,d=Hn.DEFAULT_ANISOTROPY,p=Wa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oO++}),this.uuid=ds(),this.name="",this.source=new Fu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Be(0,0),this.repeat=new Be(1,1),this.center=new Be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Oy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fc:e.x=e.x-Math.floor(e.x);break;case cs:e.x=e.x<0?0:1;break;case uf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case fc:e.y=e.y-Math.floor(e.y);break;case cs:e.y=e.y<0?0:1;break;case uf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Hn.DEFAULT_IMAGE=null;Hn.DEFAULT_MAPPING=Oy;Hn.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,i=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,d=c[0],p=c[4],m=c[8],v=c[1],y=c[5],S=c[9],M=c[2],w=c[6],x=c[10];if(Math.abs(p-v)<.01&&Math.abs(m-M)<.01&&Math.abs(S-w)<.01){if(Math.abs(p+v)<.1&&Math.abs(m+M)<.1&&Math.abs(S+w)<.1&&Math.abs(d+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(d+1)/2,P=(y+1)/2,F=(x+1)/2,N=(p+v)/4,k=(m+M)/4,H=(S+w)/4;return b>P&&b>F?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=N/i,s=k/i):P>F?P<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(P),i=N/r,s=H/r):F<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(F),i=k/s,r=H/s),this.set(i,r,s,t),this}let C=Math.sqrt((w-S)*(w-S)+(m-M)*(m-M)+(v-p)*(v-p));return Math.abs(C)<.001&&(C=1),this.x=(w-S)/C,this.y=(m-M)/C,this.z=(v-p)/C,this.w=Math.acos((d+y+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this.w=Yt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this.w=Yt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bI extends ta{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:di,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Hn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Fu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _o extends bI{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Xy extends Hn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=cs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class aO extends _o{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Xy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class hw extends Hn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ui,this.minFilter=Ui,this.wrapR=cs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lO extends _o{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new hw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Hi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let c=i[r+0],d=i[r+1],p=i[r+2],m=i[r+3];const v=s[o+0],y=s[o+1],S=s[o+2],M=s[o+3];if(l===0){e[t+0]=c,e[t+1]=d,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=S,e[t+3]=M;return}if(m!==M||c!==v||d!==y||p!==S){let w=1-l;const x=c*v+d*y+p*S+m*M,C=x>=0?1:-1,b=1-x*x;if(b>Number.EPSILON){const F=Math.sqrt(b),N=Math.atan2(F,x*C);w=Math.sin(w*N)/F,l=Math.sin(l*N)/F}const P=l*C;if(c=c*w+v*P,d=d*w+y*P,p=p*w+S*P,m=m*w+M*P,w===1-l){const F=1/Math.sqrt(c*c+d*d+p*p+m*m);c*=F,d*=F,p*=F,m*=F}}e[t]=c,e[t+1]=d,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],c=i[r+1],d=i[r+2],p=i[r+3],m=s[o],v=s[o+1],y=s[o+2],S=s[o+3];return e[t]=l*S+p*m+c*y-d*v,e[t+1]=c*S+p*v+d*m-l*y,e[t+2]=d*S+p*y+l*v-c*m,e[t+3]=p*S-l*m-c*v-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,d=l(i/2),p=l(r/2),m=l(s/2),v=c(i/2),y=c(r/2),S=c(s/2);switch(o){case"XYZ":this._x=v*p*m+d*y*S,this._y=d*y*m-v*p*S,this._z=d*p*S+v*y*m,this._w=d*p*m-v*y*S;break;case"YXZ":this._x=v*p*m+d*y*S,this._y=d*y*m-v*p*S,this._z=d*p*S-v*y*m,this._w=d*p*m+v*y*S;break;case"ZXY":this._x=v*p*m-d*y*S,this._y=d*y*m+v*p*S,this._z=d*p*S+v*y*m,this._w=d*p*m-v*y*S;break;case"ZYX":this._x=v*p*m-d*y*S,this._y=d*y*m+v*p*S,this._z=d*p*S-v*y*m,this._w=d*p*m+v*y*S;break;case"YZX":this._x=v*p*m+d*y*S,this._y=d*y*m+v*p*S,this._z=d*p*S-v*y*m,this._w=d*p*m-v*y*S;break;case"XZY":this._x=v*p*m-d*y*S,this._y=d*y*m-v*p*S,this._z=d*p*S+v*y*m,this._w=d*p*m+v*y*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],d=t[2],p=t[6],m=t[10],v=i+l+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-c)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(i>l&&i>m){const y=2*Math.sqrt(1+i-l-m);this._w=(p-c)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(l>m){const y=2*Math.sqrt(1+l-i-m);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(c+p)/y}else{const y=2*Math.sqrt(1+m-i-l);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(c+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,d=t._z,p=t._w;return this._x=i*p+o*l+r*d-s*c,this._y=r*p+o*c+s*l-i*d,this._z=s*p+o*d+i*c-r*l,this._w=o*p-i*l-r*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const d=Math.sqrt(c),p=Math.atan2(d,l),m=Math.sin((1-t)*p)/d,v=Math.sin(t*p)/d;return this._w=o*m+this._w*v,this._x=i*m+this._x*v,this._y=r*m+this._y*v,this._z=s*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,i=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(WE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(WE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,d=2*(o*r-l*i),p=2*(l*t-s*r),m=2*(s*i-o*t);return this.x=t+c*d+o*m-l*p,this.y=i+c*p+l*d-s*m,this.z=r+c*m+s*p-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Yt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-i*c,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return lx.copy(this).projectOnVector(e),this.sub(lx)}reflect(e){return this.sub(lx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lx=new X,WE=new Hi;class hr{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(co.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(co.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=co.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,co):co.fromBufferAttribute(s,o),co.applyMatrix4(e.matrixWorld),this.expandByPoint(co);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),gv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),gv.copy(i.boundingBox)),gv.applyMatrix4(e.matrixWorld),this.union(gv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,co),co.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lp),vv.subVectors(this.max,Lp),Sh.subVectors(e.a,Lp),wh.subVectors(e.b,Lp),Eh.subVectors(e.c,Lp),Xl.subVectors(wh,Sh),Jl.subVectors(Eh,wh),cu.subVectors(Sh,Eh);let t=[0,-Xl.z,Xl.y,0,-Jl.z,Jl.y,0,-cu.z,cu.y,Xl.z,0,-Xl.x,Jl.z,0,-Jl.x,cu.z,0,-cu.x,-Xl.y,Xl.x,0,-Jl.y,Jl.x,0,-cu.y,cu.x,0];return!cx(t,Sh,wh,Eh,vv)||(t=[1,0,0,0,1,0,0,0,1],!cx(t,Sh,wh,Eh,vv))?!1:(yv.crossVectors(Xl,Jl),t=[yv.x,yv.y,yv.z],cx(t,Sh,wh,Eh,vv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,co).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(co).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fa=[new X,new X,new X,new X,new X,new X,new X,new X],co=new X,gv=new hr,Sh=new X,wh=new X,Eh=new X,Xl=new X,Jl=new X,cu=new X,Lp=new X,vv=new X,yv=new X,uu=new X;function cx(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){uu.fromArray(n,s);const l=r.x*Math.abs(uu.x)+r.y*Math.abs(uu.y)+r.z*Math.abs(uu.z),c=e.dot(uu),d=t.dot(uu),p=i.dot(uu);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>l)return!1}return!0}const cO=new hr,Np=new X,ux=new X;class $i{constructor(e=new X,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):cO.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Np.subVectors(e,this.center);const t=Np.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Np,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ux.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Np.copy(e.center).add(ux)),this.expandByPoint(Np.copy(e.center).sub(ux))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Oa=new X,dx=new X,_v=new X,Kl=new X,hx=new X,xv=new X,fx=new X;class ud{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oa.copy(this.origin).addScaledVector(this.direction,t),Oa.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){dx.copy(e).add(t).multiplyScalar(.5),_v.copy(t).sub(e).normalize(),Kl.copy(this.origin).sub(dx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(_v),l=Kl.dot(this.direction),c=-Kl.dot(_v),d=Kl.lengthSq(),p=Math.abs(1-o*o);let m,v,y,S;if(p>0)if(m=o*c-l,v=o*l-c,S=s*p,m>=0)if(v>=-S)if(v<=S){const M=1/p;m*=M,v*=M,y=m*(m+o*v+2*l)+v*(o*m+v+2*c)+d}else v=s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*c)+d;else v=-s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*c)+d;else v<=-S?(m=Math.max(0,-(-o*s+l)),v=m>0?-s:Math.min(Math.max(-s,-c),s),y=-m*m+v*(v+2*c)+d):v<=S?(m=0,v=Math.min(Math.max(-s,-c),s),y=v*(v+2*c)+d):(m=Math.max(0,-(o*s+l)),v=m>0?s:Math.min(Math.max(-s,-c),s),y=-m*m+v*(v+2*c)+d);else v=o>0?-s:s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*c)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(dx).addScaledVector(_v,v),y}intersectSphere(e,t){Oa.subVectors(e.center,this.origin);const i=Oa.dot(this.direction),r=Oa.dot(Oa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=i-o,c=i+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,l,c;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,v=this.origin;return d>=0?(i=(e.min.x-v.x)*d,r=(e.max.x-v.x)*d):(i=(e.max.x-v.x)*d,r=(e.min.x-v.x)*d),p>=0?(s=(e.min.y-v.y)*p,o=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,o=(e.min.y-v.y)*p),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),m>=0?(l=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(l=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Oa)!==null}intersectTriangle(e,t,i,r,s){hx.subVectors(t,e),xv.subVectors(i,e),fx.crossVectors(hx,xv);let o=this.direction.dot(fx),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Kl.subVectors(this.origin,e);const c=l*this.direction.dot(xv.crossVectors(Kl,xv));if(c<0)return null;const d=l*this.direction.dot(hx.cross(Kl));if(d<0||c+d>o)return null;const p=-l*Kl.dot(fx);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Nt{constructor(e,t,i,r,s,o,l,c,d,p,m,v,y,S,M,w){Nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,l,c,d,p,m,v,y,S,M,w)}set(e,t,i,r,s,o,l,c,d,p,m,v,y,S,M,w){const x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=s,x[5]=o,x[9]=l,x[13]=c,x[2]=d,x[6]=p,x[10]=m,x[14]=v,x[3]=y,x[7]=S,x[11]=M,x[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Nt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Mh.setFromMatrixColumn(e,0).length(),s=1/Mh.setFromMatrixColumn(e,1).length(),o=1/Mh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const v=o*p,y=o*m,S=l*p,M=l*m;t[0]=c*p,t[4]=-c*m,t[8]=d,t[1]=y+S*d,t[5]=v-M*d,t[9]=-l*c,t[2]=M-v*d,t[6]=S+y*d,t[10]=o*c}else if(e.order==="YXZ"){const v=c*p,y=c*m,S=d*p,M=d*m;t[0]=v+M*l,t[4]=S*l-y,t[8]=o*d,t[1]=o*m,t[5]=o*p,t[9]=-l,t[2]=y*l-S,t[6]=M+v*l,t[10]=o*c}else if(e.order==="ZXY"){const v=c*p,y=c*m,S=d*p,M=d*m;t[0]=v-M*l,t[4]=-o*m,t[8]=S+y*l,t[1]=y+S*l,t[5]=o*p,t[9]=M-v*l,t[2]=-o*d,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const v=o*p,y=o*m,S=l*p,M=l*m;t[0]=c*p,t[4]=S*d-y,t[8]=v*d+M,t[1]=c*m,t[5]=M*d+v,t[9]=y*d-S,t[2]=-d,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const v=o*c,y=o*d,S=l*c,M=l*d;t[0]=c*p,t[4]=M-v*m,t[8]=S*m+y,t[1]=m,t[5]=o*p,t[9]=-l*p,t[2]=-d*p,t[6]=y*m+S,t[10]=v-M*m}else if(e.order==="XZY"){const v=o*c,y=o*d,S=l*c,M=l*d;t[0]=c*p,t[4]=-m,t[8]=d*p,t[1]=v*m+M,t[5]=o*p,t[9]=y*m-S,t[2]=S*m-y,t[6]=l*p,t[10]=M*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uO,e,dO)}lookAt(e,t,i){const r=this.elements;return as.subVectors(e,t),as.lengthSq()===0&&(as.z=1),as.normalize(),Yl.crossVectors(i,as),Yl.lengthSq()===0&&(Math.abs(i.z)===1?as.x+=1e-4:as.z+=1e-4,as.normalize(),Yl.crossVectors(i,as)),Yl.normalize(),Av.crossVectors(as,Yl),r[0]=Yl.x,r[4]=Av.x,r[8]=as.x,r[1]=Yl.y,r[5]=Av.y,r[9]=as.y,r[2]=Yl.z,r[6]=Av.z,r[10]=as.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],c=i[8],d=i[12],p=i[1],m=i[5],v=i[9],y=i[13],S=i[2],M=i[6],w=i[10],x=i[14],C=i[3],b=i[7],P=i[11],F=i[15],N=r[0],k=r[4],H=r[8],L=r[12],B=r[1],V=r[5],ae=r[9],re=r[13],ge=r[2],ve=r[6],fe=r[10],he=r[14],U=r[3],Z=r[7],Q=r[11],W=r[15];return s[0]=o*N+l*B+c*ge+d*U,s[4]=o*k+l*V+c*ve+d*Z,s[8]=o*H+l*ae+c*fe+d*Q,s[12]=o*L+l*re+c*he+d*W,s[1]=p*N+m*B+v*ge+y*U,s[5]=p*k+m*V+v*ve+y*Z,s[9]=p*H+m*ae+v*fe+y*Q,s[13]=p*L+m*re+v*he+y*W,s[2]=S*N+M*B+w*ge+x*U,s[6]=S*k+M*V+w*ve+x*Z,s[10]=S*H+M*ae+w*fe+x*Q,s[14]=S*L+M*re+w*he+x*W,s[3]=C*N+b*B+P*ge+F*U,s[7]=C*k+b*V+P*ve+F*Z,s[11]=C*H+b*ae+P*fe+F*Q,s[15]=C*L+b*re+P*he+F*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],d=e[13],p=e[2],m=e[6],v=e[10],y=e[14],S=e[3],M=e[7],w=e[11],x=e[15];return S*(+s*c*m-r*d*m-s*l*v+i*d*v+r*l*y-i*c*y)+M*(+t*c*y-t*d*v+s*o*v-r*o*y+r*d*p-s*c*p)+w*(+t*d*m-t*l*y-s*o*m+i*o*y+s*l*p-i*d*p)+x*(-r*l*p-t*c*m+t*l*v+r*o*m-i*o*v+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],p=e[8],m=e[9],v=e[10],y=e[11],S=e[12],M=e[13],w=e[14],x=e[15],C=m*w*d-M*v*d+M*c*y-l*w*y-m*c*x+l*v*x,b=S*v*d-p*w*d-S*c*y+o*w*y+p*c*x-o*v*x,P=p*M*d-S*m*d+S*l*y-o*M*y-p*l*x+o*m*x,F=S*m*c-p*M*c-S*l*v+o*M*v+p*l*w-o*m*w,N=t*C+i*b+r*P+s*F;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/N;return e[0]=C*k,e[1]=(M*v*s-m*w*s-M*r*y+i*w*y+m*r*x-i*v*x)*k,e[2]=(l*w*s-M*c*s+M*r*d-i*w*d-l*r*x+i*c*x)*k,e[3]=(m*c*s-l*v*s-m*r*d+i*v*d+l*r*y-i*c*y)*k,e[4]=b*k,e[5]=(p*w*s-S*v*s+S*r*y-t*w*y-p*r*x+t*v*x)*k,e[6]=(S*c*s-o*w*s-S*r*d+t*w*d+o*r*x-t*c*x)*k,e[7]=(o*v*s-p*c*s+p*r*d-t*v*d-o*r*y+t*c*y)*k,e[8]=P*k,e[9]=(S*m*s-p*M*s-S*i*y+t*M*y+p*i*x-t*m*x)*k,e[10]=(o*M*s-S*l*s+S*i*d-t*M*d-o*i*x+t*l*x)*k,e[11]=(p*l*s-o*m*s-p*i*d+t*m*d+o*i*y-t*l*y)*k,e[12]=F*k,e[13]=(p*M*r-S*m*r+S*i*v-t*M*v-p*i*w+t*m*w)*k,e[14]=(S*l*r-o*M*r-S*i*c+t*M*c+o*i*w-t*l*w)*k,e[15]=(o*m*r-p*l*r+p*i*c-t*m*c-o*i*v+t*l*v)*k,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,c=e.z,d=s*o,p=s*l;return this.set(d*o+i,d*l-r*c,d*c+r*l,0,d*l+r*c,p*l+i,p*c-r*o,0,d*c-r*l,p*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,d=s+s,p=o+o,m=l+l,v=s*d,y=s*p,S=s*m,M=o*p,w=o*m,x=l*m,C=c*d,b=c*p,P=c*m,F=i.x,N=i.y,k=i.z;return r[0]=(1-(M+x))*F,r[1]=(y+P)*F,r[2]=(S-b)*F,r[3]=0,r[4]=(y-P)*N,r[5]=(1-(v+x))*N,r[6]=(w+C)*N,r[7]=0,r[8]=(S+b)*k,r[9]=(w-C)*k,r[10]=(1-(v+M))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Mh.set(r[0],r[1],r[2]).length();const o=Mh.set(r[4],r[5],r[6]).length(),l=Mh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],uo.copy(this);const d=1/s,p=1/o,m=1/l;return uo.elements[0]*=d,uo.elements[1]*=d,uo.elements[2]*=d,uo.elements[4]*=p,uo.elements[5]*=p,uo.elements[6]*=p,uo.elements[8]*=m,uo.elements[9]*=m,uo.elements[10]*=m,t.setFromRotationMatrix(uo),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o,l=Go){const c=this.elements,d=2*s/(t-e),p=2*s/(i-r),m=(t+e)/(t-e),v=(i+r)/(i-r);let y,S;if(l===Go)y=-(o+s)/(o-s),S=-2*o*s/(o-s);else if(l===Im)y=-o/(o-s),S=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=d,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=p,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=S,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,l=Go){const c=this.elements,d=1/(t-e),p=1/(i-r),m=1/(o-s),v=(t+e)*d,y=(i+r)*p;let S,M;if(l===Go)S=(o+s)*m,M=-2*m;else if(l===Im)S=s*m,M=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=M,c[14]=-S,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Mh=new X,uo=new Nt,uO=new X(0,0,0),dO=new X(1,1,1),Yl=new X,Av=new X,as=new X,jE=new Nt,XE=new Hi;class ps{constructor(e=0,t=0,i=0,r=ps.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],d=r[5],p=r[9],m=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Yt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Yt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Yt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(Yt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-Yt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return jE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jE,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return XE.setFromEuler(this),this.setFromQuaternion(XE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ps.DEFAULT_ORDER="XYZ";class Xu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let hO=0;const JE=new X,Th=new Hi,ka=new Nt,Sv=new X,Fp=new X,fO=new X,pO=new Hi,KE=new X(1,0,0),YE=new X(0,1,0),qE=new X(0,0,1),QE={type:"added"},mO={type:"removed"},Ch={type:"childadded",child:null},px={type:"childremoved",child:null};class fn extends ta{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hO++}),this.uuid=ds(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DEFAULT_UP.clone();const e=new X,t=new ps,i=new Hi,r=new X(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Nt},normalMatrix:{value:new $t}}),this.matrix=new Nt,this.matrixWorld=new Nt,this.matrixAutoUpdate=fn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Xu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Th.setFromAxisAngle(e,t),this.quaternion.multiply(Th),this}rotateOnWorldAxis(e,t){return Th.setFromAxisAngle(e,t),this.quaternion.premultiply(Th),this}rotateX(e){return this.rotateOnAxis(KE,e)}rotateY(e){return this.rotateOnAxis(YE,e)}rotateZ(e){return this.rotateOnAxis(qE,e)}translateOnAxis(e,t){return JE.copy(e).applyQuaternion(this.quaternion),this.position.add(JE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(KE,e)}translateY(e){return this.translateOnAxis(YE,e)}translateZ(e){return this.translateOnAxis(qE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ka.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Sv.copy(e):Sv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Fp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ka.lookAt(Fp,Sv,this.up):ka.lookAt(Sv,Fp,this.up),this.quaternion.setFromRotationMatrix(ka),r&&(ka.extractRotation(r.matrixWorld),Th.setFromRotationMatrix(ka),this.quaternion.premultiply(Th.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(QE),Ch.child=e,this.dispatchEvent(Ch),Ch.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(mO),px.child=e,this.dispatchEvent(px),px.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ka.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ka.multiply(e.parent.matrixWorld)),e.applyMatrix4(ka),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(QE),Ch.child=e,this.dispatchEvent(Ch),Ch.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fp,e,fO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fp,pO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let d=0,p=c.length;d<p;d++){const m=c[d];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),d=o(e.textures),p=o(e.images),m=o(e.shapes),v=o(e.skeletons),y=o(e.animations),S=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),m.length>0&&(i.shapes=m),v.length>0&&(i.skeletons=v),y.length>0&&(i.animations=y),S.length>0&&(i.nodes=S)}return i.object=r,i;function o(l){const c=[];for(const d in l){const p=l[d];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}fn.DEFAULT_UP=new X(0,1,0);fn.DEFAULT_MATRIX_AUTO_UPDATE=!0;fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ho=new X,Ua=new X,mx=new X,Ha=new X,bh=new X,Rh=new X,$E=new X,gx=new X,vx=new X,yx=new X,_x=new yn,xx=new yn,Ax=new yn;class Xr{constructor(e=new X,t=new X,i=new X){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ho.subVectors(e,t),r.cross(ho);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ho.subVectors(r,t),Ua.subVectors(i,t),mx.subVectors(e,t);const o=ho.dot(ho),l=ho.dot(Ua),c=ho.dot(mx),d=Ua.dot(Ua),p=Ua.dot(mx),m=o*d-l*l;if(m===0)return s.set(0,0,0),null;const v=1/m,y=(d*c-l*p)*v,S=(o*p-l*c)*v;return s.set(1-y-S,S,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ha)===null?!1:Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getInterpolation(e,t,i,r,s,o,l,c){return this.getBarycoord(e,t,i,r,Ha)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Ha.x),c.addScaledVector(o,Ha.y),c.addScaledVector(l,Ha.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return _x.setScalar(0),xx.setScalar(0),Ax.setScalar(0),_x.fromBufferAttribute(e,t),xx.fromBufferAttribute(e,i),Ax.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(_x,s.x),o.addScaledVector(xx,s.y),o.addScaledVector(Ax,s.z),o}static isFrontFacing(e,t,i,r){return ho.subVectors(i,t),Ua.subVectors(e,t),ho.cross(Ua).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ho.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),ho.cross(Ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Xr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Xr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;bh.subVectors(r,i),Rh.subVectors(s,i),gx.subVectors(e,i);const c=bh.dot(gx),d=Rh.dot(gx);if(c<=0&&d<=0)return t.copy(i);vx.subVectors(e,r);const p=bh.dot(vx),m=Rh.dot(vx);if(p>=0&&m<=p)return t.copy(r);const v=c*m-p*d;if(v<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(bh,o);yx.subVectors(e,s);const y=bh.dot(yx),S=Rh.dot(yx);if(S>=0&&y<=S)return t.copy(s);const M=y*d-c*S;if(M<=0&&d>=0&&S<=0)return l=d/(d-S),t.copy(i).addScaledVector(Rh,l);const w=p*S-y*m;if(w<=0&&m-p>=0&&y-S>=0)return $E.subVectors(s,r),l=(m-p)/(m-p+(y-S)),t.copy(r).addScaledVector($E,l);const x=1/(w+M+v);return o=M*x,l=v*x,t.copy(i).addScaledVector(bh,o).addScaledVector(Rh,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const RI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ql={h:0,s:0,l:0},wv={h:0,s:0,l:0};function Sx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class st{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=jr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=gn.workingColorSpace){return this.r=e,this.g=t,this.b=i,gn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=gn.workingColorSpace){if(e=dw(e,1),t=Yt(t,0,1),i=Yt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Sx(o,s,e+1/3),this.g=Sx(o,s,e),this.b=Sx(o,s,e-1/3)}return gn.toWorkingColorSpace(this,r),this}setStyle(e,t=jr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=jr){const i=RI[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Za(e.r),this.g=Za(e.g),this.b=Za(e.b),this}copyLinearToSRGB(e){return this.r=rf(e.r),this.g=rf(e.g),this.b=rf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jr){return gn.fromWorkingColorSpace(ar.copy(this),e),Math.round(Yt(ar.r*255,0,255))*65536+Math.round(Yt(ar.g*255,0,255))*256+Math.round(Yt(ar.b*255,0,255))}getHexString(e=jr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=gn.workingColorSpace){gn.fromWorkingColorSpace(ar.copy(this),t);const i=ar.r,r=ar.g,s=ar.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let c,d;const p=(l+o)/2;if(l===o)c=0,d=0;else{const m=o-l;switch(d=p<=.5?m/(o+l):m/(2-o-l),o){case i:c=(r-s)/m+(r<s?6:0);break;case r:c=(s-i)/m+2;break;case s:c=(i-r)/m+4;break}c/=6}return e.h=c,e.s=d,e.l=p,e}getRGB(e,t=gn.workingColorSpace){return gn.fromWorkingColorSpace(ar.copy(this),t),e.r=ar.r,e.g=ar.g,e.b=ar.b,e}getStyle(e=jr){gn.fromWorkingColorSpace(ar.copy(this),e);const t=ar.r,i=ar.g,r=ar.b;return e!==jr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(ql),this.setHSL(ql.h+e,ql.s+t,ql.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ql),e.getHSL(wv);const i=mm(ql.h,wv.h,t),r=mm(ql.s,wv.s,t),s=mm(ql.l,wv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ar=new st;st.NAMES=RI;let gO=0;class xi extends ta{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gO++}),this.uuid=ds(),this.name="",this.type="Material",this.blending=Gu,this.side=$o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=I0,this.blendDst=P0,this.blendEquation=ic,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new st(0,0,0),this.blendAlpha=0,this.depthFunc=Yu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$A,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cu,this.stencilZFail=Cu,this.stencilZPass=Cu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Gu&&(i.blending=this.blending),this.side!==$o&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==I0&&(i.blendSrc=this.blendSrc),this.blendDst!==P0&&(i.blendDst=this.blendDst),this.blendEquation!==ic&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$A&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Cu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Cu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class us extends xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ja=vO();function vO(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const d=c-127;d<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):d<-14?(i[c]=1024>>-d-14,i[c|256]=1024>>-d-14|32768,r[c]=-d-1,r[c|256]=-d-1):d<=15?(i[c]=d+15<<10,i[c|256]=d+15<<10|32768,r[c]=13,r[c|256]=13):d<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let d=c<<13,p=0;for(;!(d&8388608);)d<<=1,p-=8388608;d&=-8388609,p+=947912704,s[c]=d|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Wr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Yt(n,-65504,65504),ja.floatView[0]=n;const e=ja.uint32View[0],t=e>>23&511;return ja.baseTable[t]+((e&8388607)>>ja.shiftTable[t])}function nm(n){const e=n>>10;return ja.uint32View[0]=ja.mantissaTable[ja.offsetTable[e]+(n&1023)]+ja.exponentTable[e],ja.floatView[0]}const yO={toHalfFloat:Wr,fromHalfFloat:nm},_i=new X,Ev=new Be;class _n{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Rm,this.updateRanges=[],this.gpuType=Jr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Ev.fromBufferAttribute(this,t),Ev.applyMatrix3(e),this.setXY(t,Ev.x,Ev.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix3(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix4(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_i.fromBufferAttribute(this,t),_i.applyNormalMatrix(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_i.fromBufferAttribute(this,t),_i.transformDirection(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Cr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Cr(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Cr(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Cr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Cr(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Rm&&(e.usage=this.usage),e}}class _O extends _n{constructor(e,t,i){super(new Int8Array(e),t,i)}}class xO extends _n{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class AO extends _n{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class SO extends _n{constructor(e,t,i){super(new Int16Array(e),t,i)}}class fw extends _n{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class wO extends _n{constructor(e,t,i){super(new Int32Array(e),t,i)}}class pw extends _n{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class EO extends _n{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=nm(this.array[e*this.itemSize]);return this.normalized&&(t=Cr(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=Wr(t),this}getY(e){let t=nm(this.array[e*this.itemSize+1]);return this.normalized&&(t=Cr(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=Wr(t),this}getZ(e){let t=nm(this.array[e*this.itemSize+2]);return this.normalized&&(t=Cr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=Wr(t),this}getW(e){let t=nm(this.array[e*this.itemSize+3]);return this.normalized&&(t=Cr(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=Wr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=Wr(t),this.array[e+1]=Wr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=Wr(t),this.array[e+1]=Wr(i),this.array[e+2]=Wr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=Wr(t),this.array[e+1]=Wr(i),this.array[e+2]=Wr(r),this.array[e+3]=Wr(s),this}}class Ct extends _n{constructor(e,t,i){super(new Float32Array(e),t,i)}}let MO=0;const Ps=new Nt,wx=new fn,Ih=new X,ls=new hr,Op=new hr,ki=new X;class qt extends ta{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:MO++}),this.uuid=ds(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MI(e)?pw:fw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new $t().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ps.makeRotationFromQuaternion(e),this.applyMatrix4(Ps),this}rotateX(e){return Ps.makeRotationX(e),this.applyMatrix4(Ps),this}rotateY(e){return Ps.makeRotationY(e),this.applyMatrix4(Ps),this}rotateZ(e){return Ps.makeRotationZ(e),this.applyMatrix4(Ps),this}translate(e,t,i){return Ps.makeTranslation(e,t,i),this.applyMatrix4(Ps),this}scale(e,t,i){return Ps.makeScale(e,t,i),this.applyMatrix4(Ps),this}lookAt(e){return wx.lookAt(e),wx.updateMatrix(),this.applyMatrix4(wx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ih).negate(),this.translate(Ih.x,Ih.y,Ih.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ct(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ls.setFromBufferAttribute(s),this.morphTargetsRelative?(ki.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint(ki),ki.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint(ki)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new X,1/0);return}if(e){const i=this.boundingSphere.center;if(ls.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];Op.setFromBufferAttribute(l),this.morphTargetsRelative?(ki.addVectors(ls.min,Op.min),ls.expandByPoint(ki),ki.addVectors(ls.max,Op.max),ls.expandByPoint(ki)):(ls.expandByPoint(Op.min),ls.expandByPoint(Op.max))}ls.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ki.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ki));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)ki.fromBufferAttribute(l,d),c&&(Ih.fromBufferAttribute(e,d),ki.add(Ih)),r=Math.max(r,i.distanceToSquared(ki))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _n(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let H=0;H<i.count;H++)l[H]=new X,c[H]=new X;const d=new X,p=new X,m=new X,v=new Be,y=new Be,S=new Be,M=new X,w=new X;function x(H,L,B){d.fromBufferAttribute(i,H),p.fromBufferAttribute(i,L),m.fromBufferAttribute(i,B),v.fromBufferAttribute(s,H),y.fromBufferAttribute(s,L),S.fromBufferAttribute(s,B),p.sub(d),m.sub(d),y.sub(v),S.sub(v);const V=1/(y.x*S.y-S.x*y.y);isFinite(V)&&(M.copy(p).multiplyScalar(S.y).addScaledVector(m,-y.y).multiplyScalar(V),w.copy(m).multiplyScalar(y.x).addScaledVector(p,-S.x).multiplyScalar(V),l[H].add(M),l[L].add(M),l[B].add(M),c[H].add(w),c[L].add(w),c[B].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let H=0,L=C.length;H<L;++H){const B=C[H],V=B.start,ae=B.count;for(let re=V,ge=V+ae;re<ge;re+=3)x(e.getX(re+0),e.getX(re+1),e.getX(re+2))}const b=new X,P=new X,F=new X,N=new X;function k(H){F.fromBufferAttribute(r,H),N.copy(F);const L=l[H];b.copy(L),b.sub(F.multiplyScalar(F.dot(L))).normalize(),P.crossVectors(N,L);const V=P.dot(c[H])<0?-1:1;o.setXYZW(H,b.x,b.y,b.z,V)}for(let H=0,L=C.length;H<L;++H){const B=C[H],V=B.start,ae=B.count;for(let re=V,ge=V+ae;re<ge;re+=3)k(e.getX(re+0)),k(e.getX(re+1)),k(e.getX(re+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _n(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,y=i.count;v<y;v++)i.setXYZ(v,0,0,0);const r=new X,s=new X,o=new X,l=new X,c=new X,d=new X,p=new X,m=new X;if(e)for(let v=0,y=e.count;v<y;v+=3){const S=e.getX(v+0),M=e.getX(v+1),w=e.getX(v+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,w),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),l.fromBufferAttribute(i,S),c.fromBufferAttribute(i,M),d.fromBufferAttribute(i,w),l.add(p),c.add(p),d.add(p),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(M,c.x,c.y,c.z),i.setXYZ(w,d.x,d.y,d.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ki.fromBufferAttribute(e,t),ki.normalize(),e.setXYZ(t,ki.x,ki.y,ki.z)}toNonIndexed(){function e(l,c){const d=l.array,p=l.itemSize,m=l.normalized,v=new d.constructor(c.length*p);let y=0,S=0;for(let M=0,w=c.length;M<w;M++){l.isInterleavedBufferAttribute?y=c[M]*l.data.stride+l.offset:y=c[M]*p;for(let x=0;x<p;x++)v[S++]=d[y++]}return new _n(v,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qt,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],d=e(c,i);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const c=[],d=s[l];for(let p=0,m=d.length;p<m;p++){const v=d[p],y=e(v,i);c.push(y)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const d=i[c];e.data.attributes[c]=d.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m];p.push(y.toJSON(e.data))}p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],m=s[d];for(let v=0,y=m.length;v<y;v++)p.push(m[v].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const m=o[d];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZE=new Nt,du=new ud,Mv=new $i,eM=new X,Tv=new X,Cv=new X,bv=new X,Ex=new X,Rv=new X,tM=new X,Iv=new X;class hi extends fn{constructor(e=new qt,t=new us){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Rv.set(0,0,0);for(let c=0,d=s.length;c<d;c++){const p=l[c],m=s[c];p!==0&&(Ex.fromBufferAttribute(m,e),o?Rv.addScaledVector(Ex,p):Rv.addScaledVector(Ex.sub(t),p))}t.add(Rv)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Mv.copy(i.boundingSphere),Mv.applyMatrix4(s),du.copy(e.ray).recast(e.near),!(Mv.containsPoint(du.origin)===!1&&(du.intersectSphere(Mv,eM)===null||du.origin.distanceToSquared(eM)>(e.far-e.near)**2))&&(ZE.copy(s).invert(),du.copy(e.ray).applyMatrix4(ZE),!(i.boundingBox!==null&&du.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,du)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(o))for(let S=0,M=v.length;S<M;S++){const w=v[S],x=o[w.materialIndex],C=Math.max(w.start,y.start),b=Math.min(l.count,Math.min(w.start+w.count,y.start+y.count));for(let P=C,F=b;P<F;P+=3){const N=l.getX(P),k=l.getX(P+1),H=l.getX(P+2);r=Pv(this,x,e,i,d,p,m,N,k,H),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),M=Math.min(l.count,y.start+y.count);for(let w=S,x=M;w<x;w+=3){const C=l.getX(w),b=l.getX(w+1),P=l.getX(w+2);r=Pv(this,o,e,i,d,p,m,C,b,P),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let S=0,M=v.length;S<M;S++){const w=v[S],x=o[w.materialIndex],C=Math.max(w.start,y.start),b=Math.min(c.count,Math.min(w.start+w.count,y.start+y.count));for(let P=C,F=b;P<F;P+=3){const N=P,k=P+1,H=P+2;r=Pv(this,x,e,i,d,p,m,N,k,H),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),M=Math.min(c.count,y.start+y.count);for(let w=S,x=M;w<x;w+=3){const C=w,b=w+1,P=w+2;r=Pv(this,o,e,i,d,p,m,C,b,P),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function TO(n,e,t,i,r,s,o,l){let c;if(e.side===br?c=i.intersectTriangle(o,s,r,!0,l):c=i.intersectTriangle(r,s,o,e.side===$o,l),c===null)return null;Iv.copy(l),Iv.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(Iv);return d<t.near||d>t.far?null:{distance:d,point:Iv.clone(),object:n}}function Pv(n,e,t,i,r,s,o,l,c,d){n.getVertexPosition(l,Tv),n.getVertexPosition(c,Cv),n.getVertexPosition(d,bv);const p=TO(n,e,t,i,Tv,Cv,bv,tM);if(p){const m=new X;Xr.getBarycoord(tM,Tv,Cv,bv,m),r&&(p.uv=Xr.getInterpolatedAttribute(r,l,c,d,m,new Be)),s&&(p.uv1=Xr.getInterpolatedAttribute(s,l,c,d,m,new Be)),o&&(p.normal=Xr.getInterpolatedAttribute(o,l,c,d,m,new X),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:c,c:d,normal:new X,materialIndex:0};Xr.getNormal(Tv,Cv,bv,v.normal),p.face=v,p.barycoord=m}return p}class dd extends qt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],d=[],p=[],m=[];let v=0,y=0;S("z","y","x",-1,-1,i,t,e,o,s,0),S("z","y","x",1,-1,i,t,-e,o,s,1),S("x","z","y",1,1,e,i,t,r,o,2),S("x","z","y",1,-1,e,i,-t,r,o,3),S("x","y","z",1,-1,e,t,i,r,s,4),S("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(p,3)),this.setAttribute("uv",new Ct(m,2));function S(M,w,x,C,b,P,F,N,k,H,L){const B=P/k,V=F/H,ae=P/2,re=F/2,ge=N/2,ve=k+1,fe=H+1;let he=0,U=0;const Z=new X;for(let Q=0;Q<fe;Q++){const W=Q*V-re;for(let ie=0;ie<ve;ie++){const Le=ie*B-ae;Z[M]=Le*C,Z[w]=W*b,Z[x]=ge,d.push(Z.x,Z.y,Z.z),Z[M]=0,Z[w]=0,Z[x]=N>0?1:-1,p.push(Z.x,Z.y,Z.z),m.push(ie/k),m.push(1-Q/H),he+=1}}for(let Q=0;Q<H;Q++)for(let W=0;W<k;W++){const ie=v+W+ve*Q,Le=v+W+ve*(Q+1),ce=v+(W+1)+ve*(Q+1),Ee=v+(W+1)+ve*Q;c.push(ie,Le,Ee),c.push(Le,ce,Ee),U+=6}l.addGroup(y,U,L),y+=U,v+=he}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Tr(n){const e={};for(let t=0;t<n.length;t++){const i=mf(n[t]);for(const r in i)e[r]=i[r]}return e}function CO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function II(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:gn.workingColorSpace}const PI={clone:mf,merge:Tr};var bO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,RO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xo extends xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=bO,this.fragmentShader=RO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mf(e.uniforms),this.uniformsGroups=CO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Qm extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nt,this.projectionMatrix=new Nt,this.projectionMatrixInverse=new Nt,this.coordinateSystem=Go}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ql=new X,nM=new Be,iM=new Be;class jn extends Qm{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=pf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ju*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return pf*2*Math.atan(Math.tan(ju*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ql.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ql.x,Ql.y).multiplyScalar(-e/Ql.z),Ql.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ql.x,Ql.y).multiplyScalar(-e/Ql.z)}getViewSize(e,t){return this.getViewBounds(e,nM,iM),t.subVectors(iM,nM)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ju*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/d,r*=o.width/c,i*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ph=-90,Dh=1;class mw extends fn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new jn(Ph,Dh,e,t);r.layers=this.layers,this.add(r);const s=new jn(Ph,Dh,e,t);s.layers=this.layers,this.add(s);const o=new jn(Ph,Dh,e,t);o.layers=this.layers,this.add(o);const l=new jn(Ph,Dh,e,t);l.layers=this.layers,this.add(l);const c=new jn(Ph,Dh,e,t);c.layers=this.layers,this.add(c);const d=new jn(Ph,Dh,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,l,c]=t;for(const d of t)this.remove(d);if(e===Go)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Im)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,d,p]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,d),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(m,v,y),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class $m extends Hn{constructor(e,t,i,r,s,o,l,c,d,p){e=e!==void 0?e:[],t=t!==void 0?t:sl,super(e,t,i,r,s,o,l,c,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class gw extends _o{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new $m(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:di}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new dd(5,5,5),s=new xo({name:"CubemapFromEquirect",uniforms:mf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:br,blending:$a});s.uniforms.tEquirect.value=t;const o=new hi(r,s),l=t.minFilter;return t.minFilter===ks&&(t.minFilter=di),new mw(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class Jy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new st(e),this.density=t}clone(){return new Jy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ky{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new st(e),this.near=t,this.far=i}clone(){return new Ky(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class hy extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ps,this.environmentIntensity=1,this.environmentRotation=new ps,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Zm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Rm,this.updateRanges=[],this.version=0,this.uuid=ds()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ds()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ds()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Mr=new X;class pc{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix4(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.applyNormalMatrix(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.transformDirection(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Cr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Cr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Cr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Cr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Cr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new _n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vw extends xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bh;const kp=new X,Lh=new X,Nh=new X,Fh=new Be,Up=new Be,DI=new Nt,Dv=new X,Hp=new X,Bv=new X,rM=new Be,Mx=new Be,sM=new Be;class BI extends fn{constructor(e=new vw){if(super(),this.isSprite=!0,this.type="Sprite",Bh===void 0){Bh=new qt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Zm(t,5);Bh.setIndex([0,1,2,0,2,3]),Bh.setAttribute("position",new pc(i,3,0,!1)),Bh.setAttribute("uv",new pc(i,2,3,!1))}this.geometry=Bh,this.material=e,this.center=new Be(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lh.setFromMatrixScale(this.matrixWorld),DI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Lh.multiplyScalar(-Nh.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Lv(Dv.set(-.5,-.5,0),Nh,o,Lh,r,s),Lv(Hp.set(.5,-.5,0),Nh,o,Lh,r,s),Lv(Bv.set(.5,.5,0),Nh,o,Lh,r,s),rM.set(0,0),Mx.set(1,0),sM.set(1,1);let l=e.ray.intersectTriangle(Dv,Hp,Bv,!1,kp);if(l===null&&(Lv(Hp.set(-.5,.5,0),Nh,o,Lh,r,s),Mx.set(0,1),l=e.ray.intersectTriangle(Dv,Bv,Hp,!1,kp),l===null))return;const c=e.ray.origin.distanceTo(kp);c<e.near||c>e.far||t.push({distance:c,point:kp.clone(),uv:Xr.getInterpolation(kp,Dv,Hp,Bv,rM,Mx,sM,new Be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Lv(n,e,t,i,r,s){Fh.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Up.x=s*Fh.x-r*Fh.y,Up.y=r*Fh.x+s*Fh.y):Up.copy(Fh),n.copy(e),n.x+=Up.x,n.y+=Up.y,n.applyMatrix4(DI)}const Nv=new X,oM=new X;class LI extends fn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Nv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Nv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Nv.setFromMatrixPosition(e.matrixWorld),oM.setFromMatrixPosition(this.matrixWorld);const i=Nv.distanceTo(oM)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const aM=new X,lM=new yn,cM=new yn,IO=new X,uM=new Nt,Fv=new X,Tx=new $i,dM=new Nt,Cx=new ud;class yw extends hi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=QA,this.bindMatrix=new Nt,this.bindMatrixInverse=new Nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fv),this.boundingBox.expandByPoint(Fv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new $i),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fv),this.boundingSphere.expandByPoint(Fv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tx.copy(this.boundingSphere),Tx.applyMatrix4(r),e.ray.intersectsSphere(Tx)!==!1&&(dM.copy(r).invert(),Cx.copy(e.ray).applyMatrix4(dM),!(this.boundingBox!==null&&Cx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Cx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===QA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===cI?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;lM.fromBufferAttribute(r.attributes.skinIndex,e),cM.fromBufferAttribute(r.attributes.skinWeight,e),aM.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=cM.getComponent(s);if(o!==0){const l=lM.getComponent(s);uM.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(IO.copy(aM).applyMatrix4(uM),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Yy extends fn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jo extends Hn{constructor(e=null,t=1,i=1,r,s,o,l,c,d=Ui,p=Ui,m,v){super(null,o,l,c,d,p,r,s,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const hM=new Nt,PO=new Nt;class eg{constructor(e=[],t=[]){this.uuid=ds(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Nt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:PO;hM.multiplyMatrices(l,t[s]),hM.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new eg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new jo(t,e,e,ur,Jr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Yy),this.bones.push(o),this.boneInverses.push(new Nt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Zu extends _n{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Oh=new Nt,fM=new Nt,Ov=[],pM=new hr,DO=new Nt,zp=new hi,Gp=new $i;class _w extends hi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,DO)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Oh),pM.copy(e.boundingBox).applyMatrix4(Oh),this.boundingBox.union(pM)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new $i),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Oh),Gp.copy(e.boundingSphere).applyMatrix4(Oh),this.boundingSphere.union(Gp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let l=0;l<i.length;l++)i[l]=r[o+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(zp.geometry=this.geometry,zp.material=this.material,zp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gp.copy(this.boundingSphere),Gp.applyMatrix4(i),e.ray.intersectsSphere(Gp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Oh),fM.multiplyMatrices(i,Oh),zp.matrixWorld=fM,zp.raycast(e,Ov);for(let o=0,l=Ov.length;o<l;o++){const c=Ov[o];c.instanceId=s,c.object=this,t.push(c)}Ov.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new jo(new Float32Array(r*this.count),r,this.count,Gy,Jr));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<i.length;d++)o+=i[d];const l=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=l,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const bx=new X,BO=new X,LO=new $t;class Va{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bx.subVectors(i,t).cross(BO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(bx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||LO.getNormalMatrix(e),r=this.coplanarPoint(bx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const hu=new $i,kv=new X;class tg{constructor(e=new Va,t=new Va,i=new Va,r=new Va,s=new Va,o=new Va){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Go){const i=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],d=r[4],p=r[5],m=r[6],v=r[7],y=r[8],S=r[9],M=r[10],w=r[11],x=r[12],C=r[13],b=r[14],P=r[15];if(i[0].setComponents(c-s,v-d,w-y,P-x).normalize(),i[1].setComponents(c+s,v+d,w+y,P+x).normalize(),i[2].setComponents(c+o,v+p,w+S,P+C).normalize(),i[3].setComponents(c-o,v-p,w-S,P-C).normalize(),i[4].setComponents(c-l,v-m,w-M,P-b).normalize(),t===Go)i[5].setComponents(c+l,v+m,w+M,P+b).normalize();else if(t===Im)i[5].setComponents(l,m,M,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),hu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),hu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hu)}intersectsSprite(e){return hu.center.set(0,0,0),hu.radius=.7071067811865476,hu.applyMatrix4(e.matrixWorld),this.intersectsSphere(hu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(kv.x=r.normal.x>0?e.max.x:e.min.x,kv.y=r.normal.y>0?e.max.y:e.min.y,kv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(kv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Rx(n,e){return n-e}function NO(n,e){return n.z-e.z}function FO(n,e){return e.z-n.z}class OO{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Vr=new Nt,kO=new st(1,1,1),Ix=new tg,Uv=new hr,fu=new $i,Vp=new X,mM=new X,UO=new X,Px=new OO,lr=new hi,Hv=[];function HO(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function pu(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class NI extends hi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new qt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new jo(t,e,e,ur,Jr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new jo(t,e,e,qm,ol);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new jo(t,e,e,ur,Jr);i.colorSpace=gn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:c,normalized:d}=o,p=new l.constructor(i*c),m=new _n(p,c,d);t.setAttribute(s,m)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new _n(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vr),this.getBoundingBoxAt(s,Uv).applyMatrix4(Vr),e.union(Uv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vr),this.getBoundingSphereAt(s,fu).applyMatrix4(Vr),e.union(fu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Rx),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Vr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(kO.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Rx),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&&o.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,d=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const m=t.getAttribute(p),v=i.getAttribute(p);HO(m,v,c);const y=m.itemSize;for(let S=m.count,M=d;S<M;S++){const w=c+S;for(let x=0;x<y;x++)v.setComponent(w,x,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,d*y)}if(r){const p=l.indexStart,m=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<o.count;v++)s.setX(p+v,c+o.getX(v));for(let v=o.count,y=m;v<y;v++)s.setX(p+v,c);s.needsUpdate=!0,s.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,l)=>l).sort((o,l)=>i[o].vertexStart-i[l].vertexStart),s=this.geometry;for(let o=0,l=i.length;o<l;o++){const c=r[o],d=i[c];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:p,vertexStart:m,reservedIndexCount:v}=d,y=s.index,S=y.array,M=e-m;for(let w=p;w<p+v;w++)S[w]=S[w]+M;y.array.copyWithin(t,p,p+v),y.addUpdateRange(t,v),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:p,reservedVertexCount:m}=d,v=s.attributes;for(const y in v){const S=v[y],{array:M,itemSize:w}=S;M.copyWithin(e*w,p*w,(p+m)*w),S.addUpdateRange(e*w,m*w)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new hr,o=i.index,l=i.attributes.position;for(let c=r.start,d=r.start+r.count;c<d;c++){let p=c;o&&(p=o.getX(p)),s.expandByPoint(Vp.fromBufferAttribute(l,p))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new $i;this.getBoundingBoxAt(e,Uv),Uv.getCenter(s.center);const o=i.index,l=i.attributes.position;let c=0;for(let d=r.start,p=r.start+r.count;d<p;d++){let m=d;o&&(m=o.getX(m)),Vp.fromBufferAttribute(l,m),c=Math.max(c,s.center.distanceToSquared(Vp))}s.radius=Math.sqrt(c),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Rx);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);pu(this._multiDrawCounts,r),pu(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),pu(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),pu(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),pu(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new qt,this._initializeGeometry(s));const o=this.geometry;s.index&&pu(s.index.array,o.index.array);for(const l in s.attributes)pu(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;lr.material=this.material,lr.geometry.index=o.index,lr.geometry.attributes=o.attributes,lr.geometry.boundingBox===null&&(lr.geometry.boundingBox=new hr),lr.geometry.boundingSphere===null&&(lr.geometry.boundingSphere=new $i);for(let l=0,c=i.length;l<c;l++){if(!i[l].visible||!i[l].active)continue;const d=i[l].geometryIndex,p=r[d];lr.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,lr.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,lr.geometry.boundingBox),this.getBoundingSphereAt(d,lr.geometry.boundingSphere),lr.raycast(e,Hv);for(let m=0,v=Hv.length;m<v;m++){const y=Hv[m];y.object=this,y.batchId=l,t.push(y)}Hv.length=0}lr.material=null,lr.geometry.index=null,lr.geometry.attributes={},lr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,d=this._multiDrawStarts,p=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,S=y.image.data;v&&(Vr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Ix.setFromProjectionMatrix(Vr,e.coordinateSystem));let M=0;if(this.sortObjects){Vr.copy(this.matrixWorld).invert(),Vp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Vr),mM.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Vr);for(let C=0,b=c.length;C<b;C++)if(c[C].visible&&c[C].active){const P=c[C].geometryIndex;this.getMatrixAt(C,Vr),this.getBoundingSphereAt(P,fu).applyMatrix4(Vr);let F=!1;if(v&&(F=!Ix.intersectsSphere(fu)),!F){const N=m[P],k=UO.subVectors(fu.center,Vp).dot(mM);Px.push(N.start,N.count,k,C)}}const w=Px.list,x=this.customSort;x===null?w.sort(s.transparent?FO:NO):x.call(this,w,i);for(let C=0,b=w.length;C<b;C++){const P=w[C];d[M]=P.start*l,p[M]=P.count,S[M]=P.index,M++}Px.reset()}else for(let w=0,x=c.length;w<x;w++)if(c[w].visible&&c[w].active){const C=c[w].geometryIndex;let b=!1;if(v&&(this.getMatrixAt(w,Vr),this.getBoundingSphereAt(C,fu).applyMatrix4(Vr),b=!Ix.intersectsSphere(fu)),!b){const P=m[C];d[M]=P.start*l,p[M]=P.count,S[M]=w,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class fr extends xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const fy=new X,py=new X,gM=new Nt,Wp=new ud,zv=new $i,Dx=new X,vM=new X;class al extends fn{constructor(e=new qt,t=new fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)fy.fromBufferAttribute(t,r-1),py.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=fy.distanceTo(py);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),zv.copy(i.boundingSphere),zv.applyMatrix4(r),zv.radius+=s,e.ray.intersectsSphere(zv)===!1)return;gM.copy(r).invert(),Wp.copy(e.ray).applyMatrix4(gM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const y=Math.max(0,o.start),S=Math.min(p.count,o.start+o.count);for(let M=y,w=S-1;M<w;M+=d){const x=p.getX(M),C=p.getX(M+1),b=Gv(this,e,Wp,c,x,C);b&&t.push(b)}if(this.isLineLoop){const M=p.getX(S-1),w=p.getX(y),x=Gv(this,e,Wp,c,M,w);x&&t.push(x)}}else{const y=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let M=y,w=S-1;M<w;M+=d){const x=Gv(this,e,Wp,c,M,M+1);x&&t.push(x)}if(this.isLineLoop){const M=Gv(this,e,Wp,c,S-1,y);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Gv(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(fy.fromBufferAttribute(o,r),py.fromBufferAttribute(o,s),t.distanceSqToSegment(fy,py,Dx,vM)>i)return;Dx.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(Dx);if(!(c<e.near||c>e.far))return{distance:c,point:vM.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const yM=new X,_M=new X;class wo extends al{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)yM.fromBufferAttribute(t,r),_M.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+yM.distanceTo(_M);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xw extends al{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ng extends xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xM=new Nt,eS=new ud,Vv=new $i,Wv=new X;let Aw=class extends fn{constructor(e=new qt,t=new ng){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Vv.copy(i.boundingSphere),Vv.applyMatrix4(r),Vv.radius+=s,e.ray.intersectsSphere(Vv)===!1)return;xM.copy(r).invert(),eS.copy(e.ray).applyMatrix4(xM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=i.index,m=i.attributes.position;if(d!==null){const v=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let S=v,M=y;S<M;S++){const w=d.getX(S);Wv.fromBufferAttribute(m,w),AM(Wv,w,c,r,e,t,this)}}else{const v=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let S=v,M=y;S<M;S++)Wv.fromBufferAttribute(m,S),AM(Wv,S,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function AM(n,e,t,i,r,s,o){const l=eS.distanceSqToPoint(n);if(l<t){const c=new X;eS.closestPointToPoint(n,c),c.applyMatrix4(i);const d=r.ray.origin.distanceTo(c);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Xa extends fn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class zO extends Hn{constructor(e,t,i,r,s,o,l,c,d){super(e,t,i,r,s,o,l,c,d),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:di,this.magFilter=s!==void 0?s:di,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class GO extends Hn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ui,this.minFilter=Ui,this.generateMipmaps=!1,this.needsUpdate=!0}}class qy extends Hn{constructor(e,t,i,r,s,o,l,c,d,p,m,v){super(null,o,l,c,d,p,r,s,m,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class VO extends qy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=cs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class WO extends qy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,sl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class jO extends Hn{constructor(e,t,i,r,s,o,l,c,d){super(e,t,i,r,s,o,l,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Sw extends Hn{constructor(e,t,i,r,s,o,l,c,d,p=Vu){if(p!==Vu&&p!==Qu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===Vu&&(i=ol),i===void 0&&p===Qu&&(i=qu),super(null,r,s,o,l,c,p,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Ui,this.minFilter=c!==void 0?c:Ui,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Eo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,c=s-1,d;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),d=i[r]-o,d<0)l=r+1;else if(d>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const p=i[r],v=i[r+1]-p,y=(o-p)/v;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new Be:new X);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new X,r=[],s=[],o=[],l=new X,c=new Nt;for(let y=0;y<=e;y++){const S=y/e;r[y]=this.getTangentAt(S,new X)}s[0]=new X,o[0]=new X;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=d&&(d=p,i.set(1,0,0)),m<=d&&(d=m,i.set(0,1,0)),v<=d&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),l.crossVectors(r[y-1],r[y]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(Yt(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(l,S))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Yt(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let S=1;S<=e;S++)s[S].applyMatrix4(c.makeRotationAxis(r[S],y*S)),o[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Qy extends Eo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new Be){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,y=d-this.aY;c=v*p-y*m+this.aX,d=v*m+y*p+this.aY}return i.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class FI extends Qy{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function ww(){let n=0,e=0,t=0,i=0;function r(s,o,l,c){n=s,e=l,t=-3*s+3*o-2*l-c,i=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,d){r(o,l,d*(l-s),d*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,d,p,m){let v=(o-s)/d-(l-s)/(d+p)+(l-o)/p,y=(l-o)/p-(c-o)/(p+m)+(c-l)/m;v*=p,y*=p,r(o,l,v,y)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const jv=new X,Bx=new ww,Lx=new ww,Nx=new ww;class OI extends Eo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new X){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let d,p;this.closed||l>0?d=r[(l-1)%s]:(jv.subVectors(r[0],r[1]).add(r[0]),d=jv);const m=r[l%s],v=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(jv.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=jv),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(d.distanceToSquared(m),y),M=Math.pow(m.distanceToSquared(v),y),w=Math.pow(v.distanceToSquared(p),y);M<1e-4&&(M=1),S<1e-4&&(S=M),w<1e-4&&(w=M),Bx.initNonuniformCatmullRom(d.x,m.x,v.x,p.x,S,M,w),Lx.initNonuniformCatmullRom(d.y,m.y,v.y,p.y,S,M,w),Nx.initNonuniformCatmullRom(d.z,m.z,v.z,p.z,S,M,w)}else this.curveType==="catmullrom"&&(Bx.initCatmullRom(d.x,m.x,v.x,p.x,this.tension),Lx.initCatmullRom(d.y,m.y,v.y,p.y,this.tension),Nx.initCatmullRom(d.z,m.z,v.z,p.z,this.tension));return i.set(Bx.calc(c),Lx.calc(c),Nx.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new X().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SM(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*l+s*n+t}function XO(n,e){const t=1-n;return t*t*e}function JO(n,e){return 2*(1-n)*n*e}function KO(n,e){return n*n*e}function gm(n,e,t,i){return XO(n,e)+JO(n,t)+KO(n,i)}function YO(n,e){const t=1-n;return t*t*t*e}function qO(n,e){const t=1-n;return 3*t*t*n*e}function QO(n,e){return 3*(1-n)*n*n*e}function $O(n,e){return n*n*n*e}function vm(n,e,t,i,r){return YO(n,e)+qO(n,t)+QO(n,i)+$O(n,r)}class Ew extends Eo{constructor(e=new Be,t=new Be,i=new Be,r=new Be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Be){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(vm(e,r.x,s.x,o.x,l.x),vm(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kI extends Eo{constructor(e=new X,t=new X,i=new X,r=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new X){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(vm(e,r.x,s.x,o.x,l.x),vm(e,r.y,s.y,o.y,l.y),vm(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Mw extends Eo{constructor(e=new Be,t=new Be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UI extends Eo{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new X){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tw extends Eo{constructor(e=new Be,t=new Be,i=new Be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Be){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gm(e,r.x,s.x,o.x),gm(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends Eo{constructor(e=new X,t=new X,i=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new X){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gm(e,r.x,s.x,o.x),gm(e,r.y,s.y,o.y),gm(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bw extends Eo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Be){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return i.set(SM(l,c.x,d.x,p.x,m.x),SM(l,c.y,d.y,p.y,m.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Be().fromArray(r))}return this}}var my=Object.freeze({__proto__:null,ArcCurve:FI,CatmullRomCurve3:OI,CubicBezierCurve:Ew,CubicBezierCurve3:kI,EllipseCurve:Qy,LineCurve:Mw,LineCurve3:UI,QuadraticBezierCurve:Tw,QuadraticBezierCurve3:Cw,SplineCurve:bw});class HI extends Eo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new my[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,l=this.curves[s],c=l.getLength(),d=c===0?0:1-o/c;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let d=0;d<c.length;d++){const p=c[d];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new my[r.type]().fromJSON(r))}return this}}class Dm extends HI{constructor(e){super(),this.type="Path",this.currentPoint=new Be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Mw(this.currentPoint.clone(),new Be(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Tw(this.currentPoint.clone(),new Be(e,t),new Be(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new Ew(this.currentPoint.clone(),new Be(e,t),new Be(i,r),new Be(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new bw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,c){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,i,r,s,o,l,c),this}absellipse(e,t,i,r,s,o,l,c){const d=new Qy(e,t,i,r,s,o,l,c);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ig extends qt{constructor(e=[new Be(0,-.5),new Be(.5,0),new Be(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Yt(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],d=[],p=1/t,m=new X,v=new Be,y=new X,S=new X,M=new X;let w=0,x=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:w=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,y.x=x*1,y.y=-w,y.z=x*0,M.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(M.x,M.y,M.z);break;default:w=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,y.x=x*1,y.y=-w,y.z=x*0,S.copy(y),y.x+=M.x,y.y+=M.y,y.z+=M.z,y.normalize(),c.push(y.x,y.y,y.z),M.copy(S)}for(let C=0;C<=t;C++){const b=i+C*p*r,P=Math.sin(b),F=Math.cos(b);for(let N=0;N<=e.length-1;N++){m.x=e[N].x*P,m.y=e[N].y,m.z=e[N].x*F,o.push(m.x,m.y,m.z),v.x=C/t,v.y=N/(e.length-1),l.push(v.x,v.y);const k=c[3*N+0]*P,H=c[3*N+1],L=c[3*N+0]*F;d.push(k,H,L)}}for(let C=0;C<t;C++)for(let b=0;b<e.length-1;b++){const P=b+C*e.length,F=P,N=P+e.length,k=P+e.length+1,H=P+1;s.push(F,N,H),s.push(k,H,N)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(l,2)),this.setAttribute("normal",new Ct(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ig(e.points,e.segments,e.phiStart,e.phiLength)}}class $y extends ig{constructor(e=1,t=1,i=4,r=8){const s=new Dm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new $y(e.radius,e.length,e.capSegments,e.radialSegments)}}class Zy extends qt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],d=new X,p=new Be;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=i+m/t*r;d.x=e*Math.cos(y),d.y=e*Math.sin(y),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(o[v]/e+1)/2,p.y=(o[v+1]/e+1)/2,c.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rf extends qt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const d=this;r=Math.floor(r),s=Math.floor(s);const p=[],m=[],v=[],y=[];let S=0;const M=[],w=i/2;let x=0;C(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2));function C(){const P=new X,F=new X;let N=0;const k=(t-e)/i;for(let H=0;H<=s;H++){const L=[],B=H/s,V=B*(t-e)+e;for(let ae=0;ae<=r;ae++){const re=ae/r,ge=re*c+l,ve=Math.sin(ge),fe=Math.cos(ge);F.x=V*ve,F.y=-B*i+w,F.z=V*fe,m.push(F.x,F.y,F.z),P.set(ve,k,fe).normalize(),v.push(P.x,P.y,P.z),y.push(re,1-B),L.push(S++)}M.push(L)}for(let H=0;H<r;H++)for(let L=0;L<s;L++){const B=M[L][H],V=M[L+1][H],ae=M[L+1][H+1],re=M[L][H+1];(e>0||L!==0)&&(p.push(B,V,re),N+=3),(t>0||L!==s-1)&&(p.push(V,ae,re),N+=3)}d.addGroup(x,N,0),x+=N}function b(P){const F=S,N=new Be,k=new X;let H=0;const L=P===!0?e:t,B=P===!0?1:-1;for(let ae=1;ae<=r;ae++)m.push(0,w*B,0),v.push(0,B,0),y.push(.5,.5),S++;const V=S;for(let ae=0;ae<=r;ae++){const ge=ae/r*c+l,ve=Math.cos(ge),fe=Math.sin(ge);k.x=L*fe,k.y=w*B,k.z=L*ve,m.push(k.x,k.y,k.z),v.push(0,B,0),N.x=ve*.5+.5,N.y=fe*.5*B+.5,y.push(N.x,N.y),S++}for(let ae=0;ae<r;ae++){const re=F+ae,ge=V+ae;P===!0?p.push(ge,ge+1,re):p.push(ge+1,ge,re),H+=3}d.addGroup(x,H,P===!0?1:2),x+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class e_ extends Rf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new e_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _c extends qt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),d(i),p(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const b=new X,P=new X,F=new X;for(let N=0;N<t.length;N+=3)y(t[N+0],b),y(t[N+1],P),y(t[N+2],F),c(b,P,F,C)}function c(C,b,P,F){const N=F+1,k=[];for(let H=0;H<=N;H++){k[H]=[];const L=C.clone().lerp(P,H/N),B=b.clone().lerp(P,H/N),V=N-H;for(let ae=0;ae<=V;ae++)ae===0&&H===N?k[H][ae]=L:k[H][ae]=L.clone().lerp(B,ae/V)}for(let H=0;H<N;H++)for(let L=0;L<2*(N-H)-1;L++){const B=Math.floor(L/2);L%2===0?(v(k[H][B+1]),v(k[H+1][B]),v(k[H][B])):(v(k[H][B+1]),v(k[H+1][B+1]),v(k[H+1][B]))}}function d(C){const b=new X;for(let P=0;P<s.length;P+=3)b.x=s[P+0],b.y=s[P+1],b.z=s[P+2],b.normalize().multiplyScalar(C),s[P+0]=b.x,s[P+1]=b.y,s[P+2]=b.z}function p(){const C=new X;for(let b=0;b<s.length;b+=3){C.x=s[b+0],C.y=s[b+1],C.z=s[b+2];const P=w(C)/2/Math.PI+.5,F=x(C)/Math.PI+.5;o.push(P,1-F)}S(),m()}function m(){for(let C=0;C<o.length;C+=6){const b=o[C+0],P=o[C+2],F=o[C+4],N=Math.max(b,P,F),k=Math.min(b,P,F);N>.9&&k<.1&&(b<.2&&(o[C+0]+=1),P<.2&&(o[C+2]+=1),F<.2&&(o[C+4]+=1))}}function v(C){s.push(C.x,C.y,C.z)}function y(C,b){const P=C*3;b.x=e[P+0],b.y=e[P+1],b.z=e[P+2]}function S(){const C=new X,b=new X,P=new X,F=new X,N=new Be,k=new Be,H=new Be;for(let L=0,B=0;L<s.length;L+=9,B+=6){C.set(s[L+0],s[L+1],s[L+2]),b.set(s[L+3],s[L+4],s[L+5]),P.set(s[L+6],s[L+7],s[L+8]),N.set(o[B+0],o[B+1]),k.set(o[B+2],o[B+3]),H.set(o[B+4],o[B+5]),F.copy(C).add(b).add(P).divideScalar(3);const V=w(F);M(N,B+0,C,V),M(k,B+2,b,V),M(H,B+4,P,V)}}function M(C,b,P,F){F<0&&C.x===1&&(o[b]=C.x-1),P.x===0&&P.z===0&&(o[b]=F/2/Math.PI+.5)}function w(C){return Math.atan2(C.z,-C.x)}function x(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _c(e.vertices,e.indices,e.radius,e.details)}}class t_ extends _c{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new t_(e.radius,e.detail)}}const Xv=new X,Jv=new X,Fx=new X,Kv=new Xr;class zI extends qt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(ju*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,d=[0,0,0],p=["a","b","c"],m=new Array(3),v={},y=[];for(let S=0;S<c;S+=3){o?(d[0]=o.getX(S),d[1]=o.getX(S+1),d[2]=o.getX(S+2)):(d[0]=S,d[1]=S+1,d[2]=S+2);const{a:M,b:w,c:x}=Kv;if(M.fromBufferAttribute(l,d[0]),w.fromBufferAttribute(l,d[1]),x.fromBufferAttribute(l,d[2]),Kv.getNormal(Fx),m[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,m[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,m[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let C=0;C<3;C++){const b=(C+1)%3,P=m[C],F=m[b],N=Kv[p[C]],k=Kv[p[b]],H=`${P}_${F}`,L=`${F}_${P}`;L in v&&v[L]?(Fx.dot(v[L].normal)<=s&&(y.push(N.x,N.y,N.z),y.push(k.x,k.y,k.z)),v[L]=null):H in v||(v[H]={index0:d[C],index1:d[b],normal:Fx.clone()})}}for(const S in v)if(v[S]){const{index0:M,index1:w}=v[S];Xv.fromBufferAttribute(l,M),Jv.fromBufferAttribute(l,w),y.push(Xv.x,Xv.y,Xv.z),y.push(Jv.x,Jv.y,Jv.z)}this.setAttribute("position",new Ct(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ju extends Dm{constructor(e){super(e),this.uuid=ds(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Dm().fromJSON(r))}return this}}const ZO={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=GI(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,d,p,m,v,y;if(i&&(s=r3(n,e,s,t)),n.length>80*t){l=d=n[0],c=p=n[1];for(let S=t;S<r;S+=t)m=n[S],v=n[S+1],m<l&&(l=m),v<c&&(c=v),m>d&&(d=m),v>p&&(p=v);y=Math.max(d-l,p-c),y=y!==0?32767/y:0}return Bm(s,o,t,l,c,y,0),o}};function GI(n,e,t,i,r){let s,o;if(r===m3(n,e,t,i)>0)for(s=e;s<t;s+=i)o=wM(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=wM(s,n[s],n[s+1],o);return o&&n_(o,o.next)&&(Nm(o),o=o.next),o}function ed(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(n_(t,t.next)||Qn(t.prev,t,t.next)===0)){if(Nm(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Bm(n,e,t,i,r,s,o){if(!n)return;!o&&s&&c3(n,i,r,s);let l=n,c,d;for(;n.prev!==n.next;){if(c=n.prev,d=n.next,s?t3(n,i,r,s):e3(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(d.i/t|0),Nm(n),n=d.next,l=d.next;continue}if(n=d,n===l){o?o===1?(n=n3(ed(n),e,t),Bm(n,e,t,i,r,s,2)):o===2&&i3(n,e,t,i,r,s):Bm(ed(n),e,t,i,r,s,1);break}}}function e3(n){const e=n.prev,t=n,i=n.next;if(Qn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,c=t.y,d=i.y,p=r<s?r<o?r:o:s<o?s:o,m=l<c?l<d?l:d:c<d?c:d,v=r>s?r>o?r:o:s>o?s:o,y=l>c?l>d?l:d:c>d?c:d;let S=i.next;for(;S!==e;){if(S.x>=p&&S.x<=v&&S.y>=m&&S.y<=y&&Xh(r,l,s,c,o,d,S.x,S.y)&&Qn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function t3(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Qn(r,s,o)>=0)return!1;const l=r.x,c=s.x,d=o.x,p=r.y,m=s.y,v=o.y,y=l<c?l<d?l:d:c<d?c:d,S=p<m?p<v?p:v:m<v?m:v,M=l>c?l>d?l:d:c>d?c:d,w=p>m?p>v?p:v:m>v?m:v,x=tS(y,S,e,t,i),C=tS(M,w,e,t,i);let b=n.prevZ,P=n.nextZ;for(;b&&b.z>=x&&P&&P.z<=C;){if(b.x>=y&&b.x<=M&&b.y>=S&&b.y<=w&&b!==r&&b!==o&&Xh(l,p,c,m,d,v,b.x,b.y)&&Qn(b.prev,b,b.next)>=0||(b=b.prevZ,P.x>=y&&P.x<=M&&P.y>=S&&P.y<=w&&P!==r&&P!==o&&Xh(l,p,c,m,d,v,P.x,P.y)&&Qn(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;b&&b.z>=x;){if(b.x>=y&&b.x<=M&&b.y>=S&&b.y<=w&&b!==r&&b!==o&&Xh(l,p,c,m,d,v,b.x,b.y)&&Qn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;P&&P.z<=C;){if(P.x>=y&&P.x<=M&&P.y>=S&&P.y<=w&&P!==r&&P!==o&&Xh(l,p,c,m,d,v,P.x,P.y)&&Qn(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function n3(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!n_(r,s)&&VI(r,i,i.next,s)&&Lm(r,s)&&Lm(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Nm(i),Nm(i.next),i=n=s),i=i.next}while(i!==n);return ed(i)}function i3(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&h3(o,l)){let c=WI(o,l);o=ed(o,o.next),c=ed(c,c.next),Bm(o,e,t,i,r,s,0),Bm(c,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function r3(n,e,t,i){const r=[];let s,o,l,c,d;for(s=0,o=e.length;s<o;s++)l=e[s]*i,c=s<o-1?e[s+1]*i:n.length,d=GI(n,l,c,i,!1),d===d.next&&(d.steiner=!0),r.push(d3(d));for(r.sort(s3),s=0;s<r.length;s++)t=o3(r[s],t);return t}function s3(n,e){return n.x-e.x}function o3(n,e){const t=a3(n,e);if(!t)return e;const i=WI(t,n);return ed(i,i.next),ed(t,t.next)}function a3(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const v=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>i&&(i=v,r=t.x<t.next.x?t:t.next,v===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,d=r.y;let p=1/0,m;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&Xh(o<d?s:i,o,c,d,o<d?i:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),Lm(t,n)&&(m<p||m===p&&(t.x>r.x||t.x===r.x&&l3(r,t)))&&(r=t,p=m)),t=t.next;while(t!==l);return r}function l3(n,e){return Qn(n.prev,n,e.prev)<0&&Qn(e.next,n,n.next)<0}function c3(n,e,t,i){let r=n;do r.z===0&&(r.z=tS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,u3(r)}function u3(n){let e,t,i,r,s,o,l,c,d=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,l=0,e=0;e<d&&(l++,i=i.nextZ,!!i);e++);for(c=d;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,d*=2}while(o>1);return n}function tS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function d3(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Xh(n,e,t,i,r,s,o,l){return(r-o)*(e-l)>=(n-o)*(s-l)&&(n-o)*(i-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(i-l)}function h3(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!f3(n,e)&&(Lm(n,e)&&Lm(e,n)&&p3(n,e)&&(Qn(n.prev,n,e.prev)||Qn(n,e.prev,e))||n_(n,e)&&Qn(n.prev,n,n.next)>0&&Qn(e.prev,e,e.next)>0)}function Qn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function n_(n,e){return n.x===e.x&&n.y===e.y}function VI(n,e,t,i){const r=qv(Qn(n,e,t)),s=qv(Qn(n,e,i)),o=qv(Qn(t,i,n)),l=qv(Qn(t,i,e));return!!(r!==s&&o!==l||r===0&&Yv(n,t,e)||s===0&&Yv(n,i,e)||o===0&&Yv(t,n,i)||l===0&&Yv(t,e,i))}function Yv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function qv(n){return n>0?1:n<0?-1:0}function f3(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&VI(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Lm(n,e){return Qn(n.prev,n,n.next)<0?Qn(n,e,n.next)>=0&&Qn(n,n.prev,e)>=0:Qn(n,e,n.prev)<0||Qn(n,n.next,e)<0}function p3(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function WI(n,e){const t=new nS(n.i,n.x,n.y),i=new nS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function wM(n,e,t,i){const r=new nS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Nm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function nS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m3(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Xo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Xo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];EM(e),MM(i,e);let o=e.length;t.forEach(EM);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,MM(i,t[c]);const l=ZO.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function EM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function MM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class i_ extends qt{constructor(e=new Ju([new Be(.5,.5),new Be(-.5,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const d=e[l];o(d)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(l){const c=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:g3;let b,P=!1,F,N,k,H;x&&(b=x.getSpacedPoints(p),P=!0,v=!1,F=x.computeFrenetFrames(p,!1),N=new X,k=new X,H=new X),v||(w=0,y=0,S=0,M=0);const L=l.extractPoints(d);let B=L.shape;const V=L.holes;if(!Xo.isClockWise(B)){B=B.reverse();for(let De=0,Fe=V.length;De<Fe;De++){const K=V[De];Xo.isClockWise(K)&&(V[De]=K.reverse())}}const re=Xo.triangulateShape(B,V),ge=B;for(let De=0,Fe=V.length;De<Fe;De++){const K=V[De];B=B.concat(K)}function ve(De,Fe,K){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),De.clone().addScaledVector(Fe,K)}const fe=B.length,he=re.length;function U(De,Fe,K){let gt,Ue,Ze;const je=De.x-Fe.x,Et=De.y-Fe.y,Ye=K.x-De.x,J=K.y-De.y,z=je*je+Et*Et,pe=je*J-Et*Ye;if(Math.abs(pe)>Number.EPSILON){const Te=Math.sqrt(z),Oe=Math.sqrt(Ye*Ye+J*J),Ie=Fe.x-Et/Te,ot=Fe.y+je/Te,qe=K.x-J/Oe,ut=K.y+Ye/Oe,jt=((qe-Ie)*J-(ut-ot)*Ye)/(je*J-Et*Ye);gt=Ie+je*jt-De.x,Ue=ot+Et*jt-De.y;const ze=gt*gt+Ue*Ue;if(ze<=2)return new Be(gt,Ue);Ze=Math.sqrt(ze/2)}else{let Te=!1;je>Number.EPSILON?Ye>Number.EPSILON&&(Te=!0):je<-Number.EPSILON?Ye<-Number.EPSILON&&(Te=!0):Math.sign(Et)===Math.sign(J)&&(Te=!0),Te?(gt=-Et,Ue=je,Ze=Math.sqrt(z)):(gt=je,Ue=Et,Ze=Math.sqrt(z/2))}return new Be(gt/Ze,Ue/Ze)}const Z=[];for(let De=0,Fe=ge.length,K=Fe-1,gt=De+1;De<Fe;De++,K++,gt++)K===Fe&&(K=0),gt===Fe&&(gt=0),Z[De]=U(ge[De],ge[K],ge[gt]);const Q=[];let W,ie=Z.concat();for(let De=0,Fe=V.length;De<Fe;De++){const K=V[De];W=[];for(let gt=0,Ue=K.length,Ze=Ue-1,je=gt+1;gt<Ue;gt++,Ze++,je++)Ze===Ue&&(Ze=0),je===Ue&&(je=0),W[gt]=U(K[gt],K[Ze],K[je]);Q.push(W),ie=ie.concat(W)}for(let De=0;De<w;De++){const Fe=De/w,K=y*Math.cos(Fe*Math.PI/2),gt=S*Math.sin(Fe*Math.PI/2)+M;for(let Ue=0,Ze=ge.length;Ue<Ze;Ue++){const je=ve(ge[Ue],Z[Ue],gt);Re(je.x,je.y,-K)}for(let Ue=0,Ze=V.length;Ue<Ze;Ue++){const je=V[Ue];W=Q[Ue];for(let Et=0,Ye=je.length;Et<Ye;Et++){const J=ve(je[Et],W[Et],gt);Re(J.x,J.y,-K)}}}const Le=S+M;for(let De=0;De<fe;De++){const Fe=v?ve(B[De],ie[De],Le):B[De];P?(k.copy(F.normals[0]).multiplyScalar(Fe.x),N.copy(F.binormals[0]).multiplyScalar(Fe.y),H.copy(b[0]).add(k).add(N),Re(H.x,H.y,H.z)):Re(Fe.x,Fe.y,0)}for(let De=1;De<=p;De++)for(let Fe=0;Fe<fe;Fe++){const K=v?ve(B[Fe],ie[Fe],Le):B[Fe];P?(k.copy(F.normals[De]).multiplyScalar(K.x),N.copy(F.binormals[De]).multiplyScalar(K.y),H.copy(b[De]).add(k).add(N),Re(H.x,H.y,H.z)):Re(K.x,K.y,m/p*De)}for(let De=w-1;De>=0;De--){const Fe=De/w,K=y*Math.cos(Fe*Math.PI/2),gt=S*Math.sin(Fe*Math.PI/2)+M;for(let Ue=0,Ze=ge.length;Ue<Ze;Ue++){const je=ve(ge[Ue],Z[Ue],gt);Re(je.x,je.y,m+K)}for(let Ue=0,Ze=V.length;Ue<Ze;Ue++){const je=V[Ue];W=Q[Ue];for(let Et=0,Ye=je.length;Et<Ye;Et++){const J=ve(je[Et],W[Et],gt);P?Re(J.x,J.y+b[p-1].y,b[p-1].x+K):Re(J.x,J.y,m+K)}}}ce(),Ee();function ce(){const De=r.length/3;if(v){let Fe=0,K=fe*Fe;for(let gt=0;gt<he;gt++){const Ue=re[gt];Xe(Ue[2]+K,Ue[1]+K,Ue[0]+K)}Fe=p+w*2,K=fe*Fe;for(let gt=0;gt<he;gt++){const Ue=re[gt];Xe(Ue[0]+K,Ue[1]+K,Ue[2]+K)}}else{for(let Fe=0;Fe<he;Fe++){const K=re[Fe];Xe(K[2],K[1],K[0])}for(let Fe=0;Fe<he;Fe++){const K=re[Fe];Xe(K[0]+fe*p,K[1]+fe*p,K[2]+fe*p)}}i.addGroup(De,r.length/3-De,0)}function Ee(){const De=r.length/3;let Fe=0;Ne(ge,Fe),Fe+=ge.length;for(let K=0,gt=V.length;K<gt;K++){const Ue=V[K];Ne(Ue,Fe),Fe+=Ue.length}i.addGroup(De,r.length/3-De,1)}function Ne(De,Fe){let K=De.length;for(;--K>=0;){const gt=K;let Ue=K-1;Ue<0&&(Ue=De.length-1);for(let Ze=0,je=p+w*2;Ze<je;Ze++){const Et=fe*Ze,Ye=fe*(Ze+1),J=Fe+gt+Et,z=Fe+Ue+Et,pe=Fe+Ue+Ye,Te=Fe+gt+Ye;it(J,z,pe,Te)}}}function Re(De,Fe,K){c.push(De),c.push(Fe),c.push(K)}function Xe(De,Fe,K){$e(De),$e(Fe),$e(K);const gt=r.length/3,Ue=C.generateTopUV(i,r,gt-3,gt-2,gt-1);rt(Ue[0]),rt(Ue[1]),rt(Ue[2])}function it(De,Fe,K,gt){$e(De),$e(Fe),$e(gt),$e(Fe),$e(K),$e(gt);const Ue=r.length/3,Ze=C.generateSideWallUV(i,r,Ue-6,Ue-3,Ue-2,Ue-1);rt(Ze[0]),rt(Ze[1]),rt(Ze[3]),rt(Ze[1]),rt(Ze[2]),rt(Ze[3])}function $e(De){r.push(c[De*3+0]),r.push(c[De*3+1]),r.push(c[De*3+2])}function rt(De){s.push(De.x),s.push(De.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return v3(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new my[r.type]().fromJSON(r)),new i_(i,e.options)}}const g3={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],c=e[i*3+1],d=e[r*3],p=e[r*3+1];return[new Be(s,o),new Be(l,c),new Be(d,p)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],d=e[i*3],p=e[i*3+1],m=e[i*3+2],v=e[r*3],y=e[r*3+1],S=e[r*3+2],M=e[s*3],w=e[s*3+1],x=e[s*3+2];return Math.abs(l-p)<Math.abs(o-d)?[new Be(o,1-c),new Be(d,1-m),new Be(v,1-S),new Be(M,1-x)]:[new Be(l,1-c),new Be(p,1-m),new Be(y,1-S),new Be(w,1-x)]}};function v3(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class r_ extends _c{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new r_(e.radius,e.detail)}}class rg extends _c{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rg(e.radius,e.detail)}}class If extends qt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),c=Math.floor(r),d=l+1,p=c+1,m=e/l,v=t/c,y=[],S=[],M=[],w=[];for(let x=0;x<p;x++){const C=x*v-o;for(let b=0;b<d;b++){const P=b*m-s;S.push(P,-C,0),M.push(0,0,1),w.push(b/l),w.push(1-x/c)}}for(let x=0;x<c;x++)for(let C=0;C<l;C++){const b=C+d*x,P=C+d*(x+1),F=C+1+d*(x+1),N=C+1+d*x;y.push(b,P,N),y.push(P,F,N)}this.setIndex(y),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(M,3)),this.setAttribute("uv",new Ct(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new If(e.width,e.height,e.widthSegments,e.heightSegments)}}class s_ extends qt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],d=[],p=[];let m=e;const v=(t-e)/r,y=new X,S=new Be;for(let M=0;M<=r;M++){for(let w=0;w<=i;w++){const x=s+w/i*o;y.x=m*Math.cos(x),y.y=m*Math.sin(x),c.push(y.x,y.y,y.z),d.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,p.push(S.x,S.y)}m+=v}for(let M=0;M<r;M++){const w=M*(i+1);for(let x=0;x<i;x++){const C=x+w,b=C,P=C+i+1,F=C+i+2,N=C+1;l.push(b,P,N),l.push(P,F,N)}}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class o_ extends qt{constructor(e=new Ju([new Be(0,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function d(p){const m=r.length/3,v=p.extractPoints(t);let y=v.shape;const S=v.holes;Xo.isClockWise(y)===!1&&(y=y.reverse());for(let w=0,x=S.length;w<x;w++){const C=S[w];Xo.isClockWise(C)===!0&&(S[w]=C.reverse())}const M=Xo.triangulateShape(y,S);for(let w=0,x=S.length;w<x;w++){const C=S[w];y=y.concat(C)}for(let w=0,x=y.length;w<x;w++){const C=y[w];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let w=0,x=M.length;w<x;w++){const C=M[w],b=C[0]+m,P=C[1]+m,F=C[2]+m;i.push(b,P,F),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return y3(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new o_(i,e.curveSegments)}}function y3(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class sg extends qt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let d=0;const p=[],m=new X,v=new X,y=[],S=[],M=[],w=[];for(let x=0;x<=i;x++){const C=[],b=x/i;let P=0;x===0&&o===0?P=.5/t:x===i&&c===Math.PI&&(P=-.5/t);for(let F=0;F<=t;F++){const N=F/t;m.x=-e*Math.cos(r+N*s)*Math.sin(o+b*l),m.y=e*Math.cos(o+b*l),m.z=e*Math.sin(r+N*s)*Math.sin(o+b*l),S.push(m.x,m.y,m.z),v.copy(m).normalize(),M.push(v.x,v.y,v.z),w.push(N+P,1-b),C.push(d++)}p.push(C)}for(let x=0;x<i;x++)for(let C=0;C<t;C++){const b=p[x][C+1],P=p[x][C],F=p[x+1][C],N=p[x+1][C+1];(x!==0||o>0)&&y.push(b,P,N),(x!==i-1||c<Math.PI)&&y.push(P,F,N)}this.setIndex(y),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(M,3)),this.setAttribute("uv",new Ct(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class a_ extends _c{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a_(e.radius,e.detail)}}class l_ extends qt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],d=[],p=new X,m=new X,v=new X;for(let y=0;y<=i;y++)for(let S=0;S<=r;S++){const M=S/r*s,w=y/i*Math.PI*2;m.x=(e+t*Math.cos(w))*Math.cos(M),m.y=(e+t*Math.cos(w))*Math.sin(M),m.z=t*Math.sin(w),l.push(m.x,m.y,m.z),p.x=e*Math.cos(M),p.y=e*Math.sin(M),v.subVectors(m,p).normalize(),c.push(v.x,v.y,v.z),d.push(S/r),d.push(y/i)}for(let y=1;y<=i;y++)for(let S=1;S<=r;S++){const M=(r+1)*y+S-1,w=(r+1)*(y-1)+S-1,x=(r+1)*(y-1)+S,C=(r+1)*y+S;o.push(M,w,C),o.push(w,x,C)}this.setIndex(o),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class c_ extends qt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],d=[],p=[],m=new X,v=new X,y=new X,S=new X,M=new X,w=new X,x=new X;for(let b=0;b<=i;++b){const P=b/i*s*Math.PI*2;C(P,s,o,e,y),C(P+.01,s,o,e,S),w.subVectors(S,y),x.addVectors(S,y),M.crossVectors(w,x),x.crossVectors(M,w),M.normalize(),x.normalize();for(let F=0;F<=r;++F){const N=F/r*Math.PI*2,k=-t*Math.cos(N),H=t*Math.sin(N);m.x=y.x+(k*x.x+H*M.x),m.y=y.y+(k*x.y+H*M.y),m.z=y.z+(k*x.z+H*M.z),c.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),d.push(v.x,v.y,v.z),p.push(b/i),p.push(F/r)}}for(let b=1;b<=i;b++)for(let P=1;P<=r;P++){const F=(r+1)*(b-1)+(P-1),N=(r+1)*b+(P-1),k=(r+1)*b+P,H=(r+1)*(b-1)+P;l.push(F,N,H),l.push(N,k,H)}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(d,3)),this.setAttribute("uv",new Ct(p,2));function C(b,P,F,N,k){const H=Math.cos(b),L=Math.sin(b),B=F/P*b,V=Math.cos(B);k.x=N*(2+V)*.5*H,k.y=N*(2+V)*L*.5,k.z=N*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class u_ extends qt{constructor(e=new Cw(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new X,c=new X,d=new Be;let p=new X;const m=[],v=[],y=[],S=[];M(),this.setIndex(S),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2));function M(){for(let b=0;b<t;b++)w(b);w(s===!1?t:0),C(),x()}function w(b){p=e.getPointAt(b/t,p);const P=o.normals[b],F=o.binormals[b];for(let N=0;N<=r;N++){const k=N/r*Math.PI*2,H=Math.sin(k),L=-Math.cos(k);c.x=L*P.x+H*F.x,c.y=L*P.y+H*F.y,c.z=L*P.z+H*F.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,m.push(l.x,l.y,l.z)}}function x(){for(let b=1;b<=t;b++)for(let P=1;P<=r;P++){const F=(r+1)*(b-1)+(P-1),N=(r+1)*b+(P-1),k=(r+1)*b+P,H=(r+1)*(b-1)+P;S.push(F,N,H),S.push(N,k,H)}}function C(){for(let b=0;b<=t;b++)for(let P=0;P<=r;P++)d.x=b/t,d.y=P/r,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new u_(new my[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jI extends qt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new X,s=new X;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,p=c.length;d<p;++d){const m=c[d],v=m.start,y=m.count;for(let S=v,M=v+y;S<M;S+=3)for(let w=0;w<3;w++){const x=l.getX(S+w),C=l.getX(S+(w+1)%3);r.fromBufferAttribute(o,x),s.fromBufferAttribute(o,C),TM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let d=0;d<3;d++){const p=3*l+d,m=3*l+(d+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),TM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function TM(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var CM=Object.freeze({__proto__:null,BoxGeometry:dd,CapsuleGeometry:$y,CircleGeometry:Zy,ConeGeometry:e_,CylinderGeometry:Rf,DodecahedronGeometry:t_,EdgesGeometry:zI,ExtrudeGeometry:i_,IcosahedronGeometry:r_,LatheGeometry:ig,OctahedronGeometry:rg,PlaneGeometry:If,PolyhedronGeometry:_c,RingGeometry:s_,ShapeGeometry:o_,SphereGeometry:sg,TetrahedronGeometry:a_,TorusGeometry:l_,TorusKnotGeometry:c_,TubeGeometry:u_,WireframeGeometry:jI});class XI extends xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new st(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class JI extends xo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class og extends xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Us extends og{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class KI extends xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YI extends xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new st(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qI extends xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class QI extends xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ps,this.combine=Ym,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rw extends xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=pI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Iw extends xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class $I extends xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new st(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZI extends fr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ou(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function eP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function tP(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function iS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[l+c]}return r}function Pw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function _3(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],p=d.getValueSize(),m=[],v=[];for(let y=0;y<d.times.length;++y){const S=d.times[y]*r;if(!(S<t||S>=i)){m.push(d.times[y]);for(let M=0;M<p;++M)v.push(d.values[y*p+M])}}m.length!==0&&(d.times=Ou(m,d.times.constructor),d.values=Ou(v,d.values.constructor),o.push(d))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function x3(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const d=n.tracks.find(function(x){return x.name===l.name&&x.ValueTypeName===c});if(d===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let v=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const S=l.times.length-1;let M;if(s<=l.times[0]){const x=p,C=m-p;M=l.values.slice(x,C)}else if(s>=l.times[S]){const x=S*m+p,C=x+m-p;M=l.values.slice(x,C)}else{const x=l.createInterpolant(),C=p,b=m-p;x.evaluate(s),M=x.resultBuffer.slice(C,b)}c==="quaternion"&&new Hi().fromArray(M).normalize().conjugate().toArray(M);const w=d.times.length;for(let x=0;x<w;++x){const C=x*y+v;if(c==="quaternion")Hi.multiplyQuaternionsFlat(d.values,C,M,0,d.values,C);else{const b=y-v*2;for(let P=0;P<b;++P)d.values[C+P]-=M[P]}}}return n.blendMode=lw,n}const A3={convertArray:Ou,isTypedArray:eP,getKeyframeOrder:tP,sortedArray:iS,flattenJSON:Pw,subclip:_3,makeClipAdditive:x3};class Pf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class nP extends Pf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lu,endingEnd:Lu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case Nu:s=e,l=2*t-i;break;case Cm:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Nu:o=e,c=2*i-t;break;case Cm:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const d=(i-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(c-i),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,S=(i-t)/(r-t),M=S*S,w=M*S,x=-v*w+2*v*M-v*S,C=(1+v)*w+(-1.5-2*v)*M+(-.5+v)*S+1,b=(-1-y)*w+(1.5+y)*M+.5*S,P=y*w-y*M;for(let F=0;F!==l;++F)s[F]=x*o[p+F]+C*o[d+F]+b*o[c+F]+P*o[m+F];return s}}class Dw extends Pf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,p=(i-t)/(r-t),m=1-p;for(let v=0;v!==l;++v)s[v]=o[d+v]*m+o[c+v]*p;return s}}class iP extends Pf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Mo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ou(t,this.TimeBufferType),this.values=Ou(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ou(e.times,Array),values:Ou(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new iP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case hf:t=this.InterpolantFactoryMethodDiscrete;break;case ff:t=this.InterpolantFactoryMethodLinear;break;case _0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hf;case this.InterpolantFactoryMethodLinear:return ff;case this.InterpolantFactoryMethodSmooth:return _0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&eP(r))for(let l=0,c=r.length;l!==c;++l){const d=r[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===_0,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(r)c=!0;else{const m=l*i,v=m-i,y=m+i;for(let S=0;S!==i;++S){const M=t[m+S];if(M!==t[v+S]||M!==t[y+S]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const m=l*i,v=o*i;for(let y=0;y!==i;++y)t[v+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let l=s*i,c=o*i,d=0;d!==i;++d)t[c+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Mo.prototype.TimeBufferType=Float32Array;Mo.prototype.ValueBufferType=Float32Array;Mo.prototype.DefaultInterpolation=ff;class hd extends Mo{constructor(e,t,i){super(e,t,i)}}hd.prototype.ValueTypeName="bool";hd.prototype.ValueBufferType=Array;hd.prototype.DefaultInterpolation=hf;hd.prototype.InterpolantFactoryMethodLinear=void 0;hd.prototype.InterpolantFactoryMethodSmooth=void 0;class Bw extends Mo{}Bw.prototype.ValueTypeName="color";class td extends Mo{}td.prototype.ValueTypeName="number";class rP extends Pf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let d=e*l;for(let p=d+l;d!==p;d+=4)Hi.slerpFlat(s,0,o,d-l,o,d,c);return s}}class nd extends Mo{InterpolantFactoryMethodLinear(e){return new rP(this.times,this.values,this.getValueSize(),e)}}nd.prototype.ValueTypeName="quaternion";nd.prototype.InterpolantFactoryMethodSmooth=void 0;class fd extends Mo{constructor(e,t,i){super(e,t,i)}}fd.prototype.ValueTypeName="string";fd.prototype.ValueBufferType=Array;fd.prototype.DefaultInterpolation=hf;fd.prototype.InterpolantFactoryMethodLinear=void 0;fd.prototype.InterpolantFactoryMethodSmooth=void 0;class id extends Mo{}id.prototype.ValueTypeName="vector";class gf{constructor(e="",t=-1,i=[],r=jy){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ds(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(w3(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Mo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],d=[];c.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const p=tP(c);c=iS(c,1,p),d=iS(d,1,p),!r&&c[0]===0&&(c.push(s),d.push(d[0])),o.push(new td(".morphTargetInfluences["+t[l].name+"]",c,d).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.name.match(s);if(p&&p.length>1){const m=p[1];let v=r[m];v||(r[m]=v=[]),v.push(d)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,v,y,S,M){if(y.length!==0){const w=[],x=[];Pw(y,w,x,S),w.length!==0&&M.push(new m(v,w,x))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const v=d[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let S;for(S=0;S<v.length;S++)if(v[S].morphTargets)for(let M=0;M<v[S].morphTargets.length;M++)y[v[S].morphTargets[M]]=-1;for(const M in y){const w=[],x=[];for(let C=0;C!==v[S].morphTargets.length;++C){const b=v[S];w.push(b.time),x.push(b.morphTarget===M?1:0)}r.push(new td(".morphTargetInfluence["+M+"]",w,x))}c=y.length*o}else{const y=".bones["+t[m].name+"]";i(id,y+".position",v,"pos",r),i(nd,y+".quaternion",v,"rot",r),i(id,y+".scale",v,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function S3(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return td;case"vector":case"vector2":case"vector3":case"vector4":return id;case"color":return Bw;case"quaternion":return nd;case"bool":case"boolean":return hd;case"string":return fd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function w3(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=S3(n.type);if(n.times===void 0){const t=[],i=[];Pw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ja={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Lw{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,c;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return m!==-1&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,v=d.length;m<v;m+=2){const y=d[m],S=d[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return S}return null}}}const Jh=new Lw;class pr{constructor(e){this.manager=e!==void 0?e:Jh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}pr.DEFAULT_MATERIAL_NAME="__DEFAULT";const za={};class E3 extends Error{constructor(e,t){super(e),this.response=t}}class ms extends pr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ja.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(za[e]!==void 0){za[e].push({onLoad:t,onProgress:i,onError:r});return}za[e]=[],za[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=za[e],m=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=v?parseInt(v):0,S=y!==0;let M=0;const w=new ReadableStream({start(x){C();function C(){m.read().then(({done:b,value:P})=>{if(b)x.close();else{M+=P.byteLength;const F=new ProgressEvent("progress",{lengthComputable:S,loaded:M,total:y});for(let N=0,k=p.length;N<k;N++){const H=p[N];H.onProgress&&H.onProgress(F)}x.enqueue(P),C()}},b=>{x.error(b)})}}});return new Response(w)}else throw new E3(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return d.arrayBuffer().then(S=>y.decode(S))}}}).then(d=>{Ja.add(e,d);const p=za[e];delete za[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=za[e];if(p===void 0)throw this.manager.itemError(e),d;delete za[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class M3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ms(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=gf.parse(e[i]);t.push(r)}return t}}class T3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new qy,c=new ms(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let d=0;function p(m){c.load(e[m],function(v){const y=s.parse(v,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(l.minFilter=di),l.image=o,l.format=y.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)p(m);else c.load(e,function(m){const v=s.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let S=0;S<y;S++){o[S]={mipmaps:[]};for(let M=0;M<v.mipmapCount;M++)o[S].mipmaps.push(v.mipmaps[S*v.mipmapCount+M]),o[S].format=v.format,o[S].width=v.width,o[S].height=v.height}l.image=o}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=di),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class Fm extends pr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ja.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=Pm("img");function c(){p(),Ja.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(m){p(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class C3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=new $m;s.colorSpace=jr;const o=new Fm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(d){o.load(e[d],function(p){s.images[d]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)c(d);return s}}class b3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new jo,l=new ms(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let d;try{d=s.parse(c)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:cs,o.wrapT=d.wrapT!==void 0?d.wrapT:cs,o.magFilter=d.magFilter!==void 0?d.magFilter:di,o.minFilter=d.minFilter!==void 0?d.minFilter:di,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=ks),d.mipmapCount===1&&(o.minFilter=di),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},i,r),o}}class sP extends pr{constructor(e){super(e)}load(e,t,i,r){const s=new Hn,o=new Fm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class xc extends fn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class oP extends xc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ox=new Nt,bM=new X,RM=new X;class Nw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Be(512,512),this.map=null,this.mapPass=null,this.matrix=new Nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tg,this._frameExtents=new Be(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;bM.setFromMatrixPosition(e.matrixWorld),t.position.copy(bM),RM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(RM),t.updateMatrixWorld(),Ox.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ox),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ox)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class R3 extends Nw{constructor(){super(new jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=pf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Fw extends xc{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new R3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const IM=new Nt,jp=new X,kx=new X;class I3 extends Nw{constructor(){super(new jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Be(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jp.setFromMatrixPosition(e.matrixWorld),i.position.copy(jp),kx.copy(i.position),kx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(kx),i.updateMatrixWorld(),r.makeTranslation(-jp.x,-jp.y,-jp.z),IM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IM)}}class Ow extends xc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new I3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class go extends Qm{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class P3 extends Nw{constructor(){super(new go(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kw extends xc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.shadow=new P3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aP extends xc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class lP extends xc{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class cP{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new X)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class uP extends xc{constructor(e=new cP,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class d_ extends pr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ms(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new st().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new st().setHex(o.value);break;case"v2":r.uniforms[s].value=new Be().fromArray(o.value);break;case"v3":r.uniforms[s].value=new X().fromArray(o.value);break;case"v4":r.uniforms[s].value=new yn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new $t().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Nt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Be().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return d_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:XI,SpriteMaterial:vw,RawShaderMaterial:JI,ShaderMaterial:xo,PointsMaterial:ng,MeshPhysicalMaterial:Us,MeshStandardMaterial:og,MeshPhongMaterial:KI,MeshToonMaterial:YI,MeshNormalMaterial:qI,MeshLambertMaterial:QI,MeshDepthMaterial:Rw,MeshDistanceMaterial:Iw,MeshBasicMaterial:us,MeshMatcapMaterial:$I,LineDashedMaterial:ZI,LineBasicMaterial:fr,Material:xi};return new t[e]}}class lc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dP extends qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hP extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ms(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,S){if(t[S]!==void 0)return t[S];const w=y.interleavedBuffers[S],x=s(y,w.buffer),C=jh(w.type,x),b=new Zm(C,w.stride);return b.uuid=w.uuid,t[S]=b,b}function s(y,S){if(i[S]!==void 0)return i[S];const w=y.arrayBuffers[S],x=new Uint32Array(w).buffer;return i[S]=x,x}const o=e.isInstancedBufferGeometry?new dP:new qt,l=e.data.index;if(l!==void 0){const y=jh(l.type,l.array);o.setIndex(new _n(y,1))}const c=e.data.attributes;for(const y in c){const S=c[y];let M;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);M=new pc(w,S.itemSize,S.offset,S.normalized)}else{const w=jh(S.type,S.array),x=S.isInstancedBufferAttribute?Zu:_n;M=new x(w,S.itemSize,S.normalized)}S.name!==void 0&&(M.name=S.name),S.usage!==void 0&&M.setUsage(S.usage),o.setAttribute(y,M)}const d=e.data.morphAttributes;if(d)for(const y in d){const S=d[y],M=[];for(let w=0,x=S.length;w<x;w++){const C=S[w];let b;if(C.isInterleavedBufferAttribute){const P=r(e.data,C.data);b=new pc(P,C.itemSize,C.offset,C.normalized)}else{const P=jh(C.type,C.array);b=new _n(P,C.itemSize,C.normalized)}C.name!==void 0&&(b.name=C.name),M.push(b)}o.morphAttributes[y]=M}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,S=m.length;y!==S;++y){const M=m[y];o.addGroup(M.start,M.count,M.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new X;v.center!==void 0&&y.fromArray(v.center),o.boundingSphere=new $i(y,v.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class D3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?lc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new ms(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let d=null;try{d=JSON.parse(c)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?lc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ms(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,i),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),this.bindLightTargets(d),t!==void 0){let m=!1;for(const v in o)if(o[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),d=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,d),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Ju().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new eg().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new hP;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in CM?l=CM[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new d_;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=gf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const d=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return o(p)}else return c.data?{data:jh(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Lw(t);s=new Fm(c),s.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const m=e[d],v=m.url;if(Array.isArray(v)){const y=[];for(let S=0,M=v.length;S<M;S++){const w=v[S],x=l(w);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new jo(x.data,x.width,x.height)))}r[m.uuid]=new Fu(y)}else{const y=l(m.url);r[m.uuid]=new Fu(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:jh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Fm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.url;if(Array.isArray(d)){const p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],S=await s(y);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new jo(S.data,S.width,S.height)))}i[c.uuid]=new Fu(p)}else{const p=await s(c.url);i[c.uuid]=new Fu(p)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],d=c.data;let p;Array.isArray(d)?(p=new $m,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new jo:p=new Hn,d&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,B3)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],PM),p.wrapT=i(l.wrap[1],PM)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,DM)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,DM)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,s){let o;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let S=0,M=v.length;S<M;S++){const w=v[S];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(i[w])}return y}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function d(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let p,m;switch(e.type){case"Scene":o=new hy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new st(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Ky(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Jy(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new jn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new go(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new aP(e.color,e.intensity);break;case"DirectionalLight":o=new kw(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Ow(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new lP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Fw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new oP(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new uP().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=c(e.material),o=new yw(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=c(e.material),o=new hi(p,m);break;case"InstancedMesh":p=l(e.geometry),m=c(e.material);const v=e.count,y=e.instanceMatrix,S=e.instanceColor;o=new _w(p,m,v),o.instanceMatrix=new Zu(new Float32Array(y.array),16),S!==void 0&&(o.instanceColor=new Zu(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":p=l(e.geometry),m=c(e.material),o=new NI(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(M=>{const w=new hr;w.min.fromArray(M.boxMin),w.max.fromArray(M.boxMax);const x=new $i;return x.radius=M.sphereRadius,x.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:w,sphereInitialized:M.sphereInitialized,sphere:x}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":o=new LI;break;case"Line":o=new al(l(e.geometry),c(e.material));break;case"LineLoop":o=new xw(l(e.geometry),c(e.material));break;case"LineSegments":o=new wo(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Aw(l(e.geometry),c(e.material));break;case"Sprite":o=new BI(c(e.material));break;case"Group":o=new Xa;break;case"Bone":o=new Yy;break;default:o=new fn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)o.add(this.parseObject(v[y],t,i,r,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const S=v[y];o.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const S=v[y],M=o.getObjectByProperty("uuid",S.object);M!==void 0&&o.addLevel(M,S.distance,S.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new fn}})}}const B3={UVMapping:Oy,CubeReflectionMapping:sl,CubeRefractionMapping:hc,EquirectangularReflectionMapping:Mm,EquirectangularRefractionMapping:Tm,CubeUVReflectionMapping:Cf},PM={RepeatWrapping:fc,ClampToEdgeWrapping:cs,MirroredRepeatWrapping:uf},DM={NearestFilter:Ui,NearestMipmapNearestFilter:ky,NearestMipmapLinearFilter:Bu,LinearFilter:di,LinearMipmapNearestFilter:nf,LinearMipmapLinearFilter:ks};class fP extends pr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ja.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{r&&r(d)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Ja.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){r&&r(d),Ja.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ja.add(e,c),s.manager.itemStart(e)}}let Qv;class Uw{static getContext(){return Qv===void 0&&(Qv=new(window.AudioContext||window.webkitAudioContext)),Qv}static setContext(e){Qv=e}}class L3 extends pr{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ms(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const d=c.slice(0);Uw.getContext().decodeAudioData(d,function(m){t(m)}).catch(l)}catch(d){l(d)}},i,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const BM=new Nt,LM=new Nt,mu=new Nt;class N3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(ju*t.fov*.5)/t.zoom;let l,c;LM.elements[12]=-r,BM.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,mu.elements[0]=2*t.near/(c-l),mu.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(mu),l=-o*t.aspect-s,c=o*t.aspect-s,mu.elements[0]=2*t.near/(c-l),mu.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(mu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(LM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(BM)}}class pP extends jn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Hw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=NM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function NM(){return performance.now()}const gu=new X,FM=new Hi,F3=new X,vu=new X;class O3 extends fn{constructor(){super(),this.type="AudioListener",this.context=Uw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Hw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gu,FM,F3),vu.set(0,0,-1).applyQuaternion(FM),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gu.x,r),t.positionY.linearRampToValueAtTime(gu.y,r),t.positionZ.linearRampToValueAtTime(gu.z,r),t.forwardX.linearRampToValueAtTime(vu.x,r),t.forwardY.linearRampToValueAtTime(vu.y,r),t.forwardZ.linearRampToValueAtTime(vu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(gu.x,gu.y,gu.z),t.setOrientation(vu.x,vu.y,vu.z,i.x,i.y,i.z)}}class mP extends fn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const yu=new X,OM=new Hi,k3=new X,_u=new X;class U3 extends mP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(yu,OM,k3),_u.set(0,0,1).applyQuaternion(OM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(yu.x,i),t.positionY.linearRampToValueAtTime(yu.y,i),t.positionZ.linearRampToValueAtTime(yu.z,i),t.orientationX.linearRampToValueAtTime(_u.x,i),t.orientationY.linearRampToValueAtTime(_u.y,i),t.orientationZ.linearRampToValueAtTime(_u.z,i)}else t.setPosition(yu.x,yu.y,yu.z),t.setOrientation(_u.x,_u.y,_u.z)}}class H3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class gP{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Hi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Hi.multiplyQuaternionsFlat(e,o,e,t,e,i),Hi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const zw="\\[\\]\\.:\\/",z3=new RegExp("["+zw+"]","g"),Gw="[^"+zw+"]",G3="[^"+zw.replace("\\.","")+"]",V3=/((?:WC+[\/:])*)/.source.replace("WC",Gw),W3=/(WCOD+)?/.source.replace("WCOD",G3),j3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Gw),X3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Gw),J3=new RegExp("^"+V3+W3+j3+X3+"$"),K3=["material","materials","bones","map"];class Y3{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class mn{constructor(e,t,i){this.path=t,this.parsedPath=i||mn.parseTrackName(t),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new mn.Composite(e,t,i):new mn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(z3,"")}static parseTrackName(e){const t=J3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);K3.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=Y3;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class q3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ds(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,d=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const v=arguments[p],y=v.uuid;let S=t[y];if(S===void 0){S=c++,t[y]=S,e.push(v);for(let M=0,w=o;M!==w;++M)s[M].push(new mn(v,i[M],r[M]))}else if(S<d){l=e[S];const M=--d,w=e[M];t[w.uuid]=S,e[S]=w,t[y]=M,e[M]=v;for(let x=0,C=o;x!==C;++x){const b=s[x],P=b[M];let F=b[S];b[S]=P,F===void 0&&(F=new mn(v,i[x],r[x])),b[M]=F}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,p=t[d];if(p!==void 0&&p>=s){const m=s++,v=e[m];t[v.uuid]=p,e[p]=v,t[d]=m,e[m]=c;for(let y=0,S=r;y!==S;++y){const M=i[y],w=M[m],x=M[p];M[p]=w,M[m]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const v=--s,y=e[v],S=--o,M=e[S];t[y.uuid]=m,e[m]=y,t[M.uuid]=v,e[v]=M,e.pop();for(let w=0,x=r;w!==x;++w){const C=i[w],b=C[v],P=C[S];C[m]=b,C[v]=P,C.pop()}}else{const v=--o,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let S=0,M=r;S!==M;++S){const w=i[S];w[m]=w[v],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,d=c.length,p=this.nCachedObjects_,m=new Array(d);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(m);for(let v=p,y=c.length;v!==y;++v){const S=c[v];m[v]=new mn(S,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],d=e[l];t[d]=i,o[i]=c,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class vP{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Lu,endingEnd:Lu};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);l[d]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,c[1]=s+i,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case lw:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),d[p].accumulateAdditive(l);break;case jy:default:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),d[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===hI;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===uI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Nu,r.endingEnd=Nu):(e?r.endingStart=this.zeroSlopeAtStart?Nu:Lu:r.endingStart=Cm,t?r.endingEnd=this.zeroSlopeAtEnd?Nu:Lu:r.endingEnd=Cm)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=i,this}}const Q3=new Float32Array(1);class $3 extends ta{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=i.uuid,d=this._bindingsByRootAndName;let p=d[c];p===void 0&&(p={},d[c]=p);for(let m=0;m!==s;++m){const v=r[m],y=v.name;let S=p[y];if(S!==void 0)++S.referenceCount,o[m]=S;else{if(S=o[m],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,y));continue}const M=t&&t._propertyBindings[m].binding.parsedPath;S=new gP(mn.create(i,y,M),v.ValueTypeName,v.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,y),o[m]=S}l[m].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,d=c[c.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,c[p]=d,c.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Dw(new Float32Array(2),new Float32Array(2),1,Q3),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?gf.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let d=null;if(i===void 0&&(o!==null?i=o.blendMode:i=jy),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===i)return m;d=c.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const p=new vP(this,o,t,i);return this._bindAction(p,d),this._addInactiveAction(p,l,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?gf.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const d=o[l];this._deactivateAction(d);const p=d._cacheIndex,m=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Vw{constructor(e){this.value=e}clone(){return new Vw(this.value.clone===void 0?this.value:this.value.clone())}}let Z3=0;class ek extends ta{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Z3++}),this.name="",this.usage=Rm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class tk extends Zm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class nk{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const kM=new Nt;class yP{constructor(e,t,i=0,r=1/0){this.ray=new ud(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Xu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return kM.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(kM),this}intersectObject(e,t=!0,i=[]){return rS(e,this,i,t),i.sort(UM),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)rS(e[r],this,i,t);return i.sort(UM),i}}function UM(n,e){return n.distance-e.distance}function rS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)rS(s[o],e,t,!0)}}class sS{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Yt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Yt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ik{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Ww{constructor(e,t,i,r){Ww.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const HM=new Be;class rk{constructor(e=new Be(1/0,1/0),t=new Be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=HM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,HM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zM=new X,$v=new X;class sk{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){zM.subVectors(e,this.start),$v.subVectors(this.end,this.start);const i=$v.dot($v);let s=$v.dot(zM)/i;return t&&(s=Yt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const GM=new X;class ok extends fn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new qt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const d=o/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new Ct(r,3));const s=new fr({fog:!1,toneMapped:!1});this.cone=new wo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),GM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(GM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $l=new X,Zv=new Nt,Ux=new Nt;class ak extends wo{constructor(e){const t=_P(e),i=new qt,r=[],s=[],o=new st(0,0,1),l=new st(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new Ct(r,3)),i.setAttribute("color",new Ct(s,3));const c=new fr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Ux.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Zv.multiplyMatrices(Ux,l.matrixWorld),$l.setFromMatrixPosition(Zv),r.setXYZ(o,$l.x,$l.y,$l.z),Zv.multiplyMatrices(Ux,l.parent.matrixWorld),$l.setFromMatrixPosition(Zv),r.setXYZ(o+1,$l.x,$l.y,$l.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function _P(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,_P(n.children[t]));return e}class lk extends hi{constructor(e,t,i){const r=new sg(t,4,2),s=new us({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ck=new X,VM=new st,WM=new st;class uk extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new rg(t);r.rotateY(Math.PI*.5),this.material=new us({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new _n(o,3)),this.add(new hi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");VM.copy(this.light.color),WM.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?VM:WM;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ck.setFromMatrixPosition(this.light.matrixWorld).negate())}}class dk extends wo{constructor(e=10,t=10,i=4473924,r=8947848){i=new st(i),r=new st(r);const s=t/2,o=e/t,l=e/2,c=[],d=[];for(let v=0,y=0,S=-l;v<=t;v++,S+=o){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const M=v===s?i:r;M.toArray(d,y),y+=3,M.toArray(d,y),y+=3,M.toArray(d,y),y+=3,M.toArray(d,y),y+=3}const p=new qt;p.setAttribute("position",new Ct(c,3)),p.setAttribute("color",new Ct(d,3));const m=new fr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class hk extends wo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new st(s),o=new st(o);const l=[],c=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,S=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,S);const M=m&1?s:o;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let m=0;m<i;m++){const v=m&1?s:o,y=e-e/i*m;for(let S=0;S<r;S++){let M=S/r*(Math.PI*2),w=Math.sin(M)*y,x=Math.cos(M)*y;l.push(w,0,x),c.push(v.r,v.g,v.b),M=(S+1)/r*(Math.PI*2),w=Math.sin(M)*y,x=Math.cos(M)*y,l.push(w,0,x),c.push(v.r,v.g,v.b)}}const d=new qt;d.setAttribute("position",new Ct(l,3)),d.setAttribute("color",new Ct(c,3));const p=new fr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const jM=new X,e0=new X,XM=new X;class fk extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new qt;r.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fr({fog:!1,toneMapped:!1});this.lightPlane=new al(r,s),this.add(this.lightPlane),r=new qt,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new al(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),jM.setFromMatrixPosition(this.light.matrixWorld),e0.setFromMatrixPosition(this.light.target.matrixWorld),XM.subVectors(e0,jM),this.lightPlane.lookAt(e0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e0),this.targetLine.scale.z=XM.length()}}const t0=new X,ri=new Qm;class pk extends wo{constructor(e){const t=new qt,i=new fr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,M){c(S),c(M)}function c(S){r.push(0,0,0),s.push(0,0,0),o[S]===void 0&&(o[S]=[]),o[S].push(r.length/3-1)}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new st(16755200),p=new st(16711680),m=new st(43775),v=new st(16777215),y=new st(3355443);this.setColors(d,p,m,v,y)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ri.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ci("c",t,e,ri,0,0,-1),ci("t",t,e,ri,0,0,1),ci("n1",t,e,ri,-i,-r,-1),ci("n2",t,e,ri,i,-r,-1),ci("n3",t,e,ri,-i,r,-1),ci("n4",t,e,ri,i,r,-1),ci("f1",t,e,ri,-i,-r,1),ci("f2",t,e,ri,i,-r,1),ci("f3",t,e,ri,-i,r,1),ci("f4",t,e,ri,i,r,1),ci("u1",t,e,ri,i*.7,r*1.1,-1),ci("u2",t,e,ri,-i*.7,r*1.1,-1),ci("u3",t,e,ri,0,r*2,-1),ci("cf1",t,e,ri,-i,0,1),ci("cf2",t,e,ri,i,0,1),ci("cf3",t,e,ri,0,-r,1),ci("cf4",t,e,ri,0,r,1),ci("cn1",t,e,ri,-i,0,-1),ci("cn2",t,e,ri,i,0,-1),ci("cn3",t,e,ri,0,-r,-1),ci("cn4",t,e,ri,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ci(n,e,t,i,r,s,o){t0.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let d=0,p=l.length;d<p;d++)c.setXYZ(l[d],t0.x,t0.y,t0.z)}}const n0=new hr;class mk extends wo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new qt;s.setIndex(new _n(i,1)),s.setAttribute("position",new _n(r,3)),super(s,new fr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&n0.setFromObject(this.object),n0.isEmpty())return;const t=n0.min,i=n0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gk extends wo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new qt;s.setIndex(new _n(i,1)),s.setAttribute("position",new Ct(r,3)),super(s,new fr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vk extends al{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new qt;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new fr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new qt;c.setAttribute("position",new Ct(l,3)),c.computeBoundingSphere(),this.add(new hi(c,new us({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const JM=new X;let i0,Hx;class yk extends fn{constructor(e=new X(0,0,1),t=new X(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",i0===void 0&&(i0=new qt,i0.setAttribute("position",new Ct([0,0,0,0,1,0],3)),Hx=new Rf(0,.5,1,5,1),Hx.translate(0,-.5,0)),this.position.copy(t),this.line=new al(i0,new fr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hi(Hx,new us({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{JM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(JM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class _k extends wo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new qt;r.setAttribute("position",new Ct(t,3)),r.setAttribute("color",new Ct(i,3));const s=new fr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new st,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class xk{constructor(){this.type="ShapePath",this.color=new st,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Dm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const C=[];for(let b=0,P=x.length;b<P;b++){const F=x[b],N=new Ju;N.curves=F.curves,C.push(N)}return C}function i(x,C){const b=C.length;let P=!1;for(let F=b-1,N=0;N<b;F=N++){let k=C[F],H=C[N],L=H.x-k.x,B=H.y-k.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(k=C[N],L=-L,H=C[F],B=-B),x.y<k.y||x.y>H.y)continue;if(x.y===k.y){if(x.x===k.x)return!0}else{const V=B*(x.x-k.x)-L*(x.y-k.y);if(V===0)return!0;if(V<0)continue;P=!P}}else{if(x.y!==k.y)continue;if(H.x<=x.x&&x.x<=k.x||k.x<=x.x&&x.x<=H.x)return!0}}return P}const r=Xo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const d=[];if(s.length===1)return l=s[0],c=new Ju,c.curves=l.curves,d.push(c),d;let p=!r(s[0].getPoints());p=e?!p:p;const m=[],v=[];let y=[],S=0,M;v[S]=void 0,y[S]=[];for(let x=0,C=s.length;x<C;x++)l=s[x],M=l.getPoints(),o=r(M),o=e?!o:o,o?(!p&&v[S]&&S++,v[S]={s:new Ju,p:M},v[S].s.curves=l.curves,p&&S++,y[S]=[]):y[S].push({h:l,p:M[0]});if(!v[0])return t(s);if(v.length>1){let x=!1,C=0;for(let b=0,P=v.length;b<P;b++)m[b]=[];for(let b=0,P=v.length;b<P;b++){const F=y[b];for(let N=0;N<F.length;N++){const k=F[N];let H=!0;for(let L=0;L<v.length;L++)i(k.p,v[L].p)&&(b!==L&&C++,H?(H=!1,m[L].push(k)):x=!0);H&&m[b].push(k)}}C>0&&x===!1&&(y=m)}let w;for(let x=0,C=v.length;x<C;x++){c=v[x].s,d.push(c),w=y[x];for(let b=0,P=w.length;b<P;b++)c.holes.push(w[b].h)}return d}}class Ak extends ta{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Sk(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function wk(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Ek(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function oS(n,e,t,i){const r=Mk(i);switch(t){case nw:return n*e;case rw:return n*e;case sw:return n*e*2;case Gy:return n*e/r.components*r.byteLength;case qm:return n*e/r.components*r.byteLength;case ow:return n*e*2/r.components*r.byteLength;case Vy:return n*e*2/r.components*r.byteLength;case iw:return n*e*3/r.components*r.byteLength;case ur:return n*e*4/r.components*r.byteLength;case Wy:return n*e*4/r.components*r.byteLength;case um:case dm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case hm:case fm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case H0:case G0:return Math.max(n,16)*Math.max(e,8)/4;case U0:case z0:return Math.max(n,8)*Math.max(e,8)/2;case V0:case W0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case j0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case X0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case J0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case K0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Y0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case q0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Q0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case $0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Z0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ey:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case ty:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ny:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case iy:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ry:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case sy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case pm:case oy:case ay:return Math.ceil(n/4)*Math.ceil(e/4)*16;case aw:case ly:return Math.ceil(n/4)*Math.ceil(e/4)*8;case cy:case uy:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Mk(n){switch(n){case yo:case ZS:return{byteLength:1,components:1};case df:case ew:case bf:return{byteLength:2,components:1};case Hy:case zy:return{byteLength:2,components:4};case ol:case Uy:case Jr:return{byteLength:4,components:1};case tw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Tk={contain:Sk,cover:wk,fill:Ek,getByteLength:oS};class Ck extends _o{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tf);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function xP(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function bk(n){const e=new WeakMap;function t(l,c){const d=l.array,p=l.usage,m=d.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,d,p),l.onUploadCallback();let y;if(d instanceof Float32Array)y=n.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=n.SHORT;else if(d instanceof Uint32Array)y=n.UNSIGNED_INT;else if(d instanceof Int32Array)y=n.INT;else if(d instanceof Int8Array)y=n.BYTE;else if(d instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:m}}function i(l,c,d){const p=c.array,m=c.updateRanges;if(n.bindBuffer(d,l),m.length===0)n.bufferSubData(d,0,p);else{m.sort((y,S)=>y.start-S.start);let v=0;for(let y=1;y<m.length;y++){const S=m[v],M=m[y];M.start<=S.start+S.count+1?S.count=Math.max(S.count,M.start+M.count-S.start):(++v,m[v]=M)}m.length=v+1;for(let y=0,S=m.length;y<S;y++){const M=m[y];n.bufferSubData(d,M.start*p.BYTES_PER_ELEMENT,p,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,c));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,l,c),d.version=l.version}}return{get:r,remove:s,update:o}}var Rk=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Ik=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Pk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Dk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bk=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Lk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Nk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Fk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ok=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,kk=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Uk=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Hk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zk=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Gk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Wk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,jk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Jk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Kk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Yk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Qk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,$k=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Zk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,eU=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tU=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,nU=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,iU=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rU=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sU="gl_FragColor = linearToOutputTexel( gl_FragColor );",oU=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,aU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lU=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cU=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,uU=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,dU=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hU=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,pU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,mU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,vU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_U=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,AU=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,SU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,EU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,MU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,TU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,CU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bU=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,RU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,IU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,PU=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,DU=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,BU=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,LU=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,NU=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,FU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,OU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kU=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,UU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,HU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zU=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,GU=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,WU=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,jU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,XU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,JU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,KU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,QU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$U=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ZU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,eH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,nH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,sH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,oH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,uH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,dH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,mH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,yH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_H=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,AH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,SH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,wH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,EH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,MH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,TH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,CH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,RH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,BH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,NH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,FH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,kH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,VH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,JH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$H=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ZH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ez=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,oz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,az=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:Rk,alphahash_pars_fragment:Ik,alphamap_fragment:Pk,alphamap_pars_fragment:Dk,alphatest_fragment:Bk,alphatest_pars_fragment:Lk,aomap_fragment:Nk,aomap_pars_fragment:Fk,batching_pars_vertex:Ok,batching_vertex:kk,begin_vertex:Uk,beginnormal_vertex:Hk,bsdfs:zk,iridescence_fragment:Gk,bumpmap_pars_fragment:Vk,clipping_planes_fragment:Wk,clipping_planes_pars_fragment:jk,clipping_planes_pars_vertex:Xk,clipping_planes_vertex:Jk,color_fragment:Kk,color_pars_fragment:Yk,color_pars_vertex:qk,color_vertex:Qk,common:$k,cube_uv_reflection_fragment:Zk,defaultnormal_vertex:eU,displacementmap_pars_vertex:tU,displacementmap_vertex:nU,emissivemap_fragment:iU,emissivemap_pars_fragment:rU,colorspace_fragment:sU,colorspace_pars_fragment:oU,envmap_fragment:aU,envmap_common_pars_fragment:lU,envmap_pars_fragment:cU,envmap_pars_vertex:uU,envmap_physical_pars_fragment:AU,envmap_vertex:dU,fog_vertex:hU,fog_pars_vertex:fU,fog_fragment:pU,fog_pars_fragment:mU,gradientmap_pars_fragment:gU,lightmap_pars_fragment:vU,lights_lambert_fragment:yU,lights_lambert_pars_fragment:_U,lights_pars_begin:xU,lights_toon_fragment:SU,lights_toon_pars_fragment:wU,lights_phong_fragment:EU,lights_phong_pars_fragment:MU,lights_physical_fragment:TU,lights_physical_pars_fragment:CU,lights_fragment_begin:bU,lights_fragment_maps:RU,lights_fragment_end:IU,logdepthbuf_fragment:PU,logdepthbuf_pars_fragment:DU,logdepthbuf_pars_vertex:BU,logdepthbuf_vertex:LU,map_fragment:NU,map_pars_fragment:FU,map_particle_fragment:OU,map_particle_pars_fragment:kU,metalnessmap_fragment:UU,metalnessmap_pars_fragment:HU,morphinstance_vertex:zU,morphcolor_vertex:GU,morphnormal_vertex:VU,morphtarget_pars_vertex:WU,morphtarget_vertex:jU,normal_fragment_begin:XU,normal_fragment_maps:JU,normal_pars_fragment:KU,normal_pars_vertex:YU,normal_vertex:qU,normalmap_pars_fragment:QU,clearcoat_normal_fragment_begin:$U,clearcoat_normal_fragment_maps:ZU,clearcoat_pars_fragment:eH,iridescence_pars_fragment:tH,opaque_fragment:nH,packing:iH,premultiplied_alpha_fragment:rH,project_vertex:sH,dithering_fragment:oH,dithering_pars_fragment:aH,roughnessmap_fragment:lH,roughnessmap_pars_fragment:cH,shadowmap_pars_fragment:uH,shadowmap_pars_vertex:dH,shadowmap_vertex:hH,shadowmask_pars_fragment:fH,skinbase_vertex:pH,skinning_pars_vertex:mH,skinning_vertex:gH,skinnormal_vertex:vH,specularmap_fragment:yH,specularmap_pars_fragment:_H,tonemapping_fragment:xH,tonemapping_pars_fragment:AH,transmission_fragment:SH,transmission_pars_fragment:wH,uv_pars_fragment:EH,uv_pars_vertex:MH,uv_vertex:TH,worldpos_vertex:CH,background_vert:bH,background_frag:RH,backgroundCube_vert:IH,backgroundCube_frag:PH,cube_vert:DH,cube_frag:BH,depth_vert:LH,depth_frag:NH,distanceRGBA_vert:FH,distanceRGBA_frag:OH,equirect_vert:kH,equirect_frag:UH,linedashed_vert:HH,linedashed_frag:zH,meshbasic_vert:GH,meshbasic_frag:VH,meshlambert_vert:WH,meshlambert_frag:jH,meshmatcap_vert:XH,meshmatcap_frag:JH,meshnormal_vert:KH,meshnormal_frag:YH,meshphong_vert:qH,meshphong_frag:QH,meshphysical_vert:$H,meshphysical_frag:ZH,meshtoon_vert:ez,meshtoon_frag:tz,points_vert:nz,points_frag:iz,shadow_vert:rz,shadow_frag:sz,sprite_vert:oz,sprite_frag:az},lt={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new Be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new Be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},mo={basic:{uniforms:Tr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:Tr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new st(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:Tr([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:Tr([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:Tr([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new st(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:Tr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:Tr([lt.points,lt.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:Tr([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:Tr([lt.common,lt.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:Tr([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:Tr([lt.sprite,lt.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:Tr([lt.common,lt.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:Tr([lt.lights,lt.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};mo.physical={uniforms:Tr([mo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new Be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new Be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new Be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};const r0={r:0,b:0,g:0},xu=new ps,lz=new Nt;function cz(n,e,t,i,r,s,o){const l=new st(0);let c=s===!0?0:1,d,p,m=null,v=0,y=null;function S(b){let P=b.isScene===!0?b.background:null;return P&&P.isTexture&&(P=(b.backgroundBlurriness>0?t:e).get(P)),P}function M(b){let P=!1;const F=S(b);F===null?x(l,c):F&&F.isColor&&(x(F,1),P=!0);const N=n.xr.getEnvironmentBlendMode();N==="additive"?i.buffers.color.setClear(0,0,0,1,o):N==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||P)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(b,P){const F=S(P);F&&(F.isCubeTexture||F.mapping===Cf)?(p===void 0&&(p=new hi(new dd(1,1,1),new xo({name:"BackgroundCubeMaterial",uniforms:mf(mo.backgroundCube.uniforms),vertexShader:mo.backgroundCube.vertexShader,fragmentShader:mo.backgroundCube.fragmentShader,side:br,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(N,k,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),xu.copy(P.backgroundRotation),xu.x*=-1,xu.y*=-1,xu.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(xu.y*=-1,xu.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(lz.makeRotationFromEuler(xu)),p.material.toneMapped=gn.getTransfer(F.colorSpace)!==Tn,(m!==F||v!==F.version||y!==n.toneMapping)&&(p.material.needsUpdate=!0,m=F,v=F.version,y=n.toneMapping),p.layers.enableAll(),b.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new hi(new If(2,2),new xo({name:"BackgroundMaterial",uniforms:mf(mo.background.uniforms),vertexShader:mo.background.vertexShader,fragmentShader:mo.background.fragmentShader,side:$o,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,d.material.toneMapped=gn.getTransfer(F.colorSpace)!==Tn,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(m!==F||v!==F.version||y!==n.toneMapping)&&(d.material.needsUpdate=!0,m=F,v=F.version,y=n.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null))}function x(b,P){b.getRGB(r0,II(n)),i.buffers.color.setClear(r0.r,r0.g,r0.b,P,o)}function C(){p!==void 0&&(p.geometry.dispose(),p.material.dispose()),d!==void 0&&(d.geometry.dispose(),d.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(b,P=1){l.set(b),c=P,x(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(b){c=b,x(l,c)},render:M,addToRenderList:w,dispose:C}}function uz(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let s=r,o=!1;function l(B,V,ae,re,ge){let ve=!1;const fe=m(re,ae,V);s!==fe&&(s=fe,d(s.object)),ve=y(B,re,ae,ge),ve&&S(B,re,ae,ge),ge!==null&&e.update(ge,n.ELEMENT_ARRAY_BUFFER),(ve||o)&&(o=!1,P(B,V,ae,re),ge!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ge).buffer))}function c(){return n.createVertexArray()}function d(B){return n.bindVertexArray(B)}function p(B){return n.deleteVertexArray(B)}function m(B,V,ae){const re=ae.wireframe===!0;let ge=i[B.id];ge===void 0&&(ge={},i[B.id]=ge);let ve=ge[V.id];ve===void 0&&(ve={},ge[V.id]=ve);let fe=ve[re];return fe===void 0&&(fe=v(c()),ve[re]=fe),fe}function v(B){const V=[],ae=[],re=[];for(let ge=0;ge<t;ge++)V[ge]=0,ae[ge]=0,re[ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:ae,attributeDivisors:re,object:B,attributes:{},index:null}}function y(B,V,ae,re){const ge=s.attributes,ve=V.attributes;let fe=0;const he=ae.getAttributes();for(const U in he)if(he[U].location>=0){const Q=ge[U];let W=ve[U];if(W===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(W=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(W=B.instanceColor)),Q===void 0||Q.attribute!==W||W&&Q.data!==W.data)return!0;fe++}return s.attributesNum!==fe||s.index!==re}function S(B,V,ae,re){const ge={},ve=V.attributes;let fe=0;const he=ae.getAttributes();for(const U in he)if(he[U].location>=0){let Q=ve[U];Q===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(Q=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(Q=B.instanceColor));const W={};W.attribute=Q,Q&&Q.data&&(W.data=Q.data),ge[U]=W,fe++}s.attributes=ge,s.attributesNum=fe,s.index=re}function M(){const B=s.newAttributes;for(let V=0,ae=B.length;V<ae;V++)B[V]=0}function w(B){x(B,0)}function x(B,V){const ae=s.newAttributes,re=s.enabledAttributes,ge=s.attributeDivisors;ae[B]=1,re[B]===0&&(n.enableVertexAttribArray(B),re[B]=1),ge[B]!==V&&(n.vertexAttribDivisor(B,V),ge[B]=V)}function C(){const B=s.newAttributes,V=s.enabledAttributes;for(let ae=0,re=V.length;ae<re;ae++)V[ae]!==B[ae]&&(n.disableVertexAttribArray(ae),V[ae]=0)}function b(B,V,ae,re,ge,ve,fe){fe===!0?n.vertexAttribIPointer(B,V,ae,ge,ve):n.vertexAttribPointer(B,V,ae,re,ge,ve)}function P(B,V,ae,re){M();const ge=re.attributes,ve=ae.getAttributes(),fe=V.defaultAttributeValues;for(const he in ve){const U=ve[he];if(U.location>=0){let Z=ge[he];if(Z===void 0&&(he==="instanceMatrix"&&B.instanceMatrix&&(Z=B.instanceMatrix),he==="instanceColor"&&B.instanceColor&&(Z=B.instanceColor)),Z!==void 0){const Q=Z.normalized,W=Z.itemSize,ie=e.get(Z);if(ie===void 0)continue;const Le=ie.buffer,ce=ie.type,Ee=ie.bytesPerElement,Ne=ce===n.INT||ce===n.UNSIGNED_INT||Z.gpuType===Uy;if(Z.isInterleavedBufferAttribute){const Re=Z.data,Xe=Re.stride,it=Z.offset;if(Re.isInstancedInterleavedBuffer){for(let $e=0;$e<U.locationSize;$e++)x(U.location+$e,Re.meshPerAttribute);B.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let $e=0;$e<U.locationSize;$e++)w(U.location+$e);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let $e=0;$e<U.locationSize;$e++)b(U.location+$e,W/U.locationSize,ce,Q,Xe*Ee,(it+W/U.locationSize*$e)*Ee,Ne)}else{if(Z.isInstancedBufferAttribute){for(let Re=0;Re<U.locationSize;Re++)x(U.location+Re,Z.meshPerAttribute);B.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let Re=0;Re<U.locationSize;Re++)w(U.location+Re);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let Re=0;Re<U.locationSize;Re++)b(U.location+Re,W/U.locationSize,ce,Q,W*Ee,W/U.locationSize*Re*Ee,Ne)}}else if(fe!==void 0){const Q=fe[he];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(U.location,Q);break;case 3:n.vertexAttrib3fv(U.location,Q);break;case 4:n.vertexAttrib4fv(U.location,Q);break;default:n.vertexAttrib1fv(U.location,Q)}}}}C()}function F(){H();for(const B in i){const V=i[B];for(const ae in V){const re=V[ae];for(const ge in re)p(re[ge].object),delete re[ge];delete V[ae]}delete i[B]}}function N(B){if(i[B.id]===void 0)return;const V=i[B.id];for(const ae in V){const re=V[ae];for(const ge in re)p(re[ge].object),delete re[ge];delete V[ae]}delete i[B.id]}function k(B){for(const V in i){const ae=i[V];if(ae[B.id]===void 0)continue;const re=ae[B.id];for(const ge in re)p(re[ge].object),delete re[ge];delete ae[B.id]}}function H(){L(),o=!0,s!==r&&(s=r,d(s.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:H,resetDefaultState:L,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:k,initAttributes:M,enableAttribute:w,disableUnusedAttributes:C}}function dz(n,e,t){let i;function r(d){i=d}function s(d,p){n.drawArrays(i,d,p),t.update(p,i,1)}function o(d,p,m){m!==0&&(n.drawArraysInstanced(i,d,p,m),t.update(p,i,m))}function l(d,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,p,0,m);let y=0;for(let S=0;S<m;S++)y+=p[S];t.update(y,i,1)}function c(d,p,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let S=0;S<d.length;S++)o(d[S],p[S],v[S]);else{y.multiDrawArraysInstancedWEBGL(i,d,0,p,0,v,0,m);let S=0;for(let M=0;M<m;M++)S+=p[M]*v[M];t.update(S,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function hz(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==ur&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(k){const H=k===bf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==yo&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Jr&&!H)}function c(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const p=c(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const m=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),P=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),F=S>0,N=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:m,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:S,maxTextureSize:M,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:C,maxVaryings:b,maxFragmentUniforms:P,vertexTextures:F,maxSamples:N}}function fz(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Va,l=new $t,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||i!==0||r;return r=v,i=m.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,v){t=p(m,v,0)},this.setState=function(m,v,y){const S=m.clippingPlanes,M=m.clipIntersection,w=m.clipShadows,x=n.get(m);if(!r||S===null||S.length===0||s&&!w)s?p(null):d();else{const C=s?0:i,b=C*4;let P=x.clippingState||null;c.value=P,P=p(S,v,b,y);for(let F=0;F!==b;++F)P[F]=t[F];x.clippingState=P,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=C}};function d(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(m,v,y,S){const M=m!==null?m.length:0;let w=null;if(M!==0){if(w=c.value,S!==!0||w===null){const x=y+M*4,C=v.matrixWorldInverse;l.getNormalMatrix(C),(w===null||w.length<x)&&(w=new Float32Array(x));for(let b=0,P=y;b!==M;++b,P+=4)o.copy(m[b]).applyMatrix4(C,l),o.normal.toArray(w,P),w[P+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,w}}function pz(n){let e=new WeakMap;function t(o,l){return l===Mm?o.mapping=sl:l===Tm&&(o.mapping=hc),o}function i(o){if(o&&o.isTexture){const l=o.mapping;if(l===Mm||l===Tm)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const d=new gw(c.height);return d.fromEquirectangularTexture(n,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Kh=4,KM=[.125,.215,.35,.446,.526,.582],Du=20,zx=new go,YM=new st;let Gx=null,Vx=0,Wx=0,jx=!1;const bu=(1+Math.sqrt(5))/2,kh=1/bu,qM=[new X(-bu,kh,0),new X(bu,kh,0),new X(-kh,0,bu),new X(kh,0,bu),new X(0,bu,-kh),new X(0,bu,kh),new X(-1,1,-1),new X(1,1,-1),new X(-1,1,1),new X(1,1,1)];class aS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Gx=this._renderer.getRenderTarget(),Vx=this._renderer.getActiveCubeFace(),Wx=this._renderer.getActiveMipmapLevel(),jx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$M(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Gx,Vx,Wx),this._renderer.xr.enabled=jx,e.scissorTest=!1,s0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sl||e.mapping===hc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gx=this._renderer.getRenderTarget(),Vx=this._renderer.getActiveCubeFace(),Wx=this._renderer.getActiveMipmapLevel(),jx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:di,minFilter:di,generateMipmaps:!1,type:bf,format:ur,colorSpace:$u,depthBuffer:!1},r=QM(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QM(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mz(s)),this._blurMaterial=gz(s,e,t)}return r}_compileMaterial(e){const t=new hi(this._lodPlanes[0],e);this._renderer.compile(t,zx)}_sceneToCubeUV(e,t,i,r){const l=new jn(90,1,t,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,v=p.toneMapping;p.getClearColor(YM),p.toneMapping=Wo,p.autoClear=!1;const y=new us({name:"PMREM.Background",side:br,depthWrite:!1,depthTest:!1}),S=new hi(new dd,y);let M=!1;const w=e.background;w?w.isColor&&(y.color.copy(w),e.background=null,M=!0):(y.color.copy(YM),M=!0);for(let x=0;x<6;x++){const C=x%3;C===0?(l.up.set(0,c[x],0),l.lookAt(d[x],0,0)):C===1?(l.up.set(0,0,c[x]),l.lookAt(0,d[x],0)):(l.up.set(0,c[x],0),l.lookAt(0,0,d[x]));const b=this._cubeSize;s0(r,C*b,x>2?b:0,b,b),p.setRenderTarget(r),M&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=v,p.autoClear=m,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===sl||e.mapping===hc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$M());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new hi(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;s0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,zx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=qM[(r-s-1)%qM.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,l){const c=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new hi(this._lodPlanes[r],d),v=d.uniforms,y=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Du-1),M=s/S,w=isFinite(s)?1+Math.floor(p*M):Du;w>Du&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Du}`);const x=[];let C=0;for(let k=0;k<Du;++k){const H=k/M,L=Math.exp(-H*H/2);x.push(L),k===0?C+=L:k<w&&(C+=2*L)}for(let k=0;k<x.length;k++)x[k]=x[k]/C;v.envMap.value=e.texture,v.samples.value=w,v.weights.value=x,v.latitudinal.value=o==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:b}=this;v.dTheta.value=S,v.mipInt.value=b-i;const P=this._sizeLods[r],F=3*P*(r>b-Kh?r-b+Kh:0),N=4*(this._cubeSize-P);s0(t,F,N,3*P,2*P),c.setRenderTarget(t),c.render(m,zx)}}function mz(n){const e=[],t=[],i=[];let r=n;const s=n-Kh+1+KM.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>n-Kh?c=KM[o-n+Kh-1]:o===0&&(c=0),i.push(c);const d=1/(l-2),p=-d,m=1+d,v=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,S=6,M=3,w=2,x=1,C=new Float32Array(M*S*y),b=new Float32Array(w*S*y),P=new Float32Array(x*S*y);for(let N=0;N<y;N++){const k=N%3*2/3-1,H=N>2?0:-1,L=[k,H,0,k+2/3,H,0,k+2/3,H+1,0,k,H,0,k+2/3,H+1,0,k,H+1,0];C.set(L,M*S*N),b.set(v,w*S*N);const B=[N,N,N,N,N,N];P.set(B,x*S*N)}const F=new qt;F.setAttribute("position",new _n(C,M)),F.setAttribute("uv",new _n(b,w)),F.setAttribute("faceIndex",new _n(P,x)),e.push(F),r>Kh&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function QM(n,e,t){const i=new _o(n,e,t);return i.texture.mapping=Cf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function s0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function gz(n,e,t){const i=new Float32Array(Du),r=new X(0,1,0);return new xo({name:"SphericalGaussianBlur",defines:{n:Du,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:jw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function $M(){return new xo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:jw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function ZM(){return new xo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:jw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function jw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vz(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,d=c===Mm||c===Tm,p=c===sl||c===hc;if(d||p){let m=e.get(l);const v=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new aS(n)),m=d?t.fromEquirectangular(l,m):t.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const y=l.image;return d&&y&&y.height>0||p&&y&&r(y)?(t===null&&(t=new aS(n)),m=d?t.fromEquirectangular(l):t.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",s),m.texture):null}}}return l}function r(l){let c=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&c++;return c===d}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function yz(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Gh("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function _z(n,e,t,i){const r={},s=new WeakMap;function o(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const S in v.attributes)e.remove(v.attributes[S]);v.removeEventListener("dispose",o),delete r[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(m,v){return r[v.id]===!0||(v.addEventListener("dispose",o),r[v.id]=!0,t.memory.geometries++),v}function c(m){const v=m.attributes;for(const y in v)e.update(v[y],n.ARRAY_BUFFER)}function d(m){const v=[],y=m.index,S=m.attributes.position;let M=0;if(y!==null){const C=y.array;M=y.version;for(let b=0,P=C.length;b<P;b+=3){const F=C[b+0],N=C[b+1],k=C[b+2];v.push(F,N,N,k,k,F)}}else if(S!==void 0){const C=S.array;M=S.version;for(let b=0,P=C.length/3-1;b<P;b+=3){const F=b+0,N=b+1,k=b+2;v.push(F,N,N,k,k,F)}}else return;const w=new(MI(v)?pw:fw)(v,1);w.version=M;const x=s.get(m);x&&e.remove(x),s.set(m,w)}function p(m){const v=s.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&d(m)}else d(m);return s.get(m)}return{get:l,update:c,getWireframeAttribute:p}}function xz(n,e,t){let i;function r(v){i=v}let s,o;function l(v){s=v.type,o=v.bytesPerElement}function c(v,y){n.drawElements(i,y,s,v*o),t.update(y,i,1)}function d(v,y,S){S!==0&&(n.drawElementsInstanced(i,y,s,v*o,S),t.update(y,i,S))}function p(v,y,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,s,v,0,S);let w=0;for(let x=0;x<S;x++)w+=y[x];t.update(w,i,1)}function m(v,y,S,M){if(S===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let x=0;x<v.length;x++)d(v[x]/o,y[x],M[x]);else{w.multiDrawElementsInstancedWEBGL(i,y,0,s,v,0,M,0,S);let x=0;for(let C=0;C<S;C++)x+=y[C]*M[C];t.update(x,i,1)}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=m}function Az(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Sz(n,e,t){const i=new WeakMap,r=new yn;function s(o,l,c){const d=o.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=p!==void 0?p.length:0;let v=i.get(l);if(v===void 0||v.count!==m){let B=function(){H.dispose(),i.delete(l),l.removeEventListener("dispose",B)};var y=B;v!==void 0&&v.texture.dispose();const S=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,w=l.morphAttributes.color!==void 0,x=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let P=0;S===!0&&(P=1),M===!0&&(P=2),w===!0&&(P=3);let F=l.attributes.position.count*P,N=1;F>e.maxTextureSize&&(N=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const k=new Float32Array(F*N*4*m),H=new Xy(k,F,N,m);H.type=Jr,H.needsUpdate=!0;const L=P*4;for(let V=0;V<m;V++){const ae=x[V],re=C[V],ge=b[V],ve=F*N*4*V;for(let fe=0;fe<ae.count;fe++){const he=fe*L;S===!0&&(r.fromBufferAttribute(ae,fe),k[ve+he+0]=r.x,k[ve+he+1]=r.y,k[ve+he+2]=r.z,k[ve+he+3]=0),M===!0&&(r.fromBufferAttribute(re,fe),k[ve+he+4]=r.x,k[ve+he+5]=r.y,k[ve+he+6]=r.z,k[ve+he+7]=0),w===!0&&(r.fromBufferAttribute(ge,fe),k[ve+he+8]=r.x,k[ve+he+9]=r.y,k[ve+he+10]=r.z,k[ve+he+11]=ge.itemSize===4?r.w:1)}}v={count:m,texture:H,size:new Be(F,N)},i.set(l,v),l.addEventListener("dispose",B)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let S=0;for(let w=0;w<d.length;w++)S+=d[w];const M=l.morphTargetsRelative?1:1-S;c.getUniforms().setValue(n,"morphTargetBaseInfluence",M),c.getUniforms().setValue(n,"morphTargetInfluences",d)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:s}}function wz(n,e,t,i){let r=new WeakMap;function s(c){const d=i.render.frame,p=c.geometry,m=e.get(c,p);if(r.get(m)!==d&&(e.update(m),r.set(m,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==d&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,d))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==d&&(v.update(),r.set(v,d))}return m}function o(){r=new WeakMap}function l(c){const d=c.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const AP=new Hn,eT=new Sw(1,1),SP=new Xy,wP=new hw,EP=new $m,tT=[],nT=[],iT=new Float32Array(16),rT=new Float32Array(9),sT=new Float32Array(4);function Df(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=tT[r];if(s===void 0&&(s=new Float32Array(r),tT[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function bi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ri(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function h_(n,e){let t=nT[e];t===void 0&&(t=new Int32Array(e),nT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Ez(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Mz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2fv(this.addr,e),Ri(t,e)}}function Tz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;n.uniform3fv(this.addr,e),Ri(t,e)}}function Cz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4fv(this.addr,e),Ri(t,e)}}function bz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,i))return;sT.set(i),n.uniformMatrix2fv(this.addr,!1,sT),Ri(t,i)}}function Rz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,i))return;rT.set(i),n.uniformMatrix3fv(this.addr,!1,rT),Ri(t,i)}}function Iz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ri(t,e)}else{if(bi(t,i))return;iT.set(i),n.uniformMatrix4fv(this.addr,!1,iT),Ri(t,i)}}function Pz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Dz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2iv(this.addr,e),Ri(t,e)}}function Bz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;n.uniform3iv(this.addr,e),Ri(t,e)}}function Lz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4iv(this.addr,e),Ri(t,e)}}function Nz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Fz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;n.uniform2uiv(this.addr,e),Ri(t,e)}}function Oz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;n.uniform3uiv(this.addr,e),Ri(t,e)}}function kz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;n.uniform4uiv(this.addr,e),Ri(t,e)}}function Uz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(eT.compareFunction=uw,s=eT):s=AP,t.setTexture2D(e||s,r)}function Hz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||wP,r)}function zz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||EP,r)}function Gz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||SP,r)}function Vz(n){switch(n){case 5126:return Ez;case 35664:return Mz;case 35665:return Tz;case 35666:return Cz;case 35674:return bz;case 35675:return Rz;case 35676:return Iz;case 5124:case 35670:return Pz;case 35667:case 35671:return Dz;case 35668:case 35672:return Bz;case 35669:case 35673:return Lz;case 5125:return Nz;case 36294:return Fz;case 36295:return Oz;case 36296:return kz;case 35678:case 36198:case 36298:case 36306:case 35682:return Uz;case 35679:case 36299:case 36307:return Hz;case 35680:case 36300:case 36308:case 36293:return zz;case 36289:case 36303:case 36311:case 36292:return Gz}}function Wz(n,e){n.uniform1fv(this.addr,e)}function jz(n,e){const t=Df(e,this.size,2);n.uniform2fv(this.addr,t)}function Xz(n,e){const t=Df(e,this.size,3);n.uniform3fv(this.addr,t)}function Jz(n,e){const t=Df(e,this.size,4);n.uniform4fv(this.addr,t)}function Kz(n,e){const t=Df(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Yz(n,e){const t=Df(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function qz(n,e){const t=Df(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Qz(n,e){n.uniform1iv(this.addr,e)}function $z(n,e){n.uniform2iv(this.addr,e)}function Zz(n,e){n.uniform3iv(this.addr,e)}function eG(n,e){n.uniform4iv(this.addr,e)}function tG(n,e){n.uniform1uiv(this.addr,e)}function nG(n,e){n.uniform2uiv(this.addr,e)}function iG(n,e){n.uniform3uiv(this.addr,e)}function rG(n,e){n.uniform4uiv(this.addr,e)}function sG(n,e,t){const i=this.cache,r=e.length,s=h_(t,r);bi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||AP,s[o])}function oG(n,e,t){const i=this.cache,r=e.length,s=h_(t,r);bi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||wP,s[o])}function aG(n,e,t){const i=this.cache,r=e.length,s=h_(t,r);bi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||EP,s[o])}function lG(n,e,t){const i=this.cache,r=e.length,s=h_(t,r);bi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||SP,s[o])}function cG(n){switch(n){case 5126:return Wz;case 35664:return jz;case 35665:return Xz;case 35666:return Jz;case 35674:return Kz;case 35675:return Yz;case 35676:return qz;case 5124:case 35670:return Qz;case 35667:case 35671:return $z;case 35668:case 35672:return Zz;case 35669:case 35673:return eG;case 5125:return tG;case 36294:return nG;case 36295:return iG;case 36296:return rG;case 35678:case 36198:case 36298:case 36306:case 35682:return sG;case 35679:case 36299:case 36307:return oG;case 35680:case 36300:case 36308:case 36293:return aG;case 36289:case 36303:case 36311:case 36292:return lG}}class uG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Vz(t.type)}}class dG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cG(t.type)}}class hG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const Xx=/(\w+)(\])?(\[|\.)?/g;function oT(n,e){n.seq.push(e),n.map[e.id]=e}function fG(n,e,t){const i=n.name,r=i.length;for(Xx.lastIndex=0;;){const s=Xx.exec(i),o=Xx.lastIndex;let l=s[1];const c=s[2]==="]",d=s[3];if(c&&(l=l|0),d===void 0||d==="["&&o+2===r){oT(t,d===void 0?new uG(l,n,e):new dG(l,n,e));break}else{let m=t.map[l];m===void 0&&(m=new hG(l),oT(t,m)),t=m}}}class x0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);fG(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function aT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const pG=37297;let mG=0;function gG(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;i.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return i.join(`
`)}const lT=new $t;function vG(n){gn._getMatrix(lT,gn.workingColorSpace,n);const e=`mat3( ${lT.elements.map(t=>t.toFixed(4))} )`;switch(gn.getTransfer(n)){case bm:return[e,"LinearTransferOETF"];case Tn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function cT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+gG(n.getShaderSource(e),o)}else return r}function yG(n,e){const t=vG(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function _G(n,e){let t;switch(e){case iI:t="Linear";break;case rI:t="Reinhard";break;case sI:t="Cineon";break;case $S:t="ACESFilmic";break;case aI:t="AgX";break;case lI:t="Neutral";break;case oI:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const o0=new X;function xG(){gn.getLuminanceCoefficients(o0);const n=o0.x.toFixed(4),e=o0.y.toFixed(4),t=o0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function AG(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(im).join(`
`)}function SG(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function wG(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function im(n){return n!==""}function uT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function dT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const EG=/^[ \t]*#include +<([\w\d./]+)>/gm;function lS(n){return n.replace(EG,TG)}const MG=new Map;function TG(n,e){let t=an[e];if(t===void 0){const i=MG.get(e);if(i!==void 0)t=an[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return lS(t)}const CG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hT(n){return n.replace(CG,bG)}function bG(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function fT(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function RG(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Fy?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===po&&(e="SHADOWMAP_TYPE_VSM"),e}function IG(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sl:case hc:e="ENVMAP_TYPE_CUBE";break;case Cf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function PG(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case hc:e="ENVMAP_MODE_REFRACTION";break}return e}function DG(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ym:e="ENVMAP_BLENDING_MULTIPLY";break;case tI:e="ENVMAP_BLENDING_MIX";break;case nI:e="ENVMAP_BLENDING_ADD";break}return e}function BG(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function LG(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=RG(t),d=IG(t),p=PG(t),m=DG(t),v=BG(t),y=AG(t),S=SG(s),M=r.createProgram();let w,x,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(im).join(`
`),w.length>0&&(w+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(im).join(`
`),x.length>0&&(x+=`
`)):(w=[fT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(im).join(`
`),x=[fT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wo?"#define TONE_MAPPING":"",t.toneMapping!==Wo?an.tonemapping_pars_fragment:"",t.toneMapping!==Wo?_G("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,yG("linearToOutputTexel",t.outputColorSpace),xG(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(im).join(`
`)),o=lS(o),o=uT(o,t),o=dT(o,t),l=lS(l),l=uT(l,t),l=dT(l,t),o=hT(o),l=hT(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,w=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,x=["#define varying in",t.glslVersion===ZA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ZA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const b=C+w+o,P=C+x+l,F=aT(r,r.VERTEX_SHADER,b),N=aT(r,r.FRAGMENT_SHADER,P);r.attachShader(M,F),r.attachShader(M,N),t.index0AttributeName!==void 0?r.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function k(V){if(n.debug.checkShaderErrors){const ae=r.getProgramInfoLog(M).trim(),re=r.getShaderInfoLog(F).trim(),ge=r.getShaderInfoLog(N).trim();let ve=!0,fe=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(ve=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,M,F,N);else{const he=cT(r,F,"vertex"),U=cT(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+ae+`
`+he+`
`+U)}else ae!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ae):(re===""||ge==="")&&(fe=!1);fe&&(V.diagnostics={runnable:ve,programLog:ae,vertexShader:{log:re,prefix:w},fragmentShader:{log:ge,prefix:x}})}r.deleteShader(F),r.deleteShader(N),H=new x0(r,M),L=wG(r,M)}let H;this.getUniforms=function(){return H===void 0&&k(this),H};let L;this.getAttributes=function(){return L===void 0&&k(this),L};let B=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=r.getProgramParameter(M,pG)),B},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mG++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=F,this.fragmentShader=N,this}let NG=0;class FG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new OG(e),t.set(e,i)),i}}class OG{constructor(e){this.id=NG++,this.code=e,this.usedTimes=0}}function kG(n,e,t,i,r,s,o){const l=new Xu,c=new FG,d=new Set,p=[],m=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(L){return d.add(L),L===0?"uv":`uv${L}`}function w(L,B,V,ae,re){const ge=ae.fog,ve=re.geometry,fe=L.isMeshStandardMaterial?ae.environment:null,he=(L.isMeshStandardMaterial?t:e).get(L.envMap||fe),U=he&&he.mapping===Cf?he.image.height:null,Z=S[L.type];L.precision!==null&&(y=r.getMaxPrecision(L.precision),y!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const Q=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,W=Q!==void 0?Q.length:0;let ie=0;ve.morphAttributes.position!==void 0&&(ie=1),ve.morphAttributes.normal!==void 0&&(ie=2),ve.morphAttributes.color!==void 0&&(ie=3);let Le,ce,Ee,Ne;if(Z){const Zt=mo[Z];Le=Zt.vertexShader,ce=Zt.fragmentShader}else Le=L.vertexShader,ce=L.fragmentShader,c.update(L),Ee=c.getVertexShaderID(L),Ne=c.getFragmentShaderID(L);const Re=n.getRenderTarget(),Xe=n.state.buffers.depth.getReversed(),it=re.isInstancedMesh===!0,$e=re.isBatchedMesh===!0,rt=!!L.map,De=!!L.matcap,Fe=!!he,K=!!L.aoMap,gt=!!L.lightMap,Ue=!!L.bumpMap,Ze=!!L.normalMap,je=!!L.displacementMap,Et=!!L.emissiveMap,Ye=!!L.metalnessMap,J=!!L.roughnessMap,z=L.anisotropy>0,pe=L.clearcoat>0,Te=L.dispersion>0,Oe=L.iridescence>0,Ie=L.sheen>0,ot=L.transmission>0,qe=z&&!!L.anisotropyMap,ut=pe&&!!L.clearcoatMap,jt=pe&&!!L.clearcoatNormalMap,ze=pe&&!!L.clearcoatRoughnessMap,vt=Oe&&!!L.iridescenceMap,Pt=Oe&&!!L.iridescenceThicknessMap,Lt=Ie&&!!L.sheenColorMap,ft=Ie&&!!L.sheenRoughnessMap,te=!!L.specularMap,be=!!L.specularColorMap,tt=!!L.specularIntensityMap,ee=ot&&!!L.transmissionMap,Ve=ot&&!!L.thicknessMap,Se=!!L.gradientMap,Pe=!!L.alphaMap,ct=L.alphaTest>0,nt=!!L.alphaHash,It=!!L.extensions;let cn=Wo;L.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(cn=n.toneMapping);const Cn={shaderID:Z,shaderType:L.type,shaderName:L.name,vertexShader:Le,fragmentShader:ce,defines:L.defines,customVertexShaderID:Ee,customFragmentShaderID:Ne,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,batching:$e,batchingColor:$e&&re._colorsTexture!==null,instancing:it,instancingColor:it&&re.instanceColor!==null,instancingMorph:it&&re.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:$u,alphaToCoverage:!!L.alphaToCoverage,map:rt,matcap:De,envMap:Fe,envMapMode:Fe&&he.mapping,envMapCubeUVHeight:U,aoMap:K,lightMap:gt,bumpMap:Ue,normalMap:Ze,displacementMap:v&&je,emissiveMap:Et,normalMapObjectSpace:Ze&&L.normalMapType===gI,normalMapTangentSpace:Ze&&L.normalMapType===yc,metalnessMap:Ye,roughnessMap:J,anisotropy:z,anisotropyMap:qe,clearcoat:pe,clearcoatMap:ut,clearcoatNormalMap:jt,clearcoatRoughnessMap:ze,dispersion:Te,iridescence:Oe,iridescenceMap:vt,iridescenceThicknessMap:Pt,sheen:Ie,sheenColorMap:Lt,sheenRoughnessMap:ft,specularMap:te,specularColorMap:be,specularIntensityMap:tt,transmission:ot,transmissionMap:ee,thicknessMap:Ve,gradientMap:Se,opaque:L.transparent===!1&&L.blending===Gu&&L.alphaToCoverage===!1,alphaMap:Pe,alphaTest:ct,alphaHash:nt,combine:L.combine,mapUv:rt&&M(L.map.channel),aoMapUv:K&&M(L.aoMap.channel),lightMapUv:gt&&M(L.lightMap.channel),bumpMapUv:Ue&&M(L.bumpMap.channel),normalMapUv:Ze&&M(L.normalMap.channel),displacementMapUv:je&&M(L.displacementMap.channel),emissiveMapUv:Et&&M(L.emissiveMap.channel),metalnessMapUv:Ye&&M(L.metalnessMap.channel),roughnessMapUv:J&&M(L.roughnessMap.channel),anisotropyMapUv:qe&&M(L.anisotropyMap.channel),clearcoatMapUv:ut&&M(L.clearcoatMap.channel),clearcoatNormalMapUv:jt&&M(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ze&&M(L.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&M(L.iridescenceMap.channel),iridescenceThicknessMapUv:Pt&&M(L.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&M(L.sheenColorMap.channel),sheenRoughnessMapUv:ft&&M(L.sheenRoughnessMap.channel),specularMapUv:te&&M(L.specularMap.channel),specularColorMapUv:be&&M(L.specularColorMap.channel),specularIntensityMapUv:tt&&M(L.specularIntensityMap.channel),transmissionMapUv:ee&&M(L.transmissionMap.channel),thicknessMapUv:Ve&&M(L.thicknessMap.channel),alphaMapUv:Pe&&M(L.alphaMap.channel),vertexTangents:!!ve.attributes.tangent&&(Ze||z),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!ve.attributes.uv&&(rt||Pe),fog:!!ge,useFog:L.fog===!0,fogExp2:!!ge&&ge.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:Xe,skinning:re.isSkinnedMesh===!0,morphTargets:ve.morphAttributes.position!==void 0,morphNormals:ve.morphAttributes.normal!==void 0,morphColors:ve.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:ie,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:cn,decodeVideoTexture:rt&&L.map.isVideoTexture===!0&&gn.getTransfer(L.map.colorSpace)===Tn,decodeVideoTextureEmissive:Et&&L.emissiveMap.isVideoTexture===!0&&gn.getTransfer(L.emissiveMap.colorSpace)===Tn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Os,flipSided:L.side===br,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:It&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(It&&L.extensions.multiDraw===!0||$e)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Cn.vertexUv1s=d.has(1),Cn.vertexUv2s=d.has(2),Cn.vertexUv3s=d.has(3),d.clear(),Cn}function x(L){const B=[];if(L.shaderID?B.push(L.shaderID):(B.push(L.customVertexShaderID),B.push(L.customFragmentShaderID)),L.defines!==void 0)for(const V in L.defines)B.push(V),B.push(L.defines[V]);return L.isRawShaderMaterial===!1&&(C(B,L),b(B,L),B.push(n.outputColorSpace)),B.push(L.customProgramCacheKey),B.join()}function C(L,B){L.push(B.precision),L.push(B.outputColorSpace),L.push(B.envMapMode),L.push(B.envMapCubeUVHeight),L.push(B.mapUv),L.push(B.alphaMapUv),L.push(B.lightMapUv),L.push(B.aoMapUv),L.push(B.bumpMapUv),L.push(B.normalMapUv),L.push(B.displacementMapUv),L.push(B.emissiveMapUv),L.push(B.metalnessMapUv),L.push(B.roughnessMapUv),L.push(B.anisotropyMapUv),L.push(B.clearcoatMapUv),L.push(B.clearcoatNormalMapUv),L.push(B.clearcoatRoughnessMapUv),L.push(B.iridescenceMapUv),L.push(B.iridescenceThicknessMapUv),L.push(B.sheenColorMapUv),L.push(B.sheenRoughnessMapUv),L.push(B.specularMapUv),L.push(B.specularColorMapUv),L.push(B.specularIntensityMapUv),L.push(B.transmissionMapUv),L.push(B.thicknessMapUv),L.push(B.combine),L.push(B.fogExp2),L.push(B.sizeAttenuation),L.push(B.morphTargetsCount),L.push(B.morphAttributeCount),L.push(B.numDirLights),L.push(B.numPointLights),L.push(B.numSpotLights),L.push(B.numSpotLightMaps),L.push(B.numHemiLights),L.push(B.numRectAreaLights),L.push(B.numDirLightShadows),L.push(B.numPointLightShadows),L.push(B.numSpotLightShadows),L.push(B.numSpotLightShadowsWithMaps),L.push(B.numLightProbes),L.push(B.shadowMapType),L.push(B.toneMapping),L.push(B.numClippingPlanes),L.push(B.numClipIntersection),L.push(B.depthPacking)}function b(L,B){l.disableAll(),B.supportsVertexTextures&&l.enable(0),B.instancing&&l.enable(1),B.instancingColor&&l.enable(2),B.instancingMorph&&l.enable(3),B.matcap&&l.enable(4),B.envMap&&l.enable(5),B.normalMapObjectSpace&&l.enable(6),B.normalMapTangentSpace&&l.enable(7),B.clearcoat&&l.enable(8),B.iridescence&&l.enable(9),B.alphaTest&&l.enable(10),B.vertexColors&&l.enable(11),B.vertexAlphas&&l.enable(12),B.vertexUv1s&&l.enable(13),B.vertexUv2s&&l.enable(14),B.vertexUv3s&&l.enable(15),B.vertexTangents&&l.enable(16),B.anisotropy&&l.enable(17),B.alphaHash&&l.enable(18),B.batching&&l.enable(19),B.dispersion&&l.enable(20),B.batchingColor&&l.enable(21),L.push(l.mask),l.disableAll(),B.fog&&l.enable(0),B.useFog&&l.enable(1),B.flatShading&&l.enable(2),B.logarithmicDepthBuffer&&l.enable(3),B.reverseDepthBuffer&&l.enable(4),B.skinning&&l.enable(5),B.morphTargets&&l.enable(6),B.morphNormals&&l.enable(7),B.morphColors&&l.enable(8),B.premultipliedAlpha&&l.enable(9),B.shadowMapEnabled&&l.enable(10),B.doubleSided&&l.enable(11),B.flipSided&&l.enable(12),B.useDepthPacking&&l.enable(13),B.dithering&&l.enable(14),B.transmission&&l.enable(15),B.sheen&&l.enable(16),B.opaque&&l.enable(17),B.pointsUvs&&l.enable(18),B.decodeVideoTexture&&l.enable(19),B.decodeVideoTextureEmissive&&l.enable(20),B.alphaToCoverage&&l.enable(21),L.push(l.mask)}function P(L){const B=S[L.type];let V;if(B){const ae=mo[B];V=PI.clone(ae.uniforms)}else V=L.uniforms;return V}function F(L,B){let V;for(let ae=0,re=p.length;ae<re;ae++){const ge=p[ae];if(ge.cacheKey===B){V=ge,++V.usedTimes;break}}return V===void 0&&(V=new LG(n,B,L,s),p.push(V)),V}function N(L){if(--L.usedTimes===0){const B=p.indexOf(L);p[B]=p[p.length-1],p.pop(),L.destroy()}}function k(L){c.remove(L)}function H(){c.dispose()}return{getParameters:w,getProgramCacheKey:x,getUniforms:P,acquireProgram:F,releaseProgram:N,releaseShaderCache:k,programs:p,dispose:H}}function UG(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function i(o){n.delete(o)}function r(o,l,c){n.get(o)[l]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function HG(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function pT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(m,v,y,S,M,w){let x=n[e];return x===void 0?(x={id:m.id,object:m,geometry:v,material:y,groupOrder:S,renderOrder:m.renderOrder,z:M,group:w},n[e]=x):(x.id=m.id,x.object=m,x.geometry=v,x.material=y,x.groupOrder=S,x.renderOrder=m.renderOrder,x.z=M,x.group=w),e++,x}function l(m,v,y,S,M,w){const x=o(m,v,y,S,M,w);y.transmission>0?i.push(x):y.transparent===!0?r.push(x):t.push(x)}function c(m,v,y,S,M,w){const x=o(m,v,y,S,M,w);y.transmission>0?i.unshift(x):y.transparent===!0?r.unshift(x):t.unshift(x)}function d(m,v){t.length>1&&t.sort(m||HG),i.length>1&&i.sort(v||pT),r.length>1&&r.sort(v||pT)}function p(){for(let m=e,v=n.length;m<v;m++){const y=n[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:p,sort:d}}function zG(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new mT,n.set(i,[o])):r>=s.length?(o=new mT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function GG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new st};break;case"SpotLight":t={position:new X,direction:new X,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function VG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let WG=0;function jG(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function XG(n){const e=new GG,t=VG(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new X);const r=new X,s=new Nt,o=new Nt;function l(d){let p=0,m=0,v=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let y=0,S=0,M=0,w=0,x=0,C=0,b=0,P=0,F=0,N=0,k=0;d.sort(jG);for(let L=0,B=d.length;L<B;L++){const V=d[L],ae=V.color,re=V.intensity,ge=V.distance,ve=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)p+=ae.r*re,m+=ae.g*re,v+=ae.b*re;else if(V.isLightProbe){for(let fe=0;fe<9;fe++)i.probe[fe].addScaledVector(V.sh.coefficients[fe],re);k++}else if(V.isDirectionalLight){const fe=e.get(V);if(fe.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const he=V.shadow,U=t.get(V);U.shadowIntensity=he.intensity,U.shadowBias=he.bias,U.shadowNormalBias=he.normalBias,U.shadowRadius=he.radius,U.shadowMapSize=he.mapSize,i.directionalShadow[y]=U,i.directionalShadowMap[y]=ve,i.directionalShadowMatrix[y]=V.shadow.matrix,C++}i.directional[y]=fe,y++}else if(V.isSpotLight){const fe=e.get(V);fe.position.setFromMatrixPosition(V.matrixWorld),fe.color.copy(ae).multiplyScalar(re),fe.distance=ge,fe.coneCos=Math.cos(V.angle),fe.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),fe.decay=V.decay,i.spot[M]=fe;const he=V.shadow;if(V.map&&(i.spotLightMap[F]=V.map,F++,he.updateMatrices(V),V.castShadow&&N++),i.spotLightMatrix[M]=he.matrix,V.castShadow){const U=t.get(V);U.shadowIntensity=he.intensity,U.shadowBias=he.bias,U.shadowNormalBias=he.normalBias,U.shadowRadius=he.radius,U.shadowMapSize=he.mapSize,i.spotShadow[M]=U,i.spotShadowMap[M]=ve,P++}M++}else if(V.isRectAreaLight){const fe=e.get(V);fe.color.copy(ae).multiplyScalar(re),fe.halfWidth.set(V.width*.5,0,0),fe.halfHeight.set(0,V.height*.5,0),i.rectArea[w]=fe,w++}else if(V.isPointLight){const fe=e.get(V);if(fe.color.copy(V.color).multiplyScalar(V.intensity),fe.distance=V.distance,fe.decay=V.decay,V.castShadow){const he=V.shadow,U=t.get(V);U.shadowIntensity=he.intensity,U.shadowBias=he.bias,U.shadowNormalBias=he.normalBias,U.shadowRadius=he.radius,U.shadowMapSize=he.mapSize,U.shadowCameraNear=he.camera.near,U.shadowCameraFar=he.camera.far,i.pointShadow[S]=U,i.pointShadowMap[S]=ve,i.pointShadowMatrix[S]=V.shadow.matrix,b++}i.point[S]=fe,S++}else if(V.isHemisphereLight){const fe=e.get(V);fe.skyColor.copy(V.color).multiplyScalar(re),fe.groundColor.copy(V.groundColor).multiplyScalar(re),i.hemi[x]=fe,x++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=lt.LTC_FLOAT_1,i.rectAreaLTC2=lt.LTC_FLOAT_2):(i.rectAreaLTC1=lt.LTC_HALF_1,i.rectAreaLTC2=lt.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const H=i.hash;(H.directionalLength!==y||H.pointLength!==S||H.spotLength!==M||H.rectAreaLength!==w||H.hemiLength!==x||H.numDirectionalShadows!==C||H.numPointShadows!==b||H.numSpotShadows!==P||H.numSpotMaps!==F||H.numLightProbes!==k)&&(i.directional.length=y,i.spot.length=M,i.rectArea.length=w,i.point.length=S,i.hemi.length=x,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=P+F-N,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=k,H.directionalLength=y,H.pointLength=S,H.spotLength=M,H.rectAreaLength=w,H.hemiLength=x,H.numDirectionalShadows=C,H.numPointShadows=b,H.numSpotShadows=P,H.numSpotMaps=F,H.numLightProbes=k,i.version=WG++)}function c(d,p){let m=0,v=0,y=0,S=0,M=0;const w=p.matrixWorldInverse;for(let x=0,C=d.length;x<C;x++){const b=d[x];if(b.isDirectionalLight){const P=i.directional[m];P.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(w),m++}else if(b.isSpotLight){const P=i.spot[y];P.position.setFromMatrixPosition(b.matrixWorld),P.position.applyMatrix4(w),P.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(w),y++}else if(b.isRectAreaLight){const P=i.rectArea[S];P.position.setFromMatrixPosition(b.matrixWorld),P.position.applyMatrix4(w),o.identity(),s.copy(b.matrixWorld),s.premultiply(w),o.extractRotation(s),P.halfWidth.set(b.width*.5,0,0),P.halfHeight.set(0,b.height*.5,0),P.halfWidth.applyMatrix4(o),P.halfHeight.applyMatrix4(o),S++}else if(b.isPointLight){const P=i.point[v];P.position.setFromMatrixPosition(b.matrixWorld),P.position.applyMatrix4(w),v++}else if(b.isHemisphereLight){const P=i.hemi[M];P.direction.setFromMatrixPosition(b.matrixWorld),P.direction.transformDirection(w),M++}}}return{setup:l,setupView:c,state:i}}function gT(n){const e=new XG(n),t=[],i=[];function r(p){d.camera=p,t.length=0,i.length=0}function s(p){t.push(p)}function o(p){i.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const d={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function JG(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new gT(n),e.set(r,[l])):s>=o.length?(l=new gT(n),o.push(l)):l=o[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const KG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,YG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function qG(n,e,t){let i=new tg;const r=new Be,s=new Be,o=new yn,l=new Rw({depthPacking:mI}),c=new Iw,d={},p=t.maxTextureSize,m={[$o]:br,[br]:$o,[Os]:Os},v=new xo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Be},radius:{value:4}},vertexShader:KG,fragmentShader:YG}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const S=new qt;S.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new hi(S,v),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fy;let x=this.type;this.render=function(N,k,H){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||N.length===0)return;const L=n.getRenderTarget(),B=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),ae=n.state;ae.setBlending($a),ae.buffers.color.setClear(1,1,1,1),ae.buffers.depth.setTest(!0),ae.setScissorTest(!1);const re=x!==po&&this.type===po,ge=x===po&&this.type!==po;for(let ve=0,fe=N.length;ve<fe;ve++){const he=N[ve],U=he.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const Z=U.getFrameExtents();if(r.multiply(Z),s.copy(U.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/Z.x),r.x=s.x*Z.x,U.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/Z.y),r.y=s.y*Z.y,U.mapSize.y=s.y)),U.map===null||re===!0||ge===!0){const W=this.type!==po?{minFilter:Ui,magFilter:Ui}:{};U.map!==null&&U.map.dispose(),U.map=new _o(r.x,r.y,W),U.map.texture.name=he.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const Q=U.getViewportCount();for(let W=0;W<Q;W++){const ie=U.getViewport(W);o.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),ae.viewport(o),U.updateMatrices(he,W),i=U.getFrustum(),P(k,H,U.camera,he,this.type)}U.isPointLightShadow!==!0&&this.type===po&&C(U,H),U.needsUpdate=!1}x=this.type,w.needsUpdate=!1,n.setRenderTarget(L,B,V)};function C(N,k){const H=e.update(M);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,y.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new _o(r.x,r.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(k,null,H,v,M,null),y.uniforms.shadow_pass.value=N.mapPass.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(k,null,H,y,M,null)}function b(N,k,H,L){let B=null;const V=H.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(V!==void 0)B=V;else if(B=H.isPointLight===!0?c:l,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const ae=B.uuid,re=k.uuid;let ge=d[ae];ge===void 0&&(ge={},d[ae]=ge);let ve=ge[re];ve===void 0&&(ve=B.clone(),ge[re]=ve,k.addEventListener("dispose",F)),B=ve}if(B.visible=k.visible,B.wireframe=k.wireframe,L===po?B.side=k.shadowSide!==null?k.shadowSide:k.side:B.side=k.shadowSide!==null?k.shadowSide:m[k.side],B.alphaMap=k.alphaMap,B.alphaTest=k.alphaTest,B.map=k.map,B.clipShadows=k.clipShadows,B.clippingPlanes=k.clippingPlanes,B.clipIntersection=k.clipIntersection,B.displacementMap=k.displacementMap,B.displacementScale=k.displacementScale,B.displacementBias=k.displacementBias,B.wireframeLinewidth=k.wireframeLinewidth,B.linewidth=k.linewidth,H.isPointLight===!0&&B.isMeshDistanceMaterial===!0){const ae=n.properties.get(B);ae.light=H}return B}function P(N,k,H,L,B){if(N.visible===!1)return;if(N.layers.test(k.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&B===po)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,N.matrixWorld);const re=e.update(N),ge=N.material;if(Array.isArray(ge)){const ve=re.groups;for(let fe=0,he=ve.length;fe<he;fe++){const U=ve[fe],Z=ge[U.materialIndex];if(Z&&Z.visible){const Q=b(N,Z,L,B);N.onBeforeShadow(n,N,k,H,re,Q,U),n.renderBufferDirect(H,null,re,Q,N,U),N.onAfterShadow(n,N,k,H,re,Q,U)}}}else if(ge.visible){const ve=b(N,ge,L,B);N.onBeforeShadow(n,N,k,H,re,ve,null),n.renderBufferDirect(H,null,re,ve,N,null),N.onAfterShadow(n,N,k,H,re,ve,null)}}const ae=N.children;for(let re=0,ge=ae.length;re<ge;re++)P(ae[re],k,H,L,B)}function F(N){N.target.removeEventListener("dispose",F);for(const H in d){const L=d[H],B=N.target.uuid;B in L&&(L[B].dispose(),delete L[B])}}}const QG={[D0]:B0,[L0]:O0,[N0]:k0,[Yu]:F0,[B0]:D0,[O0]:L0,[k0]:N0,[F0]:Yu};function $G(n,e){function t(){let ee=!1;const Ve=new yn;let Se=null;const Pe=new yn(0,0,0,0);return{setMask:function(ct){Se!==ct&&!ee&&(n.colorMask(ct,ct,ct,ct),Se=ct)},setLocked:function(ct){ee=ct},setClear:function(ct,nt,It,cn,Cn){Cn===!0&&(ct*=cn,nt*=cn,It*=cn),Ve.set(ct,nt,It,cn),Pe.equals(Ve)===!1&&(n.clearColor(ct,nt,It,cn),Pe.copy(Ve))},reset:function(){ee=!1,Se=null,Pe.set(-1,0,0,0)}}}function i(){let ee=!1,Ve=!1,Se=null,Pe=null,ct=null;return{setReversed:function(nt){if(Ve!==nt){const It=e.get("EXT_clip_control");Ve?It.clipControlEXT(It.LOWER_LEFT_EXT,It.ZERO_TO_ONE_EXT):It.clipControlEXT(It.LOWER_LEFT_EXT,It.NEGATIVE_ONE_TO_ONE_EXT);const cn=ct;ct=null,this.setClear(cn)}Ve=nt},getReversed:function(){return Ve},setTest:function(nt){nt?Re(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(nt){Se!==nt&&!ee&&(n.depthMask(nt),Se=nt)},setFunc:function(nt){if(Ve&&(nt=QG[nt]),Pe!==nt){switch(nt){case D0:n.depthFunc(n.NEVER);break;case B0:n.depthFunc(n.ALWAYS);break;case L0:n.depthFunc(n.LESS);break;case Yu:n.depthFunc(n.LEQUAL);break;case N0:n.depthFunc(n.EQUAL);break;case F0:n.depthFunc(n.GEQUAL);break;case O0:n.depthFunc(n.GREATER);break;case k0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Pe=nt}},setLocked:function(nt){ee=nt},setClear:function(nt){ct!==nt&&(Ve&&(nt=1-nt),n.clearDepth(nt),ct=nt)},reset:function(){ee=!1,Se=null,Pe=null,ct=null,Ve=!1}}}function r(){let ee=!1,Ve=null,Se=null,Pe=null,ct=null,nt=null,It=null,cn=null,Cn=null;return{setTest:function(Zt){ee||(Zt?Re(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(Zt){Ve!==Zt&&!ee&&(n.stencilMask(Zt),Ve=Zt)},setFunc:function(Zt,Jn,Zn){(Se!==Zt||Pe!==Jn||ct!==Zn)&&(n.stencilFunc(Zt,Jn,Zn),Se=Zt,Pe=Jn,ct=Zn)},setOp:function(Zt,Jn,Zn){(nt!==Zt||It!==Jn||cn!==Zn)&&(n.stencilOp(Zt,Jn,Zn),nt=Zt,It=Jn,cn=Zn)},setLocked:function(Zt){ee=Zt},setClear:function(Zt){Cn!==Zt&&(n.clearStencil(Zt),Cn=Zt)},reset:function(){ee=!1,Ve=null,Se=null,Pe=null,ct=null,nt=null,It=null,cn=null,Cn=null}}}const s=new t,o=new i,l=new r,c=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,y=[],S=null,M=!1,w=null,x=null,C=null,b=null,P=null,F=null,N=null,k=new st(0,0,0),H=0,L=!1,B=null,V=null,ae=null,re=null,ge=null;const ve=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let fe=!1,he=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(he=parseFloat(/^WebGL (\d)/.exec(U)[1]),fe=he>=1):U.indexOf("OpenGL ES")!==-1&&(he=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),fe=he>=2);let Z=null,Q={};const W=n.getParameter(n.SCISSOR_BOX),ie=n.getParameter(n.VIEWPORT),Le=new yn().fromArray(W),ce=new yn().fromArray(ie);function Ee(ee,Ve,Se,Pe){const ct=new Uint8Array(4),nt=n.createTexture();n.bindTexture(ee,nt),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let It=0;It<Se;It++)ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?n.texImage3D(Ve,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,ct):n.texImage2D(Ve+It,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ct);return nt}const Ne={};Ne[n.TEXTURE_2D]=Ee(n.TEXTURE_2D,n.TEXTURE_2D,1),Ne[n.TEXTURE_CUBE_MAP]=Ee(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ne[n.TEXTURE_2D_ARRAY]=Ee(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ne[n.TEXTURE_3D]=Ee(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),Re(n.DEPTH_TEST),o.setFunc(Yu),Ue(!1),Ze(JA),Re(n.CULL_FACE),K($a);function Re(ee){p[ee]!==!0&&(n.enable(ee),p[ee]=!0)}function Xe(ee){p[ee]!==!1&&(n.disable(ee),p[ee]=!1)}function it(ee,Ve){return m[ee]!==Ve?(n.bindFramebuffer(ee,Ve),m[ee]=Ve,ee===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Ve),ee===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Ve),!0):!1}function $e(ee,Ve){let Se=y,Pe=!1;if(ee){Se=v.get(Ve),Se===void 0&&(Se=[],v.set(Ve,Se));const ct=ee.textures;if(Se.length!==ct.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let nt=0,It=ct.length;nt<It;nt++)Se[nt]=n.COLOR_ATTACHMENT0+nt;Se.length=ct.length,Pe=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Pe=!0);Pe&&n.drawBuffers(Se)}function rt(ee){return S!==ee?(n.useProgram(ee),S=ee,!0):!1}const De={[ic]:n.FUNC_ADD,[kR]:n.FUNC_SUBTRACT,[UR]:n.FUNC_REVERSE_SUBTRACT};De[HR]=n.MIN,De[zR]=n.MAX;const Fe={[GR]:n.ZERO,[VR]:n.ONE,[WR]:n.SRC_COLOR,[I0]:n.SRC_ALPHA,[qR]:n.SRC_ALPHA_SATURATE,[KR]:n.DST_COLOR,[XR]:n.DST_ALPHA,[jR]:n.ONE_MINUS_SRC_COLOR,[P0]:n.ONE_MINUS_SRC_ALPHA,[YR]:n.ONE_MINUS_DST_COLOR,[JR]:n.ONE_MINUS_DST_ALPHA,[QR]:n.CONSTANT_COLOR,[$R]:n.ONE_MINUS_CONSTANT_COLOR,[ZR]:n.CONSTANT_ALPHA,[eI]:n.ONE_MINUS_CONSTANT_ALPHA};function K(ee,Ve,Se,Pe,ct,nt,It,cn,Cn,Zt){if(ee===$a){M===!0&&(Xe(n.BLEND),M=!1);return}if(M===!1&&(Re(n.BLEND),M=!0),ee!==OR){if(ee!==w||Zt!==L){if((x!==ic||P!==ic)&&(n.blendEquation(n.FUNC_ADD),x=ic,P=ic),Zt)switch(ee){case Gu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case KA:n.blendFunc(n.ONE,n.ONE);break;case YA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case qA:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Gu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case KA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case YA:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case qA:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}C=null,b=null,F=null,N=null,k.set(0,0,0),H=0,w=ee,L=Zt}return}ct=ct||Ve,nt=nt||Se,It=It||Pe,(Ve!==x||ct!==P)&&(n.blendEquationSeparate(De[Ve],De[ct]),x=Ve,P=ct),(Se!==C||Pe!==b||nt!==F||It!==N)&&(n.blendFuncSeparate(Fe[Se],Fe[Pe],Fe[nt],Fe[It]),C=Se,b=Pe,F=nt,N=It),(cn.equals(k)===!1||Cn!==H)&&(n.blendColor(cn.r,cn.g,cn.b,Cn),k.copy(cn),H=Cn),w=ee,L=!1}function gt(ee,Ve){ee.side===Os?Xe(n.CULL_FACE):Re(n.CULL_FACE);let Se=ee.side===br;Ve&&(Se=!Se),Ue(Se),ee.blending===Gu&&ee.transparent===!1?K($a):K(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),o.setFunc(ee.depthFunc),o.setTest(ee.depthTest),o.setMask(ee.depthWrite),s.setMask(ee.colorWrite);const Pe=ee.stencilWrite;l.setTest(Pe),Pe&&(l.setMask(ee.stencilWriteMask),l.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),l.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Et(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ue(ee){B!==ee&&(ee?n.frontFace(n.CW):n.frontFace(n.CCW),B=ee)}function Ze(ee){ee!==LR?(Re(n.CULL_FACE),ee!==V&&(ee===JA?n.cullFace(n.BACK):ee===NR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),V=ee}function je(ee){ee!==ae&&(fe&&n.lineWidth(ee),ae=ee)}function Et(ee,Ve,Se){ee?(Re(n.POLYGON_OFFSET_FILL),(re!==Ve||ge!==Se)&&(n.polygonOffset(Ve,Se),re=Ve,ge=Se)):Xe(n.POLYGON_OFFSET_FILL)}function Ye(ee){ee?Re(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function J(ee){ee===void 0&&(ee=n.TEXTURE0+ve-1),Z!==ee&&(n.activeTexture(ee),Z=ee)}function z(ee,Ve,Se){Se===void 0&&(Z===null?Se=n.TEXTURE0+ve-1:Se=Z);let Pe=Q[Se];Pe===void 0&&(Pe={type:void 0,texture:void 0},Q[Se]=Pe),(Pe.type!==ee||Pe.texture!==Ve)&&(Z!==Se&&(n.activeTexture(Se),Z=Se),n.bindTexture(ee,Ve||Ne[ee]),Pe.type=ee,Pe.texture=Ve)}function pe(){const ee=Q[Z];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Te(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ie(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ot(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function qe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ut(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function jt(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ze(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function vt(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Pt(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Lt(ee){Le.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),Le.copy(ee))}function ft(ee){ce.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),ce.copy(ee))}function te(ee,Ve){let Se=d.get(Ve);Se===void 0&&(Se=new WeakMap,d.set(Ve,Se));let Pe=Se.get(ee);Pe===void 0&&(Pe=n.getUniformBlockIndex(Ve,ee.name),Se.set(ee,Pe))}function be(ee,Ve){const Pe=d.get(Ve).get(ee);c.get(Ve)!==Pe&&(n.uniformBlockBinding(Ve,Pe,ee.__bindingPointIndex),c.set(Ve,Pe))}function tt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Z=null,Q={},m={},v=new WeakMap,y=[],S=null,M=!1,w=null,x=null,C=null,b=null,P=null,F=null,N=null,k=new st(0,0,0),H=0,L=!1,B=null,V=null,ae=null,re=null,ge=null,Le.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:Re,disable:Xe,bindFramebuffer:it,drawBuffers:$e,useProgram:rt,setBlending:K,setMaterial:gt,setFlipSided:Ue,setCullFace:Ze,setLineWidth:je,setPolygonOffset:Et,setScissorTest:Ye,activeTexture:J,bindTexture:z,unbindTexture:pe,compressedTexImage2D:Te,compressedTexImage3D:Oe,texImage2D:vt,texImage3D:Pt,updateUBOMapping:te,uniformBlockBinding:be,texStorage2D:jt,texStorage3D:ze,texSubImage2D:Ie,texSubImage3D:ot,compressedTexSubImage2D:qe,compressedTexSubImage3D:ut,scissor:Lt,viewport:ft,reset:tt}}function ZG(n,e,t,i,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Be,p=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(J,z){return y?new OffscreenCanvas(J,z):Pm("canvas")}function M(J,z,pe){let Te=1;const Oe=Ye(J);if((Oe.width>pe||Oe.height>pe)&&(Te=pe/Math.max(Oe.width,Oe.height)),Te<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Ie=Math.floor(Te*Oe.width),ot=Math.floor(Te*Oe.height);m===void 0&&(m=S(Ie,ot));const qe=z?S(Ie,ot):m;return qe.width=Ie,qe.height=ot,qe.getContext("2d").drawImage(J,0,0,Ie,ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+Ie+"x"+ot+")."),qe}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),J;return J}function w(J){return J.generateMipmaps}function x(J){n.generateMipmap(J)}function C(J){return J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?n.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function b(J,z,pe,Te,Oe=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Ie=z;if(z===n.RED&&(pe===n.FLOAT&&(Ie=n.R32F),pe===n.HALF_FLOAT&&(Ie=n.R16F),pe===n.UNSIGNED_BYTE&&(Ie=n.R8)),z===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Ie=n.R8UI),pe===n.UNSIGNED_SHORT&&(Ie=n.R16UI),pe===n.UNSIGNED_INT&&(Ie=n.R32UI),pe===n.BYTE&&(Ie=n.R8I),pe===n.SHORT&&(Ie=n.R16I),pe===n.INT&&(Ie=n.R32I)),z===n.RG&&(pe===n.FLOAT&&(Ie=n.RG32F),pe===n.HALF_FLOAT&&(Ie=n.RG16F),pe===n.UNSIGNED_BYTE&&(Ie=n.RG8)),z===n.RG_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Ie=n.RG8UI),pe===n.UNSIGNED_SHORT&&(Ie=n.RG16UI),pe===n.UNSIGNED_INT&&(Ie=n.RG32UI),pe===n.BYTE&&(Ie=n.RG8I),pe===n.SHORT&&(Ie=n.RG16I),pe===n.INT&&(Ie=n.RG32I)),z===n.RGB_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Ie=n.RGB8UI),pe===n.UNSIGNED_SHORT&&(Ie=n.RGB16UI),pe===n.UNSIGNED_INT&&(Ie=n.RGB32UI),pe===n.BYTE&&(Ie=n.RGB8I),pe===n.SHORT&&(Ie=n.RGB16I),pe===n.INT&&(Ie=n.RGB32I)),z===n.RGBA_INTEGER&&(pe===n.UNSIGNED_BYTE&&(Ie=n.RGBA8UI),pe===n.UNSIGNED_SHORT&&(Ie=n.RGBA16UI),pe===n.UNSIGNED_INT&&(Ie=n.RGBA32UI),pe===n.BYTE&&(Ie=n.RGBA8I),pe===n.SHORT&&(Ie=n.RGBA16I),pe===n.INT&&(Ie=n.RGBA32I)),z===n.RGB&&pe===n.UNSIGNED_INT_5_9_9_9_REV&&(Ie=n.RGB9_E5),z===n.RGBA){const ot=Oe?bm:gn.getTransfer(Te);pe===n.FLOAT&&(Ie=n.RGBA32F),pe===n.HALF_FLOAT&&(Ie=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(Ie=ot===Tn?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)}return(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function P(J,z){let pe;return J?z===null||z===ol||z===qu?pe=n.DEPTH24_STENCIL8:z===Jr?pe=n.DEPTH32F_STENCIL8:z===df&&(pe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===ol||z===qu?pe=n.DEPTH_COMPONENT24:z===Jr?pe=n.DEPTH_COMPONENT32F:z===df&&(pe=n.DEPTH_COMPONENT16),pe}function F(J,z){return w(J)===!0||J.isFramebufferTexture&&J.minFilter!==Ui&&J.minFilter!==di?Math.log2(Math.max(z.width,z.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?z.mipmaps.length:1}function N(J){const z=J.target;z.removeEventListener("dispose",N),H(z),z.isVideoTexture&&p.delete(z)}function k(J){const z=J.target;z.removeEventListener("dispose",k),B(z)}function H(J){const z=i.get(J);if(z.__webglInit===void 0)return;const pe=J.source,Te=v.get(pe);if(Te){const Oe=Te[z.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&L(J),Object.keys(Te).length===0&&v.delete(pe)}i.remove(J)}function L(J){const z=i.get(J);n.deleteTexture(z.__webglTexture);const pe=J.source,Te=v.get(pe);delete Te[z.__cacheKey],o.memory.textures--}function B(J){const z=i.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),i.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(z.__webglFramebuffer[Te]))for(let Oe=0;Oe<z.__webglFramebuffer[Te].length;Oe++)n.deleteFramebuffer(z.__webglFramebuffer[Te][Oe]);else n.deleteFramebuffer(z.__webglFramebuffer[Te]);z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer[Te])}else{if(Array.isArray(z.__webglFramebuffer))for(let Te=0;Te<z.__webglFramebuffer.length;Te++)n.deleteFramebuffer(z.__webglFramebuffer[Te]);else n.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let Te=0;Te<z.__webglColorRenderbuffer.length;Te++)z.__webglColorRenderbuffer[Te]&&n.deleteRenderbuffer(z.__webglColorRenderbuffer[Te]);z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const pe=J.textures;for(let Te=0,Oe=pe.length;Te<Oe;Te++){const Ie=i.get(pe[Te]);Ie.__webglTexture&&(n.deleteTexture(Ie.__webglTexture),o.memory.textures--),i.remove(pe[Te])}i.remove(J)}let V=0;function ae(){V=0}function re(){const J=V;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),V+=1,J}function ge(J){const z=[];return z.push(J.wrapS),z.push(J.wrapT),z.push(J.wrapR||0),z.push(J.magFilter),z.push(J.minFilter),z.push(J.anisotropy),z.push(J.internalFormat),z.push(J.format),z.push(J.type),z.push(J.generateMipmaps),z.push(J.premultiplyAlpha),z.push(J.flipY),z.push(J.unpackAlignment),z.push(J.colorSpace),z.join()}function ve(J,z){const pe=i.get(J);if(J.isVideoTexture&&je(J),J.isRenderTargetTexture===!1&&J.version>0&&pe.__version!==J.version){const Te=J.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(pe,J,z);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+z)}function fe(J,z){const pe=i.get(J);if(J.version>0&&pe.__version!==J.version){ce(pe,J,z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+z)}function he(J,z){const pe=i.get(J);if(J.version>0&&pe.__version!==J.version){ce(pe,J,z);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+z)}function U(J,z){const pe=i.get(J);if(J.version>0&&pe.__version!==J.version){Ee(pe,J,z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+z)}const Z={[fc]:n.REPEAT,[cs]:n.CLAMP_TO_EDGE,[uf]:n.MIRRORED_REPEAT},Q={[Ui]:n.NEAREST,[ky]:n.NEAREST_MIPMAP_NEAREST,[Bu]:n.NEAREST_MIPMAP_LINEAR,[di]:n.LINEAR,[nf]:n.LINEAR_MIPMAP_NEAREST,[ks]:n.LINEAR_MIPMAP_LINEAR},W={[vI]:n.NEVER,[wI]:n.ALWAYS,[yI]:n.LESS,[uw]:n.LEQUAL,[_I]:n.EQUAL,[SI]:n.GEQUAL,[xI]:n.GREATER,[AI]:n.NOTEQUAL};function ie(J,z){if(z.type===Jr&&e.has("OES_texture_float_linear")===!1&&(z.magFilter===di||z.magFilter===nf||z.magFilter===Bu||z.magFilter===ks||z.minFilter===di||z.minFilter===nf||z.minFilter===Bu||z.minFilter===ks)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,Z[z.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,Z[z.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,Z[z.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,Q[z.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,Q[z.minFilter]),z.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,W[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===Ui||z.minFilter!==Bu&&z.minFilter!==ks||z.type===Jr&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,r.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function Le(J,z){let pe=!1;J.__webglInit===void 0&&(J.__webglInit=!0,z.addEventListener("dispose",N));const Te=z.source;let Oe=v.get(Te);Oe===void 0&&(Oe={},v.set(Te,Oe));const Ie=ge(z);if(Ie!==J.__cacheKey){Oe[Ie]===void 0&&(Oe[Ie]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Oe[Ie].usedTimes++;const ot=Oe[J.__cacheKey];ot!==void 0&&(Oe[J.__cacheKey].usedTimes--,ot.usedTimes===0&&L(z)),J.__cacheKey=Ie,J.__webglTexture=Oe[Ie].texture}return pe}function ce(J,z,pe){let Te=n.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(Te=n.TEXTURE_2D_ARRAY),z.isData3DTexture&&(Te=n.TEXTURE_3D);const Oe=Le(J,z),Ie=z.source;t.bindTexture(Te,J.__webglTexture,n.TEXTURE0+pe);const ot=i.get(Ie);if(Ie.version!==ot.__version||Oe===!0){t.activeTexture(n.TEXTURE0+pe);const qe=gn.getPrimaries(gn.workingColorSpace),ut=z.colorSpace===Wa?null:gn.getPrimaries(z.colorSpace),jt=z.colorSpace===Wa||qe===ut?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);let ze=M(z.image,!1,r.maxTextureSize);ze=Et(z,ze);const vt=s.convert(z.format,z.colorSpace),Pt=s.convert(z.type);let Lt=b(z.internalFormat,vt,Pt,z.colorSpace,z.isVideoTexture);ie(Te,z);let ft;const te=z.mipmaps,be=z.isVideoTexture!==!0,tt=ot.__version===void 0||Oe===!0,ee=Ie.dataReady,Ve=F(z,ze);if(z.isDepthTexture)Lt=P(z.format===Qu,z.type),tt&&(be?t.texStorage2D(n.TEXTURE_2D,1,Lt,ze.width,ze.height):t.texImage2D(n.TEXTURE_2D,0,Lt,ze.width,ze.height,0,vt,Pt,null));else if(z.isDataTexture)if(te.length>0){be&&tt&&t.texStorage2D(n.TEXTURE_2D,Ve,Lt,te[0].width,te[0].height);for(let Se=0,Pe=te.length;Se<Pe;Se++)ft=te[Se],be?ee&&t.texSubImage2D(n.TEXTURE_2D,Se,0,0,ft.width,ft.height,vt,Pt,ft.data):t.texImage2D(n.TEXTURE_2D,Se,Lt,ft.width,ft.height,0,vt,Pt,ft.data);z.generateMipmaps=!1}else be?(tt&&t.texStorage2D(n.TEXTURE_2D,Ve,Lt,ze.width,ze.height),ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ze.width,ze.height,vt,Pt,ze.data)):t.texImage2D(n.TEXTURE_2D,0,Lt,ze.width,ze.height,0,vt,Pt,ze.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){be&&tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,Lt,te[0].width,te[0].height,ze.depth);for(let Se=0,Pe=te.length;Se<Pe;Se++)if(ft=te[Se],z.format!==ur)if(vt!==null)if(be){if(ee)if(z.layerUpdates.size>0){const ct=oS(ft.width,ft.height,z.format,z.type);for(const nt of z.layerUpdates){const It=ft.data.subarray(nt*ct/ft.data.BYTES_PER_ELEMENT,(nt+1)*ct/ft.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,nt,ft.width,ft.height,1,vt,It)}z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ft.width,ft.height,ze.depth,vt,ft.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Lt,ft.width,ft.height,ze.depth,0,ft.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else be?ee&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ft.width,ft.height,ze.depth,vt,Pt,ft.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Se,Lt,ft.width,ft.height,ze.depth,0,vt,Pt,ft.data)}else{be&&tt&&t.texStorage2D(n.TEXTURE_2D,Ve,Lt,te[0].width,te[0].height);for(let Se=0,Pe=te.length;Se<Pe;Se++)ft=te[Se],z.format!==ur?vt!==null?be?ee&&t.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,ft.width,ft.height,vt,ft.data):t.compressedTexImage2D(n.TEXTURE_2D,Se,Lt,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):be?ee&&t.texSubImage2D(n.TEXTURE_2D,Se,0,0,ft.width,ft.height,vt,Pt,ft.data):t.texImage2D(n.TEXTURE_2D,Se,Lt,ft.width,ft.height,0,vt,Pt,ft.data)}else if(z.isDataArrayTexture)if(be){if(tt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,Lt,ze.width,ze.height,ze.depth),ee)if(z.layerUpdates.size>0){const Se=oS(ze.width,ze.height,z.format,z.type);for(const Pe of z.layerUpdates){const ct=ze.data.subarray(Pe*Se/ze.data.BYTES_PER_ELEMENT,(Pe+1)*Se/ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,ze.width,ze.height,1,vt,Pt,ct)}z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ze.width,ze.height,ze.depth,vt,Pt,ze.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Lt,ze.width,ze.height,ze.depth,0,vt,Pt,ze.data);else if(z.isData3DTexture)be?(tt&&t.texStorage3D(n.TEXTURE_3D,Ve,Lt,ze.width,ze.height,ze.depth),ee&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ze.width,ze.height,ze.depth,vt,Pt,ze.data)):t.texImage3D(n.TEXTURE_3D,0,Lt,ze.width,ze.height,ze.depth,0,vt,Pt,ze.data);else if(z.isFramebufferTexture){if(tt)if(be)t.texStorage2D(n.TEXTURE_2D,Ve,Lt,ze.width,ze.height);else{let Se=ze.width,Pe=ze.height;for(let ct=0;ct<Ve;ct++)t.texImage2D(n.TEXTURE_2D,ct,Lt,Se,Pe,0,vt,Pt,null),Se>>=1,Pe>>=1}}else if(te.length>0){if(be&&tt){const Se=Ye(te[0]);t.texStorage2D(n.TEXTURE_2D,Ve,Lt,Se.width,Se.height)}for(let Se=0,Pe=te.length;Se<Pe;Se++)ft=te[Se],be?ee&&t.texSubImage2D(n.TEXTURE_2D,Se,0,0,vt,Pt,ft):t.texImage2D(n.TEXTURE_2D,Se,Lt,vt,Pt,ft);z.generateMipmaps=!1}else if(be){if(tt){const Se=Ye(ze);t.texStorage2D(n.TEXTURE_2D,Ve,Lt,Se.width,Se.height)}ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,vt,Pt,ze)}else t.texImage2D(n.TEXTURE_2D,0,Lt,vt,Pt,ze);w(z)&&x(Te),ot.__version=Ie.version,z.onUpdate&&z.onUpdate(z)}J.__version=z.version}function Ee(J,z,pe){if(z.image.length!==6)return;const Te=Le(J,z),Oe=z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+pe);const Ie=i.get(Oe);if(Oe.version!==Ie.__version||Te===!0){t.activeTexture(n.TEXTURE0+pe);const ot=gn.getPrimaries(gn.workingColorSpace),qe=z.colorSpace===Wa?null:gn.getPrimaries(z.colorSpace),ut=z.colorSpace===Wa||ot===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const jt=z.isCompressedTexture||z.image[0].isCompressedTexture,ze=z.image[0]&&z.image[0].isDataTexture,vt=[];for(let Pe=0;Pe<6;Pe++)!jt&&!ze?vt[Pe]=M(z.image[Pe],!0,r.maxCubemapSize):vt[Pe]=ze?z.image[Pe].image:z.image[Pe],vt[Pe]=Et(z,vt[Pe]);const Pt=vt[0],Lt=s.convert(z.format,z.colorSpace),ft=s.convert(z.type),te=b(z.internalFormat,Lt,ft,z.colorSpace),be=z.isVideoTexture!==!0,tt=Ie.__version===void 0||Te===!0,ee=Oe.dataReady;let Ve=F(z,Pt);ie(n.TEXTURE_CUBE_MAP,z);let Se;if(jt){be&&tt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,te,Pt.width,Pt.height);for(let Pe=0;Pe<6;Pe++){Se=vt[Pe].mipmaps;for(let ct=0;ct<Se.length;ct++){const nt=Se[ct];z.format!==ur?Lt!==null?be?ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct,0,0,nt.width,nt.height,Lt,nt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct,te,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):be?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct,0,0,nt.width,nt.height,Lt,ft,nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct,te,nt.width,nt.height,0,Lt,ft,nt.data)}}}else{if(Se=z.mipmaps,be&&tt){Se.length>0&&Ve++;const Pe=Ye(vt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ve,te,Pe.width,Pe.height)}for(let Pe=0;Pe<6;Pe++)if(ze){be?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,vt[Pe].width,vt[Pe].height,Lt,ft,vt[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,te,vt[Pe].width,vt[Pe].height,0,Lt,ft,vt[Pe].data);for(let ct=0;ct<Se.length;ct++){const It=Se[ct].image[Pe].image;be?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct+1,0,0,It.width,It.height,Lt,ft,It.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct+1,te,It.width,It.height,0,Lt,ft,It.data)}}else{be?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Lt,ft,vt[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,te,Lt,ft,vt[Pe]);for(let ct=0;ct<Se.length;ct++){const nt=Se[ct];be?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct+1,0,0,Lt,ft,nt.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ct+1,te,Lt,ft,nt.image[Pe])}}}w(z)&&x(n.TEXTURE_CUBE_MAP),Ie.__version=Oe.version,z.onUpdate&&z.onUpdate(z)}J.__version=z.version}function Ne(J,z,pe,Te,Oe,Ie){const ot=s.convert(pe.format,pe.colorSpace),qe=s.convert(pe.type),ut=b(pe.internalFormat,ot,qe,pe.colorSpace),jt=i.get(z),ze=i.get(pe);if(ze.__renderTarget=z,!jt.__hasExternalTextures){const vt=Math.max(1,z.width>>Ie),Pt=Math.max(1,z.height>>Ie);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?t.texImage3D(Oe,Ie,ut,vt,Pt,z.depth,0,ot,qe,null):t.texImage2D(Oe,Ie,ut,vt,Pt,0,ot,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),Ze(z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Te,Oe,ze.__webglTexture,0,Ue(z)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Te,Oe,ze.__webglTexture,Ie),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Re(J,z,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,J),z.depthBuffer){const Te=z.depthTexture,Oe=Te&&Te.isDepthTexture?Te.type:null,Ie=P(z.stencilBuffer,Oe),ot=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Ue(z);Ze(z)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Ie,z.width,z.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Ie,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,J)}else{const Te=z.textures;for(let Oe=0;Oe<Te.length;Oe++){const Ie=Te[Oe],ot=s.convert(Ie.format,Ie.colorSpace),qe=s.convert(Ie.type),ut=b(Ie.internalFormat,ot,qe,Ie.colorSpace),jt=Ue(z);pe&&Ze(z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,jt,ut,z.width,z.height):Ze(z)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,jt,ut,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,ut,z.width,z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Xe(J,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Te=i.get(z.depthTexture);Te.__renderTarget=z,(!Te.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),ve(z.depthTexture,0);const Oe=Te.__webglTexture,Ie=Ue(z);if(z.depthTexture.format===Vu)Ze(z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0);else if(z.depthTexture.format===Qu)Ze(z)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function it(J){const z=i.get(J),pe=J.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==J.depthTexture){const Te=J.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),Te){const Oe=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,Te.removeEventListener("dispose",Oe)};Te.addEventListener("dispose",Oe),z.__depthDisposeCallback=Oe}z.__boundDepthTexture=Te}if(J.depthTexture&&!z.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");Xe(z.__webglFramebuffer,J)}else if(pe){z.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer[Te]),z.__webglDepthbuffer[Te]===void 0)z.__webglDepthbuffer[Te]=n.createRenderbuffer(),Re(z.__webglDepthbuffer[Te],J,!1);else{const Oe=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=z.__webglDepthbuffer[Te];n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,Ie)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=n.createRenderbuffer(),Re(z.__webglDepthbuffer,J,!1);else{const Te=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,Oe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function $e(J,z,pe){const Te=i.get(J);z!==void 0&&Ne(Te.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&&it(J)}function rt(J){const z=J.texture,pe=i.get(J),Te=i.get(z);J.addEventListener("dispose",k);const Oe=J.textures,Ie=J.isWebGLCubeRenderTarget===!0,ot=Oe.length>1;if(ot||(Te.__webglTexture===void 0&&(Te.__webglTexture=n.createTexture()),Te.__version=z.version,o.memory.textures++),Ie){pe.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(z.mipmaps&&z.mipmaps.length>0){pe.__webglFramebuffer[qe]=[];for(let ut=0;ut<z.mipmaps.length;ut++)pe.__webglFramebuffer[qe][ut]=n.createFramebuffer()}else pe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){pe.__webglFramebuffer=[];for(let qe=0;qe<z.mipmaps.length;qe++)pe.__webglFramebuffer[qe]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(ot)for(let qe=0,ut=Oe.length;qe<ut;qe++){const jt=i.get(Oe[qe]);jt.__webglTexture===void 0&&(jt.__webglTexture=n.createTexture(),o.memory.textures++)}if(J.samples>0&&Ze(J)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let qe=0;qe<Oe.length;qe++){const ut=Oe[qe];pe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe]);const jt=s.convert(ut.format,ut.colorSpace),ze=s.convert(ut.type),vt=b(ut.internalFormat,jt,ze,ut.colorSpace,J.isXRRenderTarget===!0),Pt=Ue(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,vt,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),Re(pe.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,Te.__webglTexture),ie(n.TEXTURE_CUBE_MAP,z);for(let qe=0;qe<6;qe++)if(z.mipmaps&&z.mipmaps.length>0)for(let ut=0;ut<z.mipmaps.length;ut++)Ne(pe.__webglFramebuffer[qe][ut],J,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ut);else Ne(pe.__webglFramebuffer[qe],J,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);w(z)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ot){for(let qe=0,ut=Oe.length;qe<ut;qe++){const jt=Oe[qe],ze=i.get(jt);t.bindTexture(n.TEXTURE_2D,ze.__webglTexture),ie(n.TEXTURE_2D,jt),Ne(pe.__webglFramebuffer,J,jt,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),w(jt)&&x(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(qe=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,Te.__webglTexture),ie(qe,z),z.mipmaps&&z.mipmaps.length>0)for(let ut=0;ut<z.mipmaps.length;ut++)Ne(pe.__webglFramebuffer[ut],J,z,n.COLOR_ATTACHMENT0,qe,ut);else Ne(pe.__webglFramebuffer,J,z,n.COLOR_ATTACHMENT0,qe,0);w(z)&&x(qe),t.unbindTexture()}J.depthBuffer&&it(J)}function De(J){const z=J.textures;for(let pe=0,Te=z.length;pe<Te;pe++){const Oe=z[pe];if(w(Oe)){const Ie=C(J),ot=i.get(Oe).__webglTexture;t.bindTexture(Ie,ot),x(Ie),t.unbindTexture()}}}const Fe=[],K=[];function gt(J){if(J.samples>0){if(Ze(J)===!1){const z=J.textures,pe=J.width,Te=J.height;let Oe=n.COLOR_BUFFER_BIT;const Ie=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=i.get(J),qe=z.length>1;if(qe)for(let ut=0;ut<z.length;ut++)t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let ut=0;ut<z.length;ut++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ot.__webglColorRenderbuffer[ut]);const jt=i.get(z[ut]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,jt,0)}n.blitFramebuffer(0,0,pe,Te,0,0,pe,Te,Oe,n.NEAREST),c===!0&&(Fe.length=0,K.length=0,Fe.push(n.COLOR_ATTACHMENT0+ut),J.depthBuffer&&J.resolveDepthBuffer===!1&&(Fe.push(Ie),K.push(Ie),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,K)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Fe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let ut=0;ut<z.length;ut++){t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.RENDERBUFFER,ot.__webglColorRenderbuffer[ut]);const jt=i.get(z[ut]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ut,n.TEXTURE_2D,jt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&c){const z=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[z])}}}function Ue(J){return Math.min(r.maxSamples,J.samples)}function Ze(J){const z=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function je(J){const z=o.render.frame;p.get(J)!==z&&(p.set(J,z),J.update())}function Et(J,z){const pe=J.colorSpace,Te=J.format,Oe=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||pe!==$u&&pe!==Wa&&(gn.getTransfer(pe)===Tn?(Te!==ur||Oe!==yo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pe)),z}function Ye(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(d.width=J.naturalWidth||J.width,d.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(d.width=J.displayWidth,d.height=J.displayHeight):(d.width=J.width,d.height=J.height),d}this.allocateTextureUnit=re,this.resetTextureUnits=ae,this.setTexture2D=ve,this.setTexture2DArray=fe,this.setTexture3D=he,this.setTextureCube=U,this.rebindTextures=$e,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=gt,this.setupDepthRenderbuffer=it,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=Ze}function MP(n,e){function t(i,r=Wa){let s;const o=gn.getTransfer(r);if(i===yo)return n.UNSIGNED_BYTE;if(i===Hy)return n.UNSIGNED_SHORT_4_4_4_4;if(i===zy)return n.UNSIGNED_SHORT_5_5_5_1;if(i===tw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ZS)return n.BYTE;if(i===ew)return n.SHORT;if(i===df)return n.UNSIGNED_SHORT;if(i===Uy)return n.INT;if(i===ol)return n.UNSIGNED_INT;if(i===Jr)return n.FLOAT;if(i===bf)return n.HALF_FLOAT;if(i===nw)return n.ALPHA;if(i===iw)return n.RGB;if(i===ur)return n.RGBA;if(i===rw)return n.LUMINANCE;if(i===sw)return n.LUMINANCE_ALPHA;if(i===Vu)return n.DEPTH_COMPONENT;if(i===Qu)return n.DEPTH_STENCIL;if(i===Gy)return n.RED;if(i===qm)return n.RED_INTEGER;if(i===ow)return n.RG;if(i===Vy)return n.RG_INTEGER;if(i===Wy)return n.RGBA_INTEGER;if(i===um||i===dm||i===hm||i===fm)if(o===Tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===um)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===dm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===hm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===um)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===dm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===hm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===fm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===U0||i===H0||i===z0||i===G0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===U0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===H0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===z0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===G0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===V0||i===W0||i===j0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===V0||i===W0)return o===Tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===j0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===X0||i===J0||i===K0||i===Y0||i===q0||i===Q0||i===$0||i===Z0||i===ey||i===ty||i===ny||i===iy||i===ry||i===sy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===X0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===J0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===K0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Y0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===q0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Q0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===$0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Z0)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ey)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===ty)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ny)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===iy)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ry)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===sy)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===pm||i===oy||i===ay)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===pm)return o===Tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===oy)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ay)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===aw||i===ly||i===cy||i===uy)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===pm)return s.COMPRESSED_RED_RGTC1_EXT;if(i===ly)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===cy)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===uy)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===qu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const e4={type:"move"};class Jx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const M of e.hand.values()){const w=t.getJointPose(M,i),x=this._getHandJoint(d,M);w!==null&&(x.matrix.fromArray(w.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=w.radius),x.visible=w!==null}const p=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],v=p.position.distanceTo(m.position),y=.02,S=.005;d.inputState.pinching&&v>y+S?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=y-S&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(e4)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Xa;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const t4=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,n4=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class i4{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Hn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new xo({vertexShader:t4,fragmentShader:n4,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new hi(new If(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class r4 extends ta{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l="local-floor",c=1,d=null,p=null,m=null,v=null,y=null,S=null;const M=new i4,w=t.getContextAttributes();let x=null,C=null;const b=[],P=[],F=new Be;let N=null;const k=new jn;k.viewport=new yn;const H=new jn;H.viewport=new yn;const L=[k,H],B=new pP;let V=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let Ee=b[ce];return Ee===void 0&&(Ee=new Jx,b[ce]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ce){let Ee=b[ce];return Ee===void 0&&(Ee=new Jx,b[ce]=Ee),Ee.getGripSpace()},this.getHand=function(ce){let Ee=b[ce];return Ee===void 0&&(Ee=new Jx,b[ce]=Ee),Ee.getHandSpace()};function re(ce){const Ee=P.indexOf(ce.inputSource);if(Ee===-1)return;const Ne=b[Ee];Ne!==void 0&&(Ne.update(ce.inputSource,ce.frame,d||o),Ne.dispatchEvent({type:ce.type,data:ce.inputSource}))}function ge(){r.removeEventListener("select",re),r.removeEventListener("selectstart",re),r.removeEventListener("selectend",re),r.removeEventListener("squeeze",re),r.removeEventListener("squeezestart",re),r.removeEventListener("squeezeend",re),r.removeEventListener("end",ge),r.removeEventListener("inputsourceschange",ve);for(let ce=0;ce<b.length;ce++){const Ee=P[ce];Ee!==null&&(P[ce]=null,b[ce].disconnect(Ee))}V=null,ae=null,M.reset(),e.setRenderTarget(x),y=null,v=null,m=null,r=null,C=null,Le.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(F.width,F.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){l=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(ce){d=ce},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(ce){if(r=ce,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",re),r.addEventListener("selectstart",re),r.addEventListener("selectend",re),r.addEventListener("squeeze",re),r.addEventListener("squeezestart",re),r.addEventListener("squeezeend",re),r.addEventListener("end",ge),r.addEventListener("inputsourceschange",ve),w.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(F),r.renderState.layers===void 0){const Ee={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,Ee),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),C=new _o(y.framebufferWidth,y.framebufferHeight,{format:ur,type:yo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let Ee=null,Ne=null,Re=null;w.depth&&(Re=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ee=w.stencil?Qu:Vu,Ne=w.stencil?qu:ol);const Xe={colorFormat:t.RGBA8,depthFormat:Re,scaleFactor:s};m=new XRWebGLBinding(r,t),v=m.createProjectionLayer(Xe),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),C=new _o(v.textureWidth,v.textureHeight,{format:ur,type:yo,depthTexture:new Sw(v.textureWidth,v.textureHeight,Ne,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(c),d=null,o=await r.requestReferenceSpace(l),Le.setContext(r),Le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function ve(ce){for(let Ee=0;Ee<ce.removed.length;Ee++){const Ne=ce.removed[Ee],Re=P.indexOf(Ne);Re>=0&&(P[Re]=null,b[Re].disconnect(Ne))}for(let Ee=0;Ee<ce.added.length;Ee++){const Ne=ce.added[Ee];let Re=P.indexOf(Ne);if(Re===-1){for(let it=0;it<b.length;it++)if(it>=P.length){P.push(Ne),Re=it;break}else if(P[it]===null){P[it]=Ne,Re=it;break}if(Re===-1)break}const Xe=b[Re];Xe&&Xe.connect(Ne)}}const fe=new X,he=new X;function U(ce,Ee,Ne){fe.setFromMatrixPosition(Ee.matrixWorld),he.setFromMatrixPosition(Ne.matrixWorld);const Re=fe.distanceTo(he),Xe=Ee.projectionMatrix.elements,it=Ne.projectionMatrix.elements,$e=Xe[14]/(Xe[10]-1),rt=Xe[14]/(Xe[10]+1),De=(Xe[9]+1)/Xe[5],Fe=(Xe[9]-1)/Xe[5],K=(Xe[8]-1)/Xe[0],gt=(it[8]+1)/it[0],Ue=$e*K,Ze=$e*gt,je=Re/(-K+gt),Et=je*-K;if(Ee.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(Et),ce.translateZ(je),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),Xe[10]===-1)ce.projectionMatrix.copy(Ee.projectionMatrix),ce.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const Ye=$e+je,J=rt+je,z=Ue-Et,pe=Ze+(Re-Et),Te=De*rt/J*Ye,Oe=Fe*rt/J*Ye;ce.projectionMatrix.makePerspective(z,pe,Te,Oe,Ye,J),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function Z(ce,Ee){Ee===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(Ee.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(r===null)return;let Ee=ce.near,Ne=ce.far;M.texture!==null&&(M.depthNear>0&&(Ee=M.depthNear),M.depthFar>0&&(Ne=M.depthFar)),B.near=H.near=k.near=Ee,B.far=H.far=k.far=Ne,(V!==B.near||ae!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),V=B.near,ae=B.far),k.layers.mask=ce.layers.mask|2,H.layers.mask=ce.layers.mask|4,B.layers.mask=k.layers.mask|H.layers.mask;const Re=ce.parent,Xe=B.cameras;Z(B,Re);for(let it=0;it<Xe.length;it++)Z(Xe[it],Re);Xe.length===2?U(B,k,H):B.projectionMatrix.copy(k.projectionMatrix),Q(ce,B,Re)};function Q(ce,Ee,Ne){Ne===null?ce.matrix.copy(Ee.matrixWorld):(ce.matrix.copy(Ne.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(Ee.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(Ee.projectionMatrix),ce.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=pf*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(ce){c=ce,v!==null&&(v.fixedFoveation=ce),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ce)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(B)};let W=null;function ie(ce,Ee){if(p=Ee.getViewerPose(d||o),S=Ee,p!==null){const Ne=p.views;y!==null&&(e.setRenderTargetFramebuffer(C,y.framebuffer),e.setRenderTarget(C));let Re=!1;Ne.length!==B.cameras.length&&(B.cameras.length=0,Re=!0);for(let it=0;it<Ne.length;it++){const $e=Ne[it];let rt=null;if(y!==null)rt=y.getViewport($e);else{const Fe=m.getViewSubImage(v,$e);rt=Fe.viewport,it===0&&(e.setRenderTargetTextures(C,Fe.colorTexture,v.ignoreDepthValues?void 0:Fe.depthStencilTexture),e.setRenderTarget(C))}let De=L[it];De===void 0&&(De=new jn,De.layers.enable(it),De.viewport=new yn,L[it]=De),De.matrix.fromArray($e.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray($e.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set(rt.x,rt.y,rt.width,rt.height),it===0&&(B.matrix.copy(De.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),Re===!0&&B.cameras.push(De)}const Xe=r.enabledFeatures;if(Xe&&Xe.includes("depth-sensing")){const it=m.getDepthInformation(Ne[0]);it&&it.isValid&&it.texture&&M.init(e,it,r.renderState)}}for(let Ne=0;Ne<b.length;Ne++){const Re=P[Ne],Xe=b[Ne];Re!==null&&Xe!==void 0&&Xe.update(Re,Ee,d||o)}W&&W(ce,Ee),Ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ee}),S=null}const Le=new xP;Le.setAnimationLoop(ie),this.setAnimationLoop=function(ce){W=ce},this.dispose=function(){}}}const Au=new ps,s4=new Nt;function o4(n,e){function t(w,x){w.matrixAutoUpdate===!0&&w.updateMatrix(),x.value.copy(w.matrix)}function i(w,x){x.color.getRGB(w.fogColor.value,II(n)),x.isFog?(w.fogNear.value=x.near,w.fogFar.value=x.far):x.isFogExp2&&(w.fogDensity.value=x.density)}function r(w,x,C,b,P){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(w,x):x.isMeshToonMaterial?(s(w,x),m(w,x)):x.isMeshPhongMaterial?(s(w,x),p(w,x)):x.isMeshStandardMaterial?(s(w,x),v(w,x),x.isMeshPhysicalMaterial&&y(w,x,P)):x.isMeshMatcapMaterial?(s(w,x),S(w,x)):x.isMeshDepthMaterial?s(w,x):x.isMeshDistanceMaterial?(s(w,x),M(w,x)):x.isMeshNormalMaterial?s(w,x):x.isLineBasicMaterial?(o(w,x),x.isLineDashedMaterial&&l(w,x)):x.isPointsMaterial?c(w,x,C,b):x.isSpriteMaterial?d(w,x):x.isShadowMaterial?(w.color.value.copy(x.color),w.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(w,x){w.opacity.value=x.opacity,x.color&&w.diffuse.value.copy(x.color),x.emissive&&w.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(w.map.value=x.map,t(x.map,w.mapTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.bumpMap&&(w.bumpMap.value=x.bumpMap,t(x.bumpMap,w.bumpMapTransform),w.bumpScale.value=x.bumpScale,x.side===br&&(w.bumpScale.value*=-1)),x.normalMap&&(w.normalMap.value=x.normalMap,t(x.normalMap,w.normalMapTransform),w.normalScale.value.copy(x.normalScale),x.side===br&&w.normalScale.value.negate()),x.displacementMap&&(w.displacementMap.value=x.displacementMap,t(x.displacementMap,w.displacementMapTransform),w.displacementScale.value=x.displacementScale,w.displacementBias.value=x.displacementBias),x.emissiveMap&&(w.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,w.emissiveMapTransform)),x.specularMap&&(w.specularMap.value=x.specularMap,t(x.specularMap,w.specularMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest);const C=e.get(x),b=C.envMap,P=C.envMapRotation;b&&(w.envMap.value=b,Au.copy(P),Au.x*=-1,Au.y*=-1,Au.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Au.y*=-1,Au.z*=-1),w.envMapRotation.value.setFromMatrix4(s4.makeRotationFromEuler(Au)),w.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=x.reflectivity,w.ior.value=x.ior,w.refractionRatio.value=x.refractionRatio),x.lightMap&&(w.lightMap.value=x.lightMap,w.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,w.lightMapTransform)),x.aoMap&&(w.aoMap.value=x.aoMap,w.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,w.aoMapTransform))}function o(w,x){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,x.map&&(w.map.value=x.map,t(x.map,w.mapTransform))}function l(w,x){w.dashSize.value=x.dashSize,w.totalSize.value=x.dashSize+x.gapSize,w.scale.value=x.scale}function c(w,x,C,b){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,w.size.value=x.size*C,w.scale.value=b*.5,x.map&&(w.map.value=x.map,t(x.map,w.uvTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest)}function d(w,x){w.diffuse.value.copy(x.color),w.opacity.value=x.opacity,w.rotation.value=x.rotation,x.map&&(w.map.value=x.map,t(x.map,w.mapTransform)),x.alphaMap&&(w.alphaMap.value=x.alphaMap,t(x.alphaMap,w.alphaMapTransform)),x.alphaTest>0&&(w.alphaTest.value=x.alphaTest)}function p(w,x){w.specular.value.copy(x.specular),w.shininess.value=Math.max(x.shininess,1e-4)}function m(w,x){x.gradientMap&&(w.gradientMap.value=x.gradientMap)}function v(w,x){w.metalness.value=x.metalness,x.metalnessMap&&(w.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,w.metalnessMapTransform)),w.roughness.value=x.roughness,x.roughnessMap&&(w.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,w.roughnessMapTransform)),x.envMap&&(w.envMapIntensity.value=x.envMapIntensity)}function y(w,x,C){w.ior.value=x.ior,x.sheen>0&&(w.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),w.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(w.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,w.sheenColorMapTransform)),x.sheenRoughnessMap&&(w.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,w.sheenRoughnessMapTransform))),x.clearcoat>0&&(w.clearcoat.value=x.clearcoat,w.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(w.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,w.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(w.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===br&&w.clearcoatNormalScale.value.negate())),x.dispersion>0&&(w.dispersion.value=x.dispersion),x.iridescence>0&&(w.iridescence.value=x.iridescence,w.iridescenceIOR.value=x.iridescenceIOR,w.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(w.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,w.iridescenceMapTransform)),x.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),x.transmission>0&&(w.transmission.value=x.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),x.transmissionMap&&(w.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,w.transmissionMapTransform)),w.thickness.value=x.thickness,x.thicknessMap&&(w.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=x.attenuationDistance,w.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(w.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(w.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=x.specularIntensity,w.specularColor.value.copy(x.specularColor),x.specularColorMap&&(w.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,w.specularColorMapTransform)),x.specularIntensityMap&&(w.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,w.specularIntensityMapTransform))}function S(w,x){x.matcap&&(w.matcap.value=x.matcap)}function M(w,x){const C=e.get(x).light;w.referencePosition.value.setFromMatrixPosition(C.matrixWorld),w.nearDistance.value=C.shadow.camera.near,w.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function a4(n,e,t,i){let r={},s={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,b){const P=b.program;i.uniformBlockBinding(C,P)}function d(C,b){let P=r[C.id];P===void 0&&(S(C),P=p(C),r[C.id]=P,C.addEventListener("dispose",w));const F=b.program;i.updateUBOMapping(C,F);const N=e.render.frame;s[C.id]!==N&&(v(C),s[C.id]=N)}function p(C){const b=m();C.__bindingPointIndex=b;const P=n.createBuffer(),F=C.__size,N=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,P),n.bufferData(n.UNIFORM_BUFFER,F,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,P),P}function m(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(C){const b=r[C.id],P=C.uniforms,F=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let N=0,k=P.length;N<k;N++){const H=Array.isArray(P[N])?P[N]:[P[N]];for(let L=0,B=H.length;L<B;L++){const V=H[L];if(y(V,N,L,F)===!0){const ae=V.__offset,re=Array.isArray(V.value)?V.value:[V.value];let ge=0;for(let ve=0;ve<re.length;ve++){const fe=re[ve],he=M(fe);typeof fe=="number"||typeof fe=="boolean"?(V.__data[0]=fe,n.bufferSubData(n.UNIFORM_BUFFER,ae+ge,V.__data)):fe.isMatrix3?(V.__data[0]=fe.elements[0],V.__data[1]=fe.elements[1],V.__data[2]=fe.elements[2],V.__data[3]=0,V.__data[4]=fe.elements[3],V.__data[5]=fe.elements[4],V.__data[6]=fe.elements[5],V.__data[7]=0,V.__data[8]=fe.elements[6],V.__data[9]=fe.elements[7],V.__data[10]=fe.elements[8],V.__data[11]=0):(fe.toArray(V.__data,ge),ge+=he.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ae,V.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(C,b,P,F){const N=C.value,k=b+"_"+P;if(F[k]===void 0)return typeof N=="number"||typeof N=="boolean"?F[k]=N:F[k]=N.clone(),!0;{const H=F[k];if(typeof N=="number"||typeof N=="boolean"){if(H!==N)return F[k]=N,!0}else if(H.equals(N)===!1)return H.copy(N),!0}return!1}function S(C){const b=C.uniforms;let P=0;const F=16;for(let k=0,H=b.length;k<H;k++){const L=Array.isArray(b[k])?b[k]:[b[k]];for(let B=0,V=L.length;B<V;B++){const ae=L[B],re=Array.isArray(ae.value)?ae.value:[ae.value];for(let ge=0,ve=re.length;ge<ve;ge++){const fe=re[ge],he=M(fe),U=P%F,Z=U%he.boundary,Q=U+Z;P+=Z,Q!==0&&F-Q<he.storage&&(P+=F-Q),ae.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),ae.__offset=P,P+=he.storage}}}const N=P%F;return N>0&&(P+=F-N),C.__size=P,C.__cache={},this}function M(C){const b={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(b.boundary=4,b.storage=4):C.isVector2?(b.boundary=8,b.storage=8):C.isVector3||C.isColor?(b.boundary=16,b.storage=12):C.isVector4?(b.boundary=16,b.storage=16):C.isMatrix3?(b.boundary=48,b.storage=48):C.isMatrix4?(b.boundary=64,b.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),b}function w(C){const b=C.target;b.removeEventListener("dispose",w);const P=o.indexOf(b.__bindingPointIndex);o.splice(P,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function x(){for(const C in r)n.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:c,update:d,dispose:x}}class TP{constructor(e={}){const{canvas:t=TI(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=o;const S=new Uint32Array(4),M=new Int32Array(4);let w=null,x=null;const C=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jr,this.toneMapping=Wo,this.toneMappingExposure=1;const P=this;let F=!1,N=0,k=0,H=null,L=-1,B=null;const V=new yn,ae=new yn;let re=null;const ge=new st(0);let ve=0,fe=t.width,he=t.height,U=1,Z=null,Q=null;const W=new yn(0,0,fe,he),ie=new yn(0,0,fe,he);let Le=!1;const ce=new tg;let Ee=!1,Ne=!1;const Re=new Nt,Xe=new Nt,it=new X,$e=new yn,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let De=!1;function Fe(){return H===null?U:1}let K=i;function gt(G,ue){return t.getContext(G,ue)}try{const G={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Tf}`),t.addEventListener("webglcontextlost",Pe,!1),t.addEventListener("webglcontextrestored",ct,!1),t.addEventListener("webglcontextcreationerror",nt,!1),K===null){const ue="webgl2";if(K=gt(ue,G),K===null)throw gt(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Ue,Ze,je,Et,Ye,J,z,pe,Te,Oe,Ie,ot,qe,ut,jt,ze,vt,Pt,Lt,ft,te,be,tt,ee;function Ve(){Ue=new yz(K),Ue.init(),be=new MP(K,Ue),Ze=new hz(K,Ue,e,be),je=new $G(K,Ue),Ze.reverseDepthBuffer&&v&&je.buffers.depth.setReversed(!0),Et=new Az(K),Ye=new UG,J=new ZG(K,Ue,je,Ye,Ze,be,Et),z=new pz(P),pe=new vz(P),Te=new bk(K),tt=new uz(K,Te),Oe=new _z(K,Te,Et,tt),Ie=new wz(K,Oe,Te,Et),Lt=new Sz(K,Ze,J),ze=new fz(Ye),ot=new kG(P,z,pe,Ue,Ze,tt,ze),qe=new o4(P,Ye),ut=new zG,jt=new JG(Ue),Pt=new cz(P,z,pe,je,Ie,y,c),vt=new qG(P,Ie,Ze),ee=new a4(K,Et,Ze,je),ft=new dz(K,Ue,Et),te=new xz(K,Ue,Et),Et.programs=ot.programs,P.capabilities=Ze,P.extensions=Ue,P.properties=Ye,P.renderLists=ut,P.shadowMap=vt,P.state=je,P.info=Et}Ve();const Se=new r4(P,K);this.xr=Se,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const G=Ue.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Ue.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(G){G!==void 0&&(U=G,this.setSize(fe,he,!1))},this.getSize=function(G){return G.set(fe,he)},this.setSize=function(G,ue,xe=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}fe=G,he=ue,t.width=Math.floor(G*U),t.height=Math.floor(ue*U),xe===!0&&(t.style.width=G+"px",t.style.height=ue+"px"),this.setViewport(0,0,G,ue)},this.getDrawingBufferSize=function(G){return G.set(fe*U,he*U).floor()},this.setDrawingBufferSize=function(G,ue,xe){fe=G,he=ue,U=xe,t.width=Math.floor(G*xe),t.height=Math.floor(ue*xe),this.setViewport(0,0,G,ue)},this.getCurrentViewport=function(G){return G.copy(V)},this.getViewport=function(G){return G.copy(W)},this.setViewport=function(G,ue,xe,we){G.isVector4?W.set(G.x,G.y,G.z,G.w):W.set(G,ue,xe,we),je.viewport(V.copy(W).multiplyScalar(U).round())},this.getScissor=function(G){return G.copy(ie)},this.setScissor=function(G,ue,xe,we){G.isVector4?ie.set(G.x,G.y,G.z,G.w):ie.set(G,ue,xe,we),je.scissor(ae.copy(ie).multiplyScalar(U).round())},this.getScissorTest=function(){return Le},this.setScissorTest=function(G){je.setScissorTest(Le=G)},this.setOpaqueSort=function(G){Z=G},this.setTransparentSort=function(G){Q=G},this.getClearColor=function(G){return G.copy(Pt.getClearColor())},this.setClearColor=function(){Pt.setClearColor.apply(Pt,arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha.apply(Pt,arguments)},this.clear=function(G=!0,ue=!0,xe=!0){let we=0;if(G){let se=!1;if(H!==null){const Ge=H.texture.format;se=Ge===Wy||Ge===Vy||Ge===qm}if(se){const Ge=H.texture.type,et=Ge===yo||Ge===ol||Ge===df||Ge===qu||Ge===Hy||Ge===zy,ht=Pt.getClearColor(),yt=Pt.getClearAlpha(),Ut=ht.r,Dt=ht.g,xt=ht.b;et?(S[0]=Ut,S[1]=Dt,S[2]=xt,S[3]=yt,K.clearBufferuiv(K.COLOR,0,S)):(M[0]=Ut,M[1]=Dt,M[2]=xt,M[3]=yt,K.clearBufferiv(K.COLOR,0,M))}else we|=K.COLOR_BUFFER_BIT}ue&&(we|=K.DEPTH_BUFFER_BIT),xe&&(we|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Pe,!1),t.removeEventListener("webglcontextrestored",ct,!1),t.removeEventListener("webglcontextcreationerror",nt,!1),Pt.dispose(),ut.dispose(),jt.dispose(),Ye.dispose(),z.dispose(),pe.dispose(),Ie.dispose(),tt.dispose(),ee.dispose(),ot.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",fl),Se.removeEventListener("sessionend",Co),vs.stop()};function Pe(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function ct(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const G=Et.autoReset,ue=vt.enabled,xe=vt.autoUpdate,we=vt.needsUpdate,se=vt.type;Ve(),Et.autoReset=G,vt.enabled=ue,vt.autoUpdate=xe,vt.needsUpdate=we,vt.type=se}function nt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function It(G){const ue=G.target;ue.removeEventListener("dispose",It),cn(ue)}function cn(G){Cn(G),Ye.remove(G)}function Cn(G){const ue=Ye.get(G).programs;ue!==void 0&&(ue.forEach(function(xe){ot.releaseProgram(xe)}),G.isShaderMaterial&&ot.releaseShaderCache(G))}this.renderBufferDirect=function(G,ue,xe,we,se,Ge){ue===null&&(ue=rt);const et=se.isMesh&&se.matrixWorld.determinant()<0,ht=_d(G,ue,xe,we,se);je.setMaterial(we,et);let yt=xe.index,Ut=1;if(we.wireframe===!0){if(yt=Oe.getWireframeAttribute(xe),yt===void 0)return;Ut=2}const Dt=xe.drawRange,xt=xe.attributes.position;let pt=Dt.start*Ut,Rt=(Dt.start+Dt.count)*Ut;Ge!==null&&(pt=Math.max(pt,Ge.start*Ut),Rt=Math.min(Rt,(Ge.start+Ge.count)*Ut)),yt!==null?(pt=Math.max(pt,0),Rt=Math.min(Rt,yt.count)):xt!=null&&(pt=Math.max(pt,0),Rt=Math.min(Rt,xt.count));const rn=Rt-pt;if(rn<0||rn===1/0)return;tt.setup(se,we,ht,xe,yt);let sn,Gt=ft;if(yt!==null&&(sn=Te.get(yt),Gt=te,Gt.setIndex(sn)),se.isMesh)we.wireframe===!0?(je.setLineWidth(we.wireframeLinewidth*Fe()),Gt.setMode(K.LINES)):Gt.setMode(K.TRIANGLES);else if(se.isLine){let Mt=we.linewidth;Mt===void 0&&(Mt=1),je.setLineWidth(Mt*Fe()),se.isLineSegments?Gt.setMode(K.LINES):se.isLineLoop?Gt.setMode(K.LINE_LOOP):Gt.setMode(K.LINE_STRIP)}else se.isPoints?Gt.setMode(K.POINTS):se.isSprite&&Gt.setMode(K.TRIANGLES);if(se.isBatchedMesh)if(se._multiDrawInstances!==null)Gt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))Gt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else{const Mt=se._multiDrawStarts,En=se._multiDrawCounts,Ht=se._multiDrawCount,ei=yt?Te.get(yt).bytesPerElement:1,Ir=Ye.get(we).currentProgram.getUniforms();for(let Ii=0;Ii<Ht;Ii++)Ir.setValue(K,"_gl_DrawID",Ii),Gt.render(Mt[Ii]/ei,En[Ii])}else if(se.isInstancedMesh)Gt.renderInstances(pt,rn,se.count);else if(xe.isInstancedBufferGeometry){const Mt=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,En=Math.min(xe.instanceCount,Mt);Gt.renderInstances(pt,rn,En)}else Gt.render(pt,rn)};function Zt(G,ue,xe){G.transparent===!0&&G.side===Os&&G.forceSinglePass===!1?(G.side=br,G.needsUpdate=!0,pl(G,ue,xe),G.side=$o,G.needsUpdate=!0,pl(G,ue,xe),G.side=Os):pl(G,ue,xe)}this.compile=function(G,ue,xe=null){xe===null&&(xe=G),x=jt.get(xe),x.init(ue),b.push(x),xe.traverseVisible(function(se){se.isLight&&se.layers.test(ue.layers)&&(x.pushLight(se),se.castShadow&&x.pushShadow(se))}),G!==xe&&G.traverseVisible(function(se){se.isLight&&se.layers.test(ue.layers)&&(x.pushLight(se),se.castShadow&&x.pushShadow(se))}),x.setupLights();const we=new Set;return G.traverse(function(se){if(!(se.isMesh||se.isPoints||se.isLine||se.isSprite))return;const Ge=se.material;if(Ge)if(Array.isArray(Ge))for(let et=0;et<Ge.length;et++){const ht=Ge[et];Zt(ht,xe,se),we.add(ht)}else Zt(Ge,xe,se),we.add(Ge)}),b.pop(),x=null,we},this.compileAsync=function(G,ue,xe=null){const we=this.compile(G,ue,xe);return new Promise(se=>{function Ge(){if(we.forEach(function(et){Ye.get(et).currentProgram.isReady()&&we.delete(et)}),we.size===0){se(G);return}setTimeout(Ge,10)}Ue.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let Jn=null;function Zn(G){Jn&&Jn(G)}function fl(){vs.stop()}function Co(){vs.start()}const vs=new xP;vs.setAnimationLoop(Zn),typeof self<"u"&&vs.setContext(self),this.setAnimationLoop=function(G){Jn=G,Se.setAnimationLoop(G),G===null?vs.stop():vs.start()},Se.addEventListener("sessionstart",fl),Se.addEventListener("sessionend",Co),this.render=function(G,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(ue),ue=Se.getCamera()),G.isScene===!0&&G.onBeforeRender(P,G,ue,H),x=jt.get(G,b.length),x.init(ue),b.push(x),Xe.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),ce.setFromProjectionMatrix(Xe),Ne=this.localClippingEnabled,Ee=ze.init(this.clippingPlanes,Ne),w=ut.get(G,C.length),w.init(),C.push(w),Se.enabled===!0&&Se.isPresenting===!0){const Ge=P.xr.getDepthSensingMesh();Ge!==null&&Yr(Ge,ue,-1/0,P.sortObjects)}Yr(G,ue,0,P.sortObjects),w.finish(),P.sortObjects===!0&&w.sort(Z,Q),De=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,De&&Pt.addToRenderList(w,G),this.info.render.frame++,Ee===!0&&ze.beginShadows();const xe=x.state.shadowsArray;vt.render(xe,G,ue),Ee===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const we=w.opaque,se=w.transmissive;if(x.setupLights(),ue.isArrayCamera){const Ge=ue.cameras;if(se.length>0)for(let et=0,ht=Ge.length;et<ht;et++){const yt=Ge[et];qr(we,se,G,yt)}De&&Pt.render(G);for(let et=0,ht=Ge.length;et<ht;et++){const yt=Ge[et];ia(w,G,yt,yt.viewport)}}else se.length>0&&qr(we,se,G,ue),De&&Pt.render(G),ia(w,G,ue);H!==null&&(J.updateMultisampleRenderTarget(H),J.updateRenderTargetMipmap(H)),G.isScene===!0&&G.onAfterRender(P,G,ue),tt.resetDefaultState(),L=-1,B=null,b.pop(),b.length>0?(x=b[b.length-1],Ee===!0&&ze.setGlobalState(P.clippingPlanes,x.state.camera)):x=null,C.pop(),C.length>0?w=C[C.length-1]:w=null};function Yr(G,ue,xe,we){if(G.visible===!1)return;if(G.layers.test(ue.layers)){if(G.isGroup)xe=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ue);else if(G.isLight)x.pushLight(G),G.castShadow&&x.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||ce.intersectsSprite(G)){we&&$e.setFromMatrixPosition(G.matrixWorld).applyMatrix4(Xe);const et=Ie.update(G),ht=G.material;ht.visible&&w.push(G,et,ht,xe,$e.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||ce.intersectsObject(G))){const et=Ie.update(G),ht=G.material;if(we&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),$e.copy(G.boundingSphere.center)):(et.boundingSphere===null&&et.computeBoundingSphere(),$e.copy(et.boundingSphere.center)),$e.applyMatrix4(G.matrixWorld).applyMatrix4(Xe)),Array.isArray(ht)){const yt=et.groups;for(let Ut=0,Dt=yt.length;Ut<Dt;Ut++){const xt=yt[Ut],pt=ht[xt.materialIndex];pt&&pt.visible&&w.push(G,et,pt,xe,$e.z,xt)}}else ht.visible&&w.push(G,et,ht,xe,$e.z,null)}}const Ge=G.children;for(let et=0,ht=Ge.length;et<ht;et++)Yr(Ge[et],ue,xe,we)}function ia(G,ue,xe,we){const se=G.opaque,Ge=G.transmissive,et=G.transparent;x.setupLightsView(xe),Ee===!0&&ze.setGlobalState(P.clippingPlanes,xe),we&&je.viewport(V.copy(we)),se.length>0&&bo(se,ue,xe),Ge.length>0&&bo(Ge,ue,xe),et.length>0&&bo(et,ue,xe),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function qr(G,ue,xe,we){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[we.id]===void 0&&(x.state.transmissionRenderTarget[we.id]=new _o(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?bf:yo,minFilter:ks,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gn.workingColorSpace}));const Ge=x.state.transmissionRenderTarget[we.id],et=we.viewport||V;Ge.setSize(et.z,et.w);const ht=P.getRenderTarget();P.setRenderTarget(Ge),P.getClearColor(ge),ve=P.getClearAlpha(),ve<1&&P.setClearColor(16777215,.5),P.clear(),De&&Pt.render(xe);const yt=P.toneMapping;P.toneMapping=Wo;const Ut=we.viewport;if(we.viewport!==void 0&&(we.viewport=void 0),x.setupLightsView(we),Ee===!0&&ze.setGlobalState(P.clippingPlanes,we),bo(G,xe,we),J.updateMultisampleRenderTarget(Ge),J.updateRenderTargetMipmap(Ge),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let Dt=!1;for(let xt=0,pt=ue.length;xt<pt;xt++){const Rt=ue[xt],rn=Rt.object,sn=Rt.geometry,Gt=Rt.material,Mt=Rt.group;if(Gt.side===Os&&rn.layers.test(we.layers)){const En=Gt.side;Gt.side=br,Gt.needsUpdate=!0,vd(rn,xe,we,sn,Gt,Mt),Gt.side=En,Gt.needsUpdate=!0,Dt=!0}}Dt===!0&&(J.updateMultisampleRenderTarget(Ge),J.updateRenderTargetMipmap(Ge))}P.setRenderTarget(ht),P.setClearColor(ge,ve),Ut!==void 0&&(we.viewport=Ut),P.toneMapping=yt}function bo(G,ue,xe){const we=ue.isScene===!0?ue.overrideMaterial:null;for(let se=0,Ge=G.length;se<Ge;se++){const et=G[se],ht=et.object,yt=et.geometry,Ut=we===null?et.material:we,Dt=et.group;ht.layers.test(xe.layers)&&vd(ht,ue,xe,yt,Ut,Dt)}}function vd(G,ue,xe,we,se,Ge){G.onBeforeRender(P,ue,xe,we,se,Ge),G.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),se.onBeforeRender(P,ue,xe,we,G,Ge),se.transparent===!0&&se.side===Os&&se.forceSinglePass===!1?(se.side=br,se.needsUpdate=!0,P.renderBufferDirect(xe,ue,we,se,G,Ge),se.side=$o,se.needsUpdate=!0,P.renderBufferDirect(xe,ue,we,se,G,Ge),se.side=Os):P.renderBufferDirect(xe,ue,we,se,G,Ge),G.onAfterRender(P,ue,xe,we,se,Ge)}function pl(G,ue,xe){ue.isScene!==!0&&(ue=rt);const we=Ye.get(G),se=x.state.lights,Ge=x.state.shadowsArray,et=se.state.version,ht=ot.getParameters(G,se.state,Ge,ue,xe),yt=ot.getProgramCacheKey(ht);let Ut=we.programs;we.environment=G.isMeshStandardMaterial?ue.environment:null,we.fog=ue.fog,we.envMap=(G.isMeshStandardMaterial?pe:z).get(G.envMap||we.environment),we.envMapRotation=we.environment!==null&&G.envMap===null?ue.environmentRotation:G.envMapRotation,Ut===void 0&&(G.addEventListener("dispose",It),Ut=new Map,we.programs=Ut);let Dt=Ut.get(yt);if(Dt!==void 0){if(we.currentProgram===Dt&&we.lightsStateVersion===et)return ys(G,ht),Dt}else ht.uniforms=ot.getUniforms(G),G.onBeforeCompile(ht,P),Dt=ot.acquireProgram(ht,yt),Ut.set(yt,Dt),we.uniforms=ht.uniforms;const xt=we.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(xt.clippingPlanes=ze.uniform),ys(G,ht),we.needsLights=Ad(G),we.lightsStateVersion=et,we.needsLights&&(xt.ambientLightColor.value=se.state.ambient,xt.lightProbe.value=se.state.probe,xt.directionalLights.value=se.state.directional,xt.directionalLightShadows.value=se.state.directionalShadow,xt.spotLights.value=se.state.spot,xt.spotLightShadows.value=se.state.spotShadow,xt.rectAreaLights.value=se.state.rectArea,xt.ltc_1.value=se.state.rectAreaLTC1,xt.ltc_2.value=se.state.rectAreaLTC2,xt.pointLights.value=se.state.point,xt.pointLightShadows.value=se.state.pointShadow,xt.hemisphereLights.value=se.state.hemi,xt.directionalShadowMap.value=se.state.directionalShadowMap,xt.directionalShadowMatrix.value=se.state.directionalShadowMatrix,xt.spotShadowMap.value=se.state.spotShadowMap,xt.spotLightMatrix.value=se.state.spotLightMatrix,xt.spotLightMap.value=se.state.spotLightMap,xt.pointShadowMap.value=se.state.pointShadowMap,xt.pointShadowMatrix.value=se.state.pointShadowMatrix),we.currentProgram=Dt,we.uniformsList=null,Dt}function yd(G){if(G.uniformsList===null){const ue=G.currentProgram.getUniforms();G.uniformsList=x0.seqWithValue(ue.seq,G.uniforms)}return G.uniformsList}function ys(G,ue){const xe=Ye.get(G);xe.outputColorSpace=ue.outputColorSpace,xe.batching=ue.batching,xe.batchingColor=ue.batchingColor,xe.instancing=ue.instancing,xe.instancingColor=ue.instancingColor,xe.instancingMorph=ue.instancingMorph,xe.skinning=ue.skinning,xe.morphTargets=ue.morphTargets,xe.morphNormals=ue.morphNormals,xe.morphColors=ue.morphColors,xe.morphTargetsCount=ue.morphTargetsCount,xe.numClippingPlanes=ue.numClippingPlanes,xe.numIntersection=ue.numClipIntersection,xe.vertexAlphas=ue.vertexAlphas,xe.vertexTangents=ue.vertexTangents,xe.toneMapping=ue.toneMapping}function _d(G,ue,xe,we,se){ue.isScene!==!0&&(ue=rt),J.resetTextureUnits();const Ge=ue.fog,et=we.isMeshStandardMaterial?ue.environment:null,ht=H===null?P.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:$u,yt=(we.isMeshStandardMaterial?pe:z).get(we.envMap||et),Ut=we.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,Dt=!!xe.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),xt=!!xe.morphAttributes.position,pt=!!xe.morphAttributes.normal,Rt=!!xe.morphAttributes.color;let rn=Wo;we.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(rn=P.toneMapping);const sn=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Gt=sn!==void 0?sn.length:0,Mt=Ye.get(we),En=x.state.lights;if(Ee===!0&&(Ne===!0||G!==B)){const Kn=G===B&&we.id===L;ze.setState(we,G,Kn)}let Ht=!1;we.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==En.state.version||Mt.outputColorSpace!==ht||se.isBatchedMesh&&Mt.batching===!1||!se.isBatchedMesh&&Mt.batching===!0||se.isBatchedMesh&&Mt.batchingColor===!0&&se.colorTexture===null||se.isBatchedMesh&&Mt.batchingColor===!1&&se.colorTexture!==null||se.isInstancedMesh&&Mt.instancing===!1||!se.isInstancedMesh&&Mt.instancing===!0||se.isSkinnedMesh&&Mt.skinning===!1||!se.isSkinnedMesh&&Mt.skinning===!0||se.isInstancedMesh&&Mt.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&Mt.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&Mt.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&Mt.instancingMorph===!1&&se.morphTexture!==null||Mt.envMap!==yt||we.fog===!0&&Mt.fog!==Ge||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==ze.numPlanes||Mt.numIntersection!==ze.numIntersection)||Mt.vertexAlphas!==Ut||Mt.vertexTangents!==Dt||Mt.morphTargets!==xt||Mt.morphNormals!==pt||Mt.morphColors!==Rt||Mt.toneMapping!==rn||Mt.morphTargetsCount!==Gt)&&(Ht=!0):(Ht=!0,Mt.__version=we.version);let ei=Mt.currentProgram;Ht===!0&&(ei=pl(we,ue,se));let Ir=!1,Ii=!1,_s=!1;const An=ei.getUniforms(),Pn=Mt.uniforms;if(je.useProgram(ei.program)&&(Ir=!0,Ii=!0,_s=!0),we.id!==L&&(L=we.id,Ii=!0),Ir||B!==G){je.buffers.depth.getReversed()?(Re.copy(G.projectionMatrix),nO(Re),iO(Re),An.setValue(K,"projectionMatrix",Re)):An.setValue(K,"projectionMatrix",G.projectionMatrix),An.setValue(K,"viewMatrix",G.matrixWorldInverse);const Di=An.map.cameraPosition;Di!==void 0&&Di.setValue(K,it.setFromMatrixPosition(G.matrixWorld)),Ze.logarithmicDepthBuffer&&An.setValue(K,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&An.setValue(K,"isOrthographic",G.isOrthographicCamera===!0),B!==G&&(B=G,Ii=!0,_s=!0)}if(se.isSkinnedMesh){An.setOptional(K,se,"bindMatrix"),An.setOptional(K,se,"bindMatrixInverse");const Kn=se.skeleton;Kn&&(Kn.boneTexture===null&&Kn.computeBoneTexture(),An.setValue(K,"boneTexture",Kn.boneTexture,J))}se.isBatchedMesh&&(An.setOptional(K,se,"batchingTexture"),An.setValue(K,"batchingTexture",se._matricesTexture,J),An.setOptional(K,se,"batchingIdTexture"),An.setValue(K,"batchingIdTexture",se._indirectTexture,J),An.setOptional(K,se,"batchingColorTexture"),se._colorsTexture!==null&&An.setValue(K,"batchingColorTexture",se._colorsTexture,J));const Pi=xe.morphAttributes;if((Pi.position!==void 0||Pi.normal!==void 0||Pi.color!==void 0)&&Lt.update(se,xe,ei),(Ii||Mt.receiveShadow!==se.receiveShadow)&&(Mt.receiveShadow=se.receiveShadow,An.setValue(K,"receiveShadow",se.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(Pn.envMap.value=yt,Pn.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&&we.envMap===null&&ue.environment!==null&&(Pn.envMapIntensity.value=ue.environmentIntensity),Ii&&(An.setValue(K,"toneMappingExposure",P.toneMappingExposure),Mt.needsLights&&xd(Pn,_s),Ge&&we.fog===!0&&qe.refreshFogUniforms(Pn,Ge),qe.refreshMaterialUniforms(Pn,we,U,he,x.state.transmissionRenderTarget[G.id]),x0.upload(K,yd(Mt),Pn,J)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(x0.upload(K,yd(Mt),Pn,J),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&An.setValue(K,"center",se.center),An.setValue(K,"modelViewMatrix",se.modelViewMatrix),An.setValue(K,"normalMatrix",se.normalMatrix),An.setValue(K,"modelMatrix",se.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Kn=we.uniformsGroups;for(let Di=0,xs=Kn.length;Di<xs;Di++){const en=Kn[Di];ee.update(en,ei),ee.bind(en,ei)}}return ei}function xd(G,ue){G.ambientLightColor.needsUpdate=ue,G.lightProbe.needsUpdate=ue,G.directionalLights.needsUpdate=ue,G.directionalLightShadows.needsUpdate=ue,G.pointLights.needsUpdate=ue,G.pointLightShadows.needsUpdate=ue,G.spotLights.needsUpdate=ue,G.spotLightShadows.needsUpdate=ue,G.rectAreaLights.needsUpdate=ue,G.hemisphereLights.needsUpdate=ue}function Ad(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(G,ue,xe){Ye.get(G.texture).__webglTexture=ue,Ye.get(G.depthTexture).__webglTexture=xe;const we=Ye.get(G);we.__hasExternalTextures=!0,we.__autoAllocateDepthBuffer=xe===void 0,we.__autoAllocateDepthBuffer||Ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),we.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(G,ue){const xe=Ye.get(G);xe.__webglFramebuffer=ue,xe.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(G,ue=0,xe=0){H=G,N=ue,k=xe;let we=!0,se=null,Ge=!1,et=!1;if(G){const yt=Ye.get(G);if(yt.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(K.FRAMEBUFFER,null),we=!1;else if(yt.__webglFramebuffer===void 0)J.setupRenderTarget(G);else if(yt.__hasExternalTextures)J.rebindTextures(G,Ye.get(G.texture).__webglTexture,Ye.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const xt=G.depthTexture;if(yt.__boundDepthTexture!==xt){if(xt!==null&&Ye.has(xt)&&(G.width!==xt.image.width||G.height!==xt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(G)}}const Ut=G.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(et=!0);const Dt=Ye.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(Dt[ue])?se=Dt[ue][xe]:se=Dt[ue],Ge=!0):G.samples>0&&J.useMultisampledRTT(G)===!1?se=Ye.get(G).__webglMultisampledFramebuffer:Array.isArray(Dt)?se=Dt[xe]:se=Dt,V.copy(G.viewport),ae.copy(G.scissor),re=G.scissorTest}else V.copy(W).multiplyScalar(U).floor(),ae.copy(ie).multiplyScalar(U).floor(),re=Le;if(je.bindFramebuffer(K.FRAMEBUFFER,se)&&we&&je.drawBuffers(G,se),je.viewport(V),je.scissor(ae),je.setScissorTest(re),Ge){const yt=Ye.get(G.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ue,yt.__webglTexture,xe)}else if(et){const yt=Ye.get(G.texture),Ut=ue||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,yt.__webglTexture,xe||0,Ut)}L=-1},this.readRenderTargetPixels=function(G,ue,xe,we,se,Ge,et){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=Ye.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&et!==void 0&&(ht=ht[et]),ht){je.bindFramebuffer(K.FRAMEBUFFER,ht);try{const yt=G.texture,Ut=yt.format,Dt=yt.type;if(!Ze.textureFormatReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=G.width-we&&xe>=0&&xe<=G.height-se&&K.readPixels(ue,xe,we,se,be.convert(Ut),be.convert(Dt),Ge)}finally{const yt=H!==null?Ye.get(H).__webglFramebuffer:null;je.bindFramebuffer(K.FRAMEBUFFER,yt)}}},this.readRenderTargetPixelsAsync=async function(G,ue,xe,we,se,Ge,et){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ht=Ye.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&et!==void 0&&(ht=ht[et]),ht){const yt=G.texture,Ut=yt.format,Dt=yt.type;if(!Ze.textureFormatReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ue>=0&&ue<=G.width-we&&xe>=0&&xe<=G.height-se){je.bindFramebuffer(K.FRAMEBUFFER,ht);const xt=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,xt),K.bufferData(K.PIXEL_PACK_BUFFER,Ge.byteLength,K.STREAM_READ),K.readPixels(ue,xe,we,se,be.convert(Ut),be.convert(Dt),0);const pt=H!==null?Ye.get(H).__webglFramebuffer:null;je.bindFramebuffer(K.FRAMEBUFFER,pt);const Rt=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await tO(K,Rt,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,xt),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,Ge),K.deleteBuffer(xt),K.deleteSync(Rt),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(G,ue=null,xe=0){G.isTexture!==!0&&(Gh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ue=arguments[0]||null,G=arguments[1]);const we=Math.pow(2,-xe),se=Math.floor(G.image.width*we),Ge=Math.floor(G.image.height*we),et=ue!==null?ue.x:0,ht=ue!==null?ue.y:0;J.setTexture2D(G,0),K.copyTexSubImage2D(K.TEXTURE_2D,xe,0,0,et,ht,se,Ge),je.unbindTexture()};const Sd=K.createFramebuffer(),wd=K.createFramebuffer();this.copyTextureToTexture=function(G,ue,xe=null,we=null,se=0,Ge=null){G.isTexture!==!0&&(Gh("WebGLRenderer: copyTextureToTexture function signature has changed."),we=arguments[0]||null,G=arguments[1],ue=arguments[2],Ge=arguments[3]||0,xe=null),Ge===null&&(se!==0?(Gh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=se,se=0):Ge=0);let et,ht,yt,Ut,Dt,xt,pt,Rt,rn;const sn=G.isCompressedTexture?G.mipmaps[Ge]:G.image;if(xe!==null)et=xe.max.x-xe.min.x,ht=xe.max.y-xe.min.y,yt=xe.isBox3?xe.max.z-xe.min.z:1,Ut=xe.min.x,Dt=xe.min.y,xt=xe.isBox3?xe.min.z:0;else{const Pi=Math.pow(2,-se);et=Math.floor(sn.width*Pi),ht=Math.floor(sn.height*Pi),G.isDataArrayTexture?yt=sn.depth:G.isData3DTexture?yt=Math.floor(sn.depth*Pi):yt=1,Ut=0,Dt=0,xt=0}we!==null?(pt=we.x,Rt=we.y,rn=we.z):(pt=0,Rt=0,rn=0);const Gt=be.convert(ue.format),Mt=be.convert(ue.type);let En;ue.isData3DTexture?(J.setTexture3D(ue,0),En=K.TEXTURE_3D):ue.isDataArrayTexture||ue.isCompressedArrayTexture?(J.setTexture2DArray(ue,0),En=K.TEXTURE_2D_ARRAY):(J.setTexture2D(ue,0),En=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ue.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ue.unpackAlignment);const Ht=K.getParameter(K.UNPACK_ROW_LENGTH),ei=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Ir=K.getParameter(K.UNPACK_SKIP_PIXELS),Ii=K.getParameter(K.UNPACK_SKIP_ROWS),_s=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,sn.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,sn.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Ut),K.pixelStorei(K.UNPACK_SKIP_ROWS,Dt),K.pixelStorei(K.UNPACK_SKIP_IMAGES,xt);const An=G.isDataArrayTexture||G.isData3DTexture,Pn=ue.isDataArrayTexture||ue.isData3DTexture;if(G.isDepthTexture){const Pi=Ye.get(G),Kn=Ye.get(ue),Di=Ye.get(Pi.__renderTarget),xs=Ye.get(Kn.__renderTarget);je.bindFramebuffer(K.READ_FRAMEBUFFER,Di.__webglFramebuffer),je.bindFramebuffer(K.DRAW_FRAMEBUFFER,xs.__webglFramebuffer);for(let en=0;en<yt;en++)An&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Ye.get(G).__webglTexture,se,xt+en),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Ye.get(ue).__webglTexture,Ge,rn+en)),K.blitFramebuffer(Ut,Dt,et,ht,pt,Rt,et,ht,K.DEPTH_BUFFER_BIT,K.NEAREST);je.bindFramebuffer(K.READ_FRAMEBUFFER,null),je.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(se!==0||G.isRenderTargetTexture||Ye.has(G)){const Pi=Ye.get(G),Kn=Ye.get(ue);je.bindFramebuffer(K.READ_FRAMEBUFFER,Sd),je.bindFramebuffer(K.DRAW_FRAMEBUFFER,wd);for(let Di=0;Di<yt;Di++)An?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Pi.__webglTexture,se,xt+Di):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Pi.__webglTexture,se),Pn?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Kn.__webglTexture,Ge,rn+Di):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Kn.__webglTexture,Ge),se!==0?K.blitFramebuffer(Ut,Dt,et,ht,pt,Rt,et,ht,K.COLOR_BUFFER_BIT,K.NEAREST):Pn?K.copyTexSubImage3D(En,Ge,pt,Rt,rn+Di,Ut,Dt,et,ht):K.copyTexSubImage2D(En,Ge,pt,Rt,Ut,Dt,et,ht);je.bindFramebuffer(K.READ_FRAMEBUFFER,null),je.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else Pn?G.isDataTexture||G.isData3DTexture?K.texSubImage3D(En,Ge,pt,Rt,rn,et,ht,yt,Gt,Mt,sn.data):ue.isCompressedArrayTexture?K.compressedTexSubImage3D(En,Ge,pt,Rt,rn,et,ht,yt,Gt,sn.data):K.texSubImage3D(En,Ge,pt,Rt,rn,et,ht,yt,Gt,Mt,sn):G.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Ge,pt,Rt,et,ht,Gt,Mt,sn.data):G.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Ge,pt,Rt,sn.width,sn.height,Gt,sn.data):K.texSubImage2D(K.TEXTURE_2D,Ge,pt,Rt,et,ht,Gt,Mt,sn);K.pixelStorei(K.UNPACK_ROW_LENGTH,Ht),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ei),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Ir),K.pixelStorei(K.UNPACK_SKIP_ROWS,Ii),K.pixelStorei(K.UNPACK_SKIP_IMAGES,_s),Ge===0&&ue.generateMipmaps&&K.generateMipmap(En),je.unbindTexture()},this.copyTextureToTexture3D=function(G,ue,xe=null,we=null,se=0){return G.isTexture!==!0&&(Gh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),xe=arguments[0]||null,we=arguments[1]||null,G=arguments[2],ue=arguments[3],se=arguments[4]||0),Gh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,ue,xe,we,se)},this.initRenderTarget=function(G){Ye.get(G).__webglFramebuffer===void 0&&J.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?J.setTextureCube(G,0):G.isData3DTexture?J.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?J.setTexture2DArray(G,0):J.setTexture2D(G,0),je.unbindTexture()},this.resetState=function(){N=0,k=0,H=null,je.reset(),tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Go}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=gn._getDrawingBufferColorSpace(e),t.unpackColorSpace=gn._getUnpackColorSpace()}}const l4=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$S,AddEquation:ic,AddOperation:nI,AdditiveAnimationBlendMode:lw,AdditiveBlending:KA,AgXToneMapping:aI,AlphaFormat:nw,AlwaysCompare:wI,AlwaysDepth:B0,AlwaysStencilFunc:$A,AmbientLight:aP,AnimationAction:vP,AnimationClip:gf,AnimationLoader:M3,AnimationMixer:$3,AnimationObjectGroup:q3,AnimationUtils:A3,ArcCurve:FI,ArrayCamera:pP,ArrowHelper:yk,AttachedBindMode:QA,Audio:mP,AudioAnalyser:H3,AudioContext:Uw,AudioListener:O3,AudioLoader:L3,AxesHelper:_k,BackSide:br,BasicDepthPacking:pI,BasicShadowMap:FR,BatchedMesh:NI,Bone:Yy,BooleanKeyframeTrack:hd,Box2:rk,Box3:hr,Box3Helper:gk,BoxGeometry:dd,BoxHelper:mk,BufferAttribute:_n,BufferGeometry:qt,BufferGeometryLoader:hP,ByteType:ZS,Cache:Ja,Camera:Qm,CameraHelper:pk,CanvasTexture:jO,CapsuleGeometry:$y,CatmullRomCurve3:OI,CineonToneMapping:sI,CircleGeometry:Zy,ClampToEdgeWrapping:cs,Clock:Hw,Color:st,ColorKeyframeTrack:Bw,ColorManagement:gn,CompressedArrayTexture:VO,CompressedCubeTexture:WO,CompressedTexture:qy,CompressedTextureLoader:T3,ConeGeometry:e_,ConstantAlphaFactor:ZR,ConstantColorFactor:QR,Controls:Ak,CubeCamera:mw,CubeReflectionMapping:sl,CubeRefractionMapping:hc,CubeTexture:$m,CubeTextureLoader:C3,CubeUVReflectionMapping:Cf,CubicBezierCurve:Ew,CubicBezierCurve3:kI,CubicInterpolant:nP,CullFaceBack:JA,CullFaceFront:NR,CullFaceFrontBack:lF,CullFaceNone:LR,Curve:Eo,CurvePath:HI,CustomBlending:OR,CustomToneMapping:oI,CylinderGeometry:Rf,Cylindrical:ik,Data3DTexture:hw,DataArrayTexture:Xy,DataTexture:jo,DataTextureLoader:b3,DataUtils:yO,DecrementStencilOp:_F,DecrementWrapStencilOp:AF,DefaultLoadingManager:Jh,DepthFormat:Vu,DepthStencilFormat:Qu,DepthTexture:Sw,DetachedBindMode:cI,DirectionalLight:kw,DirectionalLightHelper:fk,DiscreteInterpolant:iP,DodecahedronGeometry:t_,DoubleSide:Os,DstAlphaFactor:XR,DstColorFactor:KR,DynamicCopyUsage:NF,DynamicDrawUsage:Wu,DynamicReadUsage:DF,EdgesGeometry:zI,EllipseCurve:Qy,EqualCompare:_I,EqualDepth:N0,EqualStencilFunc:MF,EquirectangularReflectionMapping:Mm,EquirectangularRefractionMapping:Tm,Euler:ps,EventDispatcher:ta,ExtrudeGeometry:i_,FileLoader:ms,Float16BufferAttribute:EO,Float32BufferAttribute:Ct,FloatType:Jr,Fog:Ky,FogExp2:Jy,FramebufferTexture:GO,FrontSide:$o,Frustum:tg,GLBufferAttribute:nk,GLSL1:OF,GLSL3:ZA,GreaterCompare:xI,GreaterDepth:O0,GreaterEqualCompare:SI,GreaterEqualDepth:F0,GreaterEqualStencilFunc:RF,GreaterStencilFunc:CF,GridHelper:dk,Group:Xa,HalfFloatType:bf,HemisphereLight:oP,HemisphereLightHelper:uk,IcosahedronGeometry:r_,ImageBitmapLoader:fP,ImageLoader:Fm,ImageUtils:CI,IncrementStencilOp:yF,IncrementWrapStencilOp:xF,InstancedBufferAttribute:Zu,InstancedBufferGeometry:dP,InstancedInterleavedBuffer:tk,InstancedMesh:_w,Int16BufferAttribute:SO,Int32BufferAttribute:wO,Int8BufferAttribute:_O,IntType:Uy,InterleavedBuffer:Zm,InterleavedBufferAttribute:pc,Interpolant:Pf,InterpolateDiscrete:hf,InterpolateLinear:ff,InterpolateSmooth:_0,InvertStencilOp:SF,KeepStencilOp:Cu,KeyframeTrack:Mo,LOD:LI,LatheGeometry:ig,Layers:Xu,LessCompare:yI,LessDepth:L0,LessEqualCompare:uw,LessEqualDepth:Yu,LessEqualStencilFunc:TF,LessStencilFunc:EF,Light:xc,LightProbe:uP,Line:al,Line3:sk,LineBasicMaterial:fr,LineCurve:Mw,LineCurve3:UI,LineDashedMaterial:ZI,LineLoop:xw,LineSegments:wo,LinearFilter:di,LinearInterpolant:Dw,LinearMipMapLinearFilter:hF,LinearMipMapNearestFilter:dF,LinearMipmapLinearFilter:ks,LinearMipmapNearestFilter:nf,LinearSRGBColorSpace:$u,LinearToneMapping:iI,LinearTransfer:bm,Loader:pr,LoaderUtils:lc,LoadingManager:Lw,LoopOnce:uI,LoopPingPong:hI,LoopRepeat:dI,LuminanceAlphaFormat:sw,LuminanceFormat:rw,MOUSE:Mu,Material:xi,MaterialLoader:d_,MathUtils:EI,Matrix2:Ww,Matrix3:$t,Matrix4:Nt,MaxEquation:zR,Mesh:hi,MeshBasicMaterial:us,MeshDepthMaterial:Rw,MeshDistanceMaterial:Iw,MeshLambertMaterial:QI,MeshMatcapMaterial:$I,MeshNormalMaterial:qI,MeshPhongMaterial:KI,MeshPhysicalMaterial:Us,MeshStandardMaterial:og,MeshToonMaterial:YI,MinEquation:HR,MirroredRepeatWrapping:uf,MixOperation:tI,MultiplyBlending:qA,MultiplyOperation:Ym,NearestFilter:Ui,NearestMipMapLinearFilter:uF,NearestMipMapNearestFilter:cF,NearestMipmapLinearFilter:Bu,NearestMipmapNearestFilter:ky,NeutralToneMapping:lI,NeverCompare:vI,NeverDepth:D0,NeverStencilFunc:wF,NoBlending:$a,NoColorSpace:Wa,NoToneMapping:Wo,NormalAnimationBlendMode:jy,NormalBlending:Gu,NotEqualCompare:AI,NotEqualDepth:k0,NotEqualStencilFunc:bF,NumberKeyframeTrack:td,Object3D:fn,ObjectLoader:D3,ObjectSpaceNormalMap:gI,OctahedronGeometry:rg,OneFactor:VR,OneMinusConstantAlphaFactor:eI,OneMinusConstantColorFactor:$R,OneMinusDstAlphaFactor:JR,OneMinusDstColorFactor:YR,OneMinusSrcAlphaFactor:P0,OneMinusSrcColorFactor:jR,OrthographicCamera:go,PCFShadowMap:Fy,PCFSoftShadowMap:cm,PMREMGenerator:aS,Path:Dm,PerspectiveCamera:jn,Plane:Va,PlaneGeometry:If,PlaneHelper:vk,PointLight:Ow,PointLightHelper:lk,Points:Aw,PointsMaterial:ng,PolarGridHelper:hk,PolyhedronGeometry:_c,PositionalAudio:U3,PropertyBinding:mn,PropertyMixer:gP,QuadraticBezierCurve:Tw,QuadraticBezierCurve3:Cw,Quaternion:Hi,QuaternionKeyframeTrack:nd,QuaternionLinearInterpolant:rP,RED_GREEN_RGTC2_Format:cy,RED_RGTC1_Format:aw,REVISION:Tf,RGBADepthPacking:mI,RGBAFormat:ur,RGBAIntegerFormat:Wy,RGBA_ASTC_10x10_Format:iy,RGBA_ASTC_10x5_Format:ey,RGBA_ASTC_10x6_Format:ty,RGBA_ASTC_10x8_Format:ny,RGBA_ASTC_12x10_Format:ry,RGBA_ASTC_12x12_Format:sy,RGBA_ASTC_4x4_Format:X0,RGBA_ASTC_5x4_Format:J0,RGBA_ASTC_5x5_Format:K0,RGBA_ASTC_6x5_Format:Y0,RGBA_ASTC_6x6_Format:q0,RGBA_ASTC_8x5_Format:Q0,RGBA_ASTC_8x6_Format:$0,RGBA_ASTC_8x8_Format:Z0,RGBA_BPTC_Format:pm,RGBA_ETC2_EAC_Format:j0,RGBA_PVRTC_2BPPV1_Format:G0,RGBA_PVRTC_4BPPV1_Format:z0,RGBA_S3TC_DXT1_Format:dm,RGBA_S3TC_DXT3_Format:hm,RGBA_S3TC_DXT5_Format:fm,RGBDepthPacking:pF,RGBFormat:iw,RGBIntegerFormat:fF,RGB_BPTC_SIGNED_Format:oy,RGB_BPTC_UNSIGNED_Format:ay,RGB_ETC1_Format:V0,RGB_ETC2_Format:W0,RGB_PVRTC_2BPPV1_Format:H0,RGB_PVRTC_4BPPV1_Format:U0,RGB_S3TC_DXT1_Format:um,RGDepthPacking:mF,RGFormat:ow,RGIntegerFormat:Vy,RawShaderMaterial:JI,Ray:ud,Raycaster:yP,RectAreaLight:lP,RedFormat:Gy,RedIntegerFormat:qm,ReinhardToneMapping:rI,RenderTarget:bI,RepeatWrapping:fc,ReplaceStencilOp:vF,ReverseSubtractEquation:UR,RingGeometry:s_,SIGNED_RED_GREEN_RGTC2_Format:uy,SIGNED_RED_RGTC1_Format:ly,SRGBColorSpace:jr,SRGBTransfer:Tn,Scene:hy,ShaderChunk:an,ShaderLib:mo,ShaderMaterial:xo,ShadowMaterial:XI,Shape:Ju,ShapeGeometry:o_,ShapePath:xk,ShapeUtils:Xo,ShortType:ew,Skeleton:eg,SkeletonHelper:ak,SkinnedMesh:yw,Source:Fu,Sphere:$i,SphereGeometry:sg,Spherical:sS,SphericalHarmonics3:cP,SplineCurve:bw,SpotLight:Fw,SpotLightHelper:ok,Sprite:BI,SpriteMaterial:vw,SrcAlphaFactor:I0,SrcAlphaSaturateFactor:qR,SrcColorFactor:WR,StaticCopyUsage:LF,StaticDrawUsage:Rm,StaticReadUsage:PF,StereoCamera:N3,StreamCopyUsage:FF,StreamDrawUsage:IF,StreamReadUsage:BF,StringKeyframeTrack:fd,SubtractEquation:kR,SubtractiveBlending:YA,TOUCH:Tu,TangentSpaceNormalMap:yc,TetrahedronGeometry:a_,Texture:Hn,TextureLoader:sP,TextureUtils:Tk,TorusGeometry:l_,TorusKnotGeometry:c_,Triangle:Xr,TriangleFanDrawMode:dy,TriangleStripDrawMode:cw,TrianglesDrawMode:fI,TubeGeometry:u_,UVMapping:Oy,Uint16BufferAttribute:fw,Uint32BufferAttribute:pw,Uint8BufferAttribute:xO,Uint8ClampedBufferAttribute:AO,Uniform:Vw,UniformsGroup:ek,UniformsLib:lt,UniformsUtils:PI,UnsignedByteType:yo,UnsignedInt248Type:qu,UnsignedInt5999Type:tw,UnsignedIntType:ol,UnsignedShort4444Type:Hy,UnsignedShort5551Type:zy,UnsignedShortType:df,VSMShadowMap:po,Vector2:Be,Vector3:X,Vector4:yn,VectorKeyframeTrack:id,VideoTexture:zO,WebGL3DRenderTarget:lO,WebGLArrayRenderTarget:aO,WebGLCoordinateSystem:Go,WebGLCubeRenderTarget:gw,WebGLMultipleRenderTargets:Ck,WebGLRenderTarget:_o,WebGLRenderer:TP,WebGLUtils:MP,WebGPUCoordinateSystem:Im,WireframeGeometry:jI,WrapAroundEnding:Cm,ZeroCurvatureEnding:Lu,ZeroFactor:GR,ZeroSlopeEnding:Nu,ZeroStencilOp:gF,createCanvasElement:TI},Symbol.toStringTag,{value:"Module"}));var Kx={exports:{}},Zl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function c4(){return vT||(vT=1,Zl.ConcurrentRoot=1,Zl.ContinuousEventPriority=4,Zl.DefaultEventPriority=16,Zl.DiscreteEventPriority=1,Zl.IdleEventPriority=536870912,Zl.LegacyRoot=0),Zl}var yT;function u4(){return yT||(yT=1,Kx.exports=c4()),Kx.exports}var Yh=u4();function d4(n){let e;const t=new Set,i=(d,p)=>{const m=typeof d=="function"?d(e):d;if(m!==e){const v=e;e=p?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},r=()=>e,s=(d,p=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const S=p(e);if(!m(v,S)){const M=v;d(v=S,M)}}return t.add(y),()=>t.delete(y)},c={setState:i,getState:r,subscribe:(d,p,m)=>p||m?s(d,p,m):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=n(i,r,c),c}const h4=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_T=h4?j.useEffect:j.useLayoutEffect;function f4(n){const e=typeof n=="function"?d4(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=j.useReducer(w=>w+1,0),o=e.getState(),l=j.useRef(o),c=j.useRef(i),d=j.useRef(r),p=j.useRef(!1),m=j.useRef();m.current===void 0&&(m.current=i(o));let v,y=!1;(l.current!==o||c.current!==i||d.current!==r||p.current)&&(v=i(o),y=!r(m.current,v)),_T(()=>{y&&(m.current=v),l.current=o,c.current=i,d.current=r,p.current=!1});const S=j.useRef(o);_T(()=>{const w=()=>{try{const C=e.getState(),b=c.current(C);d.current(m.current,b)||(l.current=C,m.current=b,s())}catch{p.current=!0,s()}},x=e.subscribe(w);return e.getState()!==S.current&&w(),x},[]);const M=y?v:m.current;return j.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const p4=n=>typeof n=="object"&&typeof n.then=="function",ku=[];function CP(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function bP(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of ku)if(CP(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=ku.indexOf(r);s!==-1&&ku.splice(s,1)},promise:(p4(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(ku.push(r),!t)throw r.promise}const m4=(n,e,t)=>bP(n,e,!1,t),g4=(n,e,t)=>void bP(n,e,!0,t),v4=n=>{if(n===void 0||n.length===0)ku.splice(0,ku.length);else{const e=ku.find(t=>CP(n,t.keys,t.equal));e&&e.remove()}};var Yx={exports:{}},qx={exports:{}},Qx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function y4(){return xT||(xT=1,function(n){function e(U,Z){var Q=U.length;U.push(Z);e:for(;0<Q;){var W=Q-1>>>1,ie=U[W];if(0<r(ie,Z))U[W]=Z,U[Q]=ie,Q=W;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],Q=U.pop();if(Q!==Z){U[0]=Q;e:for(var W=0,ie=U.length,Le=ie>>>1;W<Le;){var ce=2*(W+1)-1,Ee=U[ce],Ne=ce+1,Re=U[Ne];if(0>r(Ee,Q))Ne<ie&&0>r(Re,Ee)?(U[W]=Re,U[Ne]=Q,W=Ne):(U[W]=Ee,U[ce]=Q,W=ce);else if(Ne<ie&&0>r(Re,Q))U[W]=Re,U[Ne]=Q,W=Ne;else break e}}return Z}function r(U,Z){var Q=U.sortIndex-Z.sortIndex;return Q!==0?Q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,v=3,y=!1,S=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=U)i(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(d)}}function P(U){if(M=!1,b(U),!S)if(t(c)!==null)S=!0,fe(F);else{var Z=t(d);Z!==null&&he(P,Z.startTime-U)}}function F(U,Z){S=!1,M&&(M=!1,x(H),H=-1),y=!0;var Q=v;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!V());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var ie=W(m.expirationTime<=Z);Z=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(c)&&i(c),b(Z)}else i(c);m=t(c)}if(m!==null)var Le=!0;else{var ce=t(d);ce!==null&&he(P,ce.startTime-Z),Le=!1}return Le}finally{m=null,v=Q,y=!1}}var N=!1,k=null,H=-1,L=5,B=-1;function V(){return!(n.unstable_now()-B<L)}function ae(){if(k!==null){var U=n.unstable_now();B=U;var Z=!0;try{Z=k(!0,U)}finally{Z?re():(N=!1,k=null)}}else N=!1}var re;if(typeof C=="function")re=function(){C(ae)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ve=ge.port2;ge.port1.onmessage=ae,re=function(){ve.postMessage(null)}}else re=function(){w(ae,0)};function fe(U){k=U,N||(N=!0,re())}function he(U,Z){H=w(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,fe(F))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var Q=v;v=Z;try{return U()}finally{v=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=v;v=U;try{return Z()}finally{v=Q}},n.unstable_scheduleCallback=function(U,Z,Q){var W=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,U){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,U={id:p++,callback:Z,priorityLevel:U,startTime:Q,expirationTime:ie,sortIndex:-1},Q>W?(U.sortIndex=Q,e(d,U),t(c)===null&&U===t(d)&&(M?(x(H),H=-1):M=!0,he(P,Q-W))):(U.sortIndex=ie,e(c,U),S||y||(S=!0,fe(F))),U},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(U){var Z=v;return function(){var Q=v;v=Z;try{return U.apply(this,arguments)}finally{v=Q}}}}(Qx)),Qx}var AT;function _4(){return AT||(AT=1,qx.exports=y4()),qx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x,ST;function x4(){return ST||(ST=1,$x=function(e){var t={},i=Sf(),r=_4(),s=Object.assign;function o(h){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),F=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=F&&h[F]||h["@@iterator"],typeof h=="function"?h:null)}function k(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case d:return"Portal";case v:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case x:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case S:return(h.displayName||"Context")+".Consumer";case y:return(h._context.displayName||"Context")+".Provider";case M:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case C:return f=h.displayName||null,f!==null?f:k(h.type)||"Memo";case b:f=h._payload,h=h._init;try{return k(h(f))}catch{}}return null}function H(h){var f=h.type;switch(h.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=f.render,h=h.displayName||h.name||"",f.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(f);case 8:return f===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function L(h){var f=h,_=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,f.flags&4098&&(_=f.return),h=f.return;while(h)}return f.tag===3?_:null}function B(h){if(L(h)!==h)throw Error(o(188))}function V(h){var f=h.alternate;if(!f){if(f=L(h),f===null)throw Error(o(188));return f!==h?null:h}for(var _=h,E=f;;){var R=_.return;if(R===null)break;var D=R.alternate;if(D===null){if(E=R.return,E!==null){_=E;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===_)return B(R),h;if(D===E)return B(R),f;D=D.sibling}throw Error(o(188))}if(_.return!==E.return)_=R,E=D;else{for(var Y=!1,le=R.child;le;){if(le===_){Y=!0,_=R,E=D;break}if(le===E){Y=!0,E=R,_=D;break}le=le.sibling}if(!Y){for(le=D.child;le;){if(le===_){Y=!0,_=D,E=R;break}if(le===E){Y=!0,E=D,_=R;break}le=le.sibling}if(!Y)throw Error(o(189))}}if(_.alternate!==E)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?h:f}function ae(h){return h=V(h),h!==null?re(h):null}function re(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var f=re(h);if(f!==null)return f;h=h.sibling}return null}function ge(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var f=ge(h);if(f!==null)return f}h=h.sibling}return null}var ve=Array.isArray,fe=e.getPublicInstance,he=e.getRootHostContext,U=e.getChildHostContext,Z=e.prepareForCommit,Q=e.resetAfterCommit,W=e.createInstance,ie=e.appendInitialChild,Le=e.finalizeInitialChildren,ce=e.prepareUpdate,Ee=e.shouldSetTextContent,Ne=e.createTextInstance,Re=e.scheduleTimeout,Xe=e.cancelTimeout,it=e.noTimeout,$e=e.isPrimaryRenderer,rt=e.supportsMutation,De=e.supportsPersistence,Fe=e.supportsHydration,K=e.getInstanceFromNode,gt=e.preparePortalMount,Ue=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,je=e.supportsMicrotasks,Et=e.scheduleMicrotask,Ye=e.supportsTestSelectors,J=e.findFiberRoot,z=e.getBoundingRect,pe=e.getTextContent,Te=e.isHiddenSubtree,Oe=e.matchAccessibilityRole,Ie=e.setFocusIfFocusable,ot=e.setupIntersectionObserver,qe=e.appendChild,ut=e.appendChildToContainer,jt=e.commitTextUpdate,ze=e.commitMount,vt=e.commitUpdate,Pt=e.insertBefore,Lt=e.insertInContainerBefore,ft=e.removeChild,te=e.removeChildFromContainer,be=e.resetTextContent,tt=e.hideInstance,ee=e.hideTextInstance,Ve=e.unhideInstance,Se=e.unhideTextInstance,Pe=e.clearContainer,ct=e.cloneInstance,nt=e.createContainerChildSet,It=e.appendChildToContainerChildSet,cn=e.finalizeContainerChildren,Cn=e.replaceContainerChildren,Zt=e.cloneHiddenInstance,Jn=e.cloneHiddenTextInstance,Zn=e.canHydrateInstance,fl=e.canHydrateTextInstance,Co=e.canHydrateSuspenseInstance,vs=e.isSuspenseInstancePending,Yr=e.isSuspenseInstanceFallback,ia=e.registerSuspenseInstanceRetry,qr=e.getNextHydratableSibling,bo=e.getFirstHydratableChild,vd=e.getFirstHydratableChildWithinContainer,pl=e.getFirstHydratableChildWithinSuspenseInstance,yd=e.hydrateInstance,ys=e.hydrateTextInstance,_d=e.hydrateSuspenseInstance,xd=e.getNextHydratableInstanceAfterSuspenseInstance,Ad=e.commitHydratedContainer,Sd=e.commitHydratedSuspenseInstance,wd=e.clearSuspenseBoundary,G=e.clearSuspenseBoundaryFromContainer,ue=e.shouldDeleteUnhydratedTailInstances,xe=e.didNotMatchHydratedContainerTextInstance,we=e.didNotMatchHydratedTextInstance,se;function Ge(h){if(se===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);se=f&&f[1]||""}return`
`+se+h}var et=!1;function ht(h,f){if(!h||et)return"";et=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Je){var E=Je}Reflect.construct(h,[],f)}else{try{f.call()}catch(Je){E=Je}h.call(f.prototype)}else{try{throw Error()}catch(Je){E=Je}h()}}catch(Je){if(Je&&E&&typeof Je.stack=="string"){for(var R=Je.stack.split(`
`),D=E.stack.split(`
`),Y=R.length-1,le=D.length-1;1<=Y&&0<=le&&R[Y]!==D[le];)le--;for(;1<=Y&&0<=le;Y--,le--)if(R[Y]!==D[le]){if(Y!==1||le!==1)do if(Y--,le--,0>le||R[Y]!==D[le]){var Ce=`
`+R[Y].replace(" at new "," at ");return h.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",h.displayName)),Ce}while(1<=Y&&0<=le);break}}}finally{et=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?Ge(h):""}var yt=Object.prototype.hasOwnProperty,Ut=[],Dt=-1;function xt(h){return{current:h}}function pt(h){0>Dt||(h.current=Ut[Dt],Ut[Dt]=null,Dt--)}function Rt(h,f){Dt++,Ut[Dt]=h.current,h.current=f}var rn={},sn=xt(rn),Gt=xt(!1),Mt=rn;function En(h,f){var _=h.type.contextTypes;if(!_)return rn;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var R={},D;for(D in _)R[D]=f[D];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=f,h.__reactInternalMemoizedMaskedChildContext=R),R}function Ht(h){return h=h.childContextTypes,h!=null}function ei(){pt(Gt),pt(sn)}function Ir(h,f,_){if(sn.current!==rn)throw Error(o(168));Rt(sn,f),Rt(Gt,_)}function Ii(h,f,_){var E=h.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return _;E=E.getChildContext();for(var R in E)if(!(R in f))throw Error(o(108,H(h)||"Unknown",R));return s({},_,E)}function _s(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||rn,Mt=sn.current,Rt(sn,h),Rt(Gt,Gt.current),!0}function An(h,f,_){var E=h.stateNode;if(!E)throw Error(o(169));_?(h=Ii(h,f,Mt),E.__reactInternalMemoizedMergedChildContext=h,pt(Gt),pt(sn),Rt(sn,h)):pt(Gt),Rt(Gt,_)}var Pn=Math.clz32?Math.clz32:Di,Pi=Math.log,Kn=Math.LN2;function Di(h){return h>>>=0,h===0?32:31-(Pi(h)/Kn|0)|0}var xs=64,en=4194304;function ml(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Ec(h,f){var _=h.pendingLanes;if(_===0)return 0;var E=0,R=h.suspendedLanes,D=h.pingedLanes,Y=_&268435455;if(Y!==0){var le=Y&~R;le!==0?E=ml(le):(D&=Y,D!==0&&(E=ml(D)))}else Y=_&~R,Y!==0?E=ml(Y):D!==0&&(E=ml(D));if(E===0)return 0;if(f!==0&&f!==E&&!(f&R)&&(R=E&-E,D=f&-f,R>=D||R===16&&(D&4194240)!==0))return f;if(E&4&&(E|=_&16),f=h.entangledLanes,f!==0)for(h=h.entanglements,f&=E;0<f;)_=31-Pn(f),R=1<<_,E|=h[_],f&=~R;return E}function Of(h,f){switch(h){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sg(h,f){for(var _=h.suspendedLanes,E=h.pingedLanes,R=h.expirationTimes,D=h.pendingLanes;0<D;){var Y=31-Pn(D),le=1<<Y,Ce=R[Y];Ce===-1?(!(le&_)||le&E)&&(R[Y]=Of(le,f)):Ce<=f&&(h.expiredLanes|=le),D&=~le}}function Ed(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Md(h){for(var f=[],_=0;31>_;_++)f.push(h);return f}function ra(h,f,_){h.pendingLanes|=f,f!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,f=31-Pn(f),h[f]=_}function Td(h,f){var _=h.pendingLanes&~f;h.pendingLanes=f,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=f,h.mutableReadLanes&=f,h.entangledLanes&=f,f=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<_;){var R=31-Pn(_),D=1<<R;f[R]=0,E[R]=-1,h[R]=-1,_&=~D}}function As(h,f){var _=h.entangledLanes|=f;for(h=h.entanglements;_;){var E=31-Pn(_),R=1<<E;R&f|h[E]&f&&(h[E]|=f),_&=~R}}var on=0;function Hs(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var sa=r.unstable_scheduleCallback,gl=r.unstable_cancelCallback,Ro=r.unstable_shouldYield,E_=r.unstable_requestPaint,oi=r.unstable_now,oa=r.unstable_ImmediatePriority,M_=r.unstable_UserBlockingPriority,Cd=r.unstable_NormalPriority,bd=r.unstable_IdlePriority,Mc=null,Ss=null;function Tc(h){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Mc,h,void 0,(h.current.flags&128)===128)}catch{}}function Cc(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var zi=typeof Object.is=="function"?Object.is:Cc,Pr=null,Rd=!1,kf=!1;function Id(h){Pr===null?Pr=[h]:Pr.push(h)}function Pd(h){Rd=!0,Id(h)}function Dr(){if(!kf&&Pr!==null){kf=!0;var h=0,f=on;try{var _=Pr;for(on=1;h<_.length;h++){var E=_[h];do E=E(!0);while(E!==null)}Pr=null,Rd=!1}catch(R){throw Pr!==null&&(Pr=Pr.slice(h+1)),sa(oa,Dr),R}finally{on=f,kf=!1}}return null}var wg=l.ReactCurrentBatchConfig;function Qr(h,f){if(zi(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var _=Object.keys(h),E=Object.keys(f);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++){var R=_[E];if(!yt.call(f,R)||!zi(h[R],f[R]))return!1}return!0}function Uf(h){switch(h.tag){case 5:return Ge(h.type);case 16:return Ge("Lazy");case 13:return Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 2:case 15:return h=ht(h.type,!1),h;case 11:return h=ht(h.type.render,!1),h;case 1:return h=ht(h.type,!0),h;default:return""}}function Zi(h,f){if(h&&h.defaultProps){f=s({},f),h=h.defaultProps;for(var _ in h)f[_]===void 0&&(f[_]=h[_]);return f}return f}var bc=xt(null),aa=null,zs=null,Dd=null;function Gi(){Dd=zs=aa=null}function la(h,f,_){$e?(Rt(bc,f._currentValue),f._currentValue=_):(Rt(bc,f._currentValue2),f._currentValue2=_)}function Rc(h){var f=bc.current;pt(bc),$e?h._currentValue=f:h._currentValue2=f}function ca(h,f,_){for(;h!==null;){var E=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),h===_)break;h=h.return}}function vl(h,f){aa=h,Dd=zs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&f&&(gi=!0),h.firstContext=null)}function er(h){var f=$e?h._currentValue:h._currentValue2;if(Dd!==h)if(h={context:h,memoizedValue:f,next:null},zs===null){if(aa===null)throw Error(o(308));zs=h,aa.dependencies={lanes:0,firstContext:h}}else zs=zs.next=h;return f}var Br=null,Lr=!1;function yl(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hf(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Gs(h,f){return{eventTime:h,lane:f,tag:0,payload:null,callback:null,next:null}}function Io(h,f){var _=h.updateQueue;_!==null&&(_=_.shared,qn!==null&&h.mode&1&&!(Qt&2)?(h=_.interleaved,h===null?(f.next=f,Br===null?Br=[_]:Br.push(_)):(f.next=h.next,h.next=f),_.interleaved=f):(h=_.pending,h===null?f.next=f:(f.next=h.next,h.next=f),_.pending=f))}function Bd(h,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194240)!==0)){var E=f.lanes;E&=h.pendingLanes,_|=E,f.lanes=_,As(h,_)}}function Ld(h,f){var _=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,_===E)){var R=null,D=null;if(_=_.firstBaseUpdate,_!==null){do{var Y={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};D===null?R=D=Y:D=D.next=Y,_=_.next}while(_!==null);D===null?R=D=f:D=D.next=f}else R=D=f;_={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:E.shared,effects:E.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=f:h.next=f,_.lastBaseUpdate=f}function Nd(h,f,_,E){var R=h.updateQueue;Lr=!1;var D=R.firstBaseUpdate,Y=R.lastBaseUpdate,le=R.shared.pending;if(le!==null){R.shared.pending=null;var Ce=le,Je=Ce.next;Ce.next=null,Y===null?D=Je:Y.next=Je,Y=Ce;var _t=h.alternate;_t!==null&&(_t=_t.updateQueue,le=_t.lastBaseUpdate,le!==Y&&(le===null?_t.firstBaseUpdate=Je:le.next=Je,_t.lastBaseUpdate=Ce))}if(D!==null){var Xt=R.baseState;Y=0,_t=Je=Ce=null,le=D;do{var Bt=le.lane,tn=le.eventTime;if((E&Bt)===Bt){_t!==null&&(_t=_t.next={eventTime:tn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var dt=h,Ti=le;switch(Bt=f,tn=_,Ti.tag){case 1:if(dt=Ti.payload,typeof dt=="function"){Xt=dt.call(tn,Xt,Bt);break e}Xt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Ti.payload,Bt=typeof dt=="function"?dt.call(tn,Xt,Bt):dt,Bt==null)break e;Xt=s({},Xt,Bt);break e;case 2:Lr=!0}}le.callback!==null&&le.lane!==0&&(h.flags|=64,Bt=R.effects,Bt===null?R.effects=[le]:Bt.push(le))}else tn={eventTime:tn,lane:Bt,tag:le.tag,payload:le.payload,callback:le.callback,next:null},_t===null?(Je=_t=tn,Ce=Xt):_t=_t.next=tn,Y|=Bt;if(le=le.next,le===null){if(le=R.shared.pending,le===null)break;Bt=le,le=Bt.next,Bt.next=null,R.lastBaseUpdate=Bt,R.shared.pending=null}}while(!0);if(_t===null&&(Ce=Xt),R.baseState=Ce,R.firstBaseUpdate=Je,R.lastBaseUpdate=_t,f=R.shared.interleaved,f!==null){R=f;do Y|=R.lane,R=R.next;while(R!==f)}else D===null&&(R.shared.lanes=0);Ts|=Y,h.lanes=Y,h.memoizedState=Xt}}function Eg(h,f,_){if(h=f.effects,f.effects=null,h!==null)for(f=0;f<h.length;f++){var E=h[f],R=E.callback;if(R!==null){if(E.callback=null,E=_,typeof R!="function")throw Error(o(191,R));R.call(E)}}}var Mg=new i.Component().refs;function zf(h,f,_,E){f=h.memoizedState,_=_(E,f),_=_==null?f:s({},f,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var Fd={isMounted:function(h){return(h=h._reactInternals)?L(h)===h:!1},enqueueSetState:function(h,f,_){h=h._reactInternals;var E=pn(),R=rs(h),D=Gs(E,R);D.payload=f,_!=null&&(D.callback=_),Io(h,D),f=Ni(h,R,E),f!==null&&Bd(f,h,R)},enqueueReplaceState:function(h,f,_){h=h._reactInternals;var E=pn(),R=rs(h),D=Gs(E,R);D.tag=1,D.payload=f,_!=null&&(D.callback=_),Io(h,D),f=Ni(h,R,E),f!==null&&Bd(f,h,R)},enqueueForceUpdate:function(h,f){h=h._reactInternals;var _=pn(),E=rs(h),R=Gs(_,E);R.tag=2,f!=null&&(R.callback=f),Io(h,R),f=Ni(h,E,_),f!==null&&Bd(f,h,E)}};function Gf(h,f,_,E,R,D,Y){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,D,Y):f.prototype&&f.prototype.isPureReactComponent?!Qr(_,E)||!Qr(R,D):!0}function Tg(h,f,_){var E=!1,R=rn,D=f.contextType;return typeof D=="object"&&D!==null?D=er(D):(R=Ht(f)?Mt:sn.current,E=f.contextTypes,D=(E=E!=null)?En(h,R):rn),f=new f(_,D),h.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Fd,h.stateNode=f,f._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=R,h.__reactInternalMemoizedMaskedChildContext=D),f}function Cg(h,f,_,E){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,E),f.state!==h&&Fd.enqueueReplaceState(f,f.state,null)}function Vf(h,f,_,E){var R=h.stateNode;R.props=_,R.state=h.memoizedState,R.refs=Mg,yl(h);var D=f.contextType;typeof D=="object"&&D!==null?R.context=er(D):(D=Ht(f)?Mt:sn.current,R.context=En(h,D)),R.state=h.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(zf(h,f,D,_),R.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(f=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),f!==R.state&&Fd.enqueueReplaceState(R,R.state,null),Nd(h,_,R,E),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308)}var _l=[],Po=0,Od=null,kd=0,Nr=[],mr=0,ua=null,Vs=1,Ws="";function da(h,f){_l[Po++]=kd,_l[Po++]=Od,Od=h,kd=f}function bg(h,f,_){Nr[mr++]=Vs,Nr[mr++]=Ws,Nr[mr++]=ua,ua=h;var E=Vs;h=Ws;var R=32-Pn(E)-1;E&=~(1<<R),_+=1;var D=32-Pn(f)+R;if(30<D){var Y=R-R%5;D=(E&(1<<Y)-1).toString(32),E>>=Y,R-=Y,Vs=1<<32-Pn(f)+R|_<<R|E,Ws=D+h}else Vs=1<<D|_<<R|E,Ws=h}function Wf(h){h.return!==null&&(da(h,1),bg(h,1,0))}function jf(h){for(;h===Od;)Od=_l[--Po],_l[Po]=null,kd=_l[--Po],_l[Po]=null;for(;h===ua;)ua=Nr[--mr],Nr[mr]=null,Ws=Nr[--mr],Nr[mr]=null,Vs=Nr[--mr],Nr[mr]=null}var Vi=null,Ai=null,Nn=!1,xl=!1,Fr=null;function Xf(h,f){var _=Sr(5,null,null,0);_.elementType="DELETED",_.stateNode=f,_.return=h,f=h.deletions,f===null?(h.deletions=[_],h.flags|=16):f.push(_)}function Jf(h,f){switch(h.tag){case 5:return f=Zn(f,h.type,h.pendingProps),f!==null?(h.stateNode=f,Vi=h,Ai=bo(f),!0):!1;case 6:return f=fl(f,h.pendingProps),f!==null?(h.stateNode=f,Vi=h,Ai=null,!0):!1;case 13:if(f=Co(f),f!==null){var _=ua!==null?{id:Vs,overflow:Ws}:null;return h.memoizedState={dehydrated:f,treeContext:_,retryLane:1073741824},_=Sr(18,null,null,0),_.stateNode=f,_.return=h,h.child=_,Vi=h,Ai=null,!0}return!1;default:return!1}}function Ud(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Do(h){if(Nn){var f=Ai;if(f){var _=f;if(!Jf(h,f)){if(Ud(h))throw Error(o(418));f=qr(_);var E=Vi;f&&Jf(h,f)?Xf(E,_):(h.flags=h.flags&-4097|2,Nn=!1,Vi=h)}}else{if(Ud(h))throw Error(o(418));h.flags=h.flags&-4097|2,Nn=!1,Vi=h}}}function Rg(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Vi=h}function Ic(h){if(!Fe||h!==Vi)return!1;if(!Nn)return Rg(h),Nn=!0,!1;if(h.tag!==3&&(h.tag!==5||ue(h.type)&&!Ee(h.type,h.memoizedProps))){var f=Ai;if(f){if(Ud(h)){for(h=Ai;h;)h=qr(h);throw Error(o(418))}for(;f;)Xf(h,f),f=qr(f)}}if(Rg(h),h.tag===13){if(!Fe)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ai=xd(h)}else Ai=Vi?qr(h.stateNode):null;return!0}function Al(){Fe&&(Ai=Vi=null,xl=Nn=!1)}function Hd(h){Fr===null?Fr=[h]:Fr.push(h)}function Sl(h,f,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var E=_.stateNode}if(!E)throw Error(o(147,h));var R=E,D=""+h;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(Y){var le=R.refs;le===Mg&&(le=R.refs={}),Y===null?delete le[D]:le[D]=Y},f._stringRef=D,f)}if(typeof h!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,h))}return h}function Bo(h,f){throw h=Object.prototype.toString.call(f),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h))}function wl(h){var f=h._init;return f(h._payload)}function Ig(h){function f(_e,de){if(h){var Me=_e.deletions;Me===null?(_e.deletions=[de],_e.flags|=16):Me.push(de)}}function _(_e,de){if(!h)return null;for(;de!==null;)f(_e,de),de=de.sibling;return null}function E(_e,de){for(_e=new Map;de!==null;)de.key!==null?_e.set(de.key,de):_e.set(de.index,de),de=de.sibling;return _e}function R(_e,de){return _e=ro(_e,de),_e.index=0,_e.sibling=null,_e}function D(_e,de,Me){return _e.index=Me,h?(Me=_e.alternate,Me!==null?(Me=Me.index,Me<de?(_e.flags|=2,de):Me):(_e.flags|=2,de)):(_e.flags|=1048576,de)}function Y(_e){return h&&_e.alternate===null&&(_e.flags|=2),_e}function le(_e,de,Me,at){return de===null||de.tag!==6?(de=fh(Me,_e.mode,at),de.return=_e,de):(de=R(de,Me),de.return=_e,de)}function Ce(_e,de,Me,at){var Tt=Me.type;return Tt===p?_t(_e,de,Me.props.children,at,Me.key):de!==null&&(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&wl(Tt)===de.type)?(at=R(de,Me.props),at.ref=Sl(_e,de,Me),at.return=_e,at):(at=hh(Me.type,Me.key,Me.props,null,_e.mode,at),at.ref=Sl(_e,de,Me),at.return=_e,at)}function Je(_e,de,Me,at){return de===null||de.tag!==4||de.stateNode.containerInfo!==Me.containerInfo||de.stateNode.implementation!==Me.implementation?(de=ph(Me,_e.mode,at),de.return=_e,de):(de=R(de,Me.children||[]),de.return=_e,de)}function _t(_e,de,Me,at,Tt){return de===null||de.tag!==7?(de=Ba(Me,_e.mode,at,Tt),de.return=_e,de):(de=R(de,Me),de.return=_e,de)}function Xt(_e,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number")return de=fh(""+de,_e.mode,Me),de.return=_e,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case c:return Me=hh(de.type,de.key,de.props,null,_e.mode,Me),Me.ref=Sl(_e,null,de),Me.return=_e,Me;case d:return de=ph(de,_e.mode,Me),de.return=_e,de;case b:var at=de._init;return Xt(_e,at(de._payload),Me)}if(ve(de)||N(de))return de=Ba(de,_e.mode,Me,null),de.return=_e,de;Bo(_e,de)}return null}function Bt(_e,de,Me,at){var Tt=de!==null?de.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Tt!==null?null:le(_e,de,""+Me,at);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case c:return Me.key===Tt?Ce(_e,de,Me,at):null;case d:return Me.key===Tt?Je(_e,de,Me,at):null;case b:return Tt=Me._init,Bt(_e,de,Tt(Me._payload),at)}if(ve(Me)||N(Me))return Tt!==null?null:_t(_e,de,Me,at,null);Bo(_e,Me)}return null}function tn(_e,de,Me,at,Tt){if(typeof at=="string"&&at!==""||typeof at=="number")return _e=_e.get(Me)||null,le(de,_e,""+at,Tt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case c:return _e=_e.get(at.key===null?Me:at.key)||null,Ce(de,_e,at,Tt);case d:return _e=_e.get(at.key===null?Me:at.key)||null,Je(de,_e,at,Tt);case b:var Kt=at._init;return tn(_e,de,Me,Kt(at._payload),Tt)}if(ve(at)||N(at))return _e=_e.get(Me)||null,_t(de,_e,at,Tt,null);Bo(de,at)}return null}function dt(_e,de,Me,at){for(var Tt=null,Kt=null,Jt=de,hn=de=0,ni=null;Jt!==null&&hn<Me.length;hn++){Jt.index>hn?(ni=Jt,Jt=null):ni=Jt.sibling;var dn=Bt(_e,Jt,Me[hn],at);if(dn===null){Jt===null&&(Jt=ni);break}h&&Jt&&dn.alternate===null&&f(_e,Jt),de=D(dn,de,hn),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn,Jt=ni}if(hn===Me.length)return _(_e,Jt),Nn&&da(_e,hn),Tt;if(Jt===null){for(;hn<Me.length;hn++)Jt=Xt(_e,Me[hn],at),Jt!==null&&(de=D(Jt,de,hn),Kt===null?Tt=Jt:Kt.sibling=Jt,Kt=Jt);return Nn&&da(_e,hn),Tt}for(Jt=E(_e,Jt);hn<Me.length;hn++)ni=tn(Jt,_e,hn,Me[hn],at),ni!==null&&(h&&ni.alternate!==null&&Jt.delete(ni.key===null?hn:ni.key),de=D(ni,de,hn),Kt===null?Tt=ni:Kt.sibling=ni,Kt=ni);return h&&Jt.forEach(function(so){return f(_e,so)}),Nn&&da(_e,hn),Tt}function Ti(_e,de,Me,at){var Tt=N(Me);if(typeof Tt!="function")throw Error(o(150));if(Me=Tt.call(Me),Me==null)throw Error(o(151));for(var Kt=Tt=null,Jt=de,hn=de=0,ni=null,dn=Me.next();Jt!==null&&!dn.done;hn++,dn=Me.next()){Jt.index>hn?(ni=Jt,Jt=null):ni=Jt.sibling;var so=Bt(_e,Jt,dn.value,at);if(so===null){Jt===null&&(Jt=ni);break}h&&Jt&&so.alternate===null&&f(_e,Jt),de=D(so,de,hn),Kt===null?Tt=so:Kt.sibling=so,Kt=so,Jt=ni}if(dn.done)return _(_e,Jt),Nn&&da(_e,hn),Tt;if(Jt===null){for(;!dn.done;hn++,dn=Me.next())dn=Xt(_e,dn.value,at),dn!==null&&(de=D(dn,de,hn),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn);return Nn&&da(_e,hn),Tt}for(Jt=E(_e,Jt);!dn.done;hn++,dn=Me.next())dn=tn(Jt,_e,hn,dn.value,at),dn!==null&&(h&&dn.alternate!==null&&Jt.delete(dn.key===null?hn:dn.key),de=D(dn,de,hn),Kt===null?Tt=dn:Kt.sibling=dn,Kt=dn);return h&&Jt.forEach(function(Ep){return f(_e,Ep)}),Nn&&da(_e,hn),Tt}function wr(_e,de,Me,at){if(typeof Me=="object"&&Me!==null&&Me.type===p&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case c:e:{for(var Tt=Me.key,Kt=de;Kt!==null;){if(Kt.key===Tt){if(Tt=Me.type,Tt===p){if(Kt.tag===7){_(_e,Kt.sibling),de=R(Kt,Me.props.children),de.return=_e,_e=de;break e}}else if(Kt.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===b&&wl(Tt)===Kt.type){_(_e,Kt.sibling),de=R(Kt,Me.props),de.ref=Sl(_e,Kt,Me),de.return=_e,_e=de;break e}_(_e,Kt);break}else f(_e,Kt);Kt=Kt.sibling}Me.type===p?(de=Ba(Me.props.children,_e.mode,at,Me.key),de.return=_e,_e=de):(at=hh(Me.type,Me.key,Me.props,null,_e.mode,at),at.ref=Sl(_e,de,Me),at.return=_e,_e=at)}return Y(_e);case d:e:{for(Kt=Me.key;de!==null;){if(de.key===Kt)if(de.tag===4&&de.stateNode.containerInfo===Me.containerInfo&&de.stateNode.implementation===Me.implementation){_(_e,de.sibling),de=R(de,Me.children||[]),de.return=_e,_e=de;break e}else{_(_e,de);break}else f(_e,de);de=de.sibling}de=ph(Me,_e.mode,at),de.return=_e,_e=de}return Y(_e);case b:return Kt=Me._init,wr(_e,de,Kt(Me._payload),at)}if(ve(Me))return dt(_e,de,Me,at);if(N(Me))return Ti(_e,de,Me,at);Bo(_e,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,de!==null&&de.tag===6?(_(_e,de.sibling),de=R(de,Me),de.return=_e,_e=de):(_(_e,de),de=fh(Me,_e.mode,at),de.return=_e,_e=de),Y(_e)):_(_e,de)}return wr}var js=Ig(!0),Pg=Ig(!1),El={},tr=xt(El),ha=xt(El),fa=xt(El);function $r(h){if(h===El)throw Error(o(174));return h}function zd(h,f){Rt(fa,f),Rt(ha,h),Rt(tr,El),h=he(f),pt(tr),Rt(tr,h)}function Ml(){pt(tr),pt(ha),pt(fa)}function Dg(h){var f=$r(fa.current),_=$r(tr.current);f=U(_,h.type,f),_!==f&&(Rt(ha,h),Rt(tr,f))}function Kf(h){ha.current===h&&(pt(tr),pt(ha))}var kn=xt(0);function Gd(h){for(var f=h;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||vs(_)||Yr(_)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var gr=[];function pa(){for(var h=0;h<gr.length;h++){var f=gr[h];$e?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}gr.length=0}var Pc=l.ReactCurrentDispatcher,vr=l.ReactCurrentBatchConfig,ma=0,Un=null,fi=null,pi=null,Vd=!1,ws=!1,ga=0,Dc=0;function mi(){throw Error(o(321))}function Wd(h,f){if(f===null)return!1;for(var _=0;_<f.length&&_<h.length;_++)if(!zi(h[_],f[_]))return!1;return!0}function Tl(h,f,_,E,R,D){if(ma=D,Un=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Pc.current=h===null||h.memoizedState===null?ep:tp,h=_(E,R),ws){D=0;do{if(ws=!1,ga=0,25<=D)throw Error(o(301));D+=1,pi=fi=null,f.updateQueue=null,Pc.current=np,h=_(E,R)}while(ws)}if(Pc.current=Il,f=fi!==null&&fi.next!==null,ma=0,pi=fi=Un=null,Vd=!1,f)throw Error(o(300));return h}function Lo(){var h=ga!==0;return ga=0,h}function Zr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Un.memoizedState=pi=h:pi=pi.next=h,pi}function es(){if(fi===null){var h=Un.alternate;h=h!==null?h.memoizedState:null}else h=fi.next;var f=pi===null?Un.memoizedState:pi.next;if(f!==null)pi=f,fi=h;else{if(h===null)throw Error(o(310));fi=h,h={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},pi===null?Un.memoizedState=pi=h:pi=pi.next=h}return pi}function Es(h,f){return typeof f=="function"?f(h):f}function Bc(h){var f=es(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var E=fi,R=E.baseQueue,D=_.pending;if(D!==null){if(R!==null){var Y=R.next;R.next=D.next,D.next=Y}E.baseQueue=R=D,_.pending=null}if(R!==null){D=R.next,E=E.baseState;var le=Y=null,Ce=null,Je=D;do{var _t=Je.lane;if((ma&_t)===_t)Ce!==null&&(Ce=Ce.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),E=Je.hasEagerState?Je.eagerState:h(E,Je.action);else{var Xt={lane:_t,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};Ce===null?(le=Ce=Xt,Y=E):Ce=Ce.next=Xt,Un.lanes|=_t,Ts|=_t}Je=Je.next}while(Je!==null&&Je!==D);Ce===null?Y=E:Ce.next=le,zi(E,f.memoizedState)||(gi=!0),f.memoizedState=E,f.baseState=Y,f.baseQueue=Ce,_.lastRenderedState=E}if(h=_.interleaved,h!==null){R=h;do D=R.lane,Un.lanes|=D,Ts|=D,R=R.next;while(R!==h)}else R===null&&(_.lanes=0);return[f.memoizedState,_.dispatch]}function Lc(h){var f=es(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var E=_.dispatch,R=_.pending,D=f.memoizedState;if(R!==null){_.pending=null;var Y=R=R.next;do D=h(D,Y.action),Y=Y.next;while(Y!==R);zi(D,f.memoizedState)||(gi=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),_.lastRenderedState=D}return[D,E]}function Yf(){}function qf(h,f){var _=Un,E=es(),R=f(),D=!zi(E.memoizedState,R);if(D&&(E.memoizedState=R,gi=!0),E=E.queue,Cl(Xs.bind(null,_,E,h),[h]),E.getSnapshot!==f||D||pi!==null&&pi.memoizedState.tag&1){if(_.flags|=2048,Fc(9,$f.bind(null,_,E,R,f),void 0,null),qn===null)throw Error(o(349));ma&30||Qf(_,f,R)}return R}function Qf(h,f,_){h.flags|=16384,h={getSnapshot:f,value:_},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.stores=[h]):(_=f.stores,_===null?f.stores=[h]:_.push(h))}function $f(h,f,_,E){f.value=_,f.getSnapshot=E,jd(f)&&Ni(h,1,-1)}function Xs(h,f,_){return _(function(){jd(f)&&Ni(h,1,-1)})}function jd(h){var f=h.getSnapshot;h=h.value;try{var _=f();return!zi(h,_)}catch{return!0}}function Nc(h){var f=Zr();return typeof h=="function"&&(h=h()),f.memoizedState=f.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:h},f.queue=h,h=h.dispatch=T_.bind(null,Un,h),[f.memoizedState,h]}function Fc(h,f,_,E){return h={tag:h,create:f,destroy:_,deps:E,next:null},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.lastEffect=h.next=h):(_=f.lastEffect,_===null?f.lastEffect=h.next=h:(E=_.next,_.next=h,h.next=E,f.lastEffect=h)),h}function Bg(){return es().memoizedState}function No(h,f,_,E){var R=Zr();Un.flags|=h,R.memoizedState=Fc(1|f,_,void 0,E===void 0?null:E)}function Xd(h,f,_,E){var R=es();E=E===void 0?null:E;var D=void 0;if(fi!==null){var Y=fi.memoizedState;if(D=Y.destroy,E!==null&&Wd(E,Y.deps)){R.memoizedState=Fc(f,_,D,E);return}}Un.flags|=h,R.memoizedState=Fc(1|f,_,D,E)}function Jd(h,f){return No(8390656,8,h,f)}function Cl(h,f){return Xd(2048,8,h,f)}function bn(h,f){return Xd(4,2,h,f)}function Kd(h,f){return Xd(4,4,h,f)}function Oc(h,f){if(typeof f=="function")return h=h(),f(h),function(){f(null)};if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function bl(h,f,_){return _=_!=null?_.concat([h]):null,Xd(4,4,Oc.bind(null,f,h),_)}function Yd(){}function qd(h,f){var _=es();f=f===void 0?null:f;var E=_.memoizedState;return E!==null&&f!==null&&Wd(f,E[1])?E[0]:(_.memoizedState=[h,f],h)}function Rl(h,f){var _=es();f=f===void 0?null:f;var E=_.memoizedState;return E!==null&&f!==null&&Wd(f,E[1])?E[0]:(h=h(),_.memoizedState=[h,f],h)}function Qd(h,f){var _=on;on=_!==0&&4>_?_:4,h(!0);var E=vr.transition;vr.transition={};try{h(!1),f()}finally{on=_,vr.transition=E}}function va(){return es().memoizedState}function Lg(h,f,_){var E=rs(h);_={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null},Ng(h)?Zf(f,_):(kc(h,f,_),_=pn(),h=Ni(h,E,_),h!==null&&Uc(h,f,E))}function T_(h,f,_){var E=rs(h),R={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null};if(Ng(h))Zf(f,R);else{kc(h,f,R);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var Y=f.lastRenderedState,le=D(Y,_);if(R.hasEagerState=!0,R.eagerState=le,zi(le,Y))return}catch{}finally{}_=pn(),h=Ni(h,E,_),h!==null&&Uc(h,f,E)}}function Ng(h){var f=h.alternate;return h===Un||f!==null&&f===Un}function Zf(h,f){ws=Vd=!0;var _=h.pending;_===null?f.next=f:(f.next=_.next,_.next=f),h.pending=f}function kc(h,f,_){qn!==null&&h.mode&1&&!(Qt&2)?(h=f.interleaved,h===null?(_.next=_,Br===null?Br=[f]:Br.push(f)):(_.next=h.next,h.next=_),f.interleaved=_):(h=f.pending,h===null?_.next=_:(_.next=h.next,h.next=_),f.pending=_)}function Uc(h,f,_){if(_&4194240){var E=f.lanes;E&=h.pendingLanes,_|=E,f.lanes=_,As(h,_)}}var Il={readContext:er,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},ep={readContext:er,useCallback:function(h,f){return Zr().memoizedState=[h,f===void 0?null:f],h},useContext:er,useEffect:Jd,useImperativeHandle:function(h,f,_){return _=_!=null?_.concat([h]):null,No(4194308,4,Oc.bind(null,f,h),_)},useLayoutEffect:function(h,f){return No(4194308,4,h,f)},useInsertionEffect:function(h,f){return No(4,2,h,f)},useMemo:function(h,f){var _=Zr();return f=f===void 0?null:f,h=h(),_.memoizedState=[h,f],h},useReducer:function(h,f,_){var E=Zr();return f=_!==void 0?_(f):f,E.memoizedState=E.baseState=f,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:f},E.queue=h,h=h.dispatch=Lg.bind(null,Un,h),[E.memoizedState,h]},useRef:function(h){var f=Zr();return h={current:h},f.memoizedState=h},useState:Nc,useDebugValue:Yd,useDeferredValue:function(h){var f=Nc(h),_=f[0],E=f[1];return Jd(function(){var R=vr.transition;vr.transition={};try{E(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Nc(!1),f=h[0];return h=Qd.bind(null,h[1]),Zr().memoizedState=h,[f,h]},useMutableSource:function(){},useSyncExternalStore:function(h,f,_){var E=Un,R=Zr();if(Nn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=f(),qn===null)throw Error(o(349));ma&30||Qf(E,f,_)}R.memoizedState=_;var D={value:_,getSnapshot:f};return R.queue=D,Jd(Xs.bind(null,E,D,h),[h]),E.flags|=2048,Fc(9,$f.bind(null,E,D,_,f),void 0,null),_},useId:function(){var h=Zr(),f=qn.identifierPrefix;if(Nn){var _=Ws,E=Vs;_=(E&~(1<<32-Pn(E)-1)).toString(32)+_,f=":"+f+"R"+_,_=ga++,0<_&&(f+="H"+_.toString(32)),f+=":"}else _=Dc++,f=":"+f+"r"+_.toString(32)+":";return h.memoizedState=f},unstable_isNewReconciler:!1},tp={readContext:er,useCallback:qd,useContext:er,useEffect:Cl,useImperativeHandle:bl,useInsertionEffect:bn,useLayoutEffect:Kd,useMemo:Rl,useReducer:Bc,useRef:Bg,useState:function(){return Bc(Es)},useDebugValue:Yd,useDeferredValue:function(h){var f=Bc(Es),_=f[0],E=f[1];return Cl(function(){var R=vr.transition;vr.transition={};try{E(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Bc(Es)[0],f=es().memoizedState;return[h,f]},useMutableSource:Yf,useSyncExternalStore:qf,useId:va,unstable_isNewReconciler:!1},np={readContext:er,useCallback:qd,useContext:er,useEffect:Cl,useImperativeHandle:bl,useInsertionEffect:bn,useLayoutEffect:Kd,useMemo:Rl,useReducer:Lc,useRef:Bg,useState:function(){return Lc(Es)},useDebugValue:Yd,useDeferredValue:function(h){var f=Lc(Es),_=f[0],E=f[1];return Cl(function(){var R=vr.transition;vr.transition={};try{E(h)}finally{vr.transition=R}},[h]),_},useTransition:function(){var h=Lc(Es)[0],f=es().memoizedState;return[h,f]},useMutableSource:Yf,useSyncExternalStore:qf,useId:va,unstable_isNewReconciler:!1};function ip(h,f){try{var _="",E=f;do _+=Uf(E),E=E.return;while(E);var R=_}catch(D){R=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:f,stack:R}}function $d(h,f){try{console.error(f.value)}catch(_){setTimeout(function(){throw _})}}var C_=typeof WeakMap=="function"?WeakMap:Map;function Fg(h,f,_){_=Gs(-1,_),_.tag=3,_.payload={element:null};var E=f.value;return _.callback=function(){Fl||(Fl=!0,Bn=E),$d(h,f)},_}function Zd(h,f,_){_=Gs(-1,_),_.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var R=f.value;_.payload=function(){return E(R)},_.callback=function(){$d(h,f)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(_.callback=function(){$d(h,f),typeof E!="function"&&(is===null?is=new Set([this]):is.add(this));var Y=f.stack;this.componentDidCatch(f.value,{componentStack:Y!==null?Y:""})}),_}function Js(h,f,_){var E=h.pingCache;if(E===null){E=h.pingCache=new C_;var R=new Set;E.set(f,R)}else R=E.get(f),R===void 0&&(R=new Set,E.set(f,R));R.has(_)||(R.add(_),h=Ap.bind(null,h,f,_),f.then(h,h))}function rp(h){do{var f;if((f=h.tag===13)&&(f=h.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return h;h=h.return}while(h!==null);return null}function ya(h,f,_,E,R){return h.mode&1?(h.flags|=65536,h.lanes=R,h):(h===f?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(f=Gs(-1,1),f.tag=2,Io(_,f))),_.lanes|=1),h)}function ai(h){h.flags|=4}function Pl(h,f){if(h!==null&&h.child===f.child)return!0;if(f.flags&16)return!1;for(h=f.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var yr,_a,eh,th;if(rt)yr=function(h,f){for(var _=f.child;_!==null;){if(_.tag===5||_.tag===6)ie(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},_a=function(){},eh=function(h,f,_,E,R){if(h=h.memoizedProps,h!==E){var D=f.stateNode,Y=$r(tr.current);_=ce(D,_,h,E,R,Y),(f.updateQueue=_)&&ai(f)}},th=function(h,f,_,E){_!==E&&ai(f)};else if(De){yr=function(h,f,_,E){for(var R=f.child;R!==null;){if(R.tag===5){var D=R.stateNode;_&&E&&(D=Zt(D,R.type,R.memoizedProps,R)),ie(h,D)}else if(R.tag===6)D=R.stateNode,_&&E&&(D=Jn(D,R.memoizedProps,R)),ie(h,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),yr(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var Fo=function(h,f,_,E){for(var R=f.child;R!==null;){if(R.tag===5){var D=R.stateNode;_&&E&&(D=Zt(D,R.type,R.memoizedProps,R)),It(h,D)}else if(R.tag===6)D=R.stateNode,_&&E&&(D=Jn(D,R.memoizedProps,R)),It(h,D);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)D=R.child,D!==null&&(D.return=R),Fo(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};_a=function(h,f){var _=f.stateNode;if(!Pl(h,f)){h=_.containerInfo;var E=nt(h);Fo(E,f,!1,!1),_.pendingChildren=E,ai(f),cn(h,E)}},eh=function(h,f,_,E,R){var D=h.stateNode,Y=h.memoizedProps;if((h=Pl(h,f))&&Y===E)f.stateNode=D;else{var le=f.stateNode,Ce=$r(tr.current),Je=null;Y!==E&&(Je=ce(le,_,Y,E,R,Ce)),h&&Je===null?f.stateNode=D:(D=ct(D,Je,_,Y,E,f,h,le),Le(D,_,E,R,Ce)&&ai(f),f.stateNode=D,h?ai(f):yr(D,f,!1,!1))}},th=function(h,f,_,E){_!==E?(h=$r(fa.current),_=$r(tr.current),f.stateNode=Ne(E,h,_,f),ai(f)):f.stateNode=h.stateNode}}else _a=function(){},eh=function(){},th=function(){};function Ks(h,f){if(!Nn)switch(h.tailMode){case"hidden":f=h.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function Yn(h){var f=h.alternate!==null&&h.alternate.child===h.child,_=0,E=0;if(f)for(var R=h.child;R!==null;)_|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=h,R=R.sibling;else for(R=h.child;R!==null;)_|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=h,R=R.sibling;return h.subtreeFlags|=E,h.childLanes=_,f}function nh(h,f,_){var E=f.pendingProps;switch(jf(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(f),null;case 1:return Ht(f.type)&&ei(),Yn(f),null;case 3:return E=f.stateNode,Ml(),pt(Gt),pt(sn),pa(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(Ic(f)?ai(f):h===null||h.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Fr!==null&&($c(Fr),Fr=null))),_a(h,f),Yn(f),null;case 5:Kf(f),_=$r(fa.current);var R=f.type;if(h!==null&&f.stateNode!=null)eh(h,f,R,E,_),h.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return Yn(f),null}if(h=$r(tr.current),Ic(f)){if(!Fe)throw Error(o(175));h=yd(f.stateNode,f.type,f.memoizedProps,_,h,f,!xl),f.updateQueue=h,h!==null&&ai(f)}else{var D=W(R,E,_,h,f);yr(D,f,!1,!1),f.stateNode=D,Le(D,R,E,_,h)&&ai(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Yn(f),null;case 6:if(h&&f.stateNode!=null)th(h,f,h.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(h=$r(fa.current),_=$r(tr.current),Ic(f)){if(!Fe)throw Error(o(176));if(h=f.stateNode,E=f.memoizedProps,(_=ys(h,E,f,!xl))&&(R=Vi,R!==null))switch(D=(R.mode&1)!==0,R.tag){case 3:xe(R.stateNode.containerInfo,h,E,D);break;case 5:we(R.type,R.memoizedProps,R.stateNode,h,E,D)}_&&ai(f)}else f.stateNode=Ne(E,h,_,f)}return Yn(f),null;case 13:if(pt(kn),E=f.memoizedState,Nn&&Ai!==null&&f.mode&1&&!(f.flags&128)){for(h=Ai;h;)h=qr(h);return Al(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=Ic(f),h===null){if(!E)throw Error(o(318));if(!Fe)throw Error(o(344));if(h=f.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));_d(h,f)}else Al(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Yn(f),null}return Fr!==null&&($c(Fr),Fr=null),f.flags&128?(f.lanes=_,f):(E=E!==null,_=!1,h===null?Ic(f):_=h.memoizedState!==null,E&&!_&&(f.child.flags|=8192,f.mode&1&&(h===null||kn.current&1?Vn===0&&(Vn=3):ch())),f.updateQueue!==null&&(f.flags|=4),Yn(f),null);case 4:return Ml(),_a(h,f),h===null&&gt(f.stateNode.containerInfo),Yn(f),null;case 10:return Rc(f.type._context),Yn(f),null;case 17:return Ht(f.type)&&ei(),Yn(f),null;case 19:if(pt(kn),R=f.memoizedState,R===null)return Yn(f),null;if(E=(f.flags&128)!==0,D=R.rendering,D===null)if(E)Ks(R,!1);else{if(Vn!==0||h!==null&&h.flags&128)for(h=f.child;h!==null;){if(D=Gd(h),D!==null){for(f.flags|=128,Ks(R,!1),h=D.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),f.subtreeFlags=0,h=_,E=f.child;E!==null;)_=E,R=h,_.flags&=14680066,D=_.alternate,D===null?(_.childLanes=0,_.lanes=R,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=D.childLanes,_.lanes=D.lanes,_.child=D.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=D.memoizedProps,_.memoizedState=D.memoizedState,_.updateQueue=D.updateQueue,_.type=D.type,R=D.dependencies,_.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E=E.sibling;return Rt(kn,kn.current&1|2),f.child}h=h.sibling}R.tail!==null&&oi()>Uo&&(f.flags|=128,E=!0,Ks(R,!1),f.lanes=4194304)}else{if(!E)if(h=Gd(D),h!==null){if(f.flags|=128,E=!0,h=h.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),Ks(R,!0),R.tail===null&&R.tailMode==="hidden"&&!D.alternate&&!Nn)return Yn(f),null}else 2*oi()-R.renderingStartTime>Uo&&_!==1073741824&&(f.flags|=128,E=!0,Ks(R,!1),f.lanes=4194304);R.isBackwards?(D.sibling=f.child,f.child=D):(h=R.last,h!==null?h.sibling=D:f.child=D,R.last=D)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=oi(),f.sibling=null,h=kn.current,Rt(kn,E?h&1|2:h&1),f):(Yn(f),null);case 22:case 23:return Zc(),E=f.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(f.flags|=8192),E&&f.mode&1?Li&1073741824&&(Yn(f),rt&&f.subtreeFlags&6&&(f.flags|=8192)):Yn(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var sp=l.ReactCurrentOwner,gi=!1;function Gn(h,f,_,E){f.child=h===null?Pg(f,null,_,E):js(f,h.child,_,E)}function Rn(h,f,_,E,R){_=_.render;var D=f.ref;return vl(f,R),E=Tl(h,f,_,E,D,R),_=Lo(),h!==null&&!gi?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,nr(h,f,R)):(Nn&&_&&Wf(f),f.flags|=1,Gn(h,f,E,R),f.child)}function Mn(h,f,_,E,R){if(h===null){var D=_.type;return typeof D=="function"&&!dh(D)&&D.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(f.tag=15,f.type=D,Ys(h,f,D,E,R)):(h=hh(_.type,null,E,f,f.mode,R),h.ref=f.ref,h.return=f,f.child=h)}if(D=h.child,!(h.lanes&R)){var Y=D.memoizedProps;if(_=_.compare,_=_!==null?_:Qr,_(Y,E)&&h.ref===f.ref)return nr(h,f,R)}return f.flags|=1,h=ro(D,E),h.ref=f.ref,h.return=f,f.child=h}function Ys(h,f,_,E,R){if(h!==null&&Qr(h.memoizedProps,E)&&h.ref===f.ref)if(gi=!1,(h.lanes&R)!==0)h.flags&131072&&(gi=!0);else return f.lanes=h.lanes,nr(h,f,R);return qs(h,f,_,E,R)}function Si(h,f,_){var E=f.pendingProps,R=E.children,D=h!==null?h.memoizedState:null;if(E.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Rt(ba,Li),Li|=_;else if(_&1073741824)f.memoizedState={baseLanes:0,cachePool:null},E=D!==null?D.baseLanes:_,Rt(ba,Li),Li|=E;else return h=D!==null?D.baseLanes|_:_,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:h,cachePool:null},f.updateQueue=null,Rt(ba,Li),Li|=h,null;else D!==null?(E=D.baseLanes|_,f.memoizedState=null):E=_,Rt(ba,Li),Li|=E;return Gn(h,f,R,_),f.child}function Wi(h,f){var _=f.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(f.flags|=512,f.flags|=2097152)}function qs(h,f,_,E,R){var D=Ht(_)?Mt:sn.current;return D=En(f,D),vl(f,R),_=Tl(h,f,_,E,D,R),E=Lo(),h!==null&&!gi?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,nr(h,f,R)):(Nn&&E&&Wf(f),f.flags|=1,Gn(h,f,_,R),f.child)}function xa(h,f,_,E,R){if(Ht(_)){var D=!0;_s(f)}else D=!1;if(vl(f,R),f.stateNode===null)h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),Tg(f,_,E),Vf(f,_,E,R),E=!0;else if(h===null){var Y=f.stateNode,le=f.memoizedProps;Y.props=le;var Ce=Y.context,Je=_.contextType;typeof Je=="object"&&Je!==null?Je=er(Je):(Je=Ht(_)?Mt:sn.current,Je=En(f,Je));var _t=_.getDerivedStateFromProps,Xt=typeof _t=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Xt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(le!==E||Ce!==Je)&&Cg(f,Y,E,Je),Lr=!1;var Bt=f.memoizedState;Y.state=Bt,Nd(f,E,Y,R),Ce=f.memoizedState,le!==E||Bt!==Ce||Gt.current||Lr?(typeof _t=="function"&&(zf(f,_,_t,E),Ce=f.memoizedState),(le=Lr||Gf(f,_,le,E,Bt,Ce,Je))?(Xt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=Ce),Y.props=E,Y.state=Ce,Y.context=Je,E=le):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{Y=f.stateNode,Hf(h,f),le=f.memoizedProps,Je=f.type===f.elementType?le:Zi(f.type,le),Y.props=Je,Xt=f.pendingProps,Bt=Y.context,Ce=_.contextType,typeof Ce=="object"&&Ce!==null?Ce=er(Ce):(Ce=Ht(_)?Mt:sn.current,Ce=En(f,Ce));var tn=_.getDerivedStateFromProps;(_t=typeof tn=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(le!==Xt||Bt!==Ce)&&Cg(f,Y,E,Ce),Lr=!1,Bt=f.memoizedState,Y.state=Bt,Nd(f,E,Y,R);var dt=f.memoizedState;le!==Xt||Bt!==dt||Gt.current||Lr?(typeof tn=="function"&&(zf(f,_,tn,E),dt=f.memoizedState),(Je=Lr||Gf(f,_,Je,E,Bt,dt,Ce)||!1)?(_t||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(E,dt,Ce),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(E,dt,Ce)),typeof Y.componentDidUpdate=="function"&&(f.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Y.componentDidUpdate!="function"||le===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=dt),Y.props=E,Y.state=dt,Y.context=Ce,E=Je):(typeof Y.componentDidUpdate!="function"||le===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=1024),E=!1)}return Bi(h,f,_,E,D,R)}function Bi(h,f,_,E,R,D){Wi(h,f);var Y=(f.flags&128)!==0;if(!E&&!Y)return R&&An(f,_,!1),nr(h,f,D);E=f.stateNode,sp.current=f;var le=Y&&typeof _.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,h!==null&&Y?(f.child=js(f,h.child,null,D),f.child=js(f,null,le,D)):Gn(h,f,le,D),f.memoizedState=E.state,R&&An(f,_,!0),f.child}function Hc(h){var f=h.stateNode;f.pendingContext?Ir(h,f.pendingContext,f.pendingContext!==f.context):f.context&&Ir(h,f.context,!1),zd(h,f.containerInfo)}function op(h,f,_,E,R){return Al(),Hd(R),f.flags|=256,Gn(h,f,_,E),f.child}var zc={dehydrated:null,treeContext:null,retryLane:0};function Aa(h){return{baseLanes:h,cachePool:null}}function ap(h,f,_){var E=f.pendingProps,R=kn.current,D=!1,Y=(f.flags&128)!==0,le;if((le=Y)||(le=h!==null&&h.memoizedState===null?!1:(R&2)!==0),le?(D=!0,f.flags&=-129):(h===null||h.memoizedState!==null)&&(R|=1),Rt(kn,R&1),h===null)return Do(f),h=f.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(f.mode&1?Yr(h)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(R=E.children,h=E.fallback,D?(E=f.mode,D=f.child,R={mode:"hidden",children:R},!(E&1)&&D!==null?(D.childLanes=0,D.pendingProps=R):D=nu(R,E,0,null),h=Ba(h,E,_,null),D.return=f,h.return=f,D.sibling=h,f.child=D,f.child.memoizedState=Aa(_),f.memoizedState=zc,h):ts(f,R));if(R=h.memoizedState,R!==null){if(le=R.dehydrated,le!==null){if(Y)return f.flags&256?(f.flags&=-257,Vc(h,f,_,Error(o(422)))):f.memoizedState!==null?(f.child=h.child,f.flags|=128,null):(D=E.fallback,R=f.mode,E=nu({mode:"visible",children:E.children},R,0,null),D=Ba(D,R,_,null),D.flags|=2,E.return=f,D.return=f,E.sibling=D,f.child=E,f.mode&1&&js(f,h.child,null,_),f.child.memoizedState=Aa(_),f.memoizedState=zc,D);if(!(f.mode&1))f=Vc(h,f,_,null);else if(Yr(le))f=Vc(h,f,_,Error(o(419)));else if(E=(_&h.childLanes)!==0,gi||E){if(E=qn,E!==null){switch(_&-_){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}E=D&(E.suspendedLanes|_)?0:D,E!==0&&E!==R.retryLane&&(R.retryLane=E,Ni(h,E,-1))}ch(),f=Vc(h,f,_,Error(o(421)))}else vs(le)?(f.flags|=128,f.child=h.child,f=zg.bind(null,h),ia(le,f),f=null):(_=R.treeContext,Fe&&(Ai=pl(le),Vi=f,Nn=!0,Fr=null,xl=!1,_!==null&&(Nr[mr++]=Vs,Nr[mr++]=Ws,Nr[mr++]=ua,Vs=_.id,Ws=_.overflow,ua=f)),f=ts(f,f.pendingProps.children),f.flags|=4096);return f}return D?(E=ih(h,f,E.children,E.fallback,_),D=f.child,R=h.child.memoizedState,D.memoizedState=R===null?Aa(_):{baseLanes:R.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,f.memoizedState=zc,E):(_=Gc(h,f,E.children,_),f.memoizedState=null,_)}return D?(E=ih(h,f,E.children,E.fallback,_),D=f.child,R=h.child.memoizedState,D.memoizedState=R===null?Aa(_):{baseLanes:R.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,f.memoizedState=zc,E):(_=Gc(h,f,E.children,_),f.memoizedState=null,_)}function ts(h,f){return f=nu({mode:"visible",children:f},h.mode,0,null),f.return=h,h.child=f}function Gc(h,f,_,E){var R=h.child;return h=R.sibling,_=ro(R,{mode:"visible",children:_}),!(f.mode&1)&&(_.lanes=E),_.return=f,_.sibling=null,h!==null&&(E=f.deletions,E===null?(f.deletions=[h],f.flags|=16):E.push(h)),f.child=_}function ih(h,f,_,E,R){var D=f.mode;h=h.child;var Y=h.sibling,le={mode:"hidden",children:_};return!(D&1)&&f.child!==h?(_=f.child,_.childLanes=0,_.pendingProps=le,f.deletions=null):(_=ro(h,le),_.subtreeFlags=h.subtreeFlags&14680064),Y!==null?E=ro(Y,E):(E=Ba(E,D,R,null),E.flags|=2),E.return=f,_.return=f,_.sibling=E,f.child=_,E}function Vc(h,f,_,E){return E!==null&&Hd(E),js(f,h.child,null,_),h=ts(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function Og(h,f,_){h.lanes|=f;var E=h.alternate;E!==null&&(E.lanes|=f),ca(h.return,f,_)}function Ms(h,f,_,E,R){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:R}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=E,D.tail=_,D.tailMode=R)}function Sa(h,f,_){var E=f.pendingProps,R=E.revealOrder,D=E.tail;if(Gn(h,f,E.children,_),E=kn.current,E&2)E=E&1|2,f.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Og(h,_,f);else if(h.tag===19)Og(h,_,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(Rt(kn,E),!(f.mode&1))f.memoizedState=null;else switch(R){case"forwards":for(_=f.child,R=null;_!==null;)h=_.alternate,h!==null&&Gd(h)===null&&(R=_),_=_.sibling;_=R,_===null?(R=f.child,f.child=null):(R=_.sibling,_.sibling=null),Ms(f,!1,R,_,D);break;case"backwards":for(_=null,R=f.child,f.child=null;R!==null;){if(h=R.alternate,h!==null&&Gd(h)===null){f.child=R;break}h=R.sibling,R.sibling=_,_=R,R=h}Ms(f,!0,_,null,D);break;case"together":Ms(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function nr(h,f,_){if(h!==null&&(f.dependencies=h.dependencies),Ts|=f.lanes,!(_&f.childLanes))return null;if(h!==null&&f.child!==h.child)throw Error(o(153));if(f.child!==null){for(h=f.child,_=ro(h,h.pendingProps),f.child=_,_.return=f;h.sibling!==null;)h=h.sibling,_=_.sibling=ro(h,h.pendingProps),_.return=f;_.sibling=null}return f.child}function rh(h,f,_){switch(f.tag){case 3:Hc(f),Al();break;case 5:Dg(f);break;case 1:Ht(f.type)&&_s(f);break;case 4:zd(f,f.stateNode.containerInfo);break;case 10:la(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(Rt(kn,kn.current&1),f.flags|=128,null):_&f.child.childLanes?ap(h,f,_):(Rt(kn,kn.current&1),h=nr(h,f,_),h!==null?h.sibling:null);Rt(kn,kn.current&1);break;case 19:if(E=(_&f.childLanes)!==0,h.flags&128){if(E)return Sa(h,f,_);f.flags|=128}var R=f.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Rt(kn,kn.current),E)break;return null;case 22:case 23:return f.lanes=0,Si(h,f,_)}return nr(h,f,_)}function sh(h,f){switch(jf(f),f.tag){case 1:return Ht(f.type)&&ei(),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return Ml(),pt(Gt),pt(sn),pa(),h=f.flags,h&65536&&!(h&128)?(f.flags=h&-65537|128,f):null;case 5:return Kf(f),null;case 13:if(pt(kn),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Al()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return pt(kn),null;case 4:return Ml(),null;case 10:return Rc(f.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var ji=!1,vi=!1,wa=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Or(h,f){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(E){Ji(h,f,E)}else _.current=null}function Qs(h,f,_){try{_()}catch(E){Ji(h,f,E)}}var lp=!1;function cp(h,f){for(Z(h.containerInfo),Qe=f;Qe!==null;)if(h=Qe,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,Qe=f;else for(;Qe!==null;){h=Qe;try{var _=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,R=_.memoizedState,D=h.stateNode,Y=D.getSnapshotBeforeUpdate(h.elementType===h.type?E:Zi(h.type,E),R);D.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:rt&&Pe(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(le){Ji(h,h.return,le)}if(f=h.sibling,f!==null){f.return=h.return,Qe=f;break}Qe=h.return}return _=lp,lp=!1,_}function $s(h,f,_){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&h)===h){var D=R.destroy;R.destroy=void 0,D!==void 0&&Qs(f,_,D)}R=R.next}while(R!==E)}}function wi(h,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var _=f=f.next;do{if((_.tag&h)===h){var E=_.create;_.destroy=E()}_=_.next}while(_!==f)}}function Xi(h){var f=h.ref;if(f!==null){var _=h.stateNode;switch(h.tag){case 5:h=fe(_);break;default:h=_}typeof f=="function"?f(h):f.current=h}}function Dn(h,f,_){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Mc,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(h=f.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var R=E,D=R.destroy;R=R.tag,D!==void 0&&(R&2||R&4)&&Qs(f,_,D),E=E.next}while(E!==h)}break;case 1:if(Or(f,_),h=f.stateNode,typeof h.componentWillUnmount=="function")try{h.props=f.memoizedProps,h.state=f.memoizedState,h.componentWillUnmount()}catch(Y){Ji(f,_,Y)}break;case 5:Or(f,_);break;case 4:rt?hp(h,f,_):De&&De&&(f=f.stateNode.containerInfo,_=nt(f),Cn(f,_))}}function kr(h,f,_){for(var E=f;;)if(Dn(h,E,_),E.child===null||rt&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function up(h){var f=h.alternate;f!==null&&(h.alternate=null,up(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&Ze(f)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function dp(h){return h.tag===5||h.tag===3||h.tag===4}function oh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||dp(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ah(h){if(rt){e:{for(var f=h.return;f!==null;){if(dp(f))break e;f=f.return}throw Error(o(160))}var _=f;switch(_.tag){case 5:f=_.stateNode,_.flags&32&&(be(f),_.flags&=-33),_=oh(h),Dl(h,_,f);break;case 3:case 4:f=_.stateNode.containerInfo,_=oh(h),lh(h,_,f);break;default:throw Error(o(161))}}}function lh(h,f,_){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?Lt(_,h,f):ut(_,h);else if(E!==4&&(h=h.child,h!==null))for(lh(h,f,_),h=h.sibling;h!==null;)lh(h,f,_),h=h.sibling}function Dl(h,f,_){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?Pt(_,h,f):qe(_,h);else if(E!==4&&(h=h.child,h!==null))for(Dl(h,f,_),h=h.sibling;h!==null;)Dl(h,f,_),h=h.sibling}function hp(h,f,_){for(var E=f,R=!1,D,Y;;){if(!R){R=E.return;e:for(;;){if(R===null)throw Error(o(160));switch(D=R.stateNode,R.tag){case 5:Y=!1;break e;case 3:D=D.containerInfo,Y=!0;break e;case 4:D=D.containerInfo,Y=!0;break e}R=R.return}R=!0}if(E.tag===5||E.tag===6)kr(h,E,_),Y?te(D,E.stateNode):ft(D,E.stateNode);else if(E.tag===18)Y?G(D,E.stateNode):wd(D,E.stateNode);else if(E.tag===4){if(E.child!==null){D=E.stateNode.containerInfo,Y=!0,E.child.return=E,E=E.child;continue}}else if(Dn(h,E,_),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(R=!1)}E.sibling.return=E.return,E=E.sibling}}function Oo(h,f){if(rt){switch(f.tag){case 0:case 11:case 14:case 15:$s(3,f,f.return),wi(3,f),$s(5,f,f.return);return;case 1:return;case 5:var _=f.stateNode;if(_!=null){var E=f.memoizedProps;h=h!==null?h.memoizedProps:E;var R=f.type,D=f.updateQueue;f.updateQueue=null,D!==null&&vt(_,D,R,h,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));_=f.memoizedProps,jt(f.stateNode,h!==null?h.memoizedProps:_,_);return;case 3:Fe&&h!==null&&h.memoizedState.isDehydrated&&Ad(f.stateNode.containerInfo);return;case 12:return;case 13:Bl(f);return;case 19:Bl(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:$s(3,f,f.return),wi(3,f),$s(5,f,f.return);return;case 12:return;case 13:Bl(f);return;case 19:Bl(f);return;case 3:Fe&&h!==null&&h.memoizedState.isDehydrated&&Ad(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(De){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Cn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Bl(h){var f=h.updateQueue;if(f!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new wa),f.forEach(function(E){var R=Gg.bind(null,h,E);_.has(E)||(_.add(E),E.then(R,R))})}}function b_(h,f){for(Qe=f;Qe!==null;){f=Qe;var _=f.deletions;if(_!==null)for(var E=0;E<_.length;E++){var R=_[E];try{var D=h;rt?hp(D,R,f):kr(D,R,f);var Y=R.alternate;Y!==null&&(Y.return=null),R.return=null}catch(Tt){Ji(R,f,Tt)}}if(_=f.child,f.subtreeFlags&12854&&_!==null)_.return=f,Qe=_;else for(;Qe!==null;){f=Qe;try{var le=f.flags;if(le&32&&rt&&be(f.stateNode),le&512){var Ce=f.alternate;if(Ce!==null){var Je=Ce.ref;Je!==null&&(typeof Je=="function"?Je(null):Je.current=null)}}if(le&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var _t=f.alternate;(_t===null||_t.memoizedState===null)&&(qc=oi())}break;case 22:var Xt=f.memoizedState!==null,Bt=f.alternate,tn=Bt!==null&&Bt.memoizedState!==null;if(_=f,rt){e:if(E=_,R=Xt,D=null,rt)for(var dt=E;;){if(dt.tag===5){if(D===null){D=dt;var Ti=dt.stateNode;R?tt(Ti):Ve(dt.stateNode,dt.memoizedProps)}}else if(dt.tag===6){if(D===null){var wr=dt.stateNode;R?ee(wr):Se(wr,dt.memoizedProps)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===E)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===E)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===E)break e;D===dt&&(D=null),dt=dt.return}D===dt&&(D=null),dt.sibling.return=dt.return,dt=dt.sibling}}if(Xt&&!tn&&_.mode&1){Qe=_;for(var _e=_.child;_e!==null;){for(_=Qe=_e;Qe!==null;){E=Qe;var de=E.child;switch(E.tag){case 0:case 11:case 14:case 15:$s(4,E,E.return);break;case 1:Or(E,E.return);var Me=E.stateNode;if(typeof Me.componentWillUnmount=="function"){var at=E.return;try{Me.props=E.memoizedProps,Me.state=E.memoizedState,Me.componentWillUnmount()}catch(Tt){Ji(E,at,Tt)}}break;case 5:Or(E,E.return);break;case 22:if(E.memoizedState!==null){pp(_);continue}}de!==null?(de.return=E,Qe=de):pp(_)}_e=_e.sibling}}}switch(le&4102){case 2:ah(f),f.flags&=-3;break;case 6:ah(f),f.flags&=-3,Oo(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Oo(f.alternate,f);break;case 4:Oo(f.alternate,f)}}catch(Tt){Ji(f,f.return,Tt)}if(_=f.sibling,_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}}function Wc(h,f,_){Qe=h,jc(h)}function jc(h,f,_){for(var E=(h.mode&1)!==0;Qe!==null;){var R=Qe,D=R.child;if(R.tag===22&&E){var Y=R.memoizedState!==null||ji;if(!Y){var le=R.alternate,Ce=le!==null&&le.memoizedState!==null||vi;le=ji;var Je=vi;if(ji=Y,(vi=Ce)&&!Je)for(Qe=R;Qe!==null;)Y=Qe,Ce=Y.child,Y.tag===22&&Y.memoizedState!==null?Ea(R):Ce!==null?(Ce.return=Y,Qe=Ce):Ea(R);for(;D!==null;)Qe=D,jc(D),D=D.sibling;Qe=R,ji=le,vi=Je}fp(h)}else R.subtreeFlags&8772&&D!==null?(D.return=R,Qe=D):fp(h)}}function fp(h){for(;Qe!==null;){var f=Qe;if(f.flags&8772){var _=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:vi||wi(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!vi)if(_===null)E.componentDidMount();else{var R=f.elementType===f.type?_.memoizedProps:Zi(f.type,_.memoizedProps);E.componentDidUpdate(R,_.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&Eg(f,D,E);break;case 3:var Y=f.updateQueue;if(Y!==null){if(_=null,f.child!==null)switch(f.child.tag){case 5:_=fe(f.child.stateNode);break;case 1:_=f.child.stateNode}Eg(f,Y,_)}break;case 5:var le=f.stateNode;_===null&&f.flags&4&&ze(le,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&f.memoizedState===null){var Ce=f.alternate;if(Ce!==null){var Je=Ce.memoizedState;if(Je!==null){var _t=Je.dehydrated;_t!==null&&Sd(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}vi||f.flags&512&&Xi(f)}catch(Xt){Ji(f,f.return,Xt)}}if(f===h){Qe=null;break}if(_=f.sibling,_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}function pp(h){for(;Qe!==null;){var f=Qe;if(f===h){Qe=null;break}var _=f.sibling;if(_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}function Ea(h){for(;Qe!==null;){var f=Qe;try{switch(f.tag){case 0:case 11:case 15:var _=f.return;try{wi(4,f)}catch(Ce){Ji(f,_,Ce)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var R=f.return;try{E.componentDidMount()}catch(Ce){Ji(f,R,Ce)}}var D=f.return;try{Xi(f)}catch(Ce){Ji(f,D,Ce)}break;case 5:var Y=f.return;try{Xi(f)}catch(Ce){Ji(f,Y,Ce)}}}catch(Ce){Ji(f,f.return,Ce)}if(f===h){Qe=null;break}var le=f.sibling;if(le!==null){le.return=f.return,Qe=le;break}Qe=f.return}}var Xc=0,Ma=1,Ta=2,Zs=3,Ll=4;if(typeof Symbol=="function"&&Symbol.for){var Ca=Symbol.for;Xc=Ca("selector.component"),Ma=Ca("selector.has_pseudo_class"),Ta=Ca("selector.role"),Zs=Ca("selector.test_id"),Ll=Ca("selector.text")}function Jc(h){var f=K(h);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(h=J(h),h===null)throw Error(o(362));return h.stateNode.current}function Kc(h,f){switch(f.$$typeof){case Xc:if(h.type===f.value)return!0;break;case Ma:e:{f=f.value,h=[h,0];for(var _=0;_<h.length;){var E=h[_++],R=h[_++],D=f[R];if(E.tag!==5||!Te(E)){for(;D!=null&&Kc(E,D);)R++,D=f[R];if(R===f.length){f=!0;break e}else for(E=E.child;E!==null;)h.push(E,R),E=E.sibling}}f=!1}return f;case Ta:if(h.tag===5&&Oe(h.stateNode,f.value))return!0;break;case Ll:if((h.tag===5||h.tag===6)&&(h=pe(h),h!==null&&0<=h.indexOf(f.value)))return!0;break;case Zs:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ko(h){switch(h.$$typeof){case Xc:return"<"+(k(h.value)||"Unknown")+">";case Ma:return":has("+(ko(h)||"")+")";case Ta:return'[role="'+h.value+'"]';case Ll:return'"'+h.value+'"';case Zs:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function _r(h,f){var _=[];h=[h,0];for(var E=0;E<h.length;){var R=h[E++],D=h[E++],Y=f[D];if(R.tag!==5||!Te(R)){for(;Y!=null&&Kc(R,Y);)D++,Y=f[D];if(D===f.length)_.push(R);else for(R=R.child;R!==null;)h.push(R,D),R=R.sibling}}return _}function eo(h,f){if(!Ye)throw Error(o(363));h=Jc(h),h=_r(h,f),f=[],h=Array.from(h);for(var _=0;_<h.length;){var E=h[_++];if(E.tag===5)Te(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return f}var mp=Math.ceil,Yc=l.ReactCurrentDispatcher,ns=l.ReactCurrentOwner,Sn=l.ReactCurrentBatchConfig,Qt=0,qn=null,wn=null,Fn=0,Li=0,ba=xt(0),Vn=0,Nl=null,Ts=0,xr=0,Ra=0,to=null,ti=null,qc=0,Uo=1/0;function Ia(){Uo=oi()+500}var Fl=!1,Bn=null,is=null,Ol=!1,Cs=null,Pa=0,Da=0,no=null,In=-1,Wn=0;function pn(){return Qt&6?oi():In!==-1?In:In=oi()}function rs(h){return h.mode&1?Qt&2&&Fn!==0?Fn&-Fn:wg.transition!==null?(Wn===0&&(h=xs,xs<<=1,!(xs&4194240)&&(xs=64),Wn=h),Wn):(h=on,h!==0?h:Ue()):1}function Ni(h,f,_){if(50<Da)throw Da=0,no=null,Error(o(185));var E=Ho(h,f);return E===null?null:(ra(E,f,_),(!(Qt&2)||E!==qn)&&(E===qn&&(!(Qt&2)&&(xr|=f),Vn===4&&Mi(E,Fn)),ir(E,_),f===1&&Qt===0&&!(h.mode&1)&&(Ia(),Rd&&Dr())),E)}function Ho(h,f){h.lanes|=f;var _=h.alternate;for(_!==null&&(_.lanes|=f),_=h,h=h.return;h!==null;)h.childLanes|=f,_=h.alternate,_!==null&&(_.childLanes|=f),_=h,h=h.return;return _.tag===3?_.stateNode:null}function ir(h,f){var _=h.callbackNode;Sg(h,f);var E=Ec(h,h===qn?Fn:0);if(E===0)_!==null&&gl(_),h.callbackNode=null,h.callbackPriority=0;else if(f=E&-E,h.callbackPriority!==f){if(_!=null&&gl(_),f===1)h.tag===0?Pd(Ar.bind(null,h)):Id(Ar.bind(null,h)),je?Et(function(){Qt===0&&Dr()}):sa(oa,Dr),_=null;else{switch(Hs(E)){case 1:_=oa;break;case 4:_=M_;break;case 16:_=Cd;break;case 536870912:_=bd;break;default:_=Cd}_=uh(_,Ei.bind(null,h))}h.callbackPriority=f,h.callbackNode=_}}function Ei(h,f){if(In=-1,Wn=0,Qt&6)throw Error(o(327));var _=h.callbackNode;if(bs()&&h.callbackNode!==_)return null;var E=Ec(h,h===qn?Fn:0);if(E===0)return null;if(E&30||E&h.expiredLanes||f)f=eu(h,E);else{f=E;var R=Qt;Qt|=2;var D=yp();(qn!==h||Fn!==f)&&(Ia(),io(h,f));do try{Ug();break}catch(le){vp(h,le)}while(!0);Gi(),Yc.current=D,Qt=R,wn!==null?f=0:(qn=null,Fn=0,f=Vn)}if(f!==0){if(f===2&&(R=Ed(h),R!==0&&(E=R,f=Qc(h,R))),f===1)throw _=Nl,io(h,0),Mi(h,E),ir(h,oi()),_;if(f===6)Mi(h,E);else{if(R=h.current.alternate,!(E&30)&&!gp(R)&&(f=eu(h,E),f===2&&(D=Ed(h),D!==0&&(E=D,f=Qc(h,D))),f===1))throw _=Nl,io(h,0),Mi(h,E),ir(h,oi()),_;switch(h.finishedWork=R,h.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:ss(h,ti);break;case 3:if(Mi(h,E),(E&130023424)===E&&(f=qc+500-oi(),10<f)){if(Ec(h,0)!==0)break;if(R=h.suspendedLanes,(R&E)!==E){pn(),h.pingedLanes|=h.suspendedLanes&R;break}h.timeoutHandle=Re(ss.bind(null,h,ti),f);break}ss(h,ti);break;case 4:if(Mi(h,E),(E&4194240)===E)break;for(f=h.eventTimes,R=-1;0<E;){var Y=31-Pn(E);D=1<<Y,Y=f[Y],Y>R&&(R=Y),E&=~D}if(E=R,E=oi()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*mp(E/1960))-E,10<E){h.timeoutHandle=Re(ss.bind(null,h,ti),E);break}ss(h,ti);break;case 5:ss(h,ti);break;default:throw Error(o(329))}}}return ir(h,oi()),h.callbackNode===_?Ei.bind(null,h):null}function Qc(h,f){var _=to;return h.current.memoizedState.isDehydrated&&(io(h,f).flags|=256),h=eu(h,f),h!==2&&(f=ti,ti=_,f!==null&&$c(f)),h}function $c(h){ti===null?ti=h:ti.push.apply(ti,h)}function gp(h){for(var f=h;;){if(f.flags&16384){var _=f.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var E=0;E<_.length;E++){var R=_[E],D=R.getSnapshot;R=R.value;try{if(!zi(D(),R))return!1}catch{return!1}}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Mi(h,f){for(f&=~Ra,f&=~xr,h.suspendedLanes|=f,h.pingedLanes&=~f,h=h.expirationTimes;0<f;){var _=31-Pn(f),E=1<<_;h[_]=-1,f&=~E}}function Ar(h){if(Qt&6)throw Error(o(327));bs();var f=Ec(h,0);if(!(f&1))return ir(h,oi()),null;var _=eu(h,f);if(h.tag!==0&&_===2){var E=Ed(h);E!==0&&(f=E,_=Qc(h,E))}if(_===1)throw _=Nl,io(h,0),Mi(h,f),ir(h,oi()),_;if(_===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=f,ss(h,ti),ir(h,oi()),null}function kl(h){Cs!==null&&Cs.tag===0&&!(Qt&6)&&bs();var f=Qt;Qt|=1;var _=Sn.transition,E=on;try{if(Sn.transition=null,on=1,h)return h()}finally{on=E,Sn.transition=_,Qt=f,!(Qt&6)&&Dr()}}function Zc(){Li=ba.current,pt(ba)}function io(h,f){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==it&&(h.timeoutHandle=it,Xe(_)),wn!==null)for(_=wn.return;_!==null;){var E=_;switch(jf(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&ei();break;case 3:Ml(),pt(Gt),pt(sn),pa();break;case 5:Kf(E);break;case 4:Ml();break;case 13:pt(kn);break;case 19:pt(kn);break;case 10:Rc(E.type._context);break;case 22:case 23:Zc()}_=_.return}if(qn=h,wn=h=ro(h.current,null),Fn=Li=f,Vn=0,Nl=null,Ra=xr=Ts=0,ti=to=null,Br!==null){for(f=0;f<Br.length;f++)if(_=Br[f],E=_.interleaved,E!==null){_.interleaved=null;var R=E.next,D=_.pending;if(D!==null){var Y=D.next;D.next=R,E.next=Y}_.pending=E}Br=null}return h}function vp(h,f){do{var _=wn;try{if(Gi(),Pc.current=Il,Vd){for(var E=Un.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}Vd=!1}if(ma=0,pi=fi=Un=null,ws=!1,ga=0,ns.current=null,_===null||_.return===null){Vn=1,Nl=f,wn=null;break}e:{var D=h,Y=_.return,le=_,Ce=f;if(f=Fn,le.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Je=Ce,_t=le,Xt=_t.tag;if(!(_t.mode&1)&&(Xt===0||Xt===11||Xt===15)){var Bt=_t.alternate;Bt?(_t.updateQueue=Bt.updateQueue,_t.memoizedState=Bt.memoizedState,_t.lanes=Bt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var tn=rp(Y);if(tn!==null){tn.flags&=-257,ya(tn,Y,le,D,f),tn.mode&1&&Js(D,Je,f),f=tn,Ce=Je;var dt=f.updateQueue;if(dt===null){var Ti=new Set;Ti.add(Ce),f.updateQueue=Ti}else dt.add(Ce);break e}else{if(!(f&1)){Js(D,Je,f),ch();break e}Ce=Error(o(426))}}else if(Nn&&le.mode&1){var wr=rp(Y);if(wr!==null){!(wr.flags&65536)&&(wr.flags|=256),ya(wr,Y,le,D,f),Hd(Ce);break e}}D=Ce,Vn!==4&&(Vn=2),to===null?to=[D]:to.push(D),Ce=ip(Ce,le),le=Y;do{switch(le.tag){case 3:le.flags|=65536,f&=-f,le.lanes|=f;var _e=Fg(le,Ce,f);Ld(le,_e);break e;case 1:D=Ce;var de=le.type,Me=le.stateNode;if(!(le.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(is===null||!is.has(Me)))){le.flags|=65536,f&=-f,le.lanes|=f;var at=Zd(le,D,f);Ld(le,at);break e}}le=le.return}while(le!==null)}xp(_)}catch(Tt){f=Tt,wn===_&&_!==null&&(wn=_=_.return);continue}break}while(!0)}function yp(){var h=Yc.current;return Yc.current=Il,h===null?Il:h}function ch(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),qn===null||!(Ts&268435455)&&!(xr&268435455)||Mi(qn,Fn)}function eu(h,f){var _=Qt;Qt|=2;var E=yp();qn===h&&Fn===f||io(h,f);do try{kg();break}catch(R){vp(h,R)}while(!0);if(Gi(),Qt=_,Yc.current=E,wn!==null)throw Error(o(261));return qn=null,Fn=0,Vn}function kg(){for(;wn!==null;)_p(wn)}function Ug(){for(;wn!==null&&!Ro();)_p(wn)}function _p(h){var f=wp(h.alternate,h,Li);h.memoizedProps=h.pendingProps,f===null?xp(h):wn=f,ns.current=null}function xp(h){var f=h;do{var _=f.alternate;if(h=f.return,f.flags&32768){if(_=sh(_,f),_!==null){_.flags&=32767,wn=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Vn=6,wn=null;return}}else if(_=nh(_,f,Li),_!==null){wn=_;return}if(f=f.sibling,f!==null){wn=f;return}wn=f=h}while(f!==null);Vn===0&&(Vn=5)}function ss(h,f){var _=on,E=Sn.transition;try{Sn.transition=null,on=1,Hg(h,f,_)}finally{Sn.transition=E,on=_}return null}function Hg(h,f,_){do bs();while(Cs!==null);if(Qt&6)throw Error(o(327));var E=h.finishedWork,R=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=E.lanes|E.childLanes;if(Td(h,D),h===qn&&(wn=qn=null,Fn=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Ol||(Ol=!0,uh(Cd,function(){return bs(),null})),D=(E.flags&15990)!==0,E.subtreeFlags&15990||D){D=Sn.transition,Sn.transition=null;var Y=on;on=1;var le=Qt;Qt|=4,ns.current=null,cp(h,E),b_(h,E),Q(h.containerInfo),h.current=E,Wc(E),E_(),Qt=le,on=Y,Sn.transition=D}else h.current=E;if(Ol&&(Ol=!1,Cs=h,Pa=R),D=h.pendingLanes,D===0&&(is=null),Tc(E.stateNode),ir(h,oi()),f!==null)for(_=h.onRecoverableError,E=0;E<f.length;E++)_(f[E]);if(Fl)throw Fl=!1,h=Bn,Bn=null,h;return Pa&1&&h.tag!==0&&bs(),D=h.pendingLanes,D&1?h===no?Da++:(Da=0,no=h):Da=0,Dr(),null}function bs(){if(Cs!==null){var h=Hs(Pa),f=Sn.transition,_=on;try{if(Sn.transition=null,on=16>h?16:h,Cs===null)var E=!1;else{if(h=Cs,Cs=null,Pa=0,Qt&6)throw Error(o(331));var R=Qt;for(Qt|=4,Qe=h.current;Qe!==null;){var D=Qe,Y=D.child;if(Qe.flags&16){var le=D.deletions;if(le!==null){for(var Ce=0;Ce<le.length;Ce++){var Je=le[Ce];for(Qe=Je;Qe!==null;){var _t=Qe;switch(_t.tag){case 0:case 11:case 15:$s(8,_t,D)}var Xt=_t.child;if(Xt!==null)Xt.return=_t,Qe=Xt;else for(;Qe!==null;){_t=Qe;var Bt=_t.sibling,tn=_t.return;if(up(_t),_t===Je){Qe=null;break}if(Bt!==null){Bt.return=tn,Qe=Bt;break}Qe=tn}}}var dt=D.alternate;if(dt!==null){var Ti=dt.child;if(Ti!==null){dt.child=null;do{var wr=Ti.sibling;Ti.sibling=null,Ti=wr}while(Ti!==null)}}Qe=D}}if(D.subtreeFlags&2064&&Y!==null)Y.return=D,Qe=Y;else e:for(;Qe!==null;){if(D=Qe,D.flags&2048)switch(D.tag){case 0:case 11:case 15:$s(9,D,D.return)}var _e=D.sibling;if(_e!==null){_e.return=D.return,Qe=_e;break e}Qe=D.return}}var de=h.current;for(Qe=de;Qe!==null;){Y=Qe;var Me=Y.child;if(Y.subtreeFlags&2064&&Me!==null)Me.return=Y,Qe=Me;else e:for(Y=de;Qe!==null;){if(le=Qe,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:wi(9,le)}}catch(Tt){Ji(le,le.return,Tt)}if(le===Y){Qe=null;break e}var at=le.sibling;if(at!==null){at.return=le.return,Qe=at;break e}Qe=le.return}}if(Qt=R,Dr(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Mc,h)}catch{}E=!0}return E}finally{on=_,Sn.transition=f}}return!1}function tu(h,f,_){f=ip(_,f),f=Fg(h,f,1),Io(h,f),f=pn(),h=Ho(h,1),h!==null&&(ra(h,1,f),ir(h,f))}function Ji(h,f,_){if(h.tag===3)tu(h,h,_);else for(;f!==null;){if(f.tag===3){tu(f,h,_);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(is===null||!is.has(E))){h=ip(_,h),h=Zd(f,h,1),Io(f,h),h=pn(),f=Ho(f,1),f!==null&&(ra(f,1,h),ir(f,h));break}}f=f.return}}function Ap(h,f,_){var E=h.pingCache;E!==null&&E.delete(f),f=pn(),h.pingedLanes|=h.suspendedLanes&_,qn===h&&(Fn&_)===_&&(Vn===4||Vn===3&&(Fn&130023424)===Fn&&500>oi()-qc?io(h,0):Ra|=_),ir(h,f)}function Sp(h,f){f===0&&(h.mode&1?(f=en,en<<=1,!(en&130023424)&&(en=4194304)):f=1);var _=pn();h=Ho(h,f),h!==null&&(ra(h,f,_),ir(h,_))}function zg(h){var f=h.memoizedState,_=0;f!==null&&(_=f.retryLane),Sp(h,_)}function Gg(h,f){var _=0;switch(h.tag){case 13:var E=h.stateNode,R=h.memoizedState;R!==null&&(_=R.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),Sp(h,_)}var wp;wp=function(h,f,_){if(h!==null)if(h.memoizedProps!==f.pendingProps||Gt.current)gi=!0;else{if(!(h.lanes&_)&&!(f.flags&128))return gi=!1,rh(h,f,_);gi=!!(h.flags&131072)}else gi=!1,Nn&&f.flags&1048576&&bg(f,kd,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps;var R=En(f,sn.current);vl(f,_),R=Tl(null,f,E,h,R,_);var D=Lo();return f.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Ht(E)?(D=!0,_s(f)):D=!1,f.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,yl(f),R.updater=Fd,f.stateNode=R,R._reactInternals=f,Vf(f,E,h,_),f=Bi(null,f,E,!0,D,_)):(f.tag=0,Nn&&D&&Wf(f),Gn(null,f,R,_),f=f.child),f;case 16:E=f.elementType;e:{switch(h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps,R=E._init,E=R(E._payload),f.type=E,R=f.tag=R_(E),h=Zi(E,h),R){case 0:f=qs(null,f,E,h,_);break e;case 1:f=xa(null,f,E,h,_);break e;case 11:f=Rn(null,f,E,h,_);break e;case 14:f=Mn(null,f,E,Zi(E.type,h),_);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),qs(h,f,E,R,_);case 1:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),xa(h,f,E,R,_);case 3:e:{if(Hc(f),h===null)throw Error(o(387));E=f.pendingProps,D=f.memoizedState,R=D.element,Hf(h,f),Nd(f,E,null,_);var Y=f.memoizedState;if(E=Y.element,Fe&&D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){R=Error(o(423)),f=op(h,f,E,_,R);break e}else if(E!==R){R=Error(o(424)),f=op(h,f,E,_,R);break e}else for(Fe&&(Ai=vd(f.stateNode.containerInfo),Vi=f,Nn=!0,Fr=null,xl=!1),_=Pg(f,null,E,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Al(),E===R){f=nr(h,f,_);break e}Gn(h,f,E,_)}f=f.child}return f;case 5:return Dg(f),h===null&&Do(f),E=f.type,R=f.pendingProps,D=h!==null?h.memoizedProps:null,Y=R.children,Ee(E,R)?Y=null:D!==null&&Ee(E,D)&&(f.flags|=32),Wi(h,f),Gn(h,f,Y,_),f.child;case 6:return h===null&&Do(f),null;case 13:return ap(h,f,_);case 4:return zd(f,f.stateNode.containerInfo),E=f.pendingProps,h===null?f.child=js(f,null,E,_):Gn(h,f,E,_),f.child;case 11:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),Rn(h,f,E,R,_);case 7:return Gn(h,f,f.pendingProps,_),f.child;case 8:return Gn(h,f,f.pendingProps.children,_),f.child;case 12:return Gn(h,f,f.pendingProps.children,_),f.child;case 10:e:{if(E=f.type._context,R=f.pendingProps,D=f.memoizedProps,Y=R.value,la(f,E,Y),D!==null)if(zi(D.value,Y)){if(D.children===R.children&&!Gt.current){f=nr(h,f,_);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var le=D.dependencies;if(le!==null){Y=D.child;for(var Ce=le.firstContext;Ce!==null;){if(Ce.context===E){if(D.tag===1){Ce=Gs(-1,_&-_),Ce.tag=2;var Je=D.updateQueue;if(Je!==null){Je=Je.shared;var _t=Je.pending;_t===null?Ce.next=Ce:(Ce.next=_t.next,_t.next=Ce),Je.pending=Ce}}D.lanes|=_,Ce=D.alternate,Ce!==null&&(Ce.lanes|=_),ca(D.return,_,f),le.lanes|=_;break}Ce=Ce.next}}else if(D.tag===10)Y=D.type===f.type?null:D.child;else if(D.tag===18){if(Y=D.return,Y===null)throw Error(o(341));Y.lanes|=_,le=Y.alternate,le!==null&&(le.lanes|=_),ca(Y,_,f),Y=D.sibling}else Y=D.child;if(Y!==null)Y.return=D;else for(Y=D;Y!==null;){if(Y===f){Y=null;break}if(D=Y.sibling,D!==null){D.return=Y.return,Y=D;break}Y=Y.return}D=Y}Gn(h,f,R.children,_),f=f.child}return f;case 9:return R=f.type,E=f.pendingProps.children,vl(f,_),R=er(R),E=E(R),f.flags|=1,Gn(h,f,E,_),f.child;case 14:return E=f.type,R=Zi(E,f.pendingProps),R=Zi(E.type,R),Mn(h,f,E,R,_);case 15:return Ys(h,f,f.type,f.pendingProps,_);case 17:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Ht(E)?(h=!0,_s(f)):h=!1,vl(f,_),Tg(f,E,R),Vf(f,E,R,_),Bi(null,f,E,!0,h,_);case 19:return Sa(h,f,_);case 22:return Si(h,f,_)}throw Error(o(156,f.tag))};function uh(h,f){return sa(h,f)}function Vg(h,f,_,E){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(h,f,_,E){return new Vg(h,f,_,E)}function dh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function R_(h){if(typeof h=="function")return dh(h)?1:0;if(h!=null){if(h=h.$$typeof,h===M)return 11;if(h===C)return 14}return 2}function ro(h,f){var _=h.alternate;return _===null?(_=Sr(h.tag,f,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=f,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,f=h.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function hh(h,f,_,E,R,D){var Y=2;if(E=h,typeof h=="function")dh(h)&&(Y=1);else if(typeof h=="string")Y=5;else e:switch(h){case p:return Ba(_.children,R,D,f);case m:Y=8,R|=8;break;case v:return h=Sr(12,_,f,R|2),h.elementType=v,h.lanes=D,h;case w:return h=Sr(13,_,f,R),h.elementType=w,h.lanes=D,h;case x:return h=Sr(19,_,f,R),h.elementType=x,h.lanes=D,h;case P:return nu(_,R,D,f);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:Y=10;break e;case S:Y=9;break e;case M:Y=11;break e;case C:Y=14;break e;case b:Y=16,E=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return f=Sr(Y,_,f,R),f.elementType=h,f.type=E,f.lanes=D,f}function Ba(h,f,_,E){return h=Sr(7,h,E,f),h.lanes=_,h}function nu(h,f,_,E){return h=Sr(22,h,E,f),h.elementType=P,h.lanes=_,h.stateNode={},h}function fh(h,f,_){return h=Sr(6,h,null,f),h.lanes=_,h}function ph(h,f,_){return f=Sr(4,h.children!==null?h.children:[],h.key,f),f.lanes=_,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}function mh(h,f,_,E,R){this.tag=f,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=E,this.onRecoverableError=R,Fe&&(this.mutableSourceEagerHydrationData=null)}function Wg(h,f,_,E,R,D,Y,le,Ce){return h=new mh(h,f,_,le,Ce),f===1?(f=1,D===!0&&(f|=8)):f=0,D=Sr(3,null,null,f),h.current=D,D.stateNode=h,D.memoizedState={element:E,isDehydrated:_,cache:null,transitions:null},yl(D),h}function jg(h){if(!h)return rn;h=h._reactInternals;e:{if(L(h)!==h||h.tag!==1)throw Error(o(170));var f=h;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Ht(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(h.tag===1){var _=h.type;if(Ht(_))return Ii(h,_,f)}return f}function Xg(h){var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=ae(f),h===null?null:h.stateNode}function Ur(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<f?_:f}}function iu(h,f){Ur(h,f),(h=h.alternate)&&Ur(h,f)}function gh(h){return h=ae(h),h===null?null:h.stateNode}function Jg(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var f=pn();Ni(h,134217728,f),iu(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var f=pn(),_=rs(h);Ni(h,_,f),iu(h,_)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var f=h.stateNode;if(f.current.memoizedState.isDehydrated){var _=ml(f.pendingLanes);_!==0&&(As(f,_|1),ir(f,oi()),!(Qt&6)&&(Ia(),Dr()))}break;case 13:var E=pn();kl(function(){return Ni(h,1,E)}),iu(h,1)}},t.batchedUpdates=function(h,f){var _=Qt;Qt|=1;try{return h(f)}finally{Qt=_,Qt===0&&(Ia(),Rd&&Dr())}},t.createComponentSelector=function(h){return{$$typeof:Xc,value:h}},t.createContainer=function(h,f,_,E,R,D,Y){return Wg(h,f,!1,null,_,E,R,D,Y)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Ma,value:h}},t.createHydrationContainer=function(h,f,_,E,R,D,Y,le,Ce){return h=Wg(_,E,!0,h,R,D,Y,le,Ce),h.context=jg(null),_=h.current,E=pn(),R=rs(_),D=Gs(E,R),D.callback=f??null,Io(_,D),h.current.lanes=R,ra(h,R,E),ir(h,E),h},t.createPortal=function(h,f,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:E==null?null:""+E,children:h,containerInfo:f,implementation:_}},t.createRoleSelector=function(h){return{$$typeof:Ta,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Zs,value:h}},t.createTextSelector=function(h){return{$$typeof:Ll,value:h}},t.deferredUpdates=function(h){var f=on,_=Sn.transition;try{return Sn.transition=null,on=16,h()}finally{on=f,Sn.transition=_}},t.discreteUpdates=function(h,f,_,E,R){var D=on,Y=Sn.transition;try{return Sn.transition=null,on=1,h(f,_,E,R)}finally{on=D,Sn.transition=Y,Qt===0&&Ia()}},t.findAllNodes=eo,t.findBoundingRects=function(h,f){if(!Ye)throw Error(o(363));f=eo(h,f),h=[];for(var _=0;_<f.length;_++)h.push(z(f[_]));for(f=h.length-1;0<f;f--){_=h[f];for(var E=_.x,R=E+_.width,D=_.y,Y=D+_.height,le=f-1;0<=le;le--)if(f!==le){var Ce=h[le],Je=Ce.x,_t=Je+Ce.width,Xt=Ce.y,Bt=Xt+Ce.height;if(E>=Je&&D>=Xt&&R<=_t&&Y<=Bt){h.splice(f,1);break}else if(E!==Je||_.width!==Ce.width||Bt<D||Xt>Y){if(!(D!==Xt||_.height!==Ce.height||_t<E||Je>R)){Je>E&&(Ce.width+=Je-E,Ce.x=E),_t<R&&(Ce.width=R-Je),h.splice(f,1);break}}else{Xt>D&&(Ce.height+=Xt-D,Ce.y=D),Bt<Y&&(Ce.height=Y-Xt),h.splice(f,1);break}}}return h},t.findHostInstance=Xg,t.findHostInstanceWithNoPortals=function(h){return h=V(h),h=h!==null?ge(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return Xg(h)},t.flushControlled=function(h){var f=Qt;Qt|=1;var _=Sn.transition,E=on;try{Sn.transition=null,on=1,h()}finally{on=E,Sn.transition=_,Qt=f,Qt===0&&(Ia(),Dr())}},t.flushPassiveEffects=bs,t.flushSync=kl,t.focusWithin=function(h,f){if(!Ye)throw Error(o(363));for(h=Jc(h),f=_r(h,f),f=Array.from(f),h=0;h<f.length;){var _=f[h++];if(!Te(_)){if(_.tag===5&&Ie(_.stateNode))return!0;for(_=_.child;_!==null;)f.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return on},t.getFindAllNodesFailureDescription=function(h,f){if(!Ye)throw Error(o(363));var _=0,E=[];h=[Jc(h),0];for(var R=0;R<h.length;){var D=h[R++],Y=h[R++],le=f[Y];if((D.tag!==5||!Te(D))&&(Kc(D,le)&&(E.push(ko(le)),Y++,Y>_&&(_=Y)),Y<f.length))for(D=D.child;D!==null;)h.push(D,Y),D=D.sibling}if(_<f.length){for(h=[];_<f.length;_++)h.push(ko(f[_]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return fe(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:gh,findFiberByHostInstance:h.findFiberByHostInstance||Jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)h=!0;else{try{Mc=f.inject(h),Ss=f}catch{}h=!!f.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,f,_,E){if(!Ye)throw Error(o(363));h=eo(h,f);var R=ot(h,_,E).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(h,f){var _=f._getVersion;_=_(f._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[f,_]:h.mutableSourceEagerHydrationData.push(f,_)},t.runWithPriority=function(h,f){var _=on;try{return on=h,f()}finally{on=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,f,_,E){var R=f.current,D=pn(),Y=rs(R);return _=jg(_),f.context===null?f.context=_:f.pendingContext=_,f=Gs(D,Y),f.payload={element:h},E=E===void 0?null:E,E!==null&&(f.callback=E),Io(R,f),h=Ni(R,Y,D),h!==null&&Bd(h,R,Y),Y},t}),$x}var wT;function A4(){return wT||(wT=1,Yx.exports=x4()),Yx.exports}var S4=A4();const w4=WS(S4);var Zx={exports:{}},eA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function E4(){return ET||(ET=1,function(n){function e(U,Z){var Q=U.length;U.push(Z);e:for(;0<Q;){var W=Q-1>>>1,ie=U[W];if(0<r(ie,Z))U[W]=Z,U[Q]=ie,Q=W;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],Q=U.pop();if(Q!==Z){U[0]=Q;e:for(var W=0,ie=U.length,Le=ie>>>1;W<Le;){var ce=2*(W+1)-1,Ee=U[ce],Ne=ce+1,Re=U[Ne];if(0>r(Ee,Q))Ne<ie&&0>r(Re,Ee)?(U[W]=Re,U[Ne]=Q,W=Ne):(U[W]=Ee,U[ce]=Q,W=ce);else if(Ne<ie&&0>r(Re,Q))U[W]=Re,U[Ne]=Q,W=Ne;else break e}}return Z}function r(U,Z){var Q=U.sortIndex-Z.sortIndex;return Q!==0?Q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],d=[],p=1,m=null,v=3,y=!1,S=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=U)i(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(d)}}function P(U){if(M=!1,b(U),!S)if(t(c)!==null)S=!0,fe(F);else{var Z=t(d);Z!==null&&he(P,Z.startTime-U)}}function F(U,Z){S=!1,M&&(M=!1,x(H),H=-1),y=!0;var Q=v;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!V());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var ie=W(m.expirationTime<=Z);Z=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(c)&&i(c),b(Z)}else i(c);m=t(c)}if(m!==null)var Le=!0;else{var ce=t(d);ce!==null&&he(P,ce.startTime-Z),Le=!1}return Le}finally{m=null,v=Q,y=!1}}var N=!1,k=null,H=-1,L=5,B=-1;function V(){return!(n.unstable_now()-B<L)}function ae(){if(k!==null){var U=n.unstable_now();B=U;var Z=!0;try{Z=k(!0,U)}finally{Z?re():(N=!1,k=null)}}else N=!1}var re;if(typeof C=="function")re=function(){C(ae)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ve=ge.port2;ge.port1.onmessage=ae,re=function(){ve.postMessage(null)}}else re=function(){w(ae,0)};function fe(U){k=U,N||(N=!0,re())}function he(U,Z){H=w(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,fe(F))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(U){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var Q=v;v=Z;try{return U()}finally{v=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=v;v=U;try{return Z()}finally{v=Q}},n.unstable_scheduleCallback=function(U,Z,Q){var W=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,U){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,U={id:p++,callback:Z,priorityLevel:U,startTime:Q,expirationTime:ie,sortIndex:-1},Q>W?(U.sortIndex=Q,e(d,U),t(c)===null&&U===t(d)&&(M?(x(H),H=-1):M=!0,he(P,Q-W))):(U.sortIndex=ie,e(c,U),S||y||(S=!0,fe(F))),U},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(U){var Z=v;return function(){var Q=v;v=Z;try{return U.apply(this,arguments)}finally{v=Q}}}}(eA)),eA}var MT;function M4(){return MT||(MT=1,Zx.exports=E4()),Zx.exports}var TT=M4();const Xw={},T4=n=>void Object.assign(Xw,n);function C4(n,e){function t(p,{args:m=[],attach:v,...y},S){let M=`${p[0].toUpperCase()}${p.slice(1)}`,w;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=y.object;w=Vh(x,{type:p,root:S,attach:v,primitive:!0})}else{const x=Xw[M];if(!x)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");w=Vh(new x(...m),{type:p,root:S,attach:v,memoizedProps:{args:m}})}return w.__r3f.attach===void 0&&(w instanceof qt?w.__r3f.attach="geometry":w instanceof xi&&(w.__r3f.attach="material")),M!=="inject"&&iA(w,y),w}function i(p,m){let v=!1;if(m){var y,S;(y=m.__r3f)!=null&&y.attach?nA(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),v=!0),v||(S=p.__r3f)==null||S.objects.push(m),m.__r3f||Vh(m,{}),m.__r3f.parent=p,uS(m),Wh(m)}}function r(p,m,v){let y=!1;if(m){var S,M;if((S=m.__r3f)!=null&&S.attach)nA(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:m});const w=p.children.filter(C=>C!==m),x=w.indexOf(v);p.children=[...w.slice(0,x),m,...w.slice(x)],y=!0}y||(M=p.__r3f)==null||M.objects.push(m),m.__r3f||Vh(m,{}),m.__r3f.parent=p,uS(m),Wh(m)}}function s(p,m,v=!1){p&&[...p].forEach(y=>o(m,y,v))}function o(p,m,v){if(m){var y,S,M;if(m.__r3f&&(m.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(P=>P!==m)),(S=m.__r3f)!=null&&S.attach)PT(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var w;p.remove(m),(w=m.__r3f)!=null&&w.root&&F4(A0(m),m)}const C=(M=m.__r3f)==null?void 0:M.primitive,b=!C&&(v===void 0?m.dispose!==null:v);if(!C){var x;s((x=m.__r3f)==null?void 0:x.objects,m,b),s(m.children,m,b)}if(delete m.__r3f,b&&m.dispose&&m.type!=="Scene"){const P=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?TT.unstable_scheduleCallback(TT.unstable_IdlePriority,P):P()}Wh(p)}}function l(p,m,v,y){var S;const M=(S=p.__r3f)==null?void 0:S.parent;if(!M)return;const w=t(m,v,p.__r3f.root);if(p.children){for(const x of p.children)x.__r3f&&i(w,x);p.children=p.children.filter(x=>!x.__r3f)}p.__r3f.objects.forEach(x=>i(w,x)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(M,p),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(M,w),w.raycast&&w.__r3f.eventCount&&A0(w).getState().internal.interaction.push(w),[y,y.alternate].forEach(x=>{x!==null&&(x.stateNode=w,x.ref&&(typeof x.ref=="function"?x.ref(w):x.ref.current=w))})}const c=()=>{};return{reconciler:w4({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,i(v,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,v)=>{if(!m||!v)return;const y=p.getState().scene;y.__r3f&&r(y,m,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,v,y){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:w=[],children:x,...C}=y,{args:b=[],children:P,...F}=v;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((k,H)=>k!==b[H]))return[!0];const N=NP(p,C,F,!0);return N.changes.length?[!1,N]:null}},commitUpdate(p,[m,v],y,S,M,w){m?l(p,y,M,w):iA(p,v)},commitMount(p,m,v,y){var S;const M=(S=p.__r3f)!=null?S:{};p.raycast&&M.handlers&&M.eventCount&&A0(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Vh(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:v,parent:y}=(m=p.__r3f)!=null?m:{};v&&y&&PT(y,p,v),p.isObject3D&&(p.visible=!1),Wh(p)},unhideInstance(p,m){var v;const{attach:y,parent:S}=(v=p.__r3f)!=null?v:{};y&&S&&nA(S,p,y),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),Wh(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Yh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:iA}}var CT,bT;const tA=n=>"colorSpace"in n||"outputColorSpace"in n,RP=()=>{var n;return(n=Xw.ColorManagement)!=null?n:null},IP=n=>n&&n.isOrthographicCamera,b4=n=>n&&n.hasOwnProperty("current"),ag=typeof window<"u"&&((CT=window.document)!=null&&CT.createElement||((bT=window.navigator)==null?void 0:bT.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function PP(n){const e=j.useRef(n);return ag(()=>void(e.current=n),[n]),e}function R4({set:n}){return ag(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class DP extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}DP.getDerivedStateFromError=()=>({error:!0});const BP="__default",RT=new Map,I4=n=>n&&!!n.memoized&&!!n.changes;function LP(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Xp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function A0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:n=>n===Object(n)&&!On.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(On.str(n)||On.num(n)||On.boo(n))return n===e;const s=On.obj(n);if(s&&i==="reference")return n===e;const o=On.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!On.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(On.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function P4(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function D4(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Vh(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function cS(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const IT=/-\d+$/;function nA(n,e,t){if(On.str(t)){if(IT.test(t)){const s=t.replace(IT,""),{target:o,key:l}=cS(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:i,key:r}=cS(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function PT(n,e,t){var i,r;if(On.str(t)){const{target:s,key:o}=cS(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function NP(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:l,...c}={},d=!1){const p=n.__r3f,m=Object.entries(r),v=[];if(d){const S=Object.keys(c);for(let M=0;M<S.length;M++)r.hasOwnProperty(S[M])||m.unshift([S[M],BP+"remove"])}m.forEach(([S,M])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&S==="object"||On.equ(M,c[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return v.push([S,M,!0,[]]);let x=[];S.includes("-")&&(x=S.split("-")),v.push([S,M,!1,x]);for(const C in r){const b=r[C];C.startsWith(`${S}-`)&&v.push([C,b,!1,C.split("-")])}});const y={...r};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}const B4=typeof process<"u"&&!1;function iA(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:l}=I4(e)?e:NP(n,e),c=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<l.length;p++){let[m,v,y,S]=l[p];if(tA(n)){const C="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?C:b):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?C:b)}let M=n,w=M[m];if(S.length&&(w=S.reduce((x,C)=>x[C],n),!(w&&w.set))){const[x,...C]=S.reverse();M=C.reverse().reduce((b,P)=>b[P],n),m=x}if(v===BP+"remove")if(M.constructor){let x=RT.get(M.constructor);x||(x=new M.constructor,RT.set(M.constructor,x)),v=x[m]}else v=0;if(y&&i)v?i.handlers[m]=v:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Xu)){if(Array.isArray(v))w.fromArray?w.fromArray(v):w.set(...v);else if(w.copy&&v&&v.constructor&&(B4?w.constructor.name===v.constructor.name:w.constructor===v.constructor))w.copy(v);else if(v!==void 0){const x=w instanceof st;!x&&w.setScalar?w.setScalar(v):w instanceof Xu&&v instanceof Xu?w.mask=v.mask:w.set(v),!RP()&&s&&!s.linear&&x&&w.convertSRGBToLinear()}}else if(M[m]=v,M[m]instanceof Hn&&M[m].format===ur&&M[m].type===yo&&s){const x=M[m];tA(x)&&tA(s.gl)?x.colorSpace=s.gl.outputColorSpace:x.encoding=s.gl.outputEncoding}Wh(n)}if(i&&i.parent&&n.raycast&&c!==i.eventCount){const p=A0(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=n.__r3f)!=null&&t.parent&&uS(n),n}function Wh(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function uS(n){n.onUpdate==null||n.onUpdate(n)}function L4(n,e){n.manual||(IP(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function a0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function N4(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Yh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Yh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Yh.ContinuousEventPriority;default:return Yh.DefaultEventPriority}}function FP(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function F4(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{FP(t.capturedMap,e,i,r)})}function O4(n){function e(c){const{internal:d}=n.getState(),p=c.offsetX-d.initialClick[0],m=c.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(c){return c.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function i(c,d){const p=n.getState(),m=new Set,v=[],y=d?d(p.internal.interaction):p.internal.interaction;for(let x=0;x<y.length;x++){const C=Xp(y[x]);C&&(C.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function S(x){const C=Xp(x);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var b;C.events.compute==null||C.events.compute(c,C,(b=C.previousRoot)==null?void 0:b.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(x,!0):[]}let M=y.flatMap(S).sort((x,C)=>{const b=Xp(x.object),P=Xp(C.object);return!b||!P?x.distance-C.distance:P.events.priority-b.events.priority||x.distance-C.distance}).filter(x=>{const C=a0(x);return m.has(C)?!1:(m.add(C),!0)});p.events.filter&&(M=p.events.filter(M,p));for(const x of M){let C=x.object;for(;C;){var w;(w=C.__r3f)!=null&&w.eventCount&&v.push({...x,eventObject:C}),C=C.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let x of p.internal.capturedMap.get(c.pointerId).values())m.has(a0(x.intersection))||v.push(x.intersection);return v}function r(c,d,p,m){const v=n.getState();if(c.length){const y={stopped:!1};for(const S of c){const M=Xp(S.object)||v,{raycaster:w,pointer:x,camera:C,internal:b}=M,P=new X(x.x,x.y,0).unproject(C),F=B=>{var V,ae;return(V=(ae=b.capturedMap.get(B))==null?void 0:ae.has(S.eventObject))!=null?V:!1},N=B=>{const V={intersection:S,target:d.target};b.capturedMap.has(B)?b.capturedMap.get(B).set(S.eventObject,V):b.capturedMap.set(B,new Map([[S.eventObject,V]])),d.target.setPointerCapture(B)},k=B=>{const V=b.capturedMap.get(B);V&&FP(b.capturedMap,S.eventObject,V,B)};let H={};for(let B in d){let V=d[B];typeof V!="function"&&(H[B]=V)}let L={...S,...H,pointer:x,intersections:c,stopped:y.stopped,delta:p,unprojectedPoint:P,ray:w.ray,camera:C,stopPropagation(){const B="pointerId"in d&&b.capturedMap.get(d.pointerId);if((!B||B.has(S.eventObject))&&(L.stopped=y.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(V=>V.eventObject===S.eventObject))){const V=c.slice(0,c.indexOf(S));s([...V,S])}},target:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:k},currentTarget:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:k},nativeEvent:d};if(m(L),y.stopped===!0)break}}return c}function s(c){const{internal:d}=n.getState();for(const p of d.hovered.values())if(!c.length||!c.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v==null?void 0:v.handlers;if(d.hovered.delete(a0(p)),v!=null&&v.eventCount){const S={...p,intersections:c};y.onPointerOut==null||y.onPointerOut(S),y.onPointerLeave==null||y.onPointerLeave(S)}}}function o(c,d){for(let p=0;p<d.length;p++){const m=d[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:v}=n.getState();v.lastEvent.current=p;const y=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",w=i(p,y?t:void 0),x=S?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=w.map(b=>b.eventObject)),S&&!w.length&&x<=2&&(o(p,v.interaction),m&&m(p)),y&&s(w);function C(b){const P=b.eventObject,F=P.__r3f,N=F==null?void 0:F.handlers;if(F!=null&&F.eventCount)if(y){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const k=a0(b),H=v.hovered.get(k);H?H.stopped&&b.stopPropagation():(v.hovered.set(k,b),N.onPointerOver==null||N.onPointerOver(b),N.onPointerEnter==null||N.onPointerEnter(b))}N.onPointerMove==null||N.onPointerMove(b)}else{const k=N[c];k?(!S||v.initialHits.includes(P))&&(o(p,v.interaction.filter(H=>!v.initialHits.includes(H))),k(b)):S&&v.initialHits.includes(P)&&o(p,v.interaction.filter(H=>!v.initialHits.includes(H)))}}r(w,p,x,C)}}return{handlePointer:l}}const OP=n=>!!(n!=null&&n.render),kP=j.createContext(null),k4=(n,e)=>{const t=f4((l,c)=>{const d=new X,p=new X,m=new X;function v(x=c().camera,C=p,b=c().size){const{width:P,height:F,top:N,left:k}=b,H=P/F;C instanceof X?m.copy(C):m.set(...C);const L=x.getWorldPosition(d).distanceTo(m);if(IP(x))return{width:P/x.zoom,height:F/x.zoom,top:N,left:k,factor:1,distance:L,aspect:H};{const B=x.fov*Math.PI/180,V=2*Math.tan(B/2)*L,ae=V*(P/F);return{width:ae,height:V,top:N,left:k,factor:P/ae,distance:L,aspect:H}}}let y;const S=x=>l(C=>({performance:{...C.performance,current:x}})),M=new Be;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>n(c(),x),advance:(x,C)=>e(x,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Hw,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();y&&clearTimeout(y),x.performance.current!==x.performance.min&&S(x.performance.min),y=setTimeout(()=>S(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:x=>l(C=>({...C,events:{...C.events,...x}})),setSize:(x,C,b,P,F)=>{const N=c().camera,k={width:x,height:C,top:P||0,left:F||0,updateStyle:b};l(H=>({size:k,viewport:{...H.viewport,...v(N,p,k)}}))},setDpr:x=>l(C=>{const b=LP(x);return{viewport:{...C.viewport,dpr:b,initialDpr:C.viewport.initialDpr||b}}}),setFrameloop:(x="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,x!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,C,b)=>{const P=c().internal;return P.priority=P.priority+(C>0?1:0),P.subscribers.push({ref:x,priority:C,store:b}),P.subscribers=P.subscribers.sort((F,N)=>F.priority-N.priority),()=>{const F=c().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(C>0?1:0),F.subscribers=F.subscribers.filter(N=>N.ref!==x))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:d,gl:p,set:m}=t.getState();if(c.width!==r.width||c.height!==r.height||d.dpr!==s){var v;r=c,s=d.dpr,L4(l,c),p.setPixelRatio(d.dpr);const y=(v=c.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,y)}l!==o&&(o=l,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let l0,U4=new Set,H4=new Set,z4=new Set;function rA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Jp(n,e){switch(n){case"before":return rA(U4,e);case"after":return rA(H4,e);case"tail":return rA(z4,e)}}let sA,oA;function aA(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),sA=e.internal.subscribers,l0=0;l0<sA.length;l0++)oA=sA[l0],oA.ref.current(oA.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function G4(n){let e=!1,t=!1,i,r,s;function o(d){r=requestAnimationFrame(o),e=!0,i=0,Jp("before",d),t=!0;for(const m of n.values()){var p;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(i+=aA(d,s))}if(t=!1,Jp("after",d),i===0)return Jp("tail",d),e=!1,cancelAnimationFrame(r)}function l(d,p=1){var m;if(!d)return n.forEach(v=>l(v.store.getState(),p));(m=d.gl.xr)!=null&&m.isPresenting||!d.internal.active||d.frameloop==="never"||(p>1?d.internal.frames=Math.min(60,d.internal.frames+p):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(d,p=!0,m,v){if(p&&Jp("before",d),m)aA(d,m,v);else for(const y of n.values())aA(d,y.store.getState());p&&Jp("after",d)}return{loop:o,invalidate:l,advance:c}}function UP(){const n=j.useContext(kP);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Fs(n=t=>t,e){return UP()(n,e)}function Bf(n,e=0){const t=UP(),i=t.getState().internal.subscribe,r=PP(n);return ag(()=>i(r,e,t),[e,i,t]),null}const DT=new WeakMap;function HP(n,e){return function(t,...i){let r=DT.get(t);return r||(r=new t,DT.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,l)=>r.load(s,c=>{c.scene&&Object.assign(c,P4(c.scene)),o(c)},e,c=>l(new Error(`Could not load ${s}: ${c==null?void 0:c.message}`))))))}}function lg(n,e,t,i){const r=Array.isArray(e)?e:[e],s=m4(HP(t,i),[n,...r],{equal:On.equ});return Array.isArray(e)?s:s[0]}lg.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return g4(HP(t),[n,...i])};lg.clear=function(n,e){const t=Array.isArray(e)?e:[e];return v4([n,...t])};const vf=new Map,{invalidate:BT,advance:LT}=G4(vf),{reconciler:gy,applyProps:Uh}=C4(vf,N4),Hh={objects:"shallow",strict:!1},V4=(n,e)=>{const t=typeof n=="function"?n(e):n;return OP(t)?t:new TP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function W4(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:l=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function j4(n){const e=vf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||k4(BT,LT),o=t||gy.createContainer(s,Yh.ConcurrentRoot,null,!1,null,"",r,null);e||vf.set(n,{fiber:o,store:s});let l,c=!1,d;return{configure(p={}){let{gl:m,size:v,scene:y,events:S,onCreated:M,shadows:w=!1,linear:x=!1,flat:C=!1,legacy:b=!1,orthographic:P=!1,frameloop:F="always",dpr:N=[1,2],performance:k,raycaster:H,camera:L,onPointerMissed:B}=p,V=s.getState(),ae=V.gl;V.gl||V.set({gl:ae=V4(m,n)});let re=V.raycaster;re||V.set({raycaster:re=new yP});const{params:ge,...ve}=H||{};if(On.equ(ve,re,Hh)||Uh(re,{...ve}),On.equ(ge,re.params,Hh)||Uh(re,{params:{...re.params,...ge}}),!V.camera||V.camera===d&&!On.equ(d,L,Hh)){d=L;const Q=L instanceof Qm,W=Q?L:P?new go(0,0,0,0,.1,1e3):new jn(75,0,.1,1e3);Q||(W.position.z=5,L&&(Uh(W,L),("aspect"in L||"left"in L||"right"in L||"bottom"in L||"top"in L)&&(W.manual=!0,W.updateProjectionMatrix())),!V.camera&&!(L!=null&&L.rotation)&&W.lookAt(0,0,0)),V.set({camera:W}),re.camera=W}if(!V.scene){let Q;y instanceof hy?Q=y:(Q=new hy,y&&Uh(Q,y)),V.set({scene:Vh(Q)})}if(!V.xr){var fe;const Q=(Le,ce)=>{const Ee=s.getState();Ee.frameloop!=="never"&&LT(Le,!0,Ee,ce)},W=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?Q:null),Le.gl.xr.isPresenting||BT(Le)},ie={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",W),Le.xr.addEventListener("sessionend",W)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",W),Le.xr.removeEventListener("sessionend",W)}};typeof((fe=ae.xr)==null?void 0:fe.addEventListener)=="function"&&ie.connect(),V.set({xr:ie})}if(ae.shadowMap){const Q=ae.shadowMap.enabled,W=ae.shadowMap.type;if(ae.shadowMap.enabled=!!w,On.boo(w))ae.shadowMap.type=cm;else if(On.str(w)){var he;const ie={basic:FR,percentage:Fy,soft:cm,variance:po};ae.shadowMap.type=(he=ie[w])!=null?he:cm}else On.obj(w)&&Object.assign(ae.shadowMap,w);(Q!==ae.shadowMap.enabled||W!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}const U=RP();U&&("enabled"in U?U.enabled=!b:"legacyMode"in U&&(U.legacyMode=b)),c||Uh(ae,{outputEncoding:x?3e3:3001,toneMapping:C?Wo:$S}),V.legacy!==b&&V.set(()=>({legacy:b})),V.linear!==x&&V.set(()=>({linear:x})),V.flat!==C&&V.set(()=>({flat:C})),m&&!On.fun(m)&&!OP(m)&&!On.equ(m,ae,Hh)&&Uh(ae,m),S&&!V.events.handlers&&V.set({events:S(s)});const Z=W4(n,v);return On.equ(Z,V.size,Hh)||V.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),N&&V.viewport.dpr!==LP(N)&&V.setDpr(N),V.frameloop!==F&&V.setFrameloop(F),V.onPointerMissed||V.set({onPointerMissed:B}),k&&!On.equ(k,V.performance,Hh)&&V.set(Q=>({performance:{...Q.performance,...k}})),l=M,c=!0,this},render(p){return c||this.configure(),gy.updateContainer(q.jsx(X4,{store:s,children:p,onCreated:l,rootElement:n}),o,null,()=>{}),s},unmount(){zP(n)}}}function X4({store:n,children:e,onCreated:t,rootElement:i}){return ag(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),q.jsx(kP.Provider,{value:n,children:e})}function zP(n,e){const t=vf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),gy.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),D4(r),vf.delete(n)}catch{}},500)})}}gy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});const lA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function J4(n){const{handlePointer:e}=O4(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(lA).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,l])=>{const[c,d]=lA[o];t.addEventListener(c,l,{passive:d})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[l]=lA[s];i.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}var cA,NT;function K4(){if(NT)return cA;NT=1;function n(e,t,i){var r,s,o,l,c;t==null&&(t=100);function d(){var m=Date.now()-l;m<t&&m>=0?r=setTimeout(d,t-m):(r=null,i||(c=e.apply(o,s),o=s=null))}var p=function(){o=this,s=arguments,l=Date.now();var m=i&&!r;return r||(r=setTimeout(d,t)),m&&(c=e.apply(o,s),o=s=null),c};return p.clear=function(){r&&(clearTimeout(r),r=null)},p.flush=function(){r&&(c=e.apply(o,s),o=s=null,clearTimeout(r),r=null)},p}return n.debounce=n,cA=n,cA}var Y4=K4();const FT=WS(Y4);var q4=Object.defineProperty,Q4=Object.defineProperties,$4=Object.getOwnPropertyDescriptors,OT=Object.getOwnPropertySymbols,Z4=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,kT=(n,e,t)=>e in n?q4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,UT=(n,e)=>{for(var t in e||(e={}))Z4.call(e,t)&&kT(n,t,e[t]);if(OT)for(var t of OT(e))eV.call(e,t)&&kT(n,t,e[t]);return n},tV=(n,e)=>Q4(n,$4(e)),HT,zT;typeof window<"u"&&((HT=window.document)!=null&&HT.createElement||((zT=window.navigator)==null?void 0:zT.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function GP(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=GP(i,e,t);if(r)return r;i=i.sibling}}function VP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const GT=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=GT;return}return GT.apply(this,arguments)};const Jw=VP(j.createContext(null));class WP extends j.Component{render(){return j.createElement(Jw.Provider,{value:this._reactInternals},this.props.children)}}function nV(){const n=j.useContext(Jw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=GP(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function iV(){const n=nV(),[e]=j.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Jw&&!e.has(r)&&e.set(r,j.useContext(VP(r)))}t=t.return}return e}function rV(){const n=iV();return j.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>j.createElement(e,null,j.createElement(t.Provider,tV(UT({},i),{value:n.get(t)}))),e=>j.createElement(WP,UT({},e))),[n])}function sV({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const l=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,d=n?typeof n=="number"?n:n.resize:null,p=j.useRef(!1);j.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,v,y]=j.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:C,top:b,width:P,height:F,bottom:N,right:k,x:H,y:L}=l.current.element.getBoundingClientRect(),B={left:C,top:b,width:P,height:F,bottom:N,right:k,x:H,y:L};l.current.element instanceof HTMLElement&&i&&(B.height=l.current.element.offsetHeight,B.width=l.current.element.offsetWidth),Object.freeze(B),p.current&&!cV(l.current.lastBounds,B)&&o(l.current.lastBounds=B)};return[x,d?FT(x,d):x,c?FT(x,c):x]},[o,i,c,d]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){var x;l.current.element&&(l.current.resizeObserver=new r(v),(x=l.current.resizeObserver)==null||x.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const w=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=jP(x),M())};return aV(y,!!e),oV(v),j.useEffect(()=>{S(),M()},[e,y,v]),j.useEffect(()=>S,[]),[w,s,m]}function oV(n){j.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function aV(n,e){j.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function jP(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...jP(n.parentElement)]}const lV=["x","y","top","bottom","left","right","width","height"],cV=(n,e)=>lV.every(t=>n[t]===e[t]),uV=j.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=J4,eventSource:l,eventPrefix:c,shadows:d,linear:p,flat:m,legacy:v,orthographic:y,frameloop:S,dpr:M,performance:w,raycaster:x,camera:C,scene:b,onPointerMissed:P,onCreated:F,...N},k){j.useMemo(()=>T4(l4),[]);const H=rV(),[L,B]=sV({scroll:!0,debounce:{scroll:50,resize:0},...i}),V=j.useRef(null),ae=j.useRef(null);j.useImperativeHandle(k,()=>V.current);const re=PP(P),[ge,ve]=j.useState(!1),[fe,he]=j.useState(!1);if(ge)throw ge;if(fe)throw fe;const U=j.useRef(null);ag(()=>{const Q=V.current;B.width>0&&B.height>0&&Q&&(U.current||(U.current=j4(Q)),U.current.configure({gl:s,events:o,shadows:d,linear:p,flat:m,legacy:v,orthographic:y,frameloop:S,dpr:M,performance:w,raycaster:x,camera:C,scene:b,size:B,onPointerMissed:(...W)=>re.current==null?void 0:re.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(l?b4(l)?l.current:l:ae.current),c&&W.setEvents({compute:(ie,Le)=>{const ce=ie[c+"X"],Ee=ie[c+"Y"];Le.pointer.set(ce/Le.size.width*2-1,-(Ee/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),F==null||F(W)}}),U.current.render(q.jsx(H,{children:q.jsx(DP,{set:he,children:q.jsx(j.Suspense,{fallback:q.jsx(R4,{set:ve}),children:e})})})))}),j.useEffect(()=>{const Q=V.current;if(Q)return()=>zP(Q)},[]);const Z=l?"none":"auto";return q.jsx("div",{ref:ae,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...r},...N,children:q.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),XP=j.forwardRef(function(e,t){return q.jsx(WP,{children:q.jsx(uV,{...e,ref:t})})});function ll(){return ll=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ll.apply(null,arguments)}const cg=new X,Kw=new X,dV=new X,VT=new Be;function hV(n,e,t){const i=cg.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function fV(n,e){const t=cg.setFromMatrixPosition(n.matrixWorld),i=Kw.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(dV);return r.angleTo(s)>Math.PI/2}function pV(n,e,t,i){const r=cg.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),VT.set(s.x,s.y),t.setFromCamera(VT,e);const o=t.intersectObjects(i,!0);if(o.length){const l=o[0].distance;return r.distanceTo(t.ray.origin)<l}return!0}function mV(n,e){if(e instanceof go)return e.zoom;if(e instanceof jn){const t=cg.setFromMatrixPosition(n.matrixWorld),i=Kw.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function gV(n,e,t){if(e instanceof jn||e instanceof go){const i=cg.setFromMatrixPosition(n.matrixWorld),r=Kw.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),l=t[1]-o*e.far;return Math.round(o*s+l)}}const dS=n=>Math.abs(n)<1e-10?0:n;function JP(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=dS(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const vV=(n=>e=>JP(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),yV=(n=>(e,t)=>JP(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function _V(n){return n&&typeof n=="object"&&"current"in n}const xV=j.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:l,distanceFactor:c,sprite:d=!1,transform:p=!1,occlude:m,onOcclude:v,castShadow:y,receiveShadow:S,material:M,geometry:w,zIndexRange:x=[16777271,0],calculatePosition:C=hV,as:b="div",wrapperClass:P,pointerEvents:F="auto",...N},k)=>{const{gl:H,camera:L,scene:B,size:V,raycaster:ae,events:re,viewport:ge}=Fs(),[ve]=j.useState(()=>document.createElement(b)),fe=j.useRef(),he=j.useRef(null),U=j.useRef(0),Z=j.useRef([0,0]),Q=j.useRef(null),W=j.useRef(null),ie=(l==null?void 0:l.current)||re.connected||H.domElement.parentNode,Le=j.useRef(null),ce=j.useRef(!1),Ee=j.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&_V(m[0]),[m]);j.useLayoutEffect(()=>{const $e=H.domElement;m&&m==="blending"?($e.style.zIndex=`${Math.floor(x[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[m]),j.useLayoutEffect(()=>{if(he.current){const $e=fe.current=_R.createRoot(ve);if(B.updateMatrixWorld(),p)ve.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const rt=C(he.current,L,V);ve.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${rt[0]}px,${rt[1]}px,0);transform-origin:0 0;`}return ie&&(r?ie.prepend(ve):ie.appendChild(ve)),()=>{ie&&ie.removeChild(ve),$e.unmount()}}},[ie,p]),j.useLayoutEffect(()=>{P&&(ve.className=P)},[P]);const Ne=j.useMemo(()=>p?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...t},[t,s,o,V,p]),Re=j.useMemo(()=>({position:"absolute",pointerEvents:F}),[F]);j.useLayoutEffect(()=>{if(ce.current=!1,p){var $e;($e=fe.current)==null||$e.render(j.createElement("div",{ref:Q,style:Ne},j.createElement("div",{ref:W,style:Re},j.createElement("div",{ref:k,className:i,style:t,children:n}))))}else{var rt;(rt=fe.current)==null||rt.render(j.createElement("div",{ref:k,style:Ne,className:i,children:n}))}});const Xe=j.useRef(!0);Bf($e=>{if(he.current){L.updateMatrixWorld(),he.current.updateWorldMatrix(!0,!1);const rt=p?Z.current:C(he.current,L,V);if(p||Math.abs(U.current-L.zoom)>e||Math.abs(Z.current[0]-rt[0])>e||Math.abs(Z.current[1]-rt[1])>e){const De=fV(he.current,L);let Fe=!1;Ee&&(Array.isArray(m)?Fe=m.map(Ze=>Ze.current):m!=="blending"&&(Fe=[B]));const K=Xe.current;if(Fe){const Ze=pV(he.current,L,ae,Fe);Xe.current=Ze&&!De}else Xe.current=!De;K!==Xe.current&&(v?v(!Xe.current):ve.style.display=Xe.current?"block":"none");const gt=Math.floor(x[0]/2),Ue=m?Ee?[x[0],gt]:[gt-1,0]:x;if(ve.style.zIndex=`${gV(he.current,L,Ue)}`,p){const[Ze,je]=[V.width/2,V.height/2],Et=L.projectionMatrix.elements[5]*je,{isOrthographicCamera:Ye,top:J,left:z,bottom:pe,right:Te}=L,Oe=vV(L.matrixWorldInverse),Ie=Ye?`scale(${Et})translate(${dS(-(Te+z)/2)}px,${dS((J+pe)/2)}px)`:`translateZ(${Et}px)`;let ot=he.current.matrixWorld;d&&(ot=L.matrixWorldInverse.clone().transpose().copyPosition(ot).scale(he.current.scale),ot.elements[3]=ot.elements[7]=ot.elements[11]=0,ot.elements[15]=1),ve.style.width=V.width+"px",ve.style.height=V.height+"px",ve.style.perspective=Ye?"":`${Et}px`,Q.current&&W.current&&(Q.current.style.transform=`${Ie}${Oe}translate(${Ze}px,${je}px)`,W.current.style.transform=yV(ot,1/((c||10)/400)))}else{const Ze=c===void 0?1:mV(he.current,L)*c;ve.style.transform=`translate3d(${rt[0]}px,${rt[1]}px,0) scale(${Ze})`}Z.current=rt,U.current=L.zoom}}if(!Ee&&Le.current&&!ce.current)if(p){if(Q.current){const rt=Q.current.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const{isOrthographicCamera:De}=L;if(De||w)N.scale&&(Array.isArray(N.scale)?N.scale instanceof X?Le.current.scale.copy(N.scale.clone().divideScalar(1)):Le.current.scale.set(1/N.scale[0],1/N.scale[1],1/N.scale[2]):Le.current.scale.setScalar(1/N.scale));else{const Fe=(c||10)/400,K=rt.clientWidth*Fe,gt=rt.clientHeight*Fe;Le.current.scale.set(K,gt,1)}ce.current=!0}}}else{const rt=ve.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const De=1/ge.factor,Fe=rt.clientWidth*De,K=rt.clientHeight*De;Le.current.scale.set(Fe,K,1),ce.current=!0}Le.current.lookAt($e.camera.position)}});const it=j.useMemo(()=>({vertexShader:p?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[p]);return j.createElement("group",ll({},N,{ref:he}),m&&!Ee&&j.createElement("mesh",{castShadow:y,receiveShadow:S,ref:Le},w||j.createElement("planeGeometry",null),M||j.createElement("shaderMaterial",{side:Os,vertexShader:it.vertexShader,fragmentShader:it.fragmentShader})))}),WT=n=>{let e;const t=new Set,i=(d,p)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const v=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:d=>(t.add(d),()=>t.delete(d))},c=e=n(i,r,l);return l},AV=n=>n?WT(n):WT,SV=n=>n;function wV(n,e=SV){const t=WA.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return WA.useDebugValue(t),t}const jT=n=>{const e=AV(n),t=i=>wV(e,i);return Object.assign(t,e),t},EV=n=>n?jT(n):jT;let Kp=0;const MV=EV(n=>(Jh.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Kp)/(i-Kp)*100})},Jh.onLoad=()=>{n({active:!1})},Jh.onError=e=>n(t=>({errors:[...t.errors,e]})),Jh.onProgress=(e,t,i)=>{t===i&&(Kp=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Kp)/(i-Kp)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function sf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function JT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XT(Object(t),!0).forEach(function(i){sf(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XT(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new Be;new Be;function KP(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ds=function n(e,t,i){var r=this;KP(this,n),sf(this,"dot2",function(s,o){return r.x*s+r.y*o}),sf(this,"dot3",function(s,o,l){return r.x*s+r.y*o+r.z*l}),this.x=e,this.y=t,this.z=i},TV=[new Ds(1,1,0),new Ds(-1,1,0),new Ds(1,-1,0),new Ds(-1,-1,0),new Ds(1,0,1),new Ds(-1,0,1),new Ds(1,0,-1),new Ds(-1,0,-1),new Ds(0,1,1),new Ds(0,-1,1),new Ds(0,1,-1),new Ds(0,-1,-1)],KT=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],YT=new Array(512),qT=new Array(512),CV=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=KT[t]^e&255:i=KT[t]^e>>8&255,YT[t]=YT[t+256]=i,qT[t]=qT[t+256]=TV[i%12]}};CV(0);function bV(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function QT(n){var e=bV(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var RV=function n(e){var t=this;KP(this,n),sf(this,"seed",0),sf(this,"init",function(i){t.seed=i,t.value=QT(i)}),sf(this,"value",QT(this.seed)),this.init(e)},IV=new RV(Math.random()),PV={radius:1,center:[0,0,0]};function DV(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:IV,i=JT(JT({},PV),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var l=Math.pow(t.value(),.3333333333333333),c=t.value()*2-1,d=t.value()*2-1,p=t.value()*2-1,m=Math.sqrt(c*c+d*d+p*p);c=l*c/m,d=l*d/m,p=l*p/m,n[o]=c*r+s[0],n[o+1]=d*r+s[1],n[o+2]=p*r+s[2]}return n}const BV=parseInt(Tf.replace(/\D+/g,""));function $T(n,e){if(e===fI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===dy||e===cw){let t=n.getIndex();if(t===null){const o=[],l=n.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===dy)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var LV=Object.defineProperty,NV=(n,e,t)=>e in n?LV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,FV=(n,e,t)=>(NV(n,e+"",t),t);class OV{constructor(){FV(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var kV=Object.defineProperty,UV=(n,e,t)=>e in n?kV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kt=(n,e,t)=>(UV(n,typeof e!="symbol"?e+"":e,t),t);const c0=new ud,ZT=new Va,HV=Math.cos(70*(Math.PI/180)),eC=(n,e)=>(n%e+e)%e;let zV=class extends OV{constructor(e,t){super(),kt(this,"object"),kt(this,"domElement"),kt(this,"enabled",!0),kt(this,"target",new X),kt(this,"minDistance",0),kt(this,"maxDistance",1/0),kt(this,"minZoom",0),kt(this,"maxZoom",1/0),kt(this,"minPolarAngle",0),kt(this,"maxPolarAngle",Math.PI),kt(this,"minAzimuthAngle",-1/0),kt(this,"maxAzimuthAngle",1/0),kt(this,"enableDamping",!1),kt(this,"dampingFactor",.05),kt(this,"enableZoom",!0),kt(this,"zoomSpeed",1),kt(this,"enableRotate",!0),kt(this,"rotateSpeed",1),kt(this,"enablePan",!0),kt(this,"panSpeed",1),kt(this,"screenSpacePanning",!0),kt(this,"keyPanSpeed",7),kt(this,"zoomToCursor",!1),kt(this,"autoRotate",!1),kt(this,"autoRotateSpeed",2),kt(this,"reverseOrbit",!1),kt(this,"reverseHorizontalOrbit",!1),kt(this,"reverseVerticalOrbit",!1),kt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),kt(this,"mouseButtons",{LEFT:Mu.ROTATE,MIDDLE:Mu.DOLLY,RIGHT:Mu.PAN}),kt(this,"touches",{ONE:Tu.ROTATE,TWO:Tu.DOLLY_PAN}),kt(this,"target0"),kt(this,"position0"),kt(this,"zoom0"),kt(this,"_domElementKeyEvents",null),kt(this,"getPolarAngle"),kt(this,"getAzimuthalAngle"),kt(this,"setPolarAngle"),kt(this,"setAzimuthalAngle"),kt(this,"getDistance"),kt(this,"getZoomScale"),kt(this,"listenToKeyEvents"),kt(this,"stopListenToKeyEvents"),kt(this,"saveState"),kt(this,"reset"),kt(this,"update"),kt(this,"connect"),kt(this,"dispose"),kt(this,"dollyIn"),kt(this,"dollyOut"),kt(this,"getScale"),kt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=te=>{let be=eC(te,2*Math.PI),tt=p.phi;tt<0&&(tt+=2*Math.PI),be<0&&(be+=2*Math.PI);let ee=Math.abs(be-tt);2*Math.PI-ee<ee&&(be<tt?be+=2*Math.PI:tt+=2*Math.PI),m.phi=be-tt,i.update()},this.setAzimuthalAngle=te=>{let be=eC(te,2*Math.PI),tt=p.theta;tt<0&&(tt+=2*Math.PI),be<0&&(be+=2*Math.PI);let ee=Math.abs(be-tt);2*Math.PI-ee<ee&&(be<tt?be+=2*Math.PI:tt+=2*Math.PI),m.theta=be-tt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=te=>{te.addEventListener("keydown",qe),this._domElementKeyEvents=te},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",qe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),c=l.NONE},this.update=(()=>{const te=new X,be=new X(0,1,0),tt=new Hi().setFromUnitVectors(e.up,be),ee=tt.clone().invert(),Ve=new X,Se=new Hi,Pe=2*Math.PI;return function(){const nt=i.object.position;tt.setFromUnitVectors(e.up,be),ee.copy(tt).invert(),te.copy(nt).sub(i.target),te.applyQuaternion(tt),p.setFromVector3(te),i.autoRotate&&c===l.NONE&&ge(ae()),i.enableDamping?(p.theta+=m.theta*i.dampingFactor,p.phi+=m.phi*i.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let It=i.minAzimuthAngle,cn=i.maxAzimuthAngle;isFinite(It)&&isFinite(cn)&&(It<-Math.PI?It+=Pe:It>Math.PI&&(It-=Pe),cn<-Math.PI?cn+=Pe:cn>Math.PI&&(cn-=Pe),It<=cn?p.theta=Math.max(It,Math.min(cn,p.theta)):p.theta=p.theta>(It+cn)/2?Math.max(It,p.theta):Math.min(cn,p.theta)),p.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,p.phi)),p.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(y,i.dampingFactor):i.target.add(y),i.zoomToCursor&&L||i.object.isOrthographicCamera?p.radius=Le(p.radius):p.radius=Le(p.radius*v),te.setFromSpherical(p),te.applyQuaternion(ee),nt.copy(i.target).add(te),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(m.theta*=1-i.dampingFactor,m.phi*=1-i.dampingFactor,y.multiplyScalar(1-i.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let Cn=!1;if(i.zoomToCursor&&L){let Zt=null;if(i.object instanceof jn&&i.object.isPerspectiveCamera){const Jn=te.length();Zt=Le(Jn*v);const Zn=Jn-Zt;i.object.position.addScaledVector(k,Zn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Jn=new X(H.x,H.y,0);Jn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix(),Cn=!0;const Zn=new X(H.x,H.y,0);Zn.unproject(i.object),i.object.position.sub(Zn).add(Jn),i.object.updateMatrixWorld(),Zt=te.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Zt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Zt).add(i.object.position):(c0.origin.copy(i.object.position),c0.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(c0.direction))<HV?e.lookAt(i.target):(ZT.setFromNormalAndCoplanarPoint(i.object.up,i.target),c0.intersectPlane(ZT,i.target))))}else i.object instanceof go&&i.object.isOrthographicCamera&&(Cn=v!==1,Cn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/v)),i.object.updateProjectionMatrix()));return v=1,L=!1,Cn||Ve.distanceToSquared(i.object.position)>d||8*(1-Se.dot(i.object.quaternion))>d?(i.dispatchEvent(r),Ve.copy(i.object.position),Se.copy(i.object.quaternion),Cn=!1,!0):!1}})(),this.connect=te=>{i.domElement=te,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ze),i.domElement.addEventListener("pointerdown",z),i.domElement.addEventListener("pointercancel",Te),i.domElement.addEventListener("wheel",ot)},this.dispose=()=>{var te,be,tt,ee,Ve,Se;i.domElement&&(i.domElement.style.touchAction="auto"),(te=i.domElement)==null||te.removeEventListener("contextmenu",ze),(be=i.domElement)==null||be.removeEventListener("pointerdown",z),(tt=i.domElement)==null||tt.removeEventListener("pointercancel",Te),(ee=i.domElement)==null||ee.removeEventListener("wheel",ot),(Ve=i.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",pe),(Se=i.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",Te),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",qe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const d=1e-6,p=new sS,m=new sS;let v=1;const y=new X,S=new Be,M=new Be,w=new Be,x=new Be,C=new Be,b=new Be,P=new Be,F=new Be,N=new Be,k=new X,H=new Be;let L=!1;const B=[],V={};function ae(){return 2*Math.PI/60/60*i.autoRotateSpeed}function re(){return Math.pow(.95,i.zoomSpeed)}function ge(te){i.reverseOrbit||i.reverseHorizontalOrbit?m.theta+=te:m.theta-=te}function ve(te){i.reverseOrbit||i.reverseVerticalOrbit?m.phi+=te:m.phi-=te}const fe=(()=>{const te=new X;return function(tt,ee){te.setFromMatrixColumn(ee,0),te.multiplyScalar(-tt),y.add(te)}})(),he=(()=>{const te=new X;return function(tt,ee){i.screenSpacePanning===!0?te.setFromMatrixColumn(ee,1):(te.setFromMatrixColumn(ee,0),te.crossVectors(i.object.up,te)),te.multiplyScalar(tt),y.add(te)}})(),U=(()=>{const te=new X;return function(tt,ee){const Ve=i.domElement;if(Ve&&i.object instanceof jn&&i.object.isPerspectiveCamera){const Se=i.object.position;te.copy(Se).sub(i.target);let Pe=te.length();Pe*=Math.tan(i.object.fov/2*Math.PI/180),fe(2*tt*Pe/Ve.clientHeight,i.object.matrix),he(2*ee*Pe/Ve.clientHeight,i.object.matrix)}else Ve&&i.object instanceof go&&i.object.isOrthographicCamera?(fe(tt*(i.object.right-i.object.left)/i.object.zoom/Ve.clientWidth,i.object.matrix),he(ee*(i.object.top-i.object.bottom)/i.object.zoom/Ve.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Z(te){i.object instanceof jn&&i.object.isPerspectiveCamera||i.object instanceof go&&i.object.isOrthographicCamera?v=te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(te){Z(v/te)}function W(te){Z(v*te)}function ie(te){if(!i.zoomToCursor||!i.domElement)return;L=!0;const be=i.domElement.getBoundingClientRect(),tt=te.clientX-be.left,ee=te.clientY-be.top,Ve=be.width,Se=be.height;H.x=tt/Ve*2-1,H.y=-(ee/Se)*2+1,k.set(H.x,H.y,1).unproject(i.object).sub(i.object.position).normalize()}function Le(te){return Math.max(i.minDistance,Math.min(i.maxDistance,te))}function ce(te){S.set(te.clientX,te.clientY)}function Ee(te){ie(te),P.set(te.clientX,te.clientY)}function Ne(te){x.set(te.clientX,te.clientY)}function Re(te){M.set(te.clientX,te.clientY),w.subVectors(M,S).multiplyScalar(i.rotateSpeed);const be=i.domElement;be&&(ge(2*Math.PI*w.x/be.clientHeight),ve(2*Math.PI*w.y/be.clientHeight)),S.copy(M),i.update()}function Xe(te){F.set(te.clientX,te.clientY),N.subVectors(F,P),N.y>0?Q(re()):N.y<0&&W(re()),P.copy(F),i.update()}function it(te){C.set(te.clientX,te.clientY),b.subVectors(C,x).multiplyScalar(i.panSpeed),U(b.x,b.y),x.copy(C),i.update()}function $e(te){ie(te),te.deltaY<0?W(re()):te.deltaY>0&&Q(re()),i.update()}function rt(te){let be=!1;switch(te.code){case i.keys.UP:U(0,i.keyPanSpeed),be=!0;break;case i.keys.BOTTOM:U(0,-i.keyPanSpeed),be=!0;break;case i.keys.LEFT:U(i.keyPanSpeed,0),be=!0;break;case i.keys.RIGHT:U(-i.keyPanSpeed,0),be=!0;break}be&&(te.preventDefault(),i.update())}function De(){if(B.length==1)S.set(B[0].pageX,B[0].pageY);else{const te=.5*(B[0].pageX+B[1].pageX),be=.5*(B[0].pageY+B[1].pageY);S.set(te,be)}}function Fe(){if(B.length==1)x.set(B[0].pageX,B[0].pageY);else{const te=.5*(B[0].pageX+B[1].pageX),be=.5*(B[0].pageY+B[1].pageY);x.set(te,be)}}function K(){const te=B[0].pageX-B[1].pageX,be=B[0].pageY-B[1].pageY,tt=Math.sqrt(te*te+be*be);P.set(0,tt)}function gt(){i.enableZoom&&K(),i.enablePan&&Fe()}function Ue(){i.enableZoom&&K(),i.enableRotate&&De()}function Ze(te){if(B.length==1)M.set(te.pageX,te.pageY);else{const tt=ft(te),ee=.5*(te.pageX+tt.x),Ve=.5*(te.pageY+tt.y);M.set(ee,Ve)}w.subVectors(M,S).multiplyScalar(i.rotateSpeed);const be=i.domElement;be&&(ge(2*Math.PI*w.x/be.clientHeight),ve(2*Math.PI*w.y/be.clientHeight)),S.copy(M)}function je(te){if(B.length==1)C.set(te.pageX,te.pageY);else{const be=ft(te),tt=.5*(te.pageX+be.x),ee=.5*(te.pageY+be.y);C.set(tt,ee)}b.subVectors(C,x).multiplyScalar(i.panSpeed),U(b.x,b.y),x.copy(C)}function Et(te){const be=ft(te),tt=te.pageX-be.x,ee=te.pageY-be.y,Ve=Math.sqrt(tt*tt+ee*ee);F.set(0,Ve),N.set(0,Math.pow(F.y/P.y,i.zoomSpeed)),Q(N.y),P.copy(F)}function Ye(te){i.enableZoom&&Et(te),i.enablePan&&je(te)}function J(te){i.enableZoom&&Et(te),i.enableRotate&&Ze(te)}function z(te){var be,tt;i.enabled!==!1&&(B.length===0&&((be=i.domElement)==null||be.ownerDocument.addEventListener("pointermove",pe),(tt=i.domElement)==null||tt.ownerDocument.addEventListener("pointerup",Te)),vt(te),te.pointerType==="touch"?ut(te):Oe(te))}function pe(te){i.enabled!==!1&&(te.pointerType==="touch"?jt(te):Ie(te))}function Te(te){var be,tt,ee;Pt(te),B.length===0&&((be=i.domElement)==null||be.releasePointerCapture(te.pointerId),(tt=i.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",pe),(ee=i.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",Te)),i.dispatchEvent(o),c=l.NONE}function Oe(te){let be;switch(te.button){case 0:be=i.mouseButtons.LEFT;break;case 1:be=i.mouseButtons.MIDDLE;break;case 2:be=i.mouseButtons.RIGHT;break;default:be=-1}switch(be){case Mu.DOLLY:if(i.enableZoom===!1)return;Ee(te),c=l.DOLLY;break;case Mu.ROTATE:if(te.ctrlKey||te.metaKey||te.shiftKey){if(i.enablePan===!1)return;Ne(te),c=l.PAN}else{if(i.enableRotate===!1)return;ce(te),c=l.ROTATE}break;case Mu.PAN:if(te.ctrlKey||te.metaKey||te.shiftKey){if(i.enableRotate===!1)return;ce(te),c=l.ROTATE}else{if(i.enablePan===!1)return;Ne(te),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(s)}function Ie(te){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;Re(te);break;case l.DOLLY:if(i.enableZoom===!1)return;Xe(te);break;case l.PAN:if(i.enablePan===!1)return;it(te);break}}function ot(te){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(te.preventDefault(),i.dispatchEvent(s),$e(te),i.dispatchEvent(o))}function qe(te){i.enabled===!1||i.enablePan===!1||rt(te)}function ut(te){switch(Lt(te),B.length){case 1:switch(i.touches.ONE){case Tu.ROTATE:if(i.enableRotate===!1)return;De(),c=l.TOUCH_ROTATE;break;case Tu.PAN:if(i.enablePan===!1)return;Fe(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case Tu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;gt(),c=l.TOUCH_DOLLY_PAN;break;case Tu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ue(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(s)}function jt(te){switch(Lt(te),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ze(te),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;je(te),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ye(te),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;J(te),i.update();break;default:c=l.NONE}}function ze(te){i.enabled!==!1&&te.preventDefault()}function vt(te){B.push(te)}function Pt(te){delete V[te.pointerId];for(let be=0;be<B.length;be++)if(B[be].pointerId==te.pointerId){B.splice(be,1);return}}function Lt(te){let be=V[te.pointerId];be===void 0&&(be=new Be,V[te.pointerId]=be),be.set(te.pageX,te.pageY)}function ft(te){const be=te.pointerId===B[0].pointerId?B[1]:B[0];return V[be.pointerId]}this.dollyIn=(te=re())=>{W(te),i.update()},this.dollyOut=(te=re())=>{Q(te),i.update()},this.getScale=()=>v,this.setScale=te=>{Z(te),i.update()},this.getZoomScale=()=>re(),t!==void 0&&this.connect(t),this.update()}};function vy(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Uu="srgb",el="srgb-linear",tC=3001,GV=3e3;class Yw extends pr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new JV(t)}),this.register(function(t){return new KV(t)}),this.register(function(t){return new i9(t)}),this.register(function(t){return new r9(t)}),this.register(function(t){return new s9(t)}),this.register(function(t){return new qV(t)}),this.register(function(t){return new QV(t)}),this.register(function(t){return new $V(t)}),this.register(function(t){return new ZV(t)}),this.register(function(t){return new XV(t)}),this.register(function(t){return new e9(t)}),this.register(function(t){return new YV(t)}),this.register(function(t){return new n9(t)}),this.register(function(t){return new t9(t)}),this.register(function(t){return new WV(t)}),this.register(function(t){return new o9(t)}),this.register(function(t){return new a9(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const d=lc.extractUrlBase(e);o=lc.resolveURL(d,this.path)}else o=lc.extractUrlBase(e);this.manager.itemStart(e);const l=function(d){r?r(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},c=new ms(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){try{s.parse(d,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(vy(new Uint8Array(e.slice(0,4)))===YP){try{o[un.KHR_BINARY_GLTF]=new l9(e)}catch(p){r&&r(p);return}s=JSON.parse(o[un.KHR_BINARY_GLTF].content)}else s=JSON.parse(vy(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new A9(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const p=this.pluginCallbacks[d](c);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const p=s.extensionsUsed[d],m=s.extensionsRequired||[];switch(p){case un.KHR_MATERIALS_UNLIT:o[p]=new jV;break;case un.KHR_DRACO_MESH_COMPRESSION:o[p]=new c9(s,this.dracoLoader);break;case un.KHR_TEXTURE_TRANSFORM:o[p]=new u9;break;case un.KHR_MESH_QUANTIZATION:o[p]=new d9;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function VV(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class WV{constructor(e){this.parser=e,this.name=un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const p=new st(16777215);c.color!==void 0&&p.setRGB(c.color[0],c.color[1],c.color[2],el);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":d=new kw(p),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new Ow(p),d.distance=m;break;case"spot":d=new Fw(p),d.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,d.angle=c.spot.outerConeAngle,d.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return d.position.set(0,0,0),d.decay=2,Ga(d,c),c.intensity!==void 0&&(d.intensity=c.intensity),d.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(d),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return i._getNodeRef(t.cache,l,c)})}}class jV{constructor(){this.name=un.KHR_MATERIALS_UNLIT}getMaterialType(){return us}extendParams(e,t,i){const r=[];e.color=new st(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],el),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Uu))}return Promise.all(r)}}class XV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class JV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Be(l,l)}return Promise.all(s)}}class KV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class YV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class qV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new st(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],el)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Uu)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class QV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class $V{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new st().setRGB(l[0],l[1],l[2],el),Promise.all(s)}}class ZV{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class e9{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new st().setRGB(l[0],l[1],l[2],el),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Uu)),Promise.all(s)}}class t9{constructor(e){this.parser=e,this.name=un.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class n9{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Us}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class i9{constructor(e){this.parser=e,this.name=un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class r9{constructor(e){this.parser=e,this.name=un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=i.textureLoader;if(l.uri){const d=i.options.manager.getHandler(l.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class s9{constructor(e){this.parser=e,this.name=un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=i.textureLoader;if(l.uri){const d=i.options.manager.getHandler(l.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class o9{constructor(e){this.name=un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const c=r.byteOffset||0,d=r.byteLength||0,p=r.count,m=r.byteStride,v=new Uint8Array(l,c,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,m,v,r.mode,r.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(p*m);return o.decodeGltfBuffer(new Uint8Array(y),p,m,v,r.mode,r.filter),y})})}else return null}}class a9{constructor(e){this.name=un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const d of r.primitives)if(d.mode!==Ns.TRIANGLES&&d.mode!==Ns.TRIANGLE_STRIP&&d.mode!==Ns.TRIANGLE_FAN&&d.mode!==void 0)return null;const o=i.extensions[this.name].attributes,l=[],c={};for(const d in o)l.push(this.parser.getDependency("accessor",o[d]).then(p=>(c[d]=p,c[d])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(d=>{const p=d.pop(),m=p.isGroup?p.children:[p],v=d[0].count,y=[];for(const S of m){const M=new Nt,w=new X,x=new Hi,C=new X(1,1,1),b=new _w(S.geometry,S.material,v);for(let P=0;P<v;P++)c.TRANSLATION&&w.fromBufferAttribute(c.TRANSLATION,P),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,P),c.SCALE&&C.fromBufferAttribute(c.SCALE,P),b.setMatrixAt(P,M.compose(w,x,C));for(const P in c)if(P==="_COLOR_0"){const F=c[P];b.instanceColor=new Zu(F.array,F.itemSize,F.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&S.geometry.setAttribute(P,c[P]);fn.prototype.copy.call(b,S),this.parser.assignFinalMaterial(b),y.push(b)}return p.isGroup?(p.clear(),p.add(...y),p):y[0]}))}}const YP="glTF",Yp=12,nC={JSON:1313821514,BIN:5130562};class l9{constructor(e){this.name=un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Yp);if(this.header={magic:vy(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==YP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Yp,r=new DataView(e,Yp);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===nC.JSON){const c=new Uint8Array(e,Yp+s,o);this.content=vy(c)}else if(l===nC.BIN){const c=Yp+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class c9{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},c={},d={};for(const p in o){const m=hS[p]||p.toLowerCase();l[m]=o[p]}for(const p in e.attributes){const m=hS[p]||p.toLowerCase();if(o[p]!==void 0){const v=i.accessors[e.attributes[p]],y=of[v.componentType];d[m]=y.name,c[m]=v.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(m,v){r.decodeDracoFile(p,function(y){for(const S in y.attributes){const M=y.attributes[S],w=c[S];w!==void 0&&(M.normalized=w)}m(y)},l,d,el,v)})})}}class u9{constructor(){this.name=un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class d9{constructor(){this.name=un.KHR_MESH_QUANTIZATION}}class qP extends Pf{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=l*2,d=l*3,p=r-t,m=(i-t)/p,v=m*m,y=v*m,S=e*d,M=S-d,w=-2*y+3*v,x=y-v,C=1-w,b=x-v+m;for(let P=0;P!==l;P++){const F=o[M+P+l],N=o[M+P+c]*p,k=o[S+P+l],H=o[S+P]*p;s[P]=C*F+b*N+w*k+x*H}return s}}const h9=new Hi;class f9 extends qP{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return h9.fromArray(s).normalize().toArray(s),s}}const Ns={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},of={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},iC={9728:Ui,9729:di,9984:ky,9985:nf,9986:Bu,9987:ks},rC={33071:cs,33648:uf,10497:fc},uA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...BV>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ec={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},p9={CUBICSPLINE:void 0,LINEAR:ff,STEP:hf},dA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function m9(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new og({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$o})),n.DefaultMaterial}function Su(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ga(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function g9(n,e,t){let i=!1,r=!1,s=!1;for(let d=0,p=e.length;d<p;d++){const m=e[d];if(m.POSITION!==void 0&&(i=!0),m.NORMAL!==void 0&&(r=!0),m.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],l=[],c=[];for(let d=0,p=e.length;d<p;d++){const m=e[d];if(i){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):n.attributes.position;o.push(v)}if(r){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):n.attributes.normal;l.push(v)}if(s){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):n.attributes.color;c.push(v)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(d){const p=d[0],m=d[1],v=d[2];return i&&(n.morphAttributes.position=p),r&&(n.morphAttributes.normal=m),s&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function v9(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function y9(n){let e;const t=n.extensions&&n.extensions[un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+hA(t.attributes):e=n.indices+":"+hA(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+hA(n.targets[i]);return e}function hA(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function fS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function _9(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const x9=new Nt;class A9{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new VV,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new sP(this.options.manager):this.textureLoader=new fP(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ms(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Su(s,l,r),Ga(l,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,l)=>{const c=this.associations.get(o);c!=null&&this.associations.set(l,c);for(const[d,p]of o.children.entries())s(p,l.children[d])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[un.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(lc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=uA[r.type],l=of[r.componentType],c=r.normalized===!0,d=new l(r.count*o);return Promise.resolve(new _n(d,o,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],c=uA[r.type],d=of[r.componentType],p=d.BYTES_PER_ELEMENT,m=p*c,v=r.byteOffset||0,y=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,S=r.normalized===!0;let M,w;if(y&&y!==m){const x=Math.floor(v/y),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count;let b=t.cache.get(C);b||(M=new d(l,x*y,r.count*y/p),b=new Zm(M,y/p),t.cache.add(C,b)),w=new pc(b,c,v%y/p,S)}else l===null?M=new d(r.count*c):M=new d(l,v,r.count*c),w=new _n(M,c,S);if(r.sparse!==void 0){const x=uA.SCALAR,C=of[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,P=r.sparse.values.byteOffset||0,F=new C(o[1],b,r.sparse.count*x),N=new d(o[2],P,r.sparse.count*c);l!==null&&(w=new _n(w.array.slice(),w.itemSize,w.normalized));for(let k=0,H=F.length;k<H;k++){const L=F[k];if(w.setX(L,N[k*c]),c>=2&&w.setY(L,N[k*c+1]),c>=3&&w.setZ(L,N[k*c+2]),c>=4&&w.setW(L,N[k*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const c=i.manager.getHandler(o.uri);c!==null&&(l=c)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],l=s.images[t],c=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const d=this.loadImageSource(t,i).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const v=(s.samplers||{})[o.sampler]||{};return p.magFilter=iC[v.magFilter]||di,p.minFilter=iC[v.minFilter]||ks,p.wrapS=rC[v.wrapS]||fc,p.wrapT=rC[v.wrapT]||fc,r.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=d,d}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=r.images[e],l=self.URL||self.webkitURL;let c=o.uri||"",d=!1;if(o.bufferView!==void 0)c=i.getDependency("bufferView",o.bufferView).then(function(m){d=!0;const v=new Blob([m],{type:o.mimeType});return c=l.createObjectURL(v),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(m){return new Promise(function(v,y){let S=v;t.isImageBitmapLoader===!0&&(S=function(M){const w=new Hn(M);w.needsUpdate=!0,v(w)}),t.load(lc.resolveURL(m,s.path),S,void 0,y)})}).then(function(m){return d===!0&&l.revokeObjectURL(c),Ga(m,o),m.userData.mimeType=o.mimeType||_9(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=p,p}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[un.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[un.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=s.associations.get(o);o=s.extensions[un.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===tC?Uu:el),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Uu?tC:GV),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new ng,xi.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(l,c)),i=c}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let c=this.cache.get(l);c||(c=new fr,xi.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(l,c)),i=c}if(r||s||o){let l="ClonedMaterial:"+i.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return og}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const l={},c=s.extensions||{},d=[];if(c[un.KHR_MATERIALS_UNLIT]){const m=r[un.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),d.push(m.extendParams(l,s,t))}else{const m=s.pbrMetallicRoughness||{};if(l.color=new st(1,1,1),l.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],el),l.opacity=v[3]}m.baseColorTexture!==void 0&&d.push(t.assignTexture(l,"map",m.baseColorTexture,Uu)),l.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,l.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(l,"metalnessMap",m.metallicRoughnessTexture)),d.push(t.assignTexture(l,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Os);const p=s.alphaMode||dA.OPAQUE;if(p===dA.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===dA.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==us&&(d.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Be(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;l.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==us&&(d.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==us){const m=s.emissiveFactor;l.emissive=new st().setRGB(m[0],m[1],m[2],el)}return s.emissiveTexture!==void 0&&o!==us&&d.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,Uu)),Promise.all(d).then(function(){const m=new o(l);return s.name&&(m.name=s.name),Ga(m,s),t.associations.set(m,{materials:e}),s.extensions&&Su(r,m,s),m})}createUniqueName(e){const t=mn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return sC(c,l,t)})}const o=[];for(let l=0,c=e.length;l<c;l++){const d=e[l],p=y9(d),m=r[p];if(m)o.push(m.promise);else{let v;d.extensions&&d.extensions[un.KHR_DRACO_MESH_COMPRESSION]?v=s(d):v=sC(new qt,d,t),r[p]={primitive:d,promise:v},o.push(v)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,l=[];for(let c=0,d=o.length;c<d;c++){const p=o[c].material===void 0?m9(this.cache):this.getDependency("material",o[c].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(c){const d=c.slice(0,c.length-1),p=c[c.length-1],m=[];for(let y=0,S=p.length;y<S;y++){const M=p[y],w=o[y];let x;const C=d[y];if(w.mode===Ns.TRIANGLES||w.mode===Ns.TRIANGLE_STRIP||w.mode===Ns.TRIANGLE_FAN||w.mode===void 0)x=s.isSkinnedMesh===!0?new yw(M,C):new hi(M,C),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),w.mode===Ns.TRIANGLE_STRIP?x.geometry=$T(x.geometry,cw):w.mode===Ns.TRIANGLE_FAN&&(x.geometry=$T(x.geometry,dy));else if(w.mode===Ns.LINES)x=new wo(M,C);else if(w.mode===Ns.LINE_STRIP)x=new al(M,C);else if(w.mode===Ns.LINE_LOOP)x=new xw(M,C);else if(w.mode===Ns.POINTS)x=new Aw(M,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(x.geometry.morphAttributes).length>0&&v9(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),Ga(x,s),w.extensions&&Su(r,x,w),t.assignFinalMaterial(x),m.push(x)}for(let y=0,S=m.length;y<S;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&Su(r,m[0],s),m[0];const v=new Xa;s.extensions&&Su(r,v,s),t.associations.set(v,{meshes:e});for(let y=0,S=m.length;y<S;y++)v.add(m[y]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new jn(EI.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new go(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ga(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,l=[],c=[];for(let d=0,p=o.length;d<p;d++){const m=o[d];if(m){l.push(m);const v=new Nt;s!==null&&v.fromArray(s.array,d*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new eg(l,c)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],c=[],d=[],p=[];for(let m=0,v=r.channels.length;m<v;m++){const y=r.channels[m],S=r.samplers[y.sampler],M=y.target,w=M.node,x=r.parameters!==void 0?r.parameters[S.input]:S.input,C=r.parameters!==void 0?r.parameters[S.output]:S.output;M.node!==void 0&&(o.push(this.getDependency("node",w)),l.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",C)),d.push(S),p.push(M))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(d),Promise.all(p)]).then(function(m){const v=m[0],y=m[1],S=m[2],M=m[3],w=m[4],x=[];for(let C=0,b=v.length;C<b;C++){const P=v[C],F=y[C],N=S[C],k=M[C],H=w[C];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();const L=i._createAnimationTracks(P,F,N,k,H);if(L)for(let B=0;B<L.length;B++)x.push(L[B])}return new gf(s,void 0,x)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let c=0,d=r.weights.length;c<d;c++)l.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],l=r.children||[];for(let d=0,p=l.length;d<p;d++)o.push(i.getDependency("node",l[d]));const c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(d){const p=d[0],m=d[1],v=d[2];v!==null&&p.traverse(function(y){y.isSkinnedMesh&&y.bind(v,x9)});for(let y=0,S=m.length;y<S;y++)p.add(m[y]);return p})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],c=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(d){return r._getNodeRef(r.cameraCache,s.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){l.push(d)}),this.nodeCache[e]=Promise.all(l).then(function(d){let p;if(s.isBone===!0?p=new Yy:d.length>1?p=new Xa:d.length===1?p=d[0]:p=new fn,p!==d[0])for(let m=0,v=d.length;m<v;m++)p.add(d[m]);if(s.name&&(p.userData.name=s.name,p.name=o),Ga(p,s),s.extensions&&Su(i,p,s),s.matrix!==void 0){const m=new Nt;m.fromArray(s.matrix),p.applyMatrix4(m)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Xa;i.name&&(s.name=r.createUniqueName(i.name)),Ga(s,i),i.extensions&&Su(t,s,i);const o=i.nodes||[],l=[];for(let c=0,d=o.length;c<d;c++)l.push(r.getDependency("node",o[c]));return Promise.all(l).then(function(c){for(let p=0,m=c.length;p<m;p++)s.add(c[p]);const d=p=>{const m=new Map;for(const[v,y]of r.associations)(v instanceof xi||v instanceof Hn)&&m.set(v,y);return p.traverse(v=>{const y=r.associations.get(v);y!=null&&m.set(v,y)}),m};return r.associations=d(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],l=e.name?e.name:e.uuid,c=[];ec[s.path]===ec.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(l);let d;switch(ec[s.path]){case ec.weights:d=td;break;case ec.rotation:d=nd;break;case ec.position:case ec.scale:d=id;break;default:switch(i.itemSize){case 1:d=td;break;case 2:case 3:default:d=id;break}break}const p=r.interpolation!==void 0?p9[r.interpolation]:ff,m=this._getArrayFromAccessor(i);for(let v=0,y=c.length;v<y;v++){const S=new d(c[v]+"."+ec[s.path],t.array,m,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),o.push(S)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=fS(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof nd?f9:qP;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function S9(n,e,t){const i=e.attributes,r=new hr;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],c=l.min,d=l.max;if(c!==void 0&&d!==void 0){if(r.set(new X(c[0],c[1],c[2]),new X(d[0],d[1],d[2])),l.normalized){const p=fS(of[l.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new X,c=new X;for(let d=0,p=s.length;d<p;d++){const m=s[d];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,S=v.max;if(y!==void 0&&S!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(S[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(S[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(S[2]))),v.normalized){const M=fS(of[v.componentType]);c.multiplyScalar(M)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}n.boundingBox=r;const o=new $i;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function sC(n,e,t){const i=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(c){n.setAttribute(l,c)})}for(const o in i){const l=hS[o]||o.toLowerCase();l in n.attributes||r.push(s(i[o],l))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});r.push(o)}return Ga(n,e),S9(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?g9(n,e.targets,t):n})}const fA=new WeakMap;class w9 extends pr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new ms(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const d=t.attributeTypes[c];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=d.name)}const i=JSON.stringify(t);if(fA.has(e)){const c=fA.get(e);if(c.key===i)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(c=>(r=c,new Promise((d,p)=>{r._callbacks[s]={resolve:d,reject:p},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),fA.set(e,{key:i,promise:l}),l}_createGeometry(e){const t=new qt;e.index&&t.setIndex(new _n(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,l=r.itemSize;t.setAttribute(s,new _n(o,l))}return t}_loadLibrary(e,t){const i=new ms(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=E9.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function E9(){let n,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(p){n.onModuleLoaded=function(m){p({draco:m})},DracoDecoderModule(n)});break;case"decode":const c=l.buffer,d=l.taskConfig;e.then(p=>{const m=p.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(c),c.byteLength);try{const S=t(m,v,y,d),M=S.attributes.map(w=>w.array.buffer);S.index&&M.push(S.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:S},M)}catch(S){console.error(S),self.postMessage({type:"error",id:l.id,error:S.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(o,l,c,d){const p=d.attributeIDs,m=d.attributeTypes;let v,y;const S=l.GetEncodedGeometryType(c);if(S===o.TRIANGULAR_MESH)v=new o.Mesh,y=l.DecodeBufferToMesh(c,v);else if(S===o.POINT_CLOUD)v=new o.PointCloud,y=l.DecodeBufferToPointCloud(c,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const M={index:null,attributes:[]};for(const w in p){const x=self[m[w]];let C,b;if(d.useUniqueIDs)b=p[w],C=l.GetAttributeByUniqueId(v,b);else{if(b=l.GetAttributeId(v,o[p[w]]),b===-1)continue;C=l.GetAttribute(v,b)}M.attributes.push(r(o,l,v,w,x,C))}return S===o.TRIANGULAR_MESH&&(M.index=i(o,l,v)),o.destroy(v),M}function i(o,l,c){const p=c.num_faces()*3,m=p*4,v=o._malloc(m);l.GetTrianglesUInt32Array(c,m,v);const y=new Uint32Array(o.HEAPF32.buffer,v,p).slice();return o._free(v),{array:y,itemSize:1}}function r(o,l,c,d,p,m){const v=m.num_components(),S=c.num_points()*v,M=S*p.BYTES_PER_ELEMENT,w=s(o,p),x=o._malloc(M);l.GetAttributeDataArrayForAllPoints(c,m,w,M,x);const C=new p(o.HEAPF32.buffer,x,S).slice();return o._free(x),{name:d,array:C,itemSize:v}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let u0;const pA=()=>{if(u0)return u0;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(l(r),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function l(m){const v=new Uint8Array(m.length);for(let S=0;S<m.length;++S){const M=m.charCodeAt(S);v[S]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let y=0;for(let S=0;S<m.length;++S)v[y++]=v[S]<60?i[v[S]]:(v[S]-60)*64+v[++S];return v.buffer.slice(0,y)}function c(m,v,y,S,M,w){const x=s.exports.sbrk,C=y+3&-4,b=x(C*S),P=x(M.length),F=new Uint8Array(s.exports.memory.buffer);F.set(M,P);const N=m(b,y,S,P,M.length);if(N===0&&w&&w(b,C,S),v.set(F.subarray(b,b+y*S)),x(b-x(0)),N!==0)throw new Error(`Malformed buffer data: ${N}`)}const d={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return u0={ready:o,supported:!0,decodeVertexBuffer(m,v,y,S,M){c(s.exports.meshopt_decodeVertexBuffer,m,v,y,S,s.exports[d[M]])},decodeIndexBuffer(m,v,y,S){c(s.exports.meshopt_decodeIndexBuffer,m,v,y,S)},decodeIndexSequence(m,v,y,S){c(s.exports.meshopt_decodeIndexSequence,m,v,y,S)},decodeGltfBuffer(m,v,y,S,M,w){c(s.exports[p[M]],m,v,y,S,s.exports[d[w]])}},u0},M9=()=>parseInt(Tf.replace(/\D+/g,"")),QP=M9();let d0=null,$P="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function ZP(n=!0,e=!0,t){return i=>{t&&t(i),n&&(d0||(d0=new w9),d0.setDecoderPath(typeof n=="string"?n:$P),i.setDRACOLoader(d0)),e&&i.setMeshoptDecoder(typeof pA=="function"?pA():pA)}}const f_=(n,e,t,i)=>lg(Yw,n,ZP(e,t,i));f_.preload=(n,e,t,i)=>lg.preload(Yw,n,ZP(e,t,i));f_.clear=n=>lg.clear(Yw,n);f_.setDecoderPath=n=>{$P=n};const T9=j.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...d},p)=>{const m=Fs(N=>N.invalidate),v=Fs(N=>N.camera),y=Fs(N=>N.gl),S=Fs(N=>N.events),M=Fs(N=>N.setEvents),w=Fs(N=>N.set),x=Fs(N=>N.get),C=Fs(N=>N.performance),b=e||v,P=i||S.connected||y.domElement,F=j.useMemo(()=>new zV(b),[b]);return Bf(()=>{F.enabled&&F.update()},-1),j.useEffect(()=>(s&&F.connect(s===!0?P:s),F.connect(P),()=>void F.dispose()),[s,P,t,F,m]),j.useEffect(()=>{const N=L=>{m(),t&&C.regress(),o&&o(L)},k=L=>{l&&l(L)},H=L=>{c&&c(L)};return F.addEventListener("change",N),F.addEventListener("start",k),F.addEventListener("end",H),()=>{F.removeEventListener("start",k),F.removeEventListener("end",H),F.removeEventListener("change",N)}},[o,l,c,F,m,M]),j.useEffect(()=>{if(n){const N=x().controls;return w({controls:F}),()=>w({controls:N})}},[n,F]),j.createElement("primitive",ll({ref:p,object:F,enableDamping:r},d))});var mA={exports:{}},gA,oC;function C9(){if(oC)return gA;oC=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gA=n,gA}var vA,aC;function b9(){if(aC)return vA;aC=1;var n=C9();function e(){}function t(){}return t.resetWarningCache=e,vA=function(){function i(o,l,c,d,p,m){if(m!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},vA}var lC;function e2(){return lC||(lC=1,mA.exports=b9()()),mA.exports}const yA=QP>=154?"opaque_fragment":"output_fragment";class R9 extends ng{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${yA}>`,`
        ${r?`#include <${yA}>`:`#extension GL_OES_standard_derivatives : enable
#include <${yA}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${QP>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const I9=j.forwardRef((n,e)=>{const[t]=j.useState(()=>new R9(null));return j.createElement("primitive",ll({},n,{object:t,ref:e,attach:"material"}))});let wu,qp;const P9=j.createContext(null),cC=new Nt,uC=new X,D9=j.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=j.useRef(null);j.useImperativeHandle(r,()=>s.current,[]);const[o,l]=j.useState([]),[[c,d,p]]=j.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);j.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Bf(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),cC.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),wu=0;wu<o.length;wu++)qp=o[wu].current,qp.getWorldPosition(uC).applyMatrix4(cC),uC.toArray(c,wu*3),s.current.geometry.attributes.position.needsUpdate=!0,qp.matrixWorldNeedsUpdate=!0,qp.color.toArray(d,wu*3),s.current.geometry.attributes.color.needsUpdate=!0,p.set([qp.size],wu),s.current.geometry.attributes.size.needsUpdate=!0});const m=j.useMemo(()=>({getParent:()=>s,subscribe:v=>(l(y=>[...y,v]),()=>l(y=>y.filter(S=>S.current!==v.current)))}),[]);return j.createElement("points",ll({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),j.createElement("bufferGeometry",null,j.createElement("bufferAttribute",{attach:"attributes-position",count:c.length/3,array:c,itemSize:3,usage:Wu}),j.createElement("bufferAttribute",{attach:"attributes-color",count:d.length/3,array:d,itemSize:3,usage:Wu}),j.createElement("bufferAttribute",{attach:"attributes-size",count:p.length,array:p,itemSize:1,usage:Wu})),j.createElement(P9.Provider,{value:m},n))}),B9=j.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const l=j.useRef(null);return j.useImperativeHandle(o,()=>l.current,[]),Bf(()=>{const c=l.current.geometry.attributes;c.position.needsUpdate=!0,t&&(c.color.needsUpdate=!0),i&&(c.size.needsUpdate=!0)}),j.createElement("points",ll({ref:l},s),j.createElement("bufferGeometry",null,j.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Wu}),t&&j.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Wu}),i&&j.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Wu})),n)}),L9=j.forwardRef((n,e)=>n.positions instanceof Float32Array?j.createElement(B9,ll({},n,{ref:e})):j.createElement(D9,ll({},n,{ref:e})));function N9({all:n,scene:e,camera:t}){const i=Fs(({gl:o})=>o),r=Fs(({camera:o})=>o),s=Fs(({scene:o})=>o);return j.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(d=>{d.visible===!1&&(o.push(d),d.visible=!0)}),i.compile(e||s,t||r);const l=new gw(128);new mw(.01,1e5,l).update(i,e||s),l.dispose(),o.forEach(d=>d.visible=!1)},[]),null}const F9=()=>{const{progress:n}=MV();return q.jsxs(xV,{children:[q.jsx("span",{className:"canvas-load"}),q.jsxs("p",{style:{fontSize:14,color:"#f1f1f1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},O9=()=>{const{scene:n}=f_("./planet/scene.gltf");return Bf(()=>{n.rotation.y+=.01}),q.jsx("primitive",{object:n,scale:2.5,position:[0,0,0]})},k9=()=>q.jsxs(XP,{shadows:!0,frameloop:"demand",gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[q.jsxs(j.Suspense,{fallback:q.jsx(F9,{}),children:[q.jsx("ambientLight",{intensity:.5}),q.jsx("directionalLight",{position:[5,5,5],intensity:1}),q.jsx(T9,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),q.jsx(O9,{})]}),q.jsx(N9,{all:!0})]}),U9=n=>{const e=j.useRef(),t=DV(new Float32Array(5e3),{radius:1.2});return Bf((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),q.jsx("group",{rotation:[0,0,Math.PI/4],children:q.jsx(L9,{ref:e,positions:t,stride:3,frustumCulled:!0,children:q.jsx(I9,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},H9=()=>q.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:q.jsx(XP,{camera:{position:[0,0,1]},children:q.jsx(j.Suspense,{fallback:null,children:q.jsx(U9,{})})})});function z9(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}function p_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const pS=n=>Array.isArray(n);function t2(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Om(n){return typeof n=="string"||Array.isArray(n)}function dC(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function qw(n,e,t,i){if(typeof e=="function"){const[r,s]=dC(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=dC(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function m_(n,e,t){const i=n.getProps();return qw(i,e,t!==void 0?t:i.custom,n)}const Qw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$w=["initial",...Qw],ug=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pd=new Set(ug),tl=n=>n*1e3,nl=n=>n/1e3,G9={type:"spring",stiffness:500,damping:25,restSpeed:10},V9=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),W9={type:"keyframes",duration:.8},j9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X9=(n,{keyframes:e})=>e.length>2?W9:pd.has(n)?n.startsWith("scale")?V9(e[1]):G9:j9;function Zw(n,e){return n?n[e]||n.default||n:void 0}const J9={skipAnimations:!1,useManualTiming:!1},K9=n=>n!==null;function g_(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(K9),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const hs=n=>n;let mS=hs;function Y9(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(c.schedule(d),n()),d(o)}const c={schedule:(d,p=!1,m=!1)=>{const y=m&&i?e:t;return p&&s.add(d),y.has(d)||y.add(d),d},cancel:d=>{t.delete(d),s.delete(d)},process:d=>{if(o=d,i){r=!0;return}i=!0,[e,t]=[t,e],t.clear(),e.forEach(l),i=!1,r&&(r=!1,c.process(d))}};return c}const h0=["read","resolveKeyframes","update","preRender","render","postRender"],q9=40;function n2(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=h0.reduce((x,C)=>(x[C]=Y9(s),x),{}),{read:l,resolveKeyframes:c,update:d,preRender:p,render:m,postRender:v}=o,y=()=>{const x=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(x-r.timestamp,q9),1),r.timestamp=x,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),p.process(r),m.process(r),v.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(y))},S=()=>{t=!0,i=!0,r.isProcessing||n(y)};return{schedule:h0.reduce((x,C)=>{const b=o[C];return x[C]=(P,F=!1,N=!1)=>(t||S(),b.schedule(P,F,N)),x},{}),cancel:x=>{for(let C=0;C<h0.length;C++)o[h0[C]].cancel(x)},state:r,steps:o}}const{schedule:zn,cancel:mc,state:qi,steps:_A}=n2(typeof requestAnimationFrame<"u"?requestAnimationFrame:hs,!0),i2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Q9=1e-7,$9=12;function Z9(n,e,t,i,r){let s,o,l=0;do o=e+(t-e)/2,s=i2(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>Q9&&++l<$9);return o}function dg(n,e,t,i){if(n===e&&t===i)return hs;const r=s=>Z9(s,0,1,n,t);return s=>s===0||s===1?s:i2(r(s),e,i)}const r2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,s2=n=>e=>1-n(1-e),o2=dg(.33,1.53,.69,.99),e1=s2(o2),a2=r2(e1),l2=n=>(n*=2)<1?.5*e1(n):.5*(2-Math.pow(2,-10*(n-1))),t1=n=>1-Math.sin(Math.acos(n)),c2=s2(t1),u2=r2(t1),d2=n=>/^0[^.\s]+$/u.test(n);function e5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||d2(n):!0}const h2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),f2=n=>e=>typeof e=="string"&&e.startsWith(n),p2=f2("--"),t5=f2("var(--"),n1=n=>t5(n)?n5.test(n.split("/*")[0].trim()):!1,n5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,i5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r5(n){const e=i5.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function m2(n,e,t=1){const[i,r]=r5(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return h2(o)?parseFloat(o):o}return n1(r)?m2(r,e,t+1):r}const cl=(n,e,t)=>t>e?e:t<n?n:t,Lf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},km={...Lf,transform:n=>cl(0,1,n)},f0={...Lf,default:1},hg=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),nc=hg("deg"),Jo=hg("%"),zt=hg("px"),s5=hg("vh"),o5=hg("vw"),hC={...Jo,parse:n=>Jo.parse(n)/100,transform:n=>Jo.transform(n*100)},a5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fC=n=>n===Lf||n===zt,pC=(n,e)=>parseFloat(n.split(", ")[e]),mC=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return pC(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?pC(s[1],n):0}},l5=new Set(["x","y","z"]),c5=ug.filter(n=>!l5.has(n));function u5(n){const e=[];return c5.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const yf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:mC(4,13),y:mC(5,14)};yf.translateX=yf.x;yf.translateY=yf.y;const g2=n=>e=>e.test(n),d5={test:n=>n==="auto",parse:n=>n},v2=[Lf,zt,Jo,nc,o5,s5,d5],gC=n=>v2.find(g2(n)),Ku=new Set;let gS=!1,vS=!1;function y2(){if(vS){const n=Array.from(Ku).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=u5(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var l;(l=i.getValue(s))===null||l===void 0||l.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}vS=!1,gS=!1,Ku.forEach(n=>n.complete()),Ku.clear()}function _2(){Ku.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(vS=!0)})}function h5(){_2(),y2()}class i1{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ku.add(this),gS||(gS=!0,zn.read(_2),zn.resolveKeyframes(y2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const c=i.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ku.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ku.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ym=n=>Math.round(n*1e5)/1e5,r1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function f5(n){return n==null}const p5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,s1=(n,e)=>t=>!!(typeof t=="string"&&p5.test(t)&&t.startsWith(n)||e&&!f5(t)&&Object.prototype.hasOwnProperty.call(t,e)),x2=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,l]=i.match(r1);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},m5=n=>cl(0,255,n),xA={...Lf,transform:n=>Math.round(m5(n))},Hu={test:s1("rgb","red"),parse:x2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+xA.transform(n)+", "+xA.transform(e)+", "+xA.transform(t)+", "+ym(km.transform(i))+")"};function g5(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const yS={test:s1("#"),parse:g5,transform:Hu.transform},qh={test:s1("hsl","hue"),parse:x2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Jo.transform(ym(e))+", "+Jo.transform(ym(t))+", "+ym(km.transform(i))+")"},cr={test:n=>Hu.test(n)||yS.test(n)||qh.test(n),parse:n=>Hu.test(n)?Hu.parse(n):qh.test(n)?qh.parse(n):yS.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Hu.transform(n):qh.transform(n)},v5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function y5(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(r1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(v5))===null||t===void 0?void 0:t.length)||0)>0}const A2="number",S2="color",_5="var",x5="var(",vC="${}",A5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Um(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(A5,c=>(cr.test(c)?(i.color.push(s),r.push(S2),t.push(cr.parse(c))):c.startsWith(x5)?(i.var.push(s),r.push(_5),t.push(c)):(i.number.push(s),r.push(A2),t.push(parseFloat(c))),++s,vC)).split(vC);return{values:t,split:l,indexes:i,types:r}}function w2(n){return Um(n).values}function E2(n){const{split:e,types:t}=Um(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const l=t[o];l===A2?s+=ym(r[o]):l===S2?s+=cr.transform(r[o]):s+=r[o]}return s}}const S5=n=>typeof n=="number"?0:n;function w5(n){const e=w2(n);return E2(n)(e.map(S5))}const gc={test:y5,parse:w2,createTransformer:E2,getAnimatableNone:w5},E5=new Set(["brightness","contrast","saturate","opacity"]);function M5(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(r1)||[];if(!i)return n;const r=t.replace(i,"");let s=E5.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const T5=/\b([a-z-]*)\(.*?\)/gu,_S={...gc,getAnimatableNone:n=>{const e=n.match(T5);return e?e.map(M5).join(" "):n}},C5={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},b5={rotate:nc,rotateX:nc,rotateY:nc,rotateZ:nc,scale:f0,scaleX:f0,scaleY:f0,scaleZ:f0,skew:nc,skewX:nc,skewY:nc,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:km,originX:hC,originY:hC,originZ:zt},yC={...Lf,transform:Math.round},o1={...C5,...b5,zIndex:yC,size:zt,fillOpacity:km,strokeOpacity:km,numOctaves:yC},R5={...o1,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:_S,WebkitFilter:_S},a1=n=>R5[n];function M2(n,e){let t=a1(n);return t!==_S&&(t=gc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const I5=new Set(["auto","none","0"]);function P5(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!I5.has(s)&&Um(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=M2(t,r)}class T2 extends i1{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),n1(d))){const p=m2(d,t.current);p!==void 0&&(e[c]=p),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!a5.has(i)||e.length!==2)return;const[r,s]=e,o=gC(r),l=gC(s);if(o!==l)if(fC(o)&&fC(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)e5(e[r])&&i.push(r);i.length&&P5(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=yf[i](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function l1(n){return typeof n=="function"}let S0;function D5(){S0=void 0}const Ko={now:()=>(S0===void 0&&Ko.set(qi.isProcessing||J9.useManualTiming?qi.timestamp:performance.now()),S0),set:n=>{S0=n,queueMicrotask(D5)}},_C=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(gc.test(n)||n==="0")&&!n.startsWith("url("));function B5(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function L5(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=_C(r,e),l=_C(s,e);return!o||!l?!1:B5(n)||(t==="spring"||l1(t))&&i}const N5=40;class C2{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ko.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>N5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&h5(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Ko.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!L5(e,i,r,s))if(o)this.options.duration=0;else{c==null||c(g_(e,this.options,t)),l==null||l(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,t);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...p},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const _f=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},b2=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(_f(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function R2(n,e){return e?n*(1e3/e):0}const F5=5;function I2(n,e,t){const i=Math.max(e-F5,0);return R2(t-n(i),e-i)}const si={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},AA=.001;function O5({duration:n=si.duration,bounce:e=si.bounce,velocity:t=si.velocity,mass:i=si.mass}){let r,s,o=1-e;o=cl(si.minDamping,si.maxDamping,o),n=cl(si.minDuration,si.maxDuration,nl(n)),o<1?(r=d=>{const p=d*o,m=p*n,v=p-t,y=xS(d,o),S=Math.exp(-m);return AA-v/y*S},s=d=>{const m=d*o*n,v=m*t+t,y=Math.pow(o,2)*Math.pow(d,2)*n,S=Math.exp(-m),M=xS(Math.pow(d,2),o);return(-r(d)+AA>0?-1:1)*((v-y)*S)/M}):(r=d=>{const p=Math.exp(-d*n),m=(d-t)*n+1;return-AA+p*m},s=d=>{const p=Math.exp(-d*n),m=(t-d)*(n*n);return p*m});const l=5/n,c=U5(r,s,l);if(n=tl(n),isNaN(c))return{stiffness:si.stiffness,damping:si.damping,duration:n};{const d=Math.pow(c,2)*i;return{stiffness:d,damping:o*2*Math.sqrt(i*d),duration:n}}}const k5=12;function U5(n,e,t){let i=t;for(let r=1;r<k5;r++)i=i-n(i)/e(i);return i}function xS(n,e){return n*Math.sqrt(1-e*e)}const AS=2e4;function P2(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<AS;)e+=t,i=n.next(e);return e>=AS?1/0:e}const H5=["duration","bounce"],z5=["stiffness","damping","mass"];function xC(n,e){return e.some(t=>n[t]!==void 0)}function G5(n){let e={velocity:si.velocity,stiffness:si.stiffness,damping:si.damping,mass:si.mass,isResolvedFromDuration:!1,...n};if(!xC(n,z5)&&xC(n,H5))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*cl(.05,1,1-n.bounce)*Math.sqrt(r);e={...e,mass:si.mass,stiffness:r,damping:s}}else{const t=O5(n);e={...e,...t,mass:si.mass},e.isResolvedFromDuration=!0}return e}function D2(n=si.visualDuration,e=si.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:p,duration:m,velocity:v,isResolvedFromDuration:y}=G5({...t,velocity:-nl(t.velocity||0)}),S=v||0,M=d/(2*Math.sqrt(c*p)),w=o-s,x=nl(Math.sqrt(c/p)),C=Math.abs(w)<5;i||(i=C?si.restSpeed.granular:si.restSpeed.default),r||(r=C?si.restDelta.granular:si.restDelta.default);let b;if(M<1){const F=xS(x,M);b=N=>{const k=Math.exp(-M*x*N);return o-k*((S+M*x*w)/F*Math.sin(F*N)+w*Math.cos(F*N))}}else if(M===1)b=F=>o-Math.exp(-x*F)*(w+(S+x*w)*F);else{const F=x*Math.sqrt(M*M-1);b=N=>{const k=Math.exp(-M*x*N),H=Math.min(F*N,300);return o-k*((S+M*x*w)*Math.sinh(H)+F*w*Math.cosh(H))/F}}const P={calculatedDuration:y&&m||null,next:F=>{const N=b(F);if(y)l.done=F>=m;else{let k=0;M<1&&(k=F===0?tl(S):I2(b,F,N));const H=Math.abs(k)<=i,L=Math.abs(o-N)<=r;l.done=H&&L}return l.value=l.done?o:N,l},toString:()=>{const F=Math.min(P2(P),AS),N=b2(k=>P.next(F*k).value,F,30);return F+"ms "+N}};return P}function AC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:p}){const m=n[0],v={done:!1,value:m},y=H=>l!==void 0&&H<l||c!==void 0&&H>c,S=H=>l===void 0?c:c===void 0||Math.abs(l-H)<Math.abs(c-H)?l:c;let M=t*e;const w=m+M,x=o===void 0?w:o(w);x!==w&&(M=x-m);const C=H=>-M*Math.exp(-H/i),b=H=>x+C(H),P=H=>{const L=C(H),B=b(H);v.done=Math.abs(L)<=d,v.value=v.done?x:B};let F,N;const k=H=>{y(v.value)&&(F=H,N=D2({keyframes:[v.value,S(v.value)],velocity:I2(b,H,v.value),damping:r,stiffness:s,restDelta:d,restSpeed:p}))};return k(0),{calculatedDuration:null,next:H=>{let L=!1;return!N&&F===void 0&&(L=!0,P(H),k(H)),F!==void 0&&H>=F?N.next(H-F):(!L&&P(H),v)}}}const V5=dg(.42,0,1,1),W5=dg(0,0,.58,1),B2=dg(.42,0,.58,1),j5=n=>Array.isArray(n)&&typeof n[0]!="number",c1=n=>Array.isArray(n)&&typeof n[0]=="number",SC={linear:hs,easeIn:V5,easeInOut:B2,easeOut:W5,circIn:t1,circInOut:u2,circOut:c2,backIn:e1,backInOut:a2,backOut:o2,anticipate:l2},wC=n=>{if(c1(n)){mS(n.length===4);const[e,t,i,r]=n;return dg(e,t,i,r)}else if(typeof n=="string")return mS(SC[n]!==void 0),SC[n];return n},X5=(n,e)=>t=>e(n(t)),fg=(...n)=>n.reduce(X5),$n=(n,e,t)=>n+(e-n)*t;function SA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function J5({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;r=SA(c,l,n+1/3),s=SA(c,l,n),o=SA(c,l,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function yy(n,e){return t=>t>0?e:n}const wA=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},K5=[yS,Hu,qh],Y5=n=>K5.find(e=>e.test(n));function EC(n){const e=Y5(n);if(!e)return!1;let t=e.parse(n);return e===qh&&(t=J5(t)),t}const MC=(n,e)=>{const t=EC(n),i=EC(e);if(!t||!i)return yy(n,e);const r={...t};return s=>(r.red=wA(t.red,i.red,s),r.green=wA(t.green,i.green,s),r.blue=wA(t.blue,i.blue,s),r.alpha=$n(t.alpha,i.alpha,s),Hu.transform(r))},SS=new Set(["none","hidden"]);function q5(n,e){return SS.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Q5(n,e){return t=>$n(n,e,t)}function u1(n){return typeof n=="number"?Q5:typeof n=="string"?n1(n)?yy:cr.test(n)?MC:e8:Array.isArray(n)?L2:typeof n=="object"?cr.test(n)?MC:$5:yy}function L2(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>u1(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function $5(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=u1(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Z5(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][r[o]],c=(t=n.values[l])!==null&&t!==void 0?t:0;i[s]=c,r[o]++}return i}const e8=(n,e)=>{const t=gc.createTransformer(e),i=Um(n),r=Um(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?SS.has(n)&&!r.values.length||SS.has(e)&&!i.values.length?q5(n,e):fg(L2(Z5(i,r),r.values),t):yy(n,e)};function N2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?$n(n,e,t):u1(n)(n,e)}function t8(n,e,t){const i=[],r=t||N2,s=n.length-1;for(let o=0;o<s;o++){let l=r(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||hs:e;l=fg(c,l)}i.push(l)}return i}function n8(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(mS(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=t8(e,i,r),l=o.length,c=d=>{let p=0;if(l>1)for(;p<n.length-2&&!(d<n[p+1]);p++);const m=_f(n[p],n[p+1],d);return o[p](m)};return t?d=>c(cl(n[0],n[s-1],d)):c}function i8(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=_f(0,e,i);n.push($n(t,1,r))}}function r8(n){const e=[0];return i8(e,n.length-1),e}function s8(n,e){return n.map(t=>t*e)}function o8(n,e){return n.map(()=>e||B2).splice(0,n.length-1)}function _y({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=j5(i)?i.map(wC):wC(i),s={done:!1,value:e[0]},o=s8(t&&t.length===e.length?t:r8(e),n),l=n8(o,e,{ease:Array.isArray(r)?r:o8(e,r)});return{calculatedDuration:n,next:c=>(s.value=l(c),s.done=c>=n,s)}}const a8=n=>{const e=({timestamp:t})=>n(t);return{start:()=>zn.update(e,!0),stop:()=>mc(e),now:()=>qi.isProcessing?qi.timestamp:Ko.now()}},l8={decay:AC,inertia:AC,tween:_y,keyframes:_y,spring:D2},c8=n=>n/100;class d1 extends C2{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||i1,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(s,l,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,l=l1(t)?t:l8[t]||_y;let c,d;l!==_y&&typeof e[0]!="number"&&(c=fg(c8,N2(e[0],e[1])),e=[0,100]);const p=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=P2(p));const{calculatedDuration:m}=p,v=m+r,y=v*(i+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:v,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:H}=this.options;return{done:!0,value:H[H.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:p,resolvedDuration:m}=i;if(this.startTime===null)return s.next(0);const{delay:v,repeat:y,repeatType:S,repeatDelay:M,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-v*(this.speed>=0?1:-1),C=this.speed>=0?x<0:x>p;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let b=this.currentTime,P=s;if(y){const H=Math.min(this.currentTime,p)/m;let L=Math.floor(H),B=H%1;!B&&H>=1&&(B=1),B===1&&L--,L=Math.min(L,y+1),!!(L%2)&&(S==="reverse"?(B=1-B,M&&(B-=M/m)):S==="mirror"&&(P=o)),b=cl(0,1,B)*m}const F=C?{done:!1,value:c[0]}:P.next(b);l&&(F.value=l(F.value));let{done:N}=F;!C&&d!==null&&(N=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return k&&r!==void 0&&(F.value=g_(c,this.options,r)),w&&w(F.value),k&&this.finish(),F}get duration(){const{resolved:e}=this;return e?nl(e.calculatedDuration):0}get time(){return nl(this.currentTime)}set time(e){e=tl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=nl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=a8,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const u8=new Set(["opacity","clipPath","filter","transform"]);function h1(n){let e;return()=>(e===void 0&&(e=n()),e)}const d8={linearEasing:void 0};function h8(n,e){const t=h1(n);return()=>{var i;return(i=d8[e])!==null&&i!==void 0?i:t()}}const xy=h8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function F2(n){return!!(typeof n=="function"&&xy()||!n||typeof n=="string"&&(n in wS||xy())||c1(n)||Array.isArray(n)&&n.every(F2))}const rm=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,wS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rm([0,.65,.55,1]),circOut:rm([.55,0,1,.45]),backIn:rm([.31,.01,.66,-.59]),backOut:rm([.33,1.53,.69,.99])};function O2(n,e){if(n)return typeof n=="function"&&xy()?b2(n,e):c1(n)?rm(n):Array.isArray(n)?n.map(t=>O2(t,e)||wS.easeOut):wS[n]}function f8(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:t};c&&(d.offset=c);const p=O2(l,r);return Array.isArray(p)&&(d.easing=p),n.animate(d,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function TC(n,e){n.timeline=e,n.onfinish=null}const p8=h1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ay=10,m8=2e4;function g8(n){return l1(n.type)||n.type==="spring"||!F2(n.ease)}function v8(n,e){const t=new d1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<m8;)i=t.sample(s),r.push(i.value),s+=Ay;return{times:void 0,keyframes:r,duration:s-Ay,ease:"linear"}}const k2={anticipate:l2,backInOut:a2,circInOut:u2};function y8(n){return n in k2}class CC extends C2{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new T2(s,(o,l)=>this.onKeyframesResolved(o,l),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:l,motionValue:c,name:d,startTime:p}=this.options;if(!(!((i=c.owner)===null||i===void 0)&&i.current))return!1;if(typeof o=="string"&&xy()&&y8(o)&&(o=k2[o]),g8(this.options)){const{onComplete:v,onUpdate:y,motionValue:S,element:M,...w}=this.options,x=v8(e,w);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,s=x.times,o=x.ease,l="keyframes"}const m=f8(c.owner.current,d,e,{...this.options,duration:r,times:s,ease:o});return m.startTime=p??this.calcStartTime(),this.pendingTimeline?(TC(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:v}=this.options;c.set(g_(e,this.options,t)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return nl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return nl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=tl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return hs;const{animation:i}=t;TC(i,e)}return hs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:m,element:v,...y}=this.options,S=new d1({...y,keyframes:i,duration:r,type:s,ease:o,times:l,isGenerator:!0}),M=tl(this.time);d.setWithVelocity(S.sample(M-Ay).value,S.sample(M).value,Ay)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:l}=e;return p8()&&i&&u8.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}}const _8=h1(()=>window.ScrollTimeline!==void 0);class x8{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>_8()&&r.attachTimeline?r.attachTimeline(e):t(r));return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function A8({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...p}){return!!Object.keys(p).length}const f1=(n,e,t,i={},r,s)=>o=>{const l=Zw(i,n)||{},c=l.delay||i.delay||0;let{elapsed:d=0}=i;d=d-tl(c);let p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:r};A8(l)||(p={...p,...X9(n,p)}),p.duration&&(p.duration=tl(p.duration)),p.repeatDelay&&(p.repeatDelay=tl(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),m&&!s&&e.get()!==void 0){const v=g_(p.keyframes,l);if(v!==void 0)return zn.update(()=>{p.onUpdate(v),p.onComplete()}),new x8([])}return!s&&CC.supports(p)?new CC(p):new d1(p)},S8=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),w8=n=>pS(n)?n[n.length-1]||0:n;function p1(n,e){n.indexOf(e)===-1&&n.push(e)}function m1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class g1{constructor(){this.subscriptions=[]}add(e){return p1(this.subscriptions,e),()=>m1(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bC=30,E8=n=>!isNaN(parseFloat(n));class M8{constructor(e,t={}){this.version="11.14.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ko.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ko.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=E8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new g1);const i=this.events[e].add(t);return e==="change"?()=>{i(),zn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ko.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,bC);return R2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hm(n,e){return new M8(n,e)}function T8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Hm(t))}function C8(n,e){const t=m_(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const l=w8(s[o]);T8(n,o,l)}}const v1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b8="framerAppearId",U2="data-"+v1(b8);function H2(n){return n.props[U2]}const dr=n=>!!(n&&n.getVelocity);function R8(n){return!!(dr(n)&&n.add)}function ES(n,e){const t=n.getValue("willChange");if(R8(t))return t.add(e)}function I8({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function z2(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(o=i);const d=[],p=r&&n.animationState&&n.animationState.getState()[r];for(const m in c){const v=n.getValue(m,(s=n.latestValues[m])!==null&&s!==void 0?s:null),y=c[m];if(y===void 0||p&&I8(p,m))continue;const S={delay:t,...Zw(o||{},m)};let M=!1;if(window.MotionHandoffAnimation){const x=H2(n);if(x){const C=window.MotionHandoffAnimation(x,m,zn);C!==null&&(S.startTime=C,M=!0)}}ES(n,m),v.start(f1(m,v,y,n.shouldReduceMotion&&pd.has(m)?{type:!1}:S,n,M));const w=v.animation;w&&d.push(w)}return l&&Promise.all(d).then(()=>{zn.update(()=>{l&&C8(n,l)})}),d}function MS(n,e,t={}){var i;const r=m_(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(z2(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:v}=s;return P8(n,e,p+d,m,v,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,p]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>p())}else return Promise.all([o(),l(t.delay)])}function P8(n,e,t=0,i=0,r=1,s){const o=[],l=(n.variantChildren.size-1)*i,c=r===1?(d=0)=>d*i:(d=0)=>l-d*i;return Array.from(n.variantChildren).sort(D8).forEach((d,p)=>{d.notify("AnimationStart",e),o.push(MS(d,e,{...s,delay:t+c(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function D8(n,e){return n.sortNodePosition(e)}function B8(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>MS(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=MS(n,e,t);else{const r=typeof e=="function"?m_(n,e,t.custom):e;i=Promise.all(z2(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const L8=$w.length;function G2(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?G2(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<L8;t++){const i=$w[t],r=n.props[i];(Om(r)||r===!1)&&(e[i]=r)}return e}const N8=[...Qw].reverse(),F8=Qw.length;function O8(n){return e=>Promise.all(e.map(({animation:t,options:i})=>B8(n,t,i)))}function k8(n){let e=O8(n),t=RC(),i=!0;const r=c=>(d,p)=>{var m;const v=m_(n,p,c==="exit"?(m=n.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(v){const{transition:y,transitionEnd:S,...M}=v;d={...d,...M,...S}}return d};function s(c){e=c(n)}function o(c){const{props:d}=n,p=G2(n.parent)||{},m=[],v=new Set;let y={},S=1/0;for(let w=0;w<F8;w++){const x=N8[w],C=t[x],b=d[x]!==void 0?d[x]:p[x],P=Om(b),F=x===c?C.isActive:null;F===!1&&(S=w);let N=b===p[x]&&b!==d[x]&&P;if(N&&i&&n.manuallyAnimateOnMount&&(N=!1),C.protectedKeys={...y},!C.isActive&&F===null||!b&&!C.prevProp||p_(b)||typeof b=="boolean")continue;const k=U8(C.prevProp,b);let H=k||x===c&&C.isActive&&!N&&P||w>S&&P,L=!1;const B=Array.isArray(b)?b:[b];let V=B.reduce(r(x),{});F===!1&&(V={});const{prevResolvedValues:ae={}}=C,re={...ae,...V},ge=he=>{H=!0,v.has(he)&&(L=!0,v.delete(he)),C.needsAnimating[he]=!0;const U=n.getValue(he);U&&(U.liveStyle=!1)};for(const he in re){const U=V[he],Z=ae[he];if(y.hasOwnProperty(he))continue;let Q=!1;pS(U)&&pS(Z)?Q=!t2(U,Z):Q=U!==Z,Q?U!=null?ge(he):v.add(he):U!==void 0&&v.has(he)?ge(he):C.protectedKeys[he]=!0}C.prevProp=b,C.prevResolvedValues=V,C.isActive&&(y={...y,...V}),i&&n.blockInitialAnimation&&(H=!1),H&&(!(N&&k)||L)&&m.push(...B.map(he=>({animation:he,options:{type:x}})))}if(v.size){const w={};v.forEach(x=>{const C=n.getBaseTarget(x),b=n.getValue(x);b&&(b.liveStyle=!0),w[x]=C??null}),m.push({animation:w})}let M=!!m.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(m):Promise.resolve()}function l(c,d){var p;if(t[c].isActive===d)return Promise.resolve();(p=n.variantChildren)===null||p===void 0||p.forEach(v=>{var y;return(y=v.animationState)===null||y===void 0?void 0:y.setActive(c,d)}),t[c].isActive=d;const m=o(c);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=RC(),i=!0}}}function U8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!t2(e,n):!1}function Eu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RC(){return{animate:Eu(!0),whileInView:Eu(),whileHover:Eu(),whileTap:Eu(),whileDrag:Eu(),whileFocus:Eu(),exit:Eu()}}class Ac{constructor(e){this.isMounted=!1,this.node=e}update(){}}class H8 extends Ac{constructor(e){super(e),e.animationState||(e.animationState=k8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();p_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let z8=0;class G8 extends Ac{constructor(){super(...arguments),this.id=z8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const V8={animation:{Feature:H8},exit:{Feature:G8}},fo={x:!1,y:!1};function V2(){return fo.x||fo.y}function W8(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function W2(n,e){const t=W8(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function IC(n){return e=>{e.pointerType==="touch"||V2()||n(e)}}function j8(n,e,t={}){const[i,r,s]=W2(n,t),o=IC(l=>{const{target:c}=l,d=e(l);if(!d||!c)return;const p=IC(m=>{d(m),c.removeEventListener("pointerleave",p)});c.addEventListener("pointerleave",p,r)});return i.forEach(l=>{l.addEventListener("pointerenter",o,r)}),s}const y1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,sm=new WeakSet;function PC(n){return e=>{e.key==="Enter"&&n(e)}}function EA(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const X8=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=PC(()=>{if(sm.has(t))return;EA(t,"down");const r=PC(()=>{EA(t,"up")}),s=()=>EA(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)},J8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function K8(n){return J8.has(n.tagName)||n.tabIndex!==-1}const j2=(n,e)=>e?n===e?!0:j2(n,e.parentElement):!1;function DC(n){return y1(n)&&!V2()}function Y8(n,e,t={}){const[i,r,s]=W2(n,t),o=l=>{const c=l.currentTarget;if(!DC(l)||sm.has(c))return;sm.add(c);const d=e(l),p=(y,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),!(!DC(y)||!sm.has(c))&&(sm.delete(c),d&&d(y,{success:S}))},m=y=>{p(y,t.useGlobalTarget||j2(c,y.target))},v=y=>{p(y,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",v,r)};return i.forEach(l=>{K8(l)||(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l.addEventListener("focus",d=>X8(d,r),r)}),s}function q8(n){return n==="x"||n==="y"?fo[n]?null:(fo[n]=!0,()=>{fo[n]=!1}):fo.x||fo.y?null:(fo.x=fo.y=!0,()=>{fo.x=fo.y=!1})}function pg(n){return{point:{x:n.pageX,y:n.pageY}}}const Q8=n=>e=>y1(e)&&n(e,pg(e));function zm(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function _m(n,e,t,i){return zm(n,e,Q8(t),i)}const BC=(n,e)=>Math.abs(n-e);function $8(n,e){const t=BC(n.x,e.x),i=BC(n.y,e.y);return Math.sqrt(t**2+i**2)}class X2{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=TA(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,y=$8(m.offset,{x:0,y:0})>=3;if(!v&&!y)return;const{point:S}=m,{timestamp:M}=qi;this.history.push({...S,timestamp:M});const{onStart:w,onMove:x}=this.handlers;v||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=MA(v,this.transformPagePoint),zn.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:y,onSessionEnd:S,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=TA(m.type==="pointercancel"?this.lastMoveEventInfo:MA(v,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,w),S&&S(m,w)},!y1(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=pg(e),l=MA(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=qi;this.history=[{...c,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,TA(l,this.history)),this.removeListeners=fg(_m(this.contextWindow,"pointermove",this.handlePointerMove),_m(this.contextWindow,"pointerup",this.handlePointerUp),_m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mc(this.updatePoint)}}function MA(n,e){return e?{point:e(n.point)}:n}function LC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function TA({point:n},e){return{point:n,delta:LC(n,J2(e)),offset:LC(n,Z8(e)),velocity:e6(e,.1)}}function Z8(n){return n[0]}function J2(n){return n[n.length-1]}function e6(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=J2(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>tl(e)));)t--;if(!i)return{x:0,y:0};const s=nl(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Qh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const K2=1e-4,t6=1-K2,n6=1+K2,Y2=.01,i6=0-Y2,r6=0+Y2;function gs(n){return n.max-n.min}function s6(n,e,t){return Math.abs(n-e)<=t}function NC(n,e,t,i=.5){n.origin=i,n.originPoint=$n(e.min,e.max,n.origin),n.scale=gs(t)/gs(e),n.translate=$n(t.min,t.max,n.origin)-n.originPoint,(n.scale>=t6&&n.scale<=n6||isNaN(n.scale))&&(n.scale=1),(n.translate>=i6&&n.translate<=r6||isNaN(n.translate))&&(n.translate=0)}function xm(n,e,t,i){NC(n.x,e.x,t.x,i?i.originX:void 0),NC(n.y,e.y,t.y,i?i.originY:void 0)}function FC(n,e,t){n.min=t.min+e.min,n.max=n.min+gs(e)}function o6(n,e,t){FC(n.x,e.x,t.x),FC(n.y,e.y,t.y)}function OC(n,e,t){n.min=e.min-t.min,n.max=n.min+gs(e)}function Am(n,e,t){OC(n.x,e.x,t.x),OC(n.y,e.y,t.y)}function a6(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?$n(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?$n(t,n,i.max):Math.min(n,t)),n}function kC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function l6(n,{top:e,left:t,bottom:i,right:r}){return{x:kC(n.x,t,r),y:kC(n.y,e,i)}}function UC(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function c6(n,e){return{x:UC(n.x,e.x),y:UC(n.y,e.y)}}function u6(n,e){let t=.5;const i=gs(n),r=gs(e);return r>i?t=_f(e.min,e.max-i,n.min):i>r&&(t=_f(n.min,n.max-r,e.min)),cl(0,1,t)}function d6(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const TS=.35;function h6(n=TS){return n===!1?n=0:n===!0&&(n=TS),{x:HC(n,"left","right"),y:HC(n,"top","bottom")}}function HC(n,e,t){return{min:zC(n,e),max:zC(n,t)}}function zC(n,e){return typeof n=="number"?n:n[e]||0}const GC=()=>({translate:0,scale:1,origin:0,originPoint:0}),$h=()=>({x:GC(),y:GC()}),VC=()=>({min:0,max:0}),ui=()=>({x:VC(),y:VC()});function Ls(n){return[n("x"),n("y")]}function q2({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function f6({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function p6(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function CA(n){return n===void 0||n===1}function CS({scale:n,scaleX:e,scaleY:t}){return!CA(n)||!CA(e)||!CA(t)}function Ru(n){return CS(n)||Q2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Q2(n){return WC(n.x)||WC(n.y)}function WC(n){return n&&n!=="0%"}function Sy(n,e,t){const i=n-t,r=e*i;return t+r}function jC(n,e,t,i,r){return r!==void 0&&(n=Sy(n,r,i)),Sy(n,t,i)+e}function bS(n,e=0,t=1,i,r){n.min=jC(n.min,e,t,i,r),n.max=jC(n.max,e,t,i,r)}function $2(n,{x:e,y:t}){bS(n.x,e.translate,e.scale,e.originPoint),bS(n.y,t.translate,t.scale,t.originPoint)}const XC=.999999999999,JC=1.0000000000001;function m6(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ef(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,$2(n,o)),i&&Ru(s.latestValues)&&ef(n,s.latestValues))}e.x<JC&&e.x>XC&&(e.x=1),e.y<JC&&e.y>XC&&(e.y=1)}function Zh(n,e){n.min=n.min+e,n.max=n.max+e}function KC(n,e,t,i,r=.5){const s=$n(n.min,n.max,r);bS(n,e,t,s,i)}function ef(n,e){KC(n.x,e.x,e.scaleX,e.scale,e.originX),KC(n.y,e.y,e.scaleY,e.scale,e.originY)}function Z2(n,e){return q2(p6(n.getBoundingClientRect(),e))}function g6(n,e,t){const i=Z2(n,t),{scroll:r}=e;return r&&(Zh(i.x,r.offset.x),Zh(i.y,r.offset.y)),i}const eD=({current:n})=>n?n.ownerDocument.defaultView:null,v6=new WeakMap;class y6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ui(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(pg(p).point)},s=(p,m)=>{const{drag:v,dragPropagation:y,onDragStart:S}=this.getProps();if(v&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q8(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(w=>{let x=this.getAxisMotionValue(w).get()||0;if(Jo.test(x)){const{projection:C}=this.visualElement;if(C&&C.layout){const b=C.layout.layoutBox[w];b&&(x=gs(b)*(parseFloat(x)/100))}}this.originPoint[w]=x}),S&&zn.postRender(()=>S(p,m)),ES(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},o=(p,m)=>{const{dragPropagation:v,dragDirectionLock:y,onDirectionLock:S,onDrag:M}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:w}=m;if(y&&this.currentDirection===null){this.currentDirection=_6(w),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),M&&M(p,m)},l=(p,m)=>this.stop(p,m),c=()=>Ls(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new X2(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:eD(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&zn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!p0(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=a6(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Qh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=l6(r.layoutBox,t):this.constraints=!1,this.elastic=h6(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ls(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=d6(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Qh(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=g6(i,r.root,this.visualElement.getTransformPagePoint());let o=c6(r.layout.layoutBox,s);if(t){const l=t(f6(o));this.hasMutatedConstraints=!!l,l&&(o=q2(l))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Ls(p=>{if(!p0(p,t,this.currentDirection))return;let m=c&&c[p]||{};o&&(m={min:0,max:0});const v=r?200:1e6,y=r?40:1e7,S={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,S)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return ES(this.visualElement,e),i.start(f1(e,i,0,t,this.visualElement,!1))}stopAnimation(){Ls(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ls(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ls(t=>{const{drag:i}=this.getProps();if(!p0(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-$n(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Qh(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ls(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=u6({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ls(o=>{if(!p0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set($n(c,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;v6.set(this.visualElement,this);const e=this.visualElement.current,t=_m(e,"pointerdown",c=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Qh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),zn.read(i);const o=zm(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ls(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=c[p].translate,m.set(m.get()+c[p].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=TS,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function p0(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function _6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class x6 extends Ac{constructor(e){super(e),this.removeGroupControls=hs,this.removeListeners=hs,this.controls=new y6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hs}unmount(){this.removeGroupControls(),this.removeListeners()}}const YC=n=>(e,t)=>{n&&zn.postRender(()=>n(e,t))};class A6 extends Ac{constructor(){super(...arguments),this.removePointerDownListener=hs}onPointerDown(e){this.session=new X2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:YC(e),onStart:YC(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&zn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=_m(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _1=j.createContext(null);function S6(){const n=j.useContext(_1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=j.useId();j.useEffect(()=>i(r),[]);const s=j.useCallback(()=>t&&t(r),[r,t]);return!e&&t?[!1,s]:[!0]}const tD=j.createContext({}),nD=j.createContext({}),w0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Qp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(zt.test(n))n=parseFloat(n);else return n;const t=qC(n,e.target.x),i=qC(n,e.target.y);return`${t}% ${i}%`}},w6={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=gc.parse(n);if(r.length>5)return i;const s=gc.createTransformer(n),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const d=$n(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),s(r)}},wy={};function E6(n){Object.assign(wy,n)}const{schedule:x1,cancel:Tq}=n2(queueMicrotask,!1);class M6 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;E6(T6),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),w0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||zn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),x1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iD(n){const[e,t]=S6(),i=j.useContext(tD);return q.jsx(M6,{...n,layoutGroup:i,switchLayoutGroup:j.useContext(nD),isPresent:e,safeToRemove:t})}const T6={borderRadius:{...Qp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qp,borderTopRightRadius:Qp,borderBottomLeftRadius:Qp,borderBottomRightRadius:Qp,boxShadow:w6},rD=["TopLeft","TopRight","BottomLeft","BottomRight"],C6=rD.length,QC=n=>typeof n=="string"?parseFloat(n):n,$C=n=>typeof n=="number"||zt.test(n);function b6(n,e,t,i,r,s){r?(n.opacity=$n(0,t.opacity!==void 0?t.opacity:1,R6(i)),n.opacityExit=$n(e.opacity!==void 0?e.opacity:1,0,I6(i))):s&&(n.opacity=$n(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<C6;o++){const l=`border${rD[o]}Radius`;let c=ZC(e,l),d=ZC(t,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||$C(c)===$C(d)?(n[l]=Math.max($n(QC(c),QC(d),i),0),(Jo.test(d)||Jo.test(c))&&(n[l]+="%")):n[l]=d}(e.rotate||t.rotate)&&(n.rotate=$n(e.rotate||0,t.rotate||0,i))}function ZC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const R6=sD(0,.5,c2),I6=sD(.5,.95,hs);function sD(n,e,t){return i=>i<n?0:i>e?1:t(_f(n,e,i))}function eb(n,e){n.min=e.min,n.max=e.max}function Bs(n,e){eb(n.x,e.x),eb(n.y,e.y)}function tb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function nb(n,e,t,i,r){return n-=e,n=Sy(n,1/t,i),r!==void 0&&(n=Sy(n,1/r,i)),n}function P6(n,e=0,t=1,i=.5,r,s=n,o=n){if(Jo.test(e)&&(e=parseFloat(e),e=$n(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=$n(s.min,s.max,i);n===s&&(l-=e),n.min=nb(n.min,e,t,l,r),n.max=nb(n.max,e,t,l,r)}function ib(n,e,[t,i,r],s,o){P6(n,e[t],e[i],e[r],e.scale,s,o)}const D6=["x","scaleX","originX"],B6=["y","scaleY","originY"];function rb(n,e,t,i){ib(n.x,e,D6,t?t.x:void 0,i?i.x:void 0),ib(n.y,e,B6,t?t.y:void 0,i?i.y:void 0)}function sb(n){return n.translate===0&&n.scale===1}function oD(n){return sb(n.x)&&sb(n.y)}function ob(n,e){return n.min===e.min&&n.max===e.max}function L6(n,e){return ob(n.x,e.x)&&ob(n.y,e.y)}function ab(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function aD(n,e){return ab(n.x,e.x)&&ab(n.y,e.y)}function lb(n){return gs(n.x)/gs(n.y)}function cb(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class N6{constructor(){this.members=[]}add(e){p1(this.members,e),e.scheduleRender()}remove(e){if(m1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function F6(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:v,skewX:y,skewY:S}=t;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),m&&(i+=`rotateX(${m}deg) `),v&&(i+=`rotateY(${v}deg) `),y&&(i+=`skewX(${y}deg) `),S&&(i+=`skewY(${S}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(i+=`scale(${l}, ${c})`),i||"none"}const O6=(n,e)=>n.depth-e.depth;class k6{constructor(){this.children=[],this.isDirty=!1}add(e){p1(this.children,e),this.isDirty=!0}remove(e){m1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O6),this.isDirty=!1,this.children.forEach(e)}}function E0(n){const e=dr(n)?n.get():n;return S8(e)?e.toValue():e}function U6(n,e){const t=Ko.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(mc(i),n(s-e))};return zn.read(i,!0),()=>mc(i)}function H6(n){return n instanceof SVGElement&&n.tagName!=="svg"}function z6(n,e,t){const i=dr(n)?n:Hm(n);return i.start(f1("",i,e,t)),i.animation}const Iu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},om=typeof window<"u"&&window.MotionDebug!==void 0,bA=["","X","Y","Z"],G6={visibility:"hidden"},ub=1e3;let V6=0;function RA(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function lD(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=H2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",zn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&lD(i)}function cD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=V6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,om&&(Iu.totalNodes=Iu.resolvedTargetDeltas=Iu.recalculatedProjection=0),this.nodes.forEach(X6),this.nodes.forEach(Q6),this.nodes.forEach($6),this.nodes.forEach(J6),om&&window.MotionDebug.record(Iu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new k6)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new g1),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=H6(o),this.instance=o;const{layoutId:c,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),n){let m;const v=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=U6(v,250),w0.hasAnimatedSinceResize&&(w0.hasAnimatedSinceResize=!1,this.nodes.forEach(hb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeTargetChanged:y,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||p.getDefaultTransition()||iW,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=p.getProps(),C=!this.targetLayout||!aD(this.targetLayout,S)||y,b=!v&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||v&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const P={...Zw(M,"layout"),onPlay:w,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else v||hb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Z6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(db);return}this.isUpdating||this.nodes.forEach(Y6),this.isUpdating=!1,this.nodes.forEach(q6),this.nodes.forEach(W6),this.nodes.forEach(j6),this.clearAllSnapshots();const l=Ko.now();qi.delta=cl(0,1e3/60,l-qi.timestamp),qi.timestamp=l,qi.isProcessing=!0,_A.update.process(qi),_A.preRender.process(qi),_A.render.process(qi),qi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,x1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(K6),this.sharedNodes.forEach(eW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ui(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!oD(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&(l||Ru(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),rW(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ui();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(sW))){const{scroll:p}=this.root;p&&(Zh(c.x,p.offset.x),Zh(c.y,p.offset.y))}return c}removeElementScroll(o){var l;const c=ui();if(Bs(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:m,options:v}=p;p!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Bs(c,o),Zh(c.x,m.offset.x),Zh(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=ui();Bs(c,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ef(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ru(p.latestValues)&&ef(c,p.latestValues)}return Ru(this.latestValues)&&ef(c,this.latestValues),c}removeTransform(o){const l=ui();Bs(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ru(d.latestValues))continue;CS(d.latestValues)&&d.updateSnapshot();const p=ui(),m=d.measurePageBox();Bs(p,m),rb(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Ru(this.latestValues)&&rb(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=qi.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ui(),this.relativeTargetOrigin=ui(),Am(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ui(),this.targetWithTransforms=ui()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bs(this.target,this.layout.layoutBox),$2(this.target,this.targetDelta)):Bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ui(),this.relativeTargetOrigin=ui(),Am(this.relativeTargetOrigin,this.target,y.target),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}om&&Iu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||CS(this.parent.latestValues)||Q2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===qi.timestamp&&(d=!1),d)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Bs(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;m6(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ui());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tb(this.prevProjectionDelta.x,this.projectionDelta.x),tb(this.prevProjectionDelta.y,this.projectionDelta.y)),xm(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!cb(this.projectionDelta.x,this.prevProjectionDelta.x)||!cb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),om&&Iu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$h(),this.projectionDelta=$h(),this.projectionDeltaWithTransform=$h()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},p={...this.latestValues},m=$h();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=ui(),y=c?c.source:void 0,S=this.layout?this.layout.source:void 0,M=y!==S,w=this.getStack(),x=!w||w.members.length<=1,C=!!(M&&!x&&this.options.crossfade===!0&&!this.path.some(nW));this.animationProgress=0;let b;this.mixTargetDelta=P=>{const F=P/1e3;fb(m.x,o.x,F),fb(m.y,o.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Am(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tW(this.relativeTarget,this.relativeTargetOrigin,v,F),b&&L6(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ui()),Bs(b,this.relativeTarget)),M&&(this.animationValues=p,b6(p,d,this.latestValues,F,C,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zn.update(()=>{w0.hasAnimatedSinceResize=!0,this.currentAnimation=z6(0,ub,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ub),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:p}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&uD(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ui();const m=gs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const v=gs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+v}Bs(l,c),ef(l,p),xm(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new N6),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&RA("z",o,d,this.animationValues);for(let p=0;p<bA.length;p++)RA(`rotate${bA[p]}`,o,d,this.animationValues),RA(`skew${bA[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return G6;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=E0(o==null?void 0:o.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=E0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ru(this.latestValues)&&(M.transform=p?p({},""):"none",this.hasProjected=!1),M}const v=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=F6(this.projectionDeltaWithTransform,this.treeScale,v),p&&(d.transform=p(v,d.transform));const{x:y,y:S}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${S.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:d.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const M in wy){if(v[M]===void 0)continue;const{correct:w,applyTo:x}=wy[M],C=d.transform==="none"?v[M]:w(v[M],m);if(x){const b=x.length;for(let P=0;P<b;P++)d[x[P]]=C}else d[M]=C}return this.options.layoutId&&(d.pointerEvents=m===this?E0(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(db),this.root.sharedNodes.clear()}}}function W6(n){n.updateLayout()}function j6(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Ls(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],y=gs(v);v.min=i[m].min,v.max=v.min+y}):uD(s,t.layoutBox,i)&&Ls(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],y=gs(i[m]);v.max=v.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+y)});const l=$h();xm(l,i,t.layoutBox);const c=$h();o?xm(c,n.applyTransform(r,!0),t.measuredBox):xm(c,i,t.layoutBox);const d=!oD(l);let p=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:y}=m;if(v&&y){const S=ui();Am(S,t.layoutBox,v.layoutBox);const M=ui();Am(M,i,y.layoutBox),aD(S,M)||(p=!0),m.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=S,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function X6(n){om&&Iu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function J6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function K6(n){n.clearSnapshot()}function db(n){n.clearMeasurements()}function Y6(n){n.isLayoutDirty=!1}function q6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function hb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Q6(n){n.resolveTargetDelta()}function $6(n){n.calcProjection()}function Z6(n){n.resetSkewAndRotation()}function eW(n){n.removeLeadSnapshot()}function fb(n,e,t){n.translate=$n(e.translate,0,t),n.scale=$n(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function pb(n,e,t,i){n.min=$n(e.min,t.min,i),n.max=$n(e.max,t.max,i)}function tW(n,e,t,i){pb(n.x,e.x,t.x,i),pb(n.y,e.y,t.y,i)}function nW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const iW={duration:.45,ease:[.4,0,.1,1]},mb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),gb=mb("applewebkit/")&&!mb("chrome/")?Math.round:hs;function vb(n){n.min=gb(n.min),n.max=gb(n.max)}function rW(n){vb(n.x),vb(n.y)}function uD(n,e,t){return n==="position"||n==="preserve-aspect"&&!s6(lb(e),lb(t),.2)}function sW(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const oW=cD({attachResizeListener:(n,e)=>zm(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),IA={current:void 0},dD=cD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!IA.current){const n=new oW({});n.mount(window),n.setOptions({layoutScroll:!0}),IA.current=n}return IA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),aW={pan:{Feature:A6},drag:{Feature:x6,ProjectionNode:dD,MeasureLayout:iD}};function yb(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&zn.postRender(()=>s(e,pg(e)))}class lW extends Ac{mount(){const{current:e}=this.node;e&&(this.unmount=j8(e,t=>(yb(this.node,t,"Start"),i=>yb(this.node,i,"End"))))}unmount(){}}class cW extends Ac{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fg(zm(this.node.current,"focus",()=>this.onFocus()),zm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _b(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&zn.postRender(()=>s(e,pg(e)))}class uW extends Ac{mount(){const{current:e}=this.node;e&&(this.unmount=Y8(e,t=>(_b(this.node,t,"Start"),(i,{success:r})=>_b(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const RS=new WeakMap,PA=new WeakMap,dW=n=>{const e=RS.get(n.target);e&&e(n)},hW=n=>{n.forEach(dW)};function fW({root:n,...e}){const t=n||document;PA.has(t)||PA.set(t,{});const i=PA.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(hW,{root:n,...e})),i[r]}function pW(n,e,t){const i=fW(e);return RS.set(n,t),i.observe(n),()=>{RS.delete(n),i.unobserve(n)}}const mW={some:0,all:1};class gW extends Ac{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:mW[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=d?p:m;v&&v(c)};return pW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(vW(e,t))&&this.startObserver()}unmount(){}}function vW({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const yW={inView:{Feature:gW},tap:{Feature:uW},focus:{Feature:cW},hover:{Feature:lW}},_W={layout:{ProjectionNode:dD,MeasureLayout:iD}},hD=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),v_=j.createContext({}),A1=typeof window<"u",xW=A1?j.useLayoutEffect:j.useEffect,fD=j.createContext({strict:!1});function AW(n,e,t,i,r){var s,o;const{visualElement:l}=j.useContext(v_),c=j.useContext(fD),d=j.useContext(_1),p=j.useContext(hD).reducedMotion,m=j.useRef(null);i=i||c.renderer,!m.current&&i&&(m.current=i(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const v=m.current,y=j.useContext(nD);v&&!v.projection&&r&&(v.type==="html"||v.type==="svg")&&SW(m.current,t,r,y);const S=j.useRef(!1);j.useInsertionEffect(()=>{v&&S.current&&v.update(t,d)});const M=t[U2],w=j.useRef(!!M&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,M))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,M)));return xW(()=>{v&&(S.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),x1.render(v.render),w.current&&v.animationState&&v.animationState.animateChanges())}),j.useEffect(()=>{v&&(!w.current&&v.animationState&&v.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,M)}),w.current=!1))}),v}function SW(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:pD(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||l&&Qh(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:d})}function pD(n){if(n)return n.options.allowProjection!==!1?n.projection:pD(n.parent)}function wW(n,e,t){return j.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Qh(t)&&(t.current=i))},[e])}function y_(n){return p_(n.animate)||$w.some(e=>Om(n[e]))}function mD(n){return!!(y_(n)||n.variants)}function EW(n,e){if(y_(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Om(t)?t:void 0,animate:Om(i)?i:void 0}}return n.inherit!==!1?e:{}}function MW(n){const{initial:e,animate:t}=EW(n,j.useContext(v_));return j.useMemo(()=>({initial:e,animate:t}),[xb(e),xb(t)])}function xb(n){return Array.isArray(n)?n.join(" "):n}const Ab={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xf={};for(const n in Ab)xf[n]={isEnabled:e=>Ab[n].some(t=>!!e[t])};function TW(n){for(const e in n)xf[e]={...xf[e],...n[e]}}const CW=Symbol.for("motionComponentSymbol");function bW({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&TW(n);function s(l,c){let d;const p={...j.useContext(hD),...l,layoutId:RW(l)},{isStatic:m}=p,v=MW(l),y=i(l,m);if(!m&&A1){IW();const S=PW(p);d=S.MeasureLayout,v.visualElement=AW(r,y,p,e,S.ProjectionNode)}return q.jsxs(v_.Provider,{value:v,children:[d&&v.visualElement?q.jsx(d,{visualElement:v.visualElement,...p}):null,t(r,l,wW(y,v.visualElement,c),y,m,v.visualElement)]})}const o=j.forwardRef(s);return o[CW]=r,o}function RW({layoutId:n}){const e=j.useContext(tD).id;return e&&n!==void 0?e+"-"+n:n}function IW(n,e){j.useContext(fD).strict}function PW(n){const{drag:e,layout:t}=xf;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const DW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function S1(n){return typeof n!="string"||n.includes("-")?!1:!!(DW.indexOf(n)>-1||/[A-Z]/u.test(n))}function gD(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const vD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yD(n,e,t,i){gD(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(vD.has(r)?r:v1(r),e.attrs[r])}function _D(n,{layout:e,layoutId:t}){return pd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!wy[n]||n==="opacity")}function w1(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(dr(r[o])||e.style&&dr(e.style[o])||_D(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function xD(n,e,t){const i=w1(n,e,t);for(const r in n)if(dr(n[r])||dr(e[r])){const s=ug.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function BW(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}function LW({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:NW(i,r,s,n),renderState:e()};return t&&(o.mount=l=>t(i,l,o)),o}const AD=n=>(e,t)=>{const i=j.useContext(v_),r=j.useContext(_1),s=()=>LW(n,e,i,r);return t?s():BW(s)};function NW(n,e,t,i){const r={},s=i(n,{});for(const v in s)r[v]=E0(s[v]);let{initial:o,animate:l}=n;const c=y_(n),d=mD(n);e&&d&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const m=p?l:o;if(m&&typeof m!="boolean"&&!p_(m)){const v=Array.isArray(m)?m:[m];for(let y=0;y<v.length;y++){const S=qw(n,v[y]);if(S){const{transitionEnd:M,transition:w,...x}=S;for(const C in x){let b=x[C];if(Array.isArray(b)){const P=p?b.length-1:0;b=b[P]}b!==null&&(r[C]=b)}for(const C in M)r[C]=M[C]}}}return r}const E1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),SD=()=>({...E1(),attrs:{}}),wD=(n,e)=>e&&typeof n=="number"?e.transform(n):n,FW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OW=ug.length;function kW(n,e,t){let i="",r=!0;for(let s=0;s<OW;s++){const o=ug[s],l=n[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const d=wD(l,o1[o]);if(!c){r=!1;const p=FW[o]||o;i+=`${p}(${d}) `}t&&(e[o]=d)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function M1(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,l=!1;for(const c in e){const d=e[c];if(pd.has(c)){o=!0;continue}else if(p2(c)){r[c]=d;continue}else{const p=wD(d,o1[c]);c.startsWith("origin")?(l=!0,s[c]=p):i[c]=p}}if(e.transform||(o||t?i.transform=kW(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:p=0}=s;i.transformOrigin=`${c} ${d} ${p}`}}function Sb(n,e,t){return typeof n=="string"?n:zt.transform(e+t*n)}function UW(n,e,t){const i=Sb(e,n.x,n.width),r=Sb(t,n.y,n.height);return`${i} ${r}`}const HW={offset:"stroke-dashoffset",array:"stroke-dasharray"},zW={offset:"strokeDashoffset",array:"strokeDasharray"};function GW(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?HW:zW;n[s.offset]=zt.transform(-i);const o=zt.transform(e),l=zt.transform(t);n[s.array]=`${o} ${l}`}function T1(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},p,m){if(M1(n,d,m),p){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:y,dimensions:S}=n;v.transform&&(S&&(y.transform=v.transform),delete v.transform),S&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=UW(S,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),o!==void 0&&GW(v,o,l,c,!1)}const C1=n=>typeof n=="string"&&n.toLowerCase()==="svg",VW={useVisualState:AD({scrapeMotionValuesFromProps:xD,createRenderState:SD,onMount:(n,e,{renderState:t,latestValues:i})=>{zn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),zn.render(()=>{T1(t,i,C1(e.tagName),n.transformTemplate),yD(e,t)})}})},WW={useVisualState:AD({scrapeMotionValuesFromProps:w1,createRenderState:E1})};function ED(n,e,t){for(const i in e)!dr(e[i])&&!_D(i,t)&&(n[i]=e[i])}function jW({transformTemplate:n},e){return j.useMemo(()=>{const t=E1();return M1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function XW(n,e){const t=n.style||{},i={};return ED(i,t,n),Object.assign(i,jW(n,e)),i}function JW(n,e){const t={},i=XW(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const KW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ey(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||KW.has(n)}let MD=n=>!Ey(n);function YW(n){n&&(MD=e=>e.startsWith("on")?!Ey(e):n(e))}try{YW(require("@emotion/is-prop-valid").default)}catch{}function qW(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(MD(r)||t===!0&&Ey(r)||!e&&!Ey(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function QW(n,e,t,i){const r=j.useMemo(()=>{const s=SD();return T1(s,e,C1(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};ED(s,n.style,n),r.style={...s,...r.style}}return r}function $W(n=!1){return(t,i,r,{latestValues:s},o)=>{const c=(S1(t)?QW:JW)(i,s,o,t),d=qW(i,typeof t=="string",n),p=t!==j.Fragment?{...d,...c,ref:r}:{},{children:m}=i,v=j.useMemo(()=>dr(m)?m.get():m,[m]);return j.createElement(t,{...p,children:v})}}function ZW(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...S1(i)?VW:WW,preloadedFeatures:n,useRender:$W(r),createVisualElement:e,Component:i};return bW(o)}}const IS={current:null},TD={current:!1};function ej(){if(TD.current=!0,!!A1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>IS.current=n.matches;n.addListener(e),e()}else IS.current=!1}function tj(n,e,t){for(const i in e){const r=e[i],s=t[i];if(dr(r))n.addValue(i,r);else if(dr(s))n.addValue(i,Hm(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Hm(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const wb=new WeakMap,nj=[...v2,cr,gc],ij=n=>nj.find(g2(n)),Eb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rj{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=i1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ko.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,zn.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=y_(t),this.isVariantNode=mD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in m){const y=m[v];c[v]!==void 0&&dr(y)&&y.set(c[v],!1)}}mount(e){this.current=e,wb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),TD.current||ej(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:IS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wb.delete(this.current),this.projection&&this.projection.unmount(),mc(this.notifyUpdate),mc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=pd.has(e),r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&zn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xf){const t=xf[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ui()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Eb.length;i++){const r=Eb[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=tj(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Hm(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(h2(r)||d2(r))?r=parseFloat(r):!ij(r)&&gc.test(t)&&(r=M2(e,t)),this.setBaseTarget(e,dr(r)?r.get():r)),dr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=qw(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!dr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new g1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class CD extends rj{constructor(){super(...arguments),this.KeyframeResolver=T2}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function sj(n){return window.getComputedStyle(n)}class oj extends CD{constructor(){super(...arguments),this.type="html",this.renderInstance=gD}readValueFromInstance(e,t){if(pd.has(t)){const i=a1(t);return i&&i.default||0}else{const i=sj(e),r=(p2(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Z2(e,t)}build(e,t,i){M1(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return w1(e,t,i)}}class aj extends CD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ui}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(pd.has(t)){const i=a1(t);return i&&i.default||0}return t=vD.has(t)?t:v1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return xD(e,t,i)}build(e,t,i){T1(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){yD(e,t,i,r)}mount(e){this.isSVGTag=C1(e.tagName),super.mount(e)}}const lj=(n,e)=>S1(n)?new aj(e):new oj(e,{allowProjection:n!==j.Fragment}),cj=ZW({...V8,...yW,...aW,..._W},lj),rd=z9(cj),il={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},uj=()=>q.jsxs("section",{className:"relative w-full h-screen mx-auto bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:[q.jsxs("div",{className:`${il.paddingX} absolute inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[q.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[q.jsx("div",{className:"w-5 h-5 rounded-full bg-[#9EC9E7]"}),q.jsx("div",{className:"w-1 sm:h-80 h-40 bg-gradient-to-b from-[#9EC9E7] to-[#10B981]"})]}),q.jsxs("div",{children:[q.jsxs("h1",{className:`${il.heroHeadText} text-[#034752]`,children:['"Break Free. Reclaim Your Confidence. ',q.jsx("span",{className:"text-[#10B981]",children:"Rise Up."})]}),q.jsxs("p",{className:`${il.heroSubText} mt-2 text-[#ffffff]`,children:["Were here to help you ",q.jsx("br",{className:"sm:block hidden"}),"conquer social anxiety, one step at a time."]}),q.jsxs("div",{className:"mt-8 flex flex-wrap gap-4",children:[q.jsx(cd,{to:"/Login",className:"px-6 py-3 bg-[#10B981] text-white font-medium text-lg rounded-md shadow-lg hover:bg-[#0E8C6C] transition duration-300 ease-in-out",children:"Get Started"}),q.jsx("a",{href:"#about",className:"px-6 py-3 bg-[#034752] text-white font-medium text-lg rounded-md shadow-lg hover:bg-[#023642] transition duration-300 ease-in-out",children:"Learn More"})]})]})]}),q.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:q.jsx("a",{href:"#about",children:q.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-[#10B981] flex justify-center items-start p-2",children:q.jsx(rd.div,{animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-[#10B981] mb-1"})})})})]}),dj="/assets/logo-CHC-6NR8.png",hj="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",fj="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",Mb=[{id:"about",title:"Features"},{id:"contact",title:"Contact"},{id:"FAQ",title:"FAQ"}],pj={"Children - Boys":[{id:1,question:"Are you scared to ask other boys to play a game with you?",options:["Yes","No","Sometimes"]},{id:2,question:"Do you worry about being teased for how you play sports?",options:["Yes","No","Sometimes"]},{id:3,question:"Do you feel shy talking to new boys in your class?",options:["Yes","No","Sometimes"]},{id:4,question:"Do you avoid school events because youre nervous about being in a group?",options:["Yes","No","Sometimes"]},{id:5,question:"Do you feel uncomfortable sharing your opinions in a group?",options:["Yes","No","Sometimes"]},{id:6,question:"Do you find it difficult to ask questions in class?",options:["Yes","No","Sometimes"]},{id:7,question:"Do you feel shy about meeting new people or making new friends?",options:["Yes","No","Sometimes"]},{id:8,question:"Do you feel nervous when you have to speak in front of the class?",options:["Yes","No","Sometimes"]},{id:9,question:"Do you feel uncomfortable when someone points you out during a class or event?",options:["Yes","No","Sometimes"]},{id:10,question:"Do you find it hard to approach your classmates to ask for help?",options:["Yes","No","Sometimes"]}],"Children - Girls":[{id:1,question:"Are you afraid to talk to a group of girls your age?",options:["Yes","No","Sometimes"]},{id:2,question:"Do you worry about being teased for how you dress or look?",options:["Yes","No","Sometimes"]},{id:3,question:"Do you avoid asking your teacher questions in class?",options:["Yes","No","Sometimes"]},{id:4,question:"Do you avoid making friends because youre afraid they wont like you?",options:["Yes","No","Sometimes"]},{id:5,question:"Do you get nervous during birthday parties or group activities?",options:["Yes","No","Sometimes"]},{id:6,question:"Do you feel awkward when talking to new girls?",options:["Yes","No","Sometimes"]},{id:7,question:"Do you get anxious about group presentations or discussions?",options:["Yes","No","Sometimes"]},{id:8,question:"Do you avoid talking to the teacher after class?",options:["Yes","No","Sometimes"]},{id:9,question:"Do you feel uncomfortable when other girls notice you in class?",options:["Yes","No","Sometimes"]},{id:10,question:"Do you feel anxious during school plays or group activities?",options:["Yes","No","Sometimes"]}],"Adolescents - Boys":[{id:1,question:"Do you avoid making new friends because you feel they might judge you?",options:["Yes","No","Sometimes"]},{id:2,question:"Do you feel embarrassed to participate in class discussions?",options:["Yes","No","Sometimes"]},{id:3,question:"Are you afraid to ask for help when youre struggling in school?",options:["Yes","No","Sometimes"]},{id:4,question:"Do you get anxious thinking about social gatherings or group projects?",options:["Yes","No","Sometimes"]},{id:5,question:"Do you avoid interacting with girls in your class due to fear of rejection?",options:["Yes","No","Sometimes"]},{id:6,question:"Do you find it difficult to start conversations with your peers?",options:["Yes","No","Sometimes"]},{id:7,question:"Do you get nervous when meeting new people?",options:["Yes","No","Sometimes"]},{id:8,question:"Do you prefer staying alone rather than socializing with others?",options:["Yes","No","Sometimes"]},{id:9,question:"Do you worry about being judged by others during physical activities?",options:["Yes","No","Sometimes"]},{id:10,question:"Do you feel uncomfortable when you're asked to lead a group discussion?",options:["Yes","No","Sometimes"]}],"Adolescents - Girls":[{id:1,question:"Do you feel insecure about how others perceive your appearance?",options:["Yes","No","Sometimes"]},{id:2,question:"Do you avoid speaking up in class even when you know the answer?",options:["Yes","No","Sometimes"]},{id:3,question:"Do you hesitate to make new friends because you fear being judged?",options:["Yes","No","Sometimes"]},{id:4,question:"Are you uncomfortable speaking to boys your age in social settings?",options:["Yes","No","Sometimes"]},{id:5,question:"Do you feel worried when meeting new people at parties?",options:["Yes","No","Sometimes"]},{id:6,question:"Do you feel anxious when you're the center of attention?",options:["Yes","No","Sometimes"]},{id:7,question:"Do you often avoid situations where you might be judged or criticized?",options:["Yes","No","Sometimes"]},{id:8,question:"Do you get nervous about making phone calls to people you dont know?",options:["Yes","No","Sometimes"]},{id:9,question:"Do you find it difficult to approach your classmates for help or advice?",options:["Yes","No","Sometimes"]},{id:10,question:"Do you feel uncomfortable when you have to speak in front of a group?",options:["Yes","No","Sometimes"]}],"Adults - General":[{id:1,question:"Do you find it difficult to speak up in meetings or group discussions?",options:["Yes","No","Sometimes"]},{id:2,question:"Do you avoid social situations where you might feel judged or uncomfortable?",options:["Yes","No","Sometimes"]},{id:3,question:"Do you feel anxious about attending work or social events?",options:["Yes","No","Sometimes"]},{id:4,question:"Do you feel worried about peoples opinions of you when you speak in public?",options:["Yes","No","Sometimes"]},{id:5,question:"Do you have difficulty making eye contact during conversations?",options:["Yes","No","Sometimes"]},{id:6,question:"Do you feel nervous when meeting new people in professional or social settings?",options:["Yes","No","Sometimes"]},{id:7,question:"Do you avoid making phone calls to people you dont know?",options:["Yes","No","Sometimes"]},{id:8,question:"Do you avoid social media or online interactions due to fear of criticism?",options:["Yes","No","Sometimes"]},{id:9,question:"Do you often feel judged or self-conscious in social settings?",options:["Yes","No","Sometimes"]},{id:10,question:"Do you find it hard to express yourself in front of groups?",options:["Yes","No","Sometimes"]}]},mj=[{title:"Personalized Anxiety Assessment",description:"Understand yourself better with AI-powered insights."},{title:"AI-Powered Chat Support",description:"Get immediate, judgment-free support."},{title:"Virtual Role-Playing Sessions",description:"Practice social interactions with feedback."},{title:"Tailored Therapy Modules",description:"Engage with AI-based Cognitive Behavioral Therapy (CBT) exercises and guides to overcome social fears step-by-step."},{title:"Daily Affirmation Generator",description:"Receive personalized messages to uplift your day"}];var Tb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},gj=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],l=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,l=o?n[r+1]:0,c=r+2<n.length,d=c?n[r+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let v=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(v=64)),i.push(t[p],t[m],t[v],t[y])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],l=r<n.length?t[n.charAt(r)]:0;++r;const d=r<n.length?t[n.charAt(r)]:64;++r;const m=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||l==null||d==null||m==null)throw new vj;const v=s<<2|l>>4;if(i.push(v),d!==64){const y=l<<4&240|d>>2;if(i.push(y),m!==64){const S=d<<6&192|m;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yj=function(n){const e=bD(n);return RD.encodeByteArray(e,!0)},ID=function(n){return yj(n).replace(/\./g,"")},PD=function(n){try{return RD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=()=>_j().__FIREBASE_DEFAULTS__,Aj=()=>{if(typeof process>"u"||typeof Tb>"u")return;const n=Tb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Sj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&PD(n[1]);return e&&JSON.parse(e)},b1=()=>{try{return xj()||Aj()||Sj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wj=n=>{var e,t;return(t=(e=b1())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},DD=()=>{var n;return(n=b1())===null||n===void 0?void 0:n.config},BD=n=>{var e;return(e=b1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function Tj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Cj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bj(){const n=Rr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ND(){try{return typeof indexedDB=="object"}catch{return!1}}function FD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function Rj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="FirebaseError";class na extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ij,Object.setPrototypeOf(this,na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,md.prototype.create)}}class md{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?Pj(s,i):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new na(r,l,i)}}function Pj(n,e){return n.replace(Dj,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Dj=/\{\$([^}]+)}/g;function Bj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gm(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(Cb(s)&&Cb(o)){if(!Gm(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function Cb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function am(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function lm(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Lj(n,e){const t=new Nj(n,e);return t.subscribe.bind(t)}class Nj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Fj(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=DA),r.error===void 0&&(r.error=DA),r.complete===void 0&&(r.complete=DA);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function DA(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=1e3,kj=2,Uj=4*60*60*1e3,Hj=.5;function bb(n,e=Oj,t=kj){const i=e*Math.pow(t,n),r=Math.round(Hj*i*(Math.random()-.5)*2);return Math.min(Uj,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(n){return n&&n._delegate?n._delegate:n}class Zo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Ej;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vj(e))try{this.getOrInitializeService({instanceIdentifier:Pu})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Pu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pu){return this.instances.has(e)}getOptions(e=Pu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gj(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pu){return this.component?this.component.multipleInstances?e:Pu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gj(n){return n===Pu?void 0:n}function Vj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ln||(Ln={}));const jj={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},Xj=Ln.INFO,Jj={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},Kj=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Jj[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class R1{constructor(e){this.name=e,this._logLevel=Xj,this._logHandler=Kj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...e),this._logHandler(this,Ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...e),this._logHandler(this,Ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...e),this._logHandler(this,Ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...e),this._logHandler(this,Ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...e),this._logHandler(this,Ln.ERROR,...e)}}const Yj=(n,e)=>e.some(t=>n instanceof t);let Rb,Ib;function qj(){return Rb||(Rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qj(){return Ib||(Ib=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OD=new WeakMap,PS=new WeakMap,kD=new WeakMap,BA=new WeakMap,I1=new WeakMap;function $j(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(cc(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&OD.set(t,n)}).catch(()=>{}),I1.set(e,n),e}function Zj(n){if(PS.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});PS.set(n,e)}let DS={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return PS.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function e7(n){DS=n(DS)}function t7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(LA(this),e,...t);return kD.set(i,e.sort?e.sort():[e]),cc(i)}:Qj().includes(n)?function(...e){return n.apply(LA(this),e),cc(OD.get(this))}:function(...e){return cc(n.apply(LA(this),e))}}function n7(n){return typeof n=="function"?t7(n):(n instanceof IDBTransaction&&Zj(n),Yj(n,qj())?new Proxy(n,DS):n)}function cc(n){if(n instanceof IDBRequest)return $j(n);if(BA.has(n))return BA.get(n);const e=n7(n);return e!==n&&(BA.set(n,e),I1.set(e,n)),e}const LA=n=>I1.get(n);function UD(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),l=cc(o);return i&&o.addEventListener("upgradeneeded",c=>{i(cc(o.result),c.oldVersion,c.newVersion,cc(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const i7=["get","getKey","getAll","getAllKeys","count"],r7=["put","add","delete","clear"],NA=new Map;function Pb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(NA.get(e))return NA.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=r7.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||i7.includes(t)))return;const s=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),r&&c.done]))[0]};return NA.set(e,s),s}e7(n=>({...n,get:(e,t,i)=>Pb(e,t)||n.get(e,t,i),has:(e,t)=>!!Pb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(o7(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function o7(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const BS="@firebase/app",Db="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new R1("@firebase/app"),a7="@firebase/app-compat",l7="@firebase/analytics-compat",c7="@firebase/analytics",u7="@firebase/app-check-compat",d7="@firebase/app-check",h7="@firebase/auth",f7="@firebase/auth-compat",p7="@firebase/database",m7="@firebase/data-connect",g7="@firebase/database-compat",v7="@firebase/functions",y7="@firebase/functions-compat",_7="@firebase/installations",x7="@firebase/installations-compat",A7="@firebase/messaging",S7="@firebase/messaging-compat",w7="@firebase/performance",E7="@firebase/performance-compat",M7="@firebase/remote-config",T7="@firebase/remote-config-compat",C7="@firebase/storage",b7="@firebase/storage-compat",R7="@firebase/firestore",I7="@firebase/vertexai",P7="@firebase/firestore-compat",D7="firebase",B7="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="[DEFAULT]",L7={[BS]:"fire-core",[a7]:"fire-core-compat",[c7]:"fire-analytics",[l7]:"fire-analytics-compat",[d7]:"fire-app-check",[u7]:"fire-app-check-compat",[h7]:"fire-auth",[f7]:"fire-auth-compat",[p7]:"fire-rtdb",[m7]:"fire-data-connect",[g7]:"fire-rtdb-compat",[v7]:"fire-fn",[y7]:"fire-fn-compat",[_7]:"fire-iid",[x7]:"fire-iid-compat",[A7]:"fire-fcm",[S7]:"fire-fcm-compat",[w7]:"fire-perf",[E7]:"fire-perf-compat",[M7]:"fire-rc",[T7]:"fire-rc-compat",[C7]:"fire-gcs",[b7]:"fire-gcs-compat",[R7]:"fire-fst",[P7]:"fire-fst-compat",[I7]:"fire-vertex","fire-js":"fire-js",[D7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map,N7=new Map,NS=new Map;function Bb(n,e){try{n.container.addComponent(e)}catch(t){ul.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function dl(n){const e=n.name;if(NS.has(e))return ul.debug(`There were multiple attempts to register component ${e}.`),!1;NS.set(e,n);for(const t of My.values())Bb(t,n);for(const t of N7.values())Bb(t,n);return!0}function Nf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vo(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uc=new md("app","Firebase",F7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=B7;function HD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:LS,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw uc.create("bad-app-name",{appName:String(r)});if(t||(t=DD()),!t)throw uc.create("no-options");const s=My.get(r);if(s){if(Gm(t,s.options)&&Gm(i,s.config))return s;throw uc.create("duplicate-app",{appName:r})}const o=new Wj(r);for(const c of NS.values())o.addComponent(c);const l=new O7(t,i,o);return My.set(r,l),l}function zD(n=LS){const e=My.get(n);if(!e&&n===LS&&DD())return HD();if(!e)throw uc.create("no-app",{appName:n});return e}function Yo(n,e,t){var i;let r=(i=L7[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ul.warn(l.join(" "));return}dl(new Zo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7="firebase-heartbeat-database",U7=1,Vm="firebase-heartbeat-store";let FA=null;function GD(){return FA||(FA=UD(k7,U7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vm)}catch(t){console.warn(t)}}}}).catch(n=>{throw uc.create("idb-open",{originalErrorMessage:n.message})})),FA}async function H7(n){try{const t=(await GD()).transaction(Vm),i=await t.objectStore(Vm).get(VD(n));return await t.done,i}catch(e){if(e instanceof na)ul.warn(e.message);else{const t=uc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ul.warn(t.message)}}}async function Lb(n,e){try{const i=(await GD()).transaction(Vm,"readwrite");await i.objectStore(Vm).put(e,VD(n)),await i.done}catch(t){if(t instanceof na)ul.warn(t.message);else{const i=uc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ul.warn(i.message)}}}function VD(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=1024,G7=30*24*60*60*1e3;class V7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j7(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Nb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=G7}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ul.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Nb(),{heartbeatsToSend:i,unsentEntries:r}=W7(this._heartbeatsCache.heartbeats),s=ID(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ul.warn(t),""}}}function Nb(){return new Date().toISOString().substring(0,10)}function W7(n,e=z7){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Fb(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Fb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class j7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ND()?FD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H7(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Lb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Lb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Fb(n){return ID(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(n){dl(new Zo("platform-logger",e=>new s7(e),"PRIVATE")),dl(new Zo("heartbeat",e=>new V7(e),"PRIVATE")),Yo(BS,Db,n),Yo(BS,Db,"esm2017"),Yo("fire-js","")}X7("");var J7="firebase",K7="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(J7,K7,"app");function P1(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function WD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y7=WD,jD=new md("auth","Firebase",WD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new R1("@firebase/auth");function q7(n,...e){Ty.logLevel<=Ln.WARN&&Ty.warn(`Auth (${gg}): ${n}`,...e)}function M0(n,...e){Ty.logLevel<=Ln.ERROR&&Ty.error(`Auth (${gg}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(n,...e){throw D1(n,...e)}function qo(n,...e){return D1(n,...e)}function XD(n,e,t){const i=Object.assign(Object.assign({},Y7()),{[e]:t});return new md("auth","Firebase",i).create(e,{appName:n.name})}function rl(n){return XD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D1(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return jD.create(n,...e)}function Vt(n,e,...t){if(!n)throw D1(e,...t)}function Ka(n){const e="INTERNAL ASSERTION FAILED: "+n;throw M0(e),new Error(e)}function hl(n,e){n||Ka(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Q7(){return Ob()==="http:"||Ob()==="https:"}function Ob(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q7()||LD()||"connection"in navigator)?navigator.onLine:!0}function Z7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.shortDelay=e,this.longDelay=t,hl(t>e,"Short delay should be less than long delay!"),this.isMobile=Mj()||Cj()}get(){return $7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e){hl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tX=new vg(3e4,6e4);function Sc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function wc(n,e,t,i,r={}){return KD(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const l=mg(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},s);return Tj()||(d.referrerPolicy="no-referrer"),JD.fetch()(YD(n,n.config.apiHost,t,l),d)})}async function KD(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},eX),e);try{const r=new iX(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw m0(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw m0(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw m0(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw m0(n,"user-disabled",o);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw XD(n,p,d);Ao(n,p)}}catch(r){if(r instanceof na)throw r;Ao(n,"network-request-failed",{message:String(r)})}}async function yg(n,e,t,i,r={}){const s=await wc(n,e,t,i,r);return"mfaPendingCredential"in s&&Ao(n,"multi-factor-auth-required",{_serverResponse:s}),s}function YD(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?B1(n.config,r):`${n.config.apiScheme}://${r}`}function nX(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(qo(this.auth,"network-request-failed")),tX.get())})}}function m0(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=qo(n,e,i);return r.customData._tokenResponse=t,r}function kb(n){return n!==void 0&&n.enterprise!==void 0}class rX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nX(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sX(n,e){return wc(n,"GET","/v2/recaptchaConfig",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oX(n,e){return wc(n,"POST","/v1/accounts:delete",e)}async function qD(n,e){return wc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aX(n,e=!1){const t=To(n),i=await t.getIdToken(e),r=L1(i);Vt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Sm(OA(r.auth_time)),issuedAtTime:Sm(OA(r.iat)),expirationTime:Sm(OA(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function OA(n){return Number(n)*1e3}function L1(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return M0("JWT malformed, contained fewer than 3 sections"),null;try{const r=PD(t);return r?JSON.parse(r):(M0("Failed to decode base64 JWT payload"),null)}catch(r){return M0("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Ub(n){const e=L1(n);return Vt(e,"internal-error"),Vt(typeof e.exp<"u","internal-error"),Vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wm(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof na&&lX(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function lX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sm(this.lastLoginAt),this.creationTime=Sm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Wm(n,qD(t,{idToken:i}));Vt(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QD(s.providerUserInfo):[],l=dX(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new OS(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function uX(n){const e=To(n);await Cy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dX(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function QD(n){return n.map(e=>{var{providerId:t}=e,i=P1(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hX(n,e){const t=await KD(n,{},async()=>{const i=mg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=YD(n,r,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",JD.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fX(n,e){return wc(n,"POST","/v2/accounts:revokeToken",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vt(e.idToken,"internal-error"),Vt(typeof e.idToken<"u","internal-error"),Vt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Vt(e.length!==0,"internal-error");const t=Ub(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await hX(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new af;return i&&(Vt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Vt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Vt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new af,this.toJSON())}_performRefresh(){return Ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n,e){Vt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ya{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=P1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new OS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Wm(this,this.stsTokenManager.getToken(this.auth,e));return Vt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aX(this,e)}reload(){return uX(this)}_assign(e){this!==e&&(Vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ya(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Cy(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vo(this.auth.app))return Promise.reject(rl(this.auth));const e=await this.getIdToken();return await Wm(this,oX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,l,c,d,p;const m=(i=t.displayName)!==null&&i!==void 0?i:void 0,v=(r=t.email)!==null&&r!==void 0?r:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(l=t.tenantId)!==null&&l!==void 0?l:void 0,w=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=t.createdAt)!==null&&d!==void 0?d:void 0,C=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:b,emailVerified:P,isAnonymous:F,providerData:N,stsTokenManager:k}=t;Vt(b&&k,e,"internal-error");const H=af.fromJSON(this.name,k);Vt(typeof b=="string",e,"internal-error"),tc(m,e.name),tc(v,e.name),Vt(typeof P=="boolean",e,"internal-error"),Vt(typeof F=="boolean",e,"internal-error"),tc(y,e.name),tc(S,e.name),tc(M,e.name),tc(w,e.name),tc(x,e.name),tc(C,e.name);const L=new Ya({uid:b,auth:e,email:v,emailVerified:P,displayName:m,isAnonymous:F,photoURL:S,phoneNumber:y,tenantId:M,stsTokenManager:H,createdAt:x,lastLoginAt:C});return N&&Array.isArray(N)&&(L.providerData=N.map(B=>Object.assign({},B))),w&&(L._redirectEventId=w),L}static async _fromIdTokenResponse(e,t,i=!1){const r=new af;r.updateFromServerResponse(t);const s=new Ya({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Cy(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Vt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?QD(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new af;l.updateFromIdToken(i);const c=new Ya({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new OS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Map;function qa(n){hl(n instanceof Function,"Expected a class definition");let e=Hb.get(n);return e?(hl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$D.type="NONE";const zb=$D;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(n,e,t){return`firebase:${n}:${e}:${t}`}class lf{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=T0(this.userKey,r.apiKey,s),this.fullPersistenceKey=T0("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ya._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new lf(qa(zb),e,i);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||qa(zb);const o=T0(i,e.config.apiKey,e.name);let l=null;for(const d of t)try{const p=await d._get(o);if(p){const m=Ya._fromJSON(e,p);d!==s&&(l=m),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new lf(s,e,i):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new lf(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rB(e))return"Blackberry";if(sB(e))return"Webos";if(eB(e))return"Safari";if((e.includes("chrome/")||tB(e))&&!e.includes("edge/"))return"Chrome";if(iB(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZD(n=Rr()){return/firefox\//i.test(n)}function eB(n=Rr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tB(n=Rr()){return/crios\//i.test(n)}function nB(n=Rr()){return/iemobile/i.test(n)}function iB(n=Rr()){return/android/i.test(n)}function rB(n=Rr()){return/blackberry/i.test(n)}function sB(n=Rr()){return/webos/i.test(n)}function N1(n=Rr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pX(n=Rr()){var e;return N1(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mX(){return bj()&&document.documentMode===10}function oB(n=Rr()){return N1(n)||iB(n)||sB(n)||rB(n)||/windows phone/i.test(n)||nB(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(n,e=[]){let t;switch(n){case"Browser":t=Gb(Rr());break;case"Worker":t=`${Gb(Rr())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gg}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vX(n,e={}){return wc(n,"GET","/v2/passwordPolicy",Sc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yX=6;class _X{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yX,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vb(this),this.idTokenSubscription=new Vb(this),this.beforeStateQueue=new gX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qa(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await lf.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qD(this,{idToken:e}),i=await Ya._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cy(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vo(this.app))return Promise.reject(rl(this));const t=e?To(e):null;return t&&Vt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vo(this.app)?Promise.reject(rl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vo(this.app)?Promise.reject(rl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vX(this),t=new _X(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new md("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await fX(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qa(e)||this._popupRedirectResolver;Vt(t,this,"argument-error"),this.redirectPersistenceManager=await lf.create(this,[qa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&q7(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function gd(n){return To(n)}class Vb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lj(t=>this.observer=t)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AX(n){__=n}function lB(n){return __.loadJS(n)}function SX(){return __.recaptchaEnterpriseScript}function wX(){return __.gapiScript}function EX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class MX{constructor(){this.enterprise=new TX}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TX{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const CX="recaptcha-enterprise",cB="NO_RECAPTCHA";class bX{constructor(e){this.type=CX,this.auth=gd(e)}async verify(e="verify",t=!1){async function i(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{sX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new rX(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function r(s,o,l){const c=window.grecaptcha;kb(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(cB)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MX().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(l=>{if(!t&&kb(window.grecaptcha))r(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SX();c.length!==0&&(c+=l),lB(c).then(()=>{r(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Wb(n,e,t,i=!1,r=!1){const s=new bX(n);let o;if(r)o=cB;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function kS(n,e,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Wb(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Wb(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(n,e){const t=Nf(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(Gm(s,e??{}))return r;Ao(r,"already-initialized")}return t.initialize({options:e})}function IX(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(qa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function PX(n,e,t){const i=gd(n);Vt(i._canInitEmulator,i,"emulator-config-failed"),Vt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=uB(e),{host:o,port:l}=DX(e),c=l===null?"":`:${l}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),BX()}function uB(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DX(n){const e=uB(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:jb(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:jb(o)}}}function jb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BX(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ka("not implemented")}_getIdTokenResponse(e){return Ka("not implemented")}_linkToIdToken(e,t){return Ka("not implemented")}_getReauthenticationResolver(e){return Ka("not implemented")}}async function LX(n,e){return wc(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NX(n,e){return yg(n,"POST","/v1/accounts:signInWithPassword",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FX(n,e){return yg(n,"POST","/v1/accounts:signInWithEmailLink",Sc(n,e))}async function OX(n,e){return yg(n,"POST","/v1/accounts:signInWithEmailLink",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends F1{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new jm(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new jm(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kS(e,t,"signInWithPassword",NX);case"emailLink":return FX(e,{email:this._email,oobCode:this._password});default:Ao(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kS(e,i,"signUpPassword",LX);case"emailLink":return OX(e,{idToken:t,email:this._email,oobCode:this._password});default:Ao(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(n,e){return yg(n,"POST","/v1/accounts:signInWithIdp",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX="http://localhost";class sd extends F1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ao("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=P1(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new sd(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return cf(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,cf(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cf(e,t)}buildRequest(){const e={requestUri:kX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mg(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UX(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HX(n){const e=am(lm(n)).link,t=e?am(lm(e)).deep_link_id:null,i=am(lm(n)).deep_link_id;return(i?am(lm(i)).link:null)||i||t||e||n}class O1{constructor(e){var t,i,r,s,o,l;const c=am(lm(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,m=UX((r=c.mode)!==null&&r!==void 0?r:null);Vt(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=HX(e);try{return new O1(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.providerId=Ff.PROVIDER_ID}static credential(e,t){return jm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=O1.parseLink(t);return Vt(i,"argument-error"),jm._fromEmailAndCode(e,i.code,i.tenantId)}}Ff.PROVIDER_ID="password";Ff.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ff.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends dB{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends _g{constructor(){super("facebook.com")}static credential(e){return sd._fromParams({providerId:rc.PROVIDER_ID,signInMethod:rc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rc.credentialFromTaggedObject(e)}static credentialFromError(e){return rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rc.credential(e.oauthAccessToken)}catch{return null}}}rc.FACEBOOK_SIGN_IN_METHOD="facebook.com";rc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends _g{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sd._fromParams({providerId:sc.PROVIDER_ID,signInMethod:sc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sc.credentialFromTaggedObject(e)}static credentialFromError(e){return sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return sc.credential(t,i)}catch{return null}}}sc.GOOGLE_SIGN_IN_METHOD="google.com";sc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends _g{constructor(){super("github.com")}static credential(e){return sd._fromParams({providerId:oc.PROVIDER_ID,signInMethod:oc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oc.credentialFromTaggedObject(e)}static credentialFromError(e){return oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oc.credential(e.oauthAccessToken)}catch{return null}}}oc.GITHUB_SIGN_IN_METHOD="github.com";oc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends _g{constructor(){super("twitter.com")}static credential(e,t){return sd._fromParams({providerId:ac.PROVIDER_ID,signInMethod:ac.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ac.credentialFromTaggedObject(e)}static credentialFromError(e){return ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ac.credential(t,i)}catch{return null}}}ac.TWITTER_SIGN_IN_METHOD="twitter.com";ac.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zX(n,e){return yg(n,"POST","/v1/accounts:signUp",Sc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await Ya._fromIdTokenResponse(e,i,r),o=Xb(i);return new od({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Xb(i);return new od({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Xb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends na{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,by.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new by(e,t,i,r)}}function hB(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?by._fromErrorAndOperation(n,s,e,i):s})}async function GX(n,e,t=!1){const i=await Wm(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return od._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VX(n,e,t=!1){const{auth:i}=n;if(Vo(i.app))return Promise.reject(rl(i));const r="reauthenticate";try{const s=await Wm(n,hB(i,r,e,n),t);Vt(s.idToken,i,"internal-error");const o=L1(s.idToken);Vt(o,i,"internal-error");const{sub:l}=o;return Vt(n.uid===l,i,"user-mismatch"),od._forOperation(n,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ao(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(n,e,t=!1){if(Vo(n.app))return Promise.reject(rl(n));const i="signIn",r=await hB(n,i,e),s=await od._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function WX(n,e){return fB(gd(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(n){const e=gd(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jX(n,e,t){if(Vo(n.app))return Promise.reject(rl(n));const i=gd(n),o=await kS(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zX).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&pB(n),c}),l=await od._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l}function XX(n,e,t){return Vo(n.app)?Promise.reject(rl(n)):WX(To(n),Ff.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pB(n),i})}function JX(n,e,t,i){return To(n).onIdTokenChanged(e,t,i)}function KX(n,e,t){return To(n).beforeAuthStateChanged(e,t)}function mB(n,e,t,i){return To(n).onAuthStateChanged(e,t,i)}function YX(n){return To(n).signOut()}const Ry="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ry,"1"),this.storage.removeItem(Ry),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=1e3,QX=10;class vB extends gB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);mX()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,QX):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},qX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vB.type="LOCAL";const $X=vB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB extends gB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yB.type="SESSION";const _B=yB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZX(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new x_(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(o).map(async d=>d(t.origin,s)),c=await ZX(l);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}x_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const d=k1("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(v.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(){return window}function tJ(n){Qo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(){return typeof Qo().WorkerGlobalScope<"u"&&typeof Qo().importScripts=="function"}async function nJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iJ(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rJ(){return xB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="firebaseLocalStorageDb",sJ=1,Iy="firebaseLocalStorage",SB="fbase_key";class xg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function A_(n,e){return n.transaction([Iy],e?"readwrite":"readonly").objectStore(Iy)}function oJ(){const n=indexedDB.deleteDatabase(AB);return new xg(n).toPromise()}function US(){const n=indexedDB.open(AB,sJ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Iy,{keyPath:SB})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Iy)?e(i):(i.close(),await oJ(),e(await US()))})})}async function Jb(n,e,t){const i=A_(n,!0).put({[SB]:e,value:t});return new xg(i).toPromise()}async function aJ(n,e){const t=A_(n,!1).get(e),i=await new xg(t).toPromise();return i===void 0?null:i.value}function Kb(n,e){const t=A_(n,!0).delete(e);return new xg(t).toPromise()}const lJ=800,cJ=3;class wB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await US(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cJ)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=x_._getInstance(rJ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await nJ(),!this.activeServiceWorker)return;this.sender=new eJ(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await US();return await Jb(e,Ry,"1"),await Kb(e,Ry),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>aJ(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=A_(r,!1).getAll();return new xg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wB.type="LOCAL";const uJ=wB;new vg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(n,e){return e?qa(e):(Vt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends F1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hJ(n){return fB(n.auth,new U1(n),n.bypassAuthState)}function fJ(n){const{auth:e,user:t}=n;return Vt(t,e,"internal-error"),VX(t,new U1(n),n.bypassAuthState)}async function pJ(n){const{auth:e,user:t}=n;return Vt(t,e,"internal-error"),GX(t,new U1(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hJ;case"linkViaPopup":case"linkViaRedirect":return pJ;case"reauthViaPopup":case"reauthViaRedirect":return fJ;default:Ao(this.auth,"internal-error")}}resolve(e){hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mJ=new vg(2e3,1e4);class tf extends EB{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,tf.currentPopupAction&&tf.currentPopupAction.cancel(),tf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vt(e,this.auth,"internal-error"),e}async onExecution(){hl(this.filter.length===1,"Popup operations only handle one event");const e=k1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mJ.get())};e()}}tf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="pendingRedirect",C0=new Map;class vJ extends EB{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=C0.get(this.auth._key());if(!e){try{const i=await yJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}C0.set(this.auth._key(),e)}return this.bypassAuthState||C0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yJ(n,e){const t=AJ(e),i=xJ(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function _J(n,e){C0.set(n._key(),e)}function xJ(n){return qa(n._redirectPersistence)}function AJ(n){return T0(gJ,n.config.apiKey,n.name)}async function SJ(n,e,t=!1){if(Vo(n.app))return Promise.reject(rl(n));const i=gd(n),r=dJ(i,e),o=await new vJ(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ=10*60*1e3;class EJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!MB(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(qo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MB({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MB(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TJ(n,e={}){return wc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bJ=/^https?/;async function RJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await TJ(n);for(const t of e)try{if(IJ(t))return}catch{}Ao(n,"unauthorized-domain")}function IJ(n){const e=FS(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!bJ.test(t))return!1;if(CJ.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ=new vg(3e4,6e4);function qb(){const n=Qo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DJ(n){return new Promise((e,t)=>{var i,r,s;function o(){qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qb(),t(qo(n,"network-request-failed"))},timeout:PJ.get()})}if(!((r=(i=Qo().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Qo().gapi)===null||s===void 0)&&s.load)o();else{const l=EX("iframefcb");return Qo()[l]=()=>{gapi.load?o():t(qo(n,"network-request-failed"))},lB(`${wX()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw b0=null,e})}let b0=null;function BJ(n){return b0=b0||DJ(n),b0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ=new vg(5e3,15e3),NJ="__/auth/iframe",FJ="emulator/auth/iframe",OJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UJ(n){const e=n.config;Vt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?B1(e,FJ):`https://${n.config.authDomain}/${NJ}`,i={apiKey:e.apiKey,appName:n.name,v:gg},r=kJ.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${mg(i).slice(1)}`}async function HJ(n){const e=await BJ(n),t=Qo().gapi;return Vt(t,n,"internal-error"),e.open({where:document.body,url:UJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OJ,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=qo(n,"network-request-failed"),l=Qo().setTimeout(()=>{s(o)},LJ.get());function c(){Qo().clearTimeout(l),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GJ=500,VJ=600,WJ="_blank",jJ="http://localhost";class Qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XJ(n,e,t,i=GJ,r=VJ){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},zJ),{width:i.toString(),height:r.toString(),top:s,left:o}),d=Rr().toLowerCase();t&&(l=tB(d)?WJ:t),ZD(d)&&(e=e||jJ,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[y,S])=>`${v}${y}=${S},`,"");if(pX(d)&&l!=="_self")return JJ(e||"",l),new Qb(null);const m=window.open(e||"",l,p);Vt(m,n,"popup-blocked");try{m.focus()}catch{}return new Qb(m)}function JJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ="__/auth/handler",YJ="emulator/auth/handler",qJ=encodeURIComponent("fac");async function $b(n,e,t,i,r,s){Vt(n.config.authDomain,n,"auth-domain-config-required"),Vt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:gg,eventId:r};if(e instanceof dB){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Bj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof _g){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await n._getAppCheckToken(),d=c?`#${qJ}=${encodeURIComponent(c)}`:"";return`${QJ(n)}?${mg(l).slice(1)}${d}`}function QJ({config:n}){return n.emulator?B1(n,YJ):`https://${n.authDomain}/${KJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="webStorageSupport";class $J{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_B,this._completeRedirectFn=SJ,this._overrideRedirectResult=_J}async _openPopup(e,t,i,r){var s;hl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $b(e,t,i,FS(),r);return XJ(e,o,k1())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await $b(e,t,i,FS(),r);return tJ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(hl(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await HJ(e),i=new EJ(e);return t.register("authEvent",r=>(Vt(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kA,{type:kA},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[kA];o!==void 0&&t(!!o),Ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oB()||eB()||N1()}}const ZJ=$J;var Zb="@firebase/auth",eR="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nK(n){dl(new Zo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;Vt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aB(n)},d=new xX(i,r,s,c);return IX(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),dl(new Zo("auth-internal",e=>{const t=gd(e.getProvider("auth").getImmediate());return(i=>new eK(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yo(Zb,eR,tK(n)),Yo(Zb,eR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=5*60,rK=BD("authIdTokenMaxAge")||iK;let tR=null;const sK=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>rK)return;const r=t==null?void 0:t.token;tR!==r&&(tR=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function oK(n=zD()){const e=Nf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=RX(n,{popupRedirectResolver:ZJ,persistence:[uJ,$X,_B]}),i=BD("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=sK(s.toString());KX(t,o,()=>o(t.currentUser)),JX(t,l=>o(l))}}const r=wj("auth");return r&&PX(t,`http://${r}`),t}function aK(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}AX({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=qo("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",aK().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nK("Browser");const TB="@firebase/installations",H1="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=1e4,bB=`w:${H1}`,RB="FIS_v2",lK="https://firebaseinstallations.googleapis.com/v1",cK=60*60*1e3,uK="installations",dK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ad=new md(uK,dK,hK);function IB(n){return n instanceof na&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB({projectId:n}){return`${lK}/projects/${n}/installations`}function DB(n){return{token:n.token,requestStatus:2,expiresIn:pK(n.expiresIn),creationTime:Date.now()}}async function BB(n,e){const i=(await e.json()).error;return ad.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function LB({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function fK(n,{refreshToken:e}){const t=LB(n);return t.append("Authorization",mK(e)),t}async function NB(n){const e=await n();return e.status>=500&&e.status<600?n():e}function pK(n){return Number(n.replace("s","000"))}function mK(n){return`${RB} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gK({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=PB(n),r=LB(n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={fid:t,authVersion:RB,appId:n.appId,sdkVersion:bB},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await NB(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:DB(d.authToken)}}else throw await BB("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=/^[cdef][\w-]{21}$/,HS="";function _K(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=xK(n);return yK.test(t)?t:HS}catch{return HS}}function xK(n){return vK(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=new Map;function kB(n,e){const t=S_(n);UB(t,e),AK(t,e)}function UB(n,e){const t=OB.get(n);if(t)for(const i of t)i(e)}function AK(n,e){const t=SK();t&&t.postMessage({key:n,fid:e}),wK()}let zu=null;function SK(){return!zu&&"BroadcastChannel"in self&&(zu=new BroadcastChannel("[Firebase] FID Change"),zu.onmessage=n=>{UB(n.data.key,n.data.fid)}),zu}function wK(){OB.size===0&&zu&&(zu.close(),zu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK="firebase-installations-database",MK=1,ld="firebase-installations-store";let UA=null;function z1(){return UA||(UA=UD(EK,MK,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ld)}}})),UA}async function Py(n,e){const t=S_(n),r=(await z1()).transaction(ld,"readwrite"),s=r.objectStore(ld),o=await s.get(t);return await s.put(e,t),await r.done,(!o||o.fid!==e.fid)&&kB(n,e.fid),e}async function HB(n){const e=S_(n),i=(await z1()).transaction(ld,"readwrite");await i.objectStore(ld).delete(e),await i.done}async function w_(n,e){const t=S_(n),r=(await z1()).transaction(ld,"readwrite"),s=r.objectStore(ld),o=await s.get(t),l=e(o);return l===void 0?await s.delete(t):await s.put(l,t),await r.done,l&&(!o||o.fid!==l.fid)&&kB(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(n){let e;const t=await w_(n.appConfig,i=>{const r=TK(i),s=CK(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===HS?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function TK(n){const e=n||{fid:_K(),registrationStatus:0};return zB(e)}function CK(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ad.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=bK(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:RK(n)}:{installationEntry:e}}async function bK(n,e){try{const t=await gK(n,e);return Py(n.appConfig,t)}catch(t){throw IB(t)&&t.customData.serverCode===409?await HB(n.appConfig):await Py(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function RK(n){let e=await nR(n.appConfig);for(;e.registrationStatus===1;)await FB(100),e=await nR(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await G1(n);return i||t}return e}function nR(n){return w_(n,e=>{if(!e)throw ad.create("installation-not-found");return zB(e)})}function zB(n){return IK(n)?{fid:n.fid,registrationStatus:0}:n}function IK(n){return n.registrationStatus===1&&n.registrationTime+CB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PK({appConfig:n,heartbeatServiceProvider:e},t){const i=DK(n,t),r=fK(n,t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={installation:{sdkVersion:bB,appId:n.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await NB(()=>fetch(i,l));if(c.ok){const d=await c.json();return DB(d)}else throw await BB("Generate Auth Token",c)}function DK(n,{fid:e}){return`${PB(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(n,e=!1){let t;const i=await w_(n.appConfig,s=>{if(!GB(s))throw ad.create("not-registered");const o=s.authToken;if(!e&&NK(o))return s;if(o.requestStatus===1)return t=BK(n,e),s;{if(!navigator.onLine)throw ad.create("app-offline");const l=OK(s);return t=LK(n,l),l}});return t?await t:i.authToken}async function BK(n,e){let t=await iR(n.appConfig);for(;t.authToken.requestStatus===1;)await FB(100),t=await iR(n.appConfig);const i=t.authToken;return i.requestStatus===0?V1(n,e):i}function iR(n){return w_(n,e=>{if(!GB(e))throw ad.create("not-registered");const t=e.authToken;return kK(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function LK(n,e){try{const t=await PK(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Py(n.appConfig,i),t}catch(t){if(IB(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await HB(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Py(n.appConfig,i)}throw t}}function GB(n){return n!==void 0&&n.registrationStatus===2}function NK(n){return n.requestStatus===2&&!FK(n)}function FK(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+cK}function OK(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function kK(n){return n.requestStatus===1&&n.requestTime+CB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UK(n){const e=n,{installationEntry:t,registrationPromise:i}=await G1(e);return i?i.catch(console.error):V1(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HK(n,e=!1){const t=n;return await zK(t),(await V1(t,e)).token}async function zK(n){const{registrationPromise:e}=await G1(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GK(n){if(!n||!n.options)throw HA("App Configuration");if(!n.name)throw HA("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw HA(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function HA(n){return ad.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="installations",VK="installations-internal",WK=n=>{const e=n.getProvider("app").getImmediate(),t=GK(e),i=Nf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},jK=n=>{const e=n.getProvider("app").getImmediate(),t=Nf(e,VB).getImmediate();return{getId:()=>UK(t),getToken:r=>HK(t,r)}};function XK(){dl(new Zo(VB,WK,"PUBLIC")),dl(new Zo(VK,jK,"PRIVATE"))}XK();Yo(TB,H1);Yo(TB,H1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="analytics",JK="firebase_id",KK="origin",YK=60*1e3,qK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",W1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new R1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fs=new md("analytics","Analytics",QK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(n){if(!n.startsWith(W1)){const e=fs.create("invalid-gtag-resource",{gtagURL:n});return Kr.warn(e.message),""}return n}function WB(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function ZK(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function eY(n,e){const t=ZK("firebase-js-sdk-policy",{createScriptURL:$K}),i=document.createElement("script"),r=`${W1}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function tY(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function nY(n,e,t,i,r,s){const o=i[r];try{if(o)await e[o];else{const c=(await WB(t)).find(d=>d.measurementId===r);c&&await e[c.appId]}}catch(l){Kr.error(l)}n("config",r,s)}async function iY(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await WB(t);for(const c of o){const d=l.find(m=>m.measurementId===c),p=d&&e[d.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",i,r||{})}catch(s){Kr.error(s)}}function rY(n,e,t,i){async function r(s,...o){try{if(s==="event"){const[l,c]=o;await iY(n,e,t,l,c)}else if(s==="config"){const[l,c]=o;await nY(n,e,t,i,l,c)}else if(s==="consent"){const[l,c]=o;n("consent",l,c)}else if(s==="get"){const[l,c,d]=o;n("get",l,c,d)}else if(s==="set"){const[l]=o;n("set",l)}else n(s,...o)}catch(l){Kr.error(l)}}return r}function sY(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=rY(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}function oY(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(W1)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY=30,lY=1e3;class cY{constructor(e={},t=lY){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const jB=new cY;function uY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function dY(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:uY(i)},s=qK.replace("{app-id}",t),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw fs.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function hY(n,e=jB,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw fs.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw fs.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new mY;return setTimeout(async()=>{l.abort()},YK),XB({appId:i,apiKey:r,measurementId:s},o,l,e)}async function XB(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=jB){var s;const{appId:o,measurementId:l}=n;try{await fY(i,e)}catch(c){if(l)return Kr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await dY(n);return r.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!pY(d)){if(r.deleteThrottleMetadata(o),l)return Kr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=d==null?void 0:d.customData)===null||s===void 0?void 0:s.httpStatus)===503?bb(t,r.intervalMillis,aY):bb(t,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return r.setThrottleMetadata(o,m),Kr.debug(`Calling attemptFetch again in ${p} millis`),XB(n,m,i,r)}}function fY(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(fs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pY(n){if(!(n instanceof na)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class mY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function gY(n,e,t,i,r){if(r&&r.global){n("event",t,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vY(){if(ND())try{await FD()}catch(n){return Kr.warn(fs.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Kr.warn(fs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function yY(n,e,t,i,r,s,o){var l;const c=hY(n);c.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&Kr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Kr.error(y)),e.push(c);const d=vY().then(y=>{if(y)return i.getId()}),[p,m]=await Promise.all([c,d]);oY(s)||eY(s,p.measurementId),r("js",new Date);const v=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return v[KK]="firebase",v.update=!0,m!=null&&(v[JK]=m),r("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e){this.app=e}_delete(){return delete wm[this.app.options.appId],Promise.resolve()}}let wm={},rR=[];const sR={};let zA="dataLayer",xY="gtag",oR,JB,aR=!1;function AY(){const n=[];if(LD()&&n.push("This is a browser extension environment."),Rj()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=fs.create("invalid-analytics-context",{errorInfo:e});Kr.warn(t.message)}}function SY(n,e,t){AY();const i=n.options.appId;if(!i)throw fs.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Kr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fs.create("no-api-key");if(wm[i]!=null)throw fs.create("already-exists",{id:i});if(!aR){tY(zA);const{wrappedGtag:s,gtagCore:o}=sY(wm,rR,sR,zA,xY);JB=s,oR=o,aR=!0}return wm[i]=yY(n,rR,sR,e,oR,zA,t),new _Y(n)}function wY(n=zD()){n=To(n);const e=Nf(n,Dy);return e.isInitialized()?e.getImmediate():EY(n)}function EY(n,e={}){const t=Nf(n,Dy);if(t.isInitialized()){const r=t.getImmediate();if(Gm(e,t.getOptions()))return r;throw fs.create("already-initialized")}return t.initialize({options:e})}function MY(n,e,t,i){n=To(n),gY(JB,wm[n.app.options.appId],e,t,i).catch(r=>Kr.error(r))}const lR="@firebase/analytics",cR="0.10.11";function TY(){dl(new Zo(Dy,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return SY(i,r,t)},"PUBLIC")),dl(new Zo("analytics-internal",n,"PRIVATE")),Yo(lR,cR),Yo(lR,cR,"esm2017");function n(e){try{const t=e.getProvider(Dy).getImmediate();return{logEvent:(i,r,s)=>MY(t,i,r,s)}}catch(t){throw fs.create("interop-component-reg-failed",{reason:t})}}}TY();const CY={apiKey:"AIzaSyBXmPZkTXaiKTN1k3mYFz9yVpPUhjavbAg",authDomain:"rise-up-1a912.firebaseapp.com",projectId:"rise-up-1a912",storageBucket:"rise-up-1a912.firebasestorage.app",messagingSenderId:"420527456671",appId:"1:420527456671:web:9d1d772ed8e56ba59b7daa",measurementId:"G-D9V7V2ZZSB"},KB=HD(CY),Af=oK(KB);wY(KB);const bY=()=>{const[n,e]=j.useState(""),[t,i]=j.useState(!1),[r,s]=j.useState(null),o=Jm();j.useEffect(()=>{const c=Af.onAuthStateChanged(d=>{s(d||null)});return()=>c()},[]);const l=async()=>{try{await YX(Af),o("/")}catch(c){console.error("Error signing out:",c)}};return q.jsx("nav",{className:`${il.paddingX} w-full flex items-center py-5 fixed top-0 z-20 bg-gradient-to-r from-[#A8D8EA] to-[#D9F0FF] shadow-lg`,children:q.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[q.jsxs(cd,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),window.scrollTo(0,0)},children:[q.jsx("img",{src:dj,className:"w-9 h-9 object-contain logo",alt:"logo"}),q.jsxs("p",{className:"text-[#034752] text-[20px] font-bold cursor-pointer flex",children:["Rise Up",q.jsx("span",{className:"sm:block hidden text-[#10B981]",children:"| Break the Barriers"})]})]}),q.jsxs("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:[Mb.map(c=>q.jsx("li",{className:`${n===c.title?"text-[#034752]":"text-[#10B981]"} hover:text-[#034752] text-[18px] font-medium cursor-pointer`,onClick:()=>e(c.title),children:q.jsx("a",{href:`#${c.id}`,children:c.title})},c.id)),r?q.jsx("li",{className:"text-[#034752] hover:text-[#10B981] text-[18px] font-medium cursor-pointer",onClick:l,children:"Logout"}):q.jsx("li",{className:"text-[#034752] hover:text-[#10B981] text-[18px] font-medium cursor-pointer",onClick:()=>o("/Login"),children:"Login"})]}),q.jsx("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:q.jsx("img",{src:t?fj:hj,alt:"menu",className:"w-[28px] h-[28px] object-contain cursor-pointer",onClick:()=>i(!t)})}),t&&q.jsx("div",{className:"p-6 bg-gradient-to-b from-[#A8D8EA] to-[#D9F0FF] absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl shadow-lg",children:q.jsxs("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:[Mb.map(c=>q.jsx("li",{className:`${n===c.title?"text-[#034752]":"text-[#10B981]"} font-poppins font-medium cursor-pointer text-[16px]`,onClick:()=>{i(!t),e(c.title)},children:q.jsx("a",{href:`#${c.id}`,children:c.title})},c.id)),r?q.jsx("li",{className:"text-[#034752] hover:text-[#10B981] font-medium text-[16px] cursor-pointer",onClick:l,children:"Logout"}):q.jsx("li",{className:"text-[#034752] hover:text-[#10B981] font-medium text-[16px] cursor-pointer",onClick:()=>o("/Login"),children:"Login"})]})})]})})};var RY=Object.defineProperty,IY=Object.defineProperties,PY=Object.getOwnPropertyDescriptors,uR=Object.getOwnPropertySymbols,DY=Object.prototype.hasOwnProperty,BY=Object.prototype.propertyIsEnumerable,dR=(n,e,t)=>e in n?RY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$p=(n,e)=>{for(var t in e||(e={}))DY.call(e,t)&&dR(n,t,e[t]);if(uR)for(var t of uR(e))BY.call(e,t)&&dR(n,t,e[t]);return n},Zp=(n,e)=>IY(n,PY(e)),LY=class extends j.Component{constructor(n){super(n),this.ref=WA.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Zp($p({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Zp($p({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Zp($p({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Zp($p({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),l=i*100,c=r*100;return{tiltX:s,tiltY:o,percentageX:l,percentageY:c}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:Zp($p({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return q.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const NY=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),YB=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),hR=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),FY=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),j1=(n,e)=>function(){return q.jsxs(rd.section,{variants:FY(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${il.padding} max-w-7xl mx-auto relative z-0`,children:[q.jsx("span",{className:"hash-span",id:e,children:""}),q.jsx(n,{})]})},OY=({index:n,title:e,description:t})=>q.jsx(LY,{className:"xs:w-[250px] w-full",children:q.jsx(rd.div,{variants:YB("right","spring",n*.5,.75),className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:q.jsxs("div",{options:{max:45,scale:1,speed:450},className:"bg-tertiary rounded-[20px] py-5 px-8 min-h-[280px] flex justify-evenly items-start flex-col",children:[q.jsx("h3",{className:"text-white text-[20px] font-bold text-center mb-2",children:e}),q.jsx("p",{className:"text-secondary text-[16px] leading-[24px] text-center",children:t})]})})}),kY=()=>q.jsxs(q.Fragment,{children:[q.jsxs(rd.div,{variant:NY(),children:[q.jsx("p",{className:il.sectionSubText,children:"Introduction"}),q.jsx("h2",{className:il.sectionHeadText,children:"Overview"})]}),q.jsx(rd.p,{variants:YB("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Rise Up is your companion in breaking the barriers of anxiety and becoming the best version of yourself. From personalized assessments to engaging therapy modules, we empower you to take charge of your journey."}),q.jsx("div",{className:"mt-20 flex flex-wrap gap-10",children:mj.map((n,e)=>q.jsx(OY,{index:e,...n},n.title))})]}),UY=j1(kY,"about"),HY=()=>{const n=[{name:"Take the Assessment",description:"Discover your anxiety level with our AI-powered assessment tool.",action:"#assessment"},{name:"Join Role-Playing",description:"Practice social interactions and get AI-powered feedback.",action:"#roleplay"},{name:"Chat with AI Support",description:"Talk to our empathetic AI chatbot for immediate emotional support.",action:"#chat"},{name:"Explore Therapy Modules",description:"Access curated therapy exercises to overcome social anxiety.",action:"#therapy"}];return q.jsxs("div",{className:"flex flex-col items-center text-center gap-10 py-16 bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:[q.jsx("h2",{className:"text-[#034752] text-4xl font-bold",children:"Ready to Take the Next Step?"}),q.jsx("p",{className:"text-[#034752] text-lg max-w-3xl",children:"Empower yourself with our tools and resources to overcome social anxiety. Take action now and break the barriers!"}),q.jsx("div",{className:"mt-8",children:q.jsx(cd,{to:"/Signup",className:"bg-[#10B981] text-white text-lg font-bold py-3 px-8 rounded-lg shadow-md hover:bg-[#0e966f] transition-colors duration-300",children:"Start My Journey"})}),q.jsx("div",{className:"flex flex-col sm:flex-row flex-wrap justify-center gap-10 mt-12",children:n.map(e=>q.jsxs("div",{className:"bg-white shadow-md rounded-lg p-5 w-72 hover:shadow-lg transition-shadow duration-300",children:[q.jsx("h3",{className:"text-[#034752] text-xl font-bold",children:e.name}),q.jsx("p",{className:"text-[#10B981] text-sm mt-2",children:e.description})]},e.name))}),q.jsx("div",{className:"mt-16 max-w-2xl text-center",children:q.jsx("p",{className:"text-[#034752] text-lg italic",children:'"The journey of a thousand miles begins with a single step. Start yours today!"'})})]})},zY=j1(HY,"");var em={},GA={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var fR;function qB(){return fR||(fR=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=r(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=r(o,l));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(GA)),GA.exports}var pR;function GY(){if(pR)return em;pR=1,em.__esModule=!0,em.default=void 0;var n=i(Sf()),e=i(e2()),t=i(qB());function i(o){return o&&o.__esModule?o:{default:o}}const r=({animate:o=!0,className:l="",layout:c="2-columns",lineColor:d="#FFF",children:p})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",d),n.default.createElement("div",{className:(0,t.default)(l,"vertical-timeline",{"vertical-timeline--animate":o,"vertical-timeline--two-columns":c==="2-columns","vertical-timeline--one-column-left":c==="1-column"||c==="1-column-left","vertical-timeline--one-column-right":c==="1-column-right"})},p));r.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=r;return em.default=s,em}var tm={};function zS(){return zS=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zS.apply(this,arguments)}function VY(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,GS(n,e)}function GS(n,e){return GS=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},GS(n,e)}function WY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var VS=new Map,g0=new WeakMap,mR=0,QB=void 0;function jY(n){QB=n}function XY(n){return n?(g0.has(n)||(mR+=1,g0.set(n,mR.toString())),g0.get(n)):"0"}function JY(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?XY(n.root):n[e])}).toString()}function KY(n){var e=JY(n),t=VS.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(l){var c,d=l.isIntersecting&&r.some(function(p){return l.intersectionRatio>=p});n.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=d),(c=i.get(l.target))==null||c.forEach(function(p){p(d,l)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},VS.set(e,t)}return t}function X1(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=QB),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=KY(t),o=s.id,l=s.observer,c=s.elements,d=c.get(n)||[];return c.has(n)||c.set(n,d),d.push(e),l.observe(n),function(){d.splice(d.indexOf(e),1),d.length===0&&(c.delete(n),l.unobserve(n)),c.size===0&&(l.disconnect(),VS.delete(o))}}var YY=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function gR(n){return typeof n.children!="function"}var By=function(n){VY(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),gR(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,l=r.rootMargin,c=r.trackVisibility,d=r.delay,p=r.fallbackInView;this._unobserveCb=X1(this.node,this.handleChange,{threshold:s,root:o,rootMargin:l,trackVisibility:c,delay:d},p)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!gR(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var l=this.props,c=l.children,d=l.as,p=WY(l,YY);return j.createElement(d||"div",zS({ref:this.handleNode},p),c)},e}(j.Component);By.displayName="InView";By.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function qY(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,l=e.triggerOnce,c=e.skip,d=e.initialInView,p=e.fallbackInView,m=j.useRef(),v=j.useState({inView:!!d}),y=v[0],S=v[1],M=j.useCallback(function(x){m.current!==void 0&&(m.current(),m.current=void 0),!c&&x&&(m.current=X1(x,function(C,b){S({inView:C,entry:b}),b.isIntersecting&&l&&m.current&&(m.current(),m.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},p))},[Array.isArray(t)?t.toString():t,o,s,l,c,r,p,i]);j.useEffect(function(){!m.current&&y.entry&&!l&&!c&&S({inView:!!d})});var w=[M,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const QY=Object.freeze(Object.defineProperty({__proto__:null,InView:By,default:By,defaultFallbackInView:jY,observe:X1,useInView:qY},Symbol.toStringTag,{value:"Module"})),$Y=IL(QY);var vR;function ZY(){if(vR)return tm;vR=1,tm.__esModule=!0,tm.default=void 0;var n=r(Sf()),e=r(e2()),t=r(qB()),i=$Y;function r(l){return l&&l.__esModule?l:{default:l}}const s=({children:l="",className:c="",contentArrowStyle:d=null,contentStyle:p=null,date:m="",dateClassName:v="",icon:y=null,iconClassName:S="",iconOnClick:M=null,onTimelineElementClick:w=null,iconStyle:x=null,id:C="",position:b="",style:P=null,textClassName:F="",intersectionObserverProps:N={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:k=!1,shadowSize:H="small"})=>n.default.createElement(i.InView,N,({inView:L,ref:B})=>n.default.createElement("div",{ref:B,id:C,className:(0,t.default)(c,"vertical-timeline-element",{"vertical-timeline-element--left":b==="left","vertical-timeline-element--right":b==="right","vertical-timeline-element--no-children":l===""}),style:P},n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{style:x,onClick:M,className:(0,t.default)(S,"vertical-timeline-element-icon",`shadow-size-${H}`,{"bounce-in":L||k,"is-hidden":!(L||k)})},y),n.default.createElement("div",{style:p,onClick:w,className:(0,t.default)(F,"vertical-timeline-element-content",{"bounce-in":L||k,"is-hidden":!(L||k)})},n.default.createElement("div",{style:d,className:"vertical-timeline-element-content-arrow"}),l,n.default.createElement("span",{className:(0,t.default)(v,"vertical-timeline-element-date")},m)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,shadowSize:e.default.string,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var o=s;return tm.default=o,tm}var VA,yR;function eq(){return yR||(yR=1,VA={VerticalTimeline:GY().default,VerticalTimelineElement:ZY().default}),VA}eq();class Ag{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const tq=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Qi={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:tq()},J1=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},nq=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=J1(n);Qi.publicKey=t.publicKey,Qi.blockHeadless=t.blockHeadless,Qi.storageProvider=t.storageProvider,Qi.blockList=t.blockList,Qi.limitRate=t.limitRate,Qi.origin=t.origin||e},$B=async(n,e,t={})=>{const i=await fetch(Qi.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new Ag(i.status,r);if(i.ok)return s;throw s},ZB=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},iq=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},eL=n=>n.webdriver||!n.languages||n.languages.length===0,tL=()=>new Ag(451,"Unavailable For Headless Browser"),rq=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},sq=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},oq=(n,e)=>n instanceof FormData?n.get(e):n[e],nL=(n,e)=>{if(sq(n))return!1;rq(n.list,n.watchVariable);const t=oq(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},iL=()=>new Ag(403,"Forbidden"),aq=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},lq=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},rL=async(n,e,t)=>{if(!e.throttle||!t)return!1;aq(e.throttle,e.id);const i=e.id||n;return await lq(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},sL=()=>new Ag(429,"Too Many Requests"),cq=async(n,e,t,i)=>{const r=J1(i),s=r.publicKey||Qi.publicKey,o=r.blockHeadless||Qi.blockHeadless,l=r.storageProvider||Qi.storageProvider,c={...Qi.blockList,...r.blockList},d={...Qi.limitRate,...r.limitRate};return o&&eL(navigator)?Promise.reject(tL()):(ZB(s,n,e),iq(t),t&&nL(c,t)?Promise.reject(iL()):await rL(location.pathname,d,l)?Promise.reject(sL()):$B("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},uq=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},dq=n=>typeof n=="string"?document.querySelector(n):n,hq=async(n,e,t,i)=>{const r=J1(i),s=r.publicKey||Qi.publicKey,o=r.blockHeadless||Qi.blockHeadless,l=Qi.storageProvider||r.storageProvider,c={...Qi.blockList,...r.blockList},d={...Qi.limitRate,...r.limitRate};if(o&&eL(navigator))return Promise.reject(tL());const p=dq(t);ZB(s,n,e),uq(p);const m=new FormData(p);return nL(c,m)?Promise.reject(iL()):await rL(location.pathname,d,l)?Promise.reject(sL()):(m.append("lib_version","4.4.1"),m.append("service_id",n),m.append("template_id",e),m.append("user_id",s),$B("/api/v1.0/email/send-form",m))},fq={init:nq,send:cq,sendForm:hq,EmailJSResponseStatus:Ag},pq=()=>{const n=j.useRef(),[e,t]=j.useState({name:"",email:"",message:""}),[i,r]=j.useState(!1),s=l=>{const{target:c}=l,{name:d,value:p}=c;t({...e,[d]:p})},o=l=>{l.preventDefault(),r(!0),fq.send("service_xosklvf","template_kfccsn9",{from_name:e.name,to_name:"DivyTech",from_email:e.email,to_email:"divyehshivdasswarge@gmail.com",message:e.message},"jS9PFFWBBQIjcVqR8").then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible."),t({name:"",email:"",message:""})},c=>{r(!1),console.error(c),alert("Ahh, something went wrong. Please try again.")})};return q.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[q.jsxs(rd.div,{variants:hR("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[q.jsx("p",{className:il.sectionSubText,children:"Get in touch"}),q.jsx("h3",{className:il.sectionHeadText,children:"Contact."}),q.jsxs("form",{ref:n,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[q.jsxs("label",{className:"flex flex-col",children:[q.jsx("span",{className:"text-white font-medium mb-4",children:"Your Name"}),q.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your good name?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),q.jsxs("label",{className:"flex flex-col",children:[q.jsx("span",{className:"text-white font-medium mb-4",children:"Your email"}),q.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your web address?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),q.jsxs("label",{className:"flex flex-col",children:[q.jsx("span",{className:"text-white font-medium mb-4",children:"Your Message"}),q.jsx("textarea",{rows:7,name:"message",value:e.message,onChange:s,placeholder:"What you want to say?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),q.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:i?"Sending...":"Send"})]})]}),q.jsx(rd.div,{variants:hR("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:q.jsx(k9,{})})]})},mq=j1(pq,"contact"),gq=()=>q.jsxs("footer",{className:"bg-[#034752] text-white py-10",children:[q.jsxs("div",{className:"container mx-auto px-6 sm:px-12 flex flex-col md:flex-row justify-between items-center gap-6",children:[q.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[q.jsx("h2",{className:"text-2xl font-bold",children:"Rise Up"}),q.jsx("p",{className:"text-sm mt-2 text-gray-300",children:"Break the barriers and reclaim your confidence."})]}),q.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-6",children:[q.jsx("a",{href:"#about",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:"About Us"}),q.jsx("a",{href:"#services",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:"Services"}),q.jsx("a",{href:"#contact",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:"Contact"}),q.jsx("a",{href:"#faq",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:"FAQ"})]}),q.jsxs("div",{className:"flex gap-4",children:[q.jsxs("a",{href:"https://www.facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:[q.jsx("i",{className:"fab fa-facebook-f"})," "]}),q.jsxs("a",{href:"https://www.twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:[q.jsx("i",{className:"fab fa-twitter"})," "]}),q.jsxs("a",{href:"https://www.instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:[q.jsx("i",{className:"fab fa-instagram"})," "]}),q.jsxs("a",{href:"https://www.linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-[#10B981] transition-colors duration-300",children:[q.jsx("i",{className:"fab fa-linkedin-in"})," "]})]})]}),q.jsxs("div",{className:"mt-8 text-center text-sm text-gray-300",children:[q.jsxs("p",{children:[" ",new Date().getFullYear()," Rise Up. All rights reserved."]}),q.jsxs("p",{children:[q.jsx("a",{href:"/privacy-policy",className:"hover:text-[#10B981] transition-colors duration-300",children:"Privacy Policy"})," ","|"," ",q.jsx("a",{href:"/terms-of-service",className:"hover:text-[#10B981] transition-colors duration-300",children:"Terms of Service"})]})]})]}),vq=()=>{const[n,e]=j.useState(""),[t,i]=j.useState(""),[r,s]=j.useState(""),[o,l]=j.useState(!1),c=Jm(),d=async p=>{p.preventDefault(),l(!0),s("");try{const m=await XX(Af,n,t);console.log("User logged in:",m.user),c("/")}catch(m){console.error("Login error:",m.message),s("Failed to log in. Please check your email and password.")}finally{l(!1)}};return q.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:q.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full",children:[q.jsxs("div",{className:"flex flex-col items-center mb-6",children:[q.jsx("h1",{className:"text-3xl font-bold text-[#034752]",children:"Welcome Back"}),q.jsx("p",{className:"text-[#10B981] mt-2",children:"Log in to Rise Up and break the barriers"})]}),r&&q.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:r}),q.jsxs("form",{onSubmit:d,className:"space-y-6",children:[q.jsxs("div",{children:[q.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#034752]",children:"Email Address"}),q.jsx("input",{type:"email",id:"email",value:n,onChange:p=>e(p.target.value),className:"w-full mt-1 p-2 border border-[#A8D8EA] rounded-md focus:ring-2 focus:ring-[#10B981] focus:outline-none",placeholder:"Enter your email",required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#034752]",children:"Password"}),q.jsx("input",{type:"password",id:"password",value:t,onChange:p=>i(p.target.value),className:"w-full mt-1 p-2 border border-[#A8D8EA] rounded-md focus:ring-2 focus:ring-[#10B981] focus:outline-none",placeholder:"Enter your password",required:!0})]}),q.jsx("button",{type:"submit",className:`w-full py-2 text-white font-medium rounded-md transition-colors ${o?"bg-gray-400 cursor-not-allowed":"bg-[#10B981] hover:bg-[#034752]"}`,disabled:o,children:o?"Logging in...":"Log In"})]}),q.jsx("div",{className:"mt-6 text-center",children:q.jsxs("p",{className:"text-sm text-[#034752]",children:["Don't have an account?"," ",q.jsx(cd,{to:"/Signup",className:"text-[#10B981] font-medium hover:underline",children:"Sign up"})]})})]})})},yq=()=>{const[n,e]=j.useState(""),[t,i]=j.useState(""),[r,s]=j.useState(""),o=Jm(),l=async c=>{c.preventDefault();try{await jX(Af,n,t),o("/questions")}catch(d){s(d.message)}};return q.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:q.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full",children:[q.jsxs("div",{className:"flex flex-col items-center mb-6",children:[q.jsx("h1",{className:"text-3xl font-bold text-[#034752]",children:"Create Account"}),q.jsx("p",{className:"text-[#10B981] mt-2",children:"Sign up to join the community!"})]}),q.jsxs("form",{onSubmit:l,className:"space-y-6",children:[q.jsxs("div",{children:[q.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#034752]",children:"Email Address"}),q.jsx("input",{type:"email",id:"email",value:n,onChange:c=>e(c.target.value),className:"w-full mt-1 p-2 border border-[#A8D8EA] rounded-md focus:ring-2 focus:ring-[#10B981] focus:outline-none",placeholder:"Enter your email",required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#034752]",children:"Password"}),q.jsx("input",{type:"password",id:"password",value:t,onChange:c=>i(c.target.value),className:"w-full mt-1 p-2 border border-[#A8D8EA] rounded-md focus:ring-2 focus:ring-[#10B981] focus:outline-none",placeholder:"Enter your password",required:!0})]}),r&&q.jsx("p",{className:"text-red-500 text-sm",children:r}),q.jsx("button",{type:"submit",className:"w-full py-2 bg-[#10B981] text-white font-medium rounded-md hover:bg-[#034752] transition-colors",children:"Sign Up"})]}),q.jsx("div",{className:"mt-6 text-center",children:q.jsxs("p",{className:"text-sm text-[#034752]",children:["Already have an account?"," ",q.jsx(cd,{to:"/Login",className:"text-[#10B981] font-medium hover:underline",children:"Log in"})]})})]})})},_q=()=>{const[n,e]=j.useState(null);return j.useEffect(()=>mB(Af,i=>{e(i)}),[]),n?q.jsx(RR,{to:"/questions"}):q.jsx(q.Fragment,{children:q.jsxs("div",{className:"relative z-0 bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:[q.jsx(bY,{}),q.jsx("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:q.jsx(uj,{})}),q.jsx(UY,{id:"about"}),q.jsx(zY,{}),q.jsxs("div",{className:"relative z-0",children:[q.jsx(mq,{}),q.jsx(H9,{})]}),q.jsx(gq,{})]})})},xq=({questionSets:n})=>{const[e,t]=j.useState(0),[i,r]=j.useState({}),[s,o]=j.useState(!1),[l,c]=j.useState(Object.keys(n)[0]),d=n[l],p=(M,w)=>{r({...i,[M]:w})},m=()=>{e<d.length-1?t(e+1):v()},v=()=>{console.log("User responses:",i),o(!0)},y=M=>{c(M),t(0),r({}),o(!1)};if(s)return q.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[q.jsx("h2",{className:"text-2xl font-bold",children:"Thank You!"}),q.jsx("p",{children:"Your responses have been submitted successfully."})]});const S=d[e];return q.jsxs("div",{className:"max-w-xl mx-auto bg-white shadow-lg p-6 rounded-lg",children:[q.jsxs("div",{className:"mb-4",children:[q.jsx("label",{htmlFor:"category",className:"block text-gray-700 font-bold mb-2",children:"Select Category:"}),q.jsx("select",{id:"category",value:l,onChange:M=>y(M.target.value),className:"w-full p-2 border rounded",children:Object.keys(n).map(M=>q.jsx("option",{value:M,children:M},M))})]}),q.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["Question ",e+1," of ",d.length]}),q.jsx("p",{className:"text-gray-600 mb-4",children:S.question}),q.jsx("div",{className:"flex flex-col space-y-3",children:S.options.map((M,w)=>q.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[q.jsx("input",{type:"radio",name:`question-${S.id}`,value:M,checked:i[S.id]===M,onChange:()=>p(S.id,M),className:"w-4 h-4"}),q.jsx("span",{className:"text-gray-700",children:M})]},w))}),q.jsx("button",{onClick:m,disabled:!i[S.id],className:`mt-6 py-2 px-4 rounded ${i[S.id]?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:e<d.length-1?"Next":"Submit"})]})},Aq=()=>{const[n,e]=j.useState(!0),[t,i]=j.useState({}),r=s=>{i(s),e(!1),console.log("User data submitted:",s)};return q.jsxs("div",{className:"flex min-h-screen",children:[q.jsxs("div",{className:"w-64 bg-[#034752] text-white p-5",children:[q.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"}),q.jsxs("ul",{className:"mt-6",children:[q.jsx("li",{className:"py-2 hover:bg-[#0E8C6C] rounded-md",children:q.jsx("a",{href:"#overview",className:"text-lg",children:"Overview"})}),q.jsx("li",{className:"py-2 hover:bg-[#0E8C6C] rounded-md",children:q.jsx("a",{href:"#analytics",className:"text-lg",children:"Analytics"})}),q.jsx("li",{className:"py-2 hover:bg-[#0E8C6C] rounded-md",children:q.jsx("a",{href:"#settings",className:"text-lg",children:"Settings"})})]})]}),q.jsx("div",{className:"flex-1 p-6",children:n?q.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-[#D9F0FF] to-[#A8D8EA]",children:q.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-xl animate-fade-in",children:[q.jsx("h2",{className:"text-2xl font-bold text-[#034752] mb-6 text-center animate-slide-down",children:"Welcome! Tell Us About Yourself"}),q.jsxs("form",{onSubmit:s=>{s.preventDefault(),r({name:s.target.name.value,age:s.target.age.value,gender:s.target.gender.value})},className:"space-y-6",children:[q.jsxs("div",{className:"animate-slide-left",children:[q.jsx("label",{className:"block text-[#034752] font-medium",children:"Name"}),q.jsx("input",{type:"text",name:"name",required:!0,placeholder:"Enter your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#10B981] focus:border-[#10B981]"})]}),q.jsxs("div",{className:"animate-slide-right",children:[q.jsx("label",{className:"block text-[#034752] font-medium",children:"Age"}),q.jsx("input",{type:"number",name:"age",required:!0,placeholder:"Enter your age",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#10B981] focus:border-[#10B981]"})]}),q.jsxs("div",{className:"animate-fade-in",children:[q.jsx("label",{className:"block text-[#034752] font-medium",children:"Gender"}),q.jsxs("select",{name:"gender",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#10B981] focus:border-[#10B981]",children:[q.jsx("option",{value:"",disabled:!0,children:"Select Gender"}),q.jsx("option",{value:"Male",children:"Male"}),q.jsx("option",{value:"Female",children:"Female"}),q.jsx("option",{value:"Other",children:"Other"})]})]}),q.jsx("button",{type:"submit",className:"w-full bg-[#10B981] text-white px-4 py-2 rounded-lg shadow-md hover:bg-[#0E8C6C] animate-pulse-once",children:"Submit"})]})]})}):q.jsxs("div",{children:[q.jsxs("header",{className:"flex justify-between items-center mb-6",children:[q.jsxs("h1",{className:"text-3xl text-[#034752] font-bold",children:["Welcome, ",t.name,"!"]}),q.jsx("button",{className:"px-4 py-2 bg-[#10B981] text-white rounded-md hover:bg-[#0E8C6C]",onClick:()=>{e(!0),i({})},children:"Edit Info"})]}),q.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:q.jsx(xq,{questions:pj})}),q.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[q.jsxs("div",{className:"bg-white shadow-lg rounded-md p-5",children:[q.jsx("h3",{className:"text-lg text-[#034752] font-semibold",children:"Overview"}),q.jsx("p",{className:"text-[#10B981] mt-2",children:"Quick summary of your progress and activity."})]}),q.jsxs("div",{className:"bg-white shadow-lg rounded-md p-5",children:[q.jsx("h3",{className:"text-lg text-[#034752] font-semibold",children:"Analytics"}),q.jsx("p",{className:"text-[#10B981] mt-2",children:"Detailed insights and statistics about your usage."})]}),q.jsxs("div",{className:"bg-white shadow-lg rounded-md p-5",children:[q.jsx("h3",{className:"text-lg text-[#034752] font-semibold",children:"Settings"}),q.jsx("p",{className:"text-[#10B981] mt-2",children:"Update your profile and preferences here."})]})]}),q.jsx("footer",{className:"mt-10 text-center text-[#034752]",children:q.jsx("p",{children:" 2025 Your Company Name"})})]})})]})},Sq=()=>{const[n,e]=j.useState(null);return j.useEffect(()=>mB(Af,i=>{e(i)}),[]),q.jsx($N,{children:q.jsx("div",{className:"relative z-0 bg-gradient-to-b from-[#D9F0FF] to-[#A8D8EA]",children:q.jsxs(bN,{children:[q.jsx(zh,{path:"/",element:q.jsx(_q,{})}),n?q.jsx(zh,{path:"/",element:q.jsx(RR,{to:"/dashboard"})}):q.jsxs(q.Fragment,{children:[q.jsx(zh,{path:"/login",element:q.jsx(vq,{})}),q.jsx(zh,{path:"/signup",element:q.jsx(yq,{})})]}),q.jsx(zh,{path:"/questions",element:q.jsx(Aq,{})})]})})})};_R.createRoot(document.getElementById("root")).render(q.jsx(j.StrictMode,{children:q.jsx(Sq,{})}));
